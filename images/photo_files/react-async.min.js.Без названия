(function(a,b){typeof exports==="object"&&typeof module!=="undefined"?b(exports,require("react"),require("mobx"),require("react-dom")):typeof define==="function"&&define.amd?define("mobx-react",["exports","react","mobx","react-dom"],b):b(a.mobxReact={},a.React,a.mobx,a.ReactDOM)})(this,function(exports,a,b,c){"use strict";var d="default"in a?a["default"]:a;function e(a){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e=function(a){return typeof a}}else{e=function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return e(a)}function f(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function g(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||false;d.configurable=true;if("value"in d)d.writable=true;Object.defineProperty(a,d.key,d)}}function h(a,b,c){if(b)g(a.prototype,b);if(c)g(a,c);return a}function i(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}function j(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:true,configurable:true}});if(b)l(a,b)}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf:function a(b){return b.__proto__||Object.getPrototypeOf(b)};return k(a)}function l(a,b){l=Object.setPrototypeOf||function a(b,c){b.__proto__=c;return b};return l(a,b)}function m(a){if(a===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function n(a,b){if(b&&(typeof b==="object"||typeof b==="function")){return b}return m(a)}function o(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function p(a,b){return b={exports:{}},a(b,b.exports),b.exports}var q=p(function(a,exports){Object.defineProperty(exports,"__esModule",{value:!0});var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,i=b?Symbol.for("react.context"):60110,j=b?Symbol.for("react.async_mode"):60111,k=b?Symbol.for("react.forward_ref"):60112,l=b?Symbol.for("react.placeholder"):60113;function m(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case c:switch(a=a.type,a){case j:case e:case g:case f:return a;default:switch(a=a&&a.$$typeof,a){case i:case k:case h:return a;default:return b}}case d:return b}}}exports.typeOf=m;exports.AsyncMode=j;exports.ContextConsumer=i;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=k;exports.Fragment=e;exports.Profiler=g;exports.Portal=d;exports.StrictMode=f;exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===j||a===g||a===f||a===l||"object"===typeof a&&null!==a&&("function"===typeof a.then||a.$$typeof===h||a.$$typeof===i||a.$$typeof===k)};exports.isAsyncMode=function(a){return m(a)===j};exports.isContextConsumer=function(a){return m(a)===i};exports.isContextProvider=function(a){return m(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return m(a)===k};exports.isFragment=function(a){return m(a)===e};exports.isProfiler=function(a){return m(a)===g};exports.isPortal=function(a){return m(a)===d};exports.isStrictMode=function(a){return m(a)===f}});o(q);var r=q.typeOf;var s=q.AsyncMode;var t=q.ContextConsumer;var u=q.ContextProvider;var v=q.Element;var w=q.ForwardRef;var x=q.Fragment;var y=q.Profiler;var z=q.Portal;var A=q.StrictMode;var B=q.isValidElementType;var C=q.isAsyncMode;var D=q.isContextConsumer;var E=q.isContextProvider;var F=q.isElement;var G=q.isForwardRef;var H=q.isFragment;var I=q.isProfiler;var J=q.isPortal;var K=q.isStrictMode;var L=p(function(a){{a.exports=q}});var M;function N(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}var O={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var P={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var Q=N({},L.ForwardRef,(M={},N(M,"$$typeof",true),N(M,"render",true),M));var R=Object.defineProperty;var S=Object.getOwnPropertyNames;var T=Object.getOwnPropertySymbols;var U=Object.getOwnPropertyDescriptor;var V=Object.getPrototypeOf;var W=Object.prototype;function X(a,b,c){if(typeof b!=="string"){if(W){var d=V(b);if(d&&d!==W){X(a,d,c)}}var e=S(b);if(T){e=e.concat(T(b))}var f=Q[a["$$typeof"]]||O;var g=Q[b["$$typeof"]]||O;for(var h=0;h<e.length;++h){var i=e[h];if(!P[i]&&!(c&&c[i])&&!(g&&g[i])&&!(f&&f[i])){var j=U(b,i);try{R(a,i,j)}catch(a){}}}return a}return a}var Y=X;var Z=function(){function a(){f(this,a);this.listeners=[]}h(a,[{key:"on",value:function a(b){var c=this;this.listeners.push(b);return function(){var a=c.listeners.indexOf(b);if(a!==-1)c.listeners.splice(a,1)}}},{key:"emit",value:function a(b){this.listeners.forEach(function(a){return a(b)})}}]);return a}();function _(a){function c(c,d,e,f,g,h){for(var i=arguments.length,j=new Array(i>6?i-6:0),k=6;k<i;k++){j[k-6]=arguments[k]}return b.untracked(function(){f=f||"<<anonymous>>";h=h||e;if(d[e]==null){if(c){var b=d[e]===null?"null":"undefined";return new Error("The "+g+" `"+h+"` is marked as required "+"in `"+f+"`, but its value is `"+b+"`.")}return null}else{return a.apply(void 0,[d,e,f,g,h].concat(j))}})}var d=c.bind(null,false);d.isRequired=c.bind(null,true);return d}function aa(a,b){if(a==="symbol"){return true}if(b["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&b instanceof Symbol){return true}return false}function ba(a){var b=e(a);if(Array.isArray(a)){return"array"}if(a instanceof RegExp){return"object"}if(aa(b,a)){return"symbol"}return b}function ca(a){var b=ba(a);if(b==="object"){if(a instanceof Date){return"date"}else if(a instanceof RegExp){return"regexp"}}return b}function da(a,c){return _(function(d,e,f,g,h){return b.untracked(function(){if(a){if(ba(d[e])===c.toLowerCase())return null}var g;switch(c){case"Array":g=b.isObservableArray;break;case"Object":g=b.isObservableObject;break;case"Map":g=b.isObservableMap;break;default:throw new Error("Unexpected mobxType: ".concat(c))}var i=d[e];if(!g(i)){var j=ca(i);var k=a?" or javascript `"+c.toLowerCase()+"`":"";return new Error("Invalid prop `"+h+"` of type `"+j+"` supplied to"+" `"+f+"`, expected `mobx.Observable"+c+"`"+k+".")}return null})})}function ea(a,c){return _(function(d,e,f,g,h){for(var i=arguments.length,j=new Array(i>5?i-5:0),k=5;k<i;k++){j[k-5]=arguments[k]}return b.untracked(function(){if(typeof c!=="function"){return new Error("Property `"+h+"` of component `"+f+"` has "+"invalid PropType notation.")}var b=da(a,"Array")(d,e,f);if(b instanceof Error)return b;var i=d[e];for(var k=0;k<i.length;k++){b=c.apply(void 0,[i,k,f,g,h+"["+k+"]"].concat(j));if(b instanceof Error)return b}return null})})}var fa=da(false,"Array");var ga=ea.bind(null,false);var ha=da(false,"Map");var ia=da(false,"Object");var ja=da(true,"Array");var ka=ea.bind(null,true);var la=da(true,"Object");var ma=Object.freeze({observableArray:fa,observableArrayOf:ga,observableMap:ha,observableObject:ia,arrayOrObservableArray:ja,arrayOrObservableArrayOf:ka,objectOrObservableObject:la});function na(a){return!(a.prototype&&a.prototype.render)}var oa=0;function pa(a){if(typeof Symbol==="function"){return Symbol(a)}var b="__$mobx-react ".concat(a," (").concat(oa,")");oa++;return b}var qa=pa("patchMixins");var ra=pa("patchedDefinition");function sa(a,b){var c=a[qa]=a[qa]||{};var d=c[b]=c[b]||{};d.locks=d.locks||0;d.methods=d.methods||[];return d}function ta(a,b){var c=this;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}b.locks++;try{var g;if(a!==undefined&&a!==null){g=a.apply(this,e)}return g}finally{b.locks--;if(b.locks===0){b.methods.forEach(function(a){a.apply(c,e)})}}}function ua(a,b){var c=function c(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++){e[f]=arguments[f]}ta.call.apply(ta,[this,a,b].concat(e))};return c}function va(a,b){var c=sa(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}for(var g=0;g<e.length;g++){var h=e[g];if(c.methods.indexOf(h)<0){c.methods.push(h)}}var i=Object.getOwnPropertyDescriptor(a,b);if(i&&i[ra]){return}var j=a[b];var k=wa(a,b,i?i.enumerable:undefined,c,j);Object.defineProperty(a,b,k)}function wa(a,b,c,d,e){var f;var g=ua(e,d);return f={},i(f,ra,true),i(f,"get",function a(){return g}),i(f,"set",function e(f){if(this===a){g=ua(f,d)}else{var h=wa(this,b,c,d,f);Object.defineProperty(this,b,h)}}),i(f,"configurable",true),i(f,"enumerable",c),f}var xa={mobxStores:la};Object.seal(xa);var ya={contextTypes:{get:function a(){return xa},set:function a(b){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:true,enumerable:false},isMobxInjector:{value:true,writable:true,configurable:true,enumerable:true}};function za(b,c,d){var e="inject-"+(c.displayName||c.name||c.constructor&&c.constructor.name||"Unknown");if(d)e+="-with-"+d;var g=function(d){j(e,d);function e(){var a;var b;f(this,e);for(var c=arguments.length,d=new Array(c),g=0;g<c;g++){d[g]=arguments[g]}b=n(this,(a=k(e)).call.apply(a,[this].concat(d)));b.storeRef=function(a){b.wrappedInstance=a};return b}h(e,[{key:"render",value:function d(){var e={};for(var f in this.props){if(this.props.hasOwnProperty(f)){e[f]=this.props[f]}}var g=b(this.context.mobxStores||{},e,this.context)||{};for(var h in g){e[h]=g[h]}if(!na(c)){e.ref=this.storeRef}return a.createElement(c,e)}}]);return e}(a.Component);g.displayName=e;Y(g,c);g.wrappedComponent=c;Object.defineProperties(g,ya);return g}function Aa(a){return function(b,c){a.forEach(function(a){if(a in c)return;if(!(a in b))throw new Error("MobX injector: Store '"+a+"' is not available! Make sure it is provided by some Provider");c[a]=b[a]});return c}}function Ba(){var a;if(typeof arguments[0]==="function"){a=arguments[0];return function(b){var c=za(a,b);c.isMobxInjector=false;c=Xa(c);c.isMobxInjector=true;return c}}else{var b=[];for(var c=0;c<arguments.length;c++){b[c]=arguments[c]}a=Aa(b);return function(c){return za(a,c,b.join("-"))}}}var Ca=b.$mobx||"$mobx";var Da=pa("isUnmounted");var Ea=false;var Fa=false;var Ga=false;var Ha=typeof WeakMap!=="undefined"?new WeakMap:undefined;var Ia=new Z;var Ja=pa("skipRender");var Ka=pa("isForcingUpdate");function La(a,b,c){if(!Object.hasOwnProperty.call(a,b)){Object.defineProperty(a,b,{enumerable:false,configurable:true,writable:true,value:c})}else{a[b]=c}}function Ma(a){if(c.findDOMNode){try{return c.findDOMNode(a)}catch(a){return null}}return null}function Na(a){var b=Ma(a);if(b&&Ha)Ha.set(b,a);Ia.emit({event:"render",renderTime:a.__$mobRenderEnd-a.__$mobRenderStart,totalTime:Date.now()-a.__$mobRenderStart,component:a,node:b})}function Oa(){if(typeof WeakMap==="undefined")throw new Error("[mobx-react] tracking components is not supported in this browser.");if(!Ea)Ea=true}function Pa(a){Fa=a}var Qa=new Z;function Ra(a,b){va(a,b,Va[b])}function Sa(a,b){if(Ta(a,b))return true;if(e(a)!=="object"||a===null||e(b)!=="object"||b===null){return false}var c=Object.keys(a);var d=Object.keys(b);if(c.length!==d.length)return false;for(var f=0;f<c.length;f++){if(!hasOwnProperty.call(b,c[f])||!Ta(a[c[f]],b[c[f]])){return false}}return true}function Ta(a,b){if(a===b){return a!==0||1/a===1/b}else{return a!==a&&b!==b}}function Ua(c){var d=this;if(Fa===true)return c.call(this);function e(){var a=this;i=false;var c=undefined;var d=undefined;j.track(function(){if(Ea){a.__$mobRenderStart=Date.now()}try{d=b._allowStateChanges(false,h)}catch(a){c=a}if(Ea){a.__$mobRenderEnd=Date.now()}});if(c){Qa.emit(c);throw c}return d}var f=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>";var g=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;La(this,Ja,false);La(this,Ka,false);var h=c.bind(this);var i=false;var j=new b.Reaction("".concat(f,"#").concat(g,".render()"),function(){if(!i){i=true;if(typeof d.componentWillReact==="function")d.componentWillReact();if(d[Da]!==true){var b=true;try{La(d,Ka,true);if(!d[Ja])a.Component.prototype.forceUpdate.call(d);b=false}finally{La(d,Ka,false);if(b)j.dispose()}}}});j.reactComponent=this;e[Ca]=j;this.render=e;return e.call(this)}var Va={componentWillUnmount:function a(){if(Fa===true)return;this.render[Ca]&&this.render[Ca].dispose();this[Da]=true;if(Ea){var b=Ma(this);if(b&&Ha){Ha.delete(b)}Ia.emit({event:"destroy",component:this,node:b})}},componentDidMount:function a(){if(Ea){Na(this)}},componentDidUpdate:function a(){if(Ea){Na(this)}},shouldComponentUpdate:function a(b,c){if(Fa){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==c){return true}return!Sa(this.props,b)}};function Wa(a,c){var d=pa("reactProp_".concat(c,"_valueHolder"));var e=pa("reactProp_".concat(c,"_atomHolder"));function f(){if(!this[e]){La(this,e,b.createAtom("reactive "+c))}return this[e]}Object.defineProperty(a,c,{configurable:true,enumerable:true,get:function a(){f.call(this).reportObserved();return this[d]},set:function a(b){if(!this[Ka]&&!Sa(this[d],b)){La(this,d,b);La(this,Ja,true);f.call(this).reportChanged();La(this,Ja,false)}else{La(this,d,b)}}})}function Xa(b,c){if(typeof b==="string"){throw new Error("Store names should be provided as array")}if(Array.isArray(b)){if(!Ga){Ga=true;console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')}if(!c){return function(a){return Xa(b,a)}}else{return Ba.apply(null,b)(Xa(c))}}var d=b;if(d.isMobxInjector===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(d.__proto__===a.PureComponent){console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together")}if(typeof d==="function"&&(!d.prototype||!d.prototype.render)&&!d.isReactClass&&!a.Component.isPrototypeOf(d)){var e,g;var i=Xa((g=e=function(a){j(b,a);function b(){f(this,b);return n(this,k(b).apply(this,arguments))}h(b,[{key:"render",value:function a(){return d.call(this,this.props,this.context)}}]);return b}(a.Component),e.displayName=d.displayName||d.name,e.contextTypes=d.contextTypes,e.propTypes=d.propTypes,e.defaultProps=d.defaultProps,g));Y(i,d);return i}if(!d){throw new Error("Please pass a valid component to 'observer'")}var l=d.prototype||d;Ya(l);d.isMobXReactObserver=true;Wa(l,"props");Wa(l,"state");var m=l.render;l.render=function(){return Ua.call(this,m)};return d}function Ya(a){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(b){Ra(a,b)});if(!a.shouldComponentUpdate){a.shouldComponentUpdate=Va.shouldComponentUpdate}else{if(a.shouldComponentUpdate!==Va.shouldComponentUpdate){console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react.")}}}var Za=Xa(function(a){var b=a.children,c=a.inject,e=a.render;var f=b||e;if(typeof f==="undefined"){return null}if(!c){return f()}console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var g=Ba(c)(f);return d.createElement(g,null)});Za.displayName="Observer";var $a=function a(b,c,d,f,g){var h=c==="children"?"render":"children";if(typeof b[c]==="function"&&typeof b[h]==="function"){return new Error("Invalid prop,do not use children and render in the same time in`"+d)}if(typeof b[c]==="function"||typeof b[h]==="function"){return}return new Error("Invalid prop `"+g+"` of type `"+e(b[c])+"` supplied to"+" `"+d+"`, expected `function`.")};Za.propTypes={render:$a,children:$a};function _a(){var a=this.constructor.getDerivedStateFromProps(this.props,this.state);if(a!==null&&a!==undefined){this.setState(a)}}function ab(a){function b(b){var c=this.constructor.getDerivedStateFromProps(a,b);return c!==null&&c!==undefined?c:null}this.setState(b.bind(this))}function bb(a,b){try{var c=this.props;var d=this.state;this.props=a;this.state=b;this.__reactInternalSnapshotFlag=true;this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(c,d)}finally{this.props=c;this.state=d}}_a.__suppressDeprecationWarning=true;ab.__suppressDeprecationWarning=true;bb.__suppressDeprecationWarning=true;function cb(a){var b=a.prototype;if(!b||!b.isReactComponent){throw new Error("Can only polyfill class components")}if(typeof a.getDerivedStateFromProps!=="function"&&typeof b.getSnapshotBeforeUpdate!=="function"){return a}var c=null;var d=null;var e=null;if(typeof b.componentWillMount==="function"){c="componentWillMount"}else if(typeof b.UNSAFE_componentWillMount==="function"){c="UNSAFE_componentWillMount"}if(typeof b.componentWillReceiveProps==="function"){d="componentWillReceiveProps"}else if(typeof b.UNSAFE_componentWillReceiveProps==="function"){d="UNSAFE_componentWillReceiveProps"}if(typeof b.componentWillUpdate==="function"){e="componentWillUpdate"}else if(typeof b.UNSAFE_componentWillUpdate==="function"){e="UNSAFE_componentWillUpdate"}if(c!==null||d!==null||e!==null){var f=a.displayName||a.name;var g=typeof a.getDerivedStateFromProps==="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+g+" but also contains the following legacy lifecycles:"+(c!==null?"\n  "+c:"")+(d!==null?"\n  "+d:"")+(e!==null?"\n  "+e:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\n"+"https://fb.me/react-async-component-lifecycle-hooks")}if(typeof a.getDerivedStateFromProps==="function"){b.componentWillMount=_a;b.componentWillReceiveProps=ab}if(typeof b.getSnapshotBeforeUpdate==="function"){if(typeof b.componentDidUpdate!=="function"){throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype")}b.componentWillUpdate=bb;var h=b.componentDidUpdate;b.componentDidUpdate=function a(b,c,d){var e=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;h.call(this,b,c,e)}}return a}var db={children:true,key:true,ref:true};var eb=function(b){j(c,b);function c(a,b){var d;f(this,c);d=n(this,k(c).call(this,a,b));d.state={};fb(a,d.state);return d}h(c,[{key:"render",value:function b(){return a.Children.only(this.props.children)}},{key:"getChildContext",value:function a(){var b={};fb(this.context.mobxStores,b);fb(this.props,b);return{mobxStores:b}}}],[{key:"getDerivedStateFromProps",value:function a(b,c){if(!b)return null;if(!c)return b;if(Object.keys(b).filter(gb).length!==Object.keys(c).filter(gb).length)console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");if(!b.suppressChangedStoreWarning)for(var d in b){if(gb(d)&&c[d]!==b[d])console.warn("MobX Provider: Provided store '"+d+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}return b}}]);return c}(a.Component);eb.contextTypes={mobxStores:la};eb.childContextTypes={mobxStores:la.isRequired};function fb(a,b){if(!a)return;for(var c in a){if(gb(c))b[c]=a[c]}}function gb(a){return!db[a]&&a!=="suppressChangedStoreWarning"}cb(eb);var hb=pa("disposeOnUnmount");function ib(){var a=this;if(!this[hb]){return}this[hb].forEach(function(b){var c=typeof b==="string"?a[b]:b;if(c!==undefined&&c!==null){if(typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.")}c()}});this[hb]=[]}function jb(b,c){if(Array.isArray(c)){return c.map(function(a){return jb(b,a)})}if(!b instanceof a.Component){throw new Error("[mobx-react] disposeOnUnmount only works on class based React components.")}if(typeof c!=="string"&&typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.")}var d=!!b[hb];var e=b[hb]||(b[hb]=[]);e.push(c);if(!d){va(b,"componentWillUnmount",ib)}if(typeof c!=="string"){return c}}if(!a.Component)throw new Error("mobx-react requires React to be available");if(!b.spy)throw new Error("mobx-react requires mobx to be available");if(typeof c.unstable_batchedUpdates==="function")b.configure({reactionScheduler:c.unstable_batchedUpdates});var kb=function a(b){return Qa.on(b)};if((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="undefined"?"undefined":e(__MOBX_DEVTOOLS_GLOBAL_HOOK__))==="object"){var lb={spy:b.spy,extras:{getDebugName:b.getDebugName}};var mb={renderReporter:Ia,componentByNodeRegistry:Ha,componentByNodeRegistery:Ha,trackComponents:Oa};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(mb,lb)}exports.propTypes=ma;exports.PropTypes=ma;exports.onError=kb;exports.observer=Xa;exports.Observer=Za;exports.renderReporter=Ia;exports.componentByNodeRegistery=Ha;exports.componentByNodeRegistry=Ha;exports.trackComponents=Oa;exports.useStaticRendering=Pa;exports.Provider=eb;exports.inject=Ba;exports.disposeOnUnmount=jb;Object.defineProperty(exports,"__esModule",{value:true})});define("@mail/jssdk/next/util/define",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getLazyPropertyDescriptor=exports.getHiddenPropertyDescriptor=exports.defineProperties=exports.defineProperty=void 0;function a(a,b,c){return Object.defineProperty(a,b,c)}exports.defineProperty=a;function b(a,b){return Object.defineProperties(a,b)}exports.defineProperties=b;function c(a,b){return{configurable:false,writable:b==null||b,enumerable:false,value:a}}exports.getHiddenPropertyDescriptor=c;function d(a){var b=typeof a==="function"?{get:a}:a,c=b.get,d=b.set,e=b.configurable,f=b.enumerable;var g=false;var h;var i={configurable:e!==null&&e!==void 0?e:false,enumerable:f!==null&&f!==void 0?f:false,get:function(){if(!g){g=true;h=c()}return h}};if(d){i.set=function(a){g=true;h=d(a)}}return i}exports.getLazyPropertyDescriptor=d});define("@mail/jssdk/next/state/selector",["require","exports","@mail/jssdk/next/util/define"],function(require,exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createGlobalStateSelector=exports.createGlobalStateSelectorForState=void 0;function b(a,c){if(a===c){return true}if(c==null&&a!=null||c!=null&&a==null||typeof c!==typeof a||Array.isArray(c)||c instanceof Map||c instanceof Set){return false}if(c instanceof Object){for(var d in c){if(c.hasOwnProperty(d)){if(!b(a[d],c[d])){return false}}}return Object.keys(a).length===Object.keys(c).length}return false}function c(c,d){var e;var f=function(){var a=d(c.get());e=b(e,a)?e:a;return e};(0,a.defineProperty)(f,"state",{enumerable:false,value:c});return f}exports.createGlobalStateSelectorForState=c;function d(c,d){var e=c.length;var f=Array(e);var g;var h=function(){for(var a=0;a<e;a++){f[a]=c[a]()}var h=d.apply(null,f);g=b(g,h)?g:h;return g};(0,a.defineProperty)(h,"deps",{enumerable:false,value:c});return h}function e(a,b){return Array.isArray(a)?d(a,b):c(a,b)}exports.createGlobalStateSelector=e});define("data-source/store/letter-action/state",["require","exports","@mail/jssdk/next/state/global"],function(require,exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.letterFastActionState=void 0;exports.letterFastActionState=(0,a.createGlobalState)("letter-fast-action",{})});define("data-source/store/letter-action/types",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LetterFastActionKey=exports.LetterFastActionType=void 0;var a;(function(a){a["unread"]="togglestatus:unread";a["archive"]="archive";a["remove"]="remove";a["settings"]="settings"})(a=exports.LetterFastActionType||(exports.LetterFastActionType={}));exports.LetterFastActionKey="LetterFastActionKey"});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("data-source/store/letter-action/getters",["require","exports","@mail/jssdk/next/state/selector","router","service/storage","./state","./types"],function(require,exports,a,b,c,d,e){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFastAction=exports.getFastActionCurrent=exports.getFastActionReal=void 0;c=__importDefault(c);var f=function(){return c.default.get(e.LetterFastActionKey,{email:false})||e.LetterFastActionType.settings};exports.getFastActionReal=f;var g=function(){var a=(0,exports.getFastActionReal)();var c=(0,b.getAppRouter)().model.folder;if(a===e.LetterFastActionType.archive&&(c.isTrash()||c.isSpam()||c.isArchive())){return e.LetterFastActionType.remove}return a};exports.getFastActionCurrent=g;exports.getFastAction=(0,a.createGlobalStateSelector)(d.letterFastActionState,exports.getFastActionCurrent)});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("data-source/store/letter-action/actions",["require","exports","@mail/jssdk/next/action/global","data-source/store/letter-action/getters","data-source/store/letter-action/types","data-source/store/vk-overlay/actions","data-source/store/vk-overlay/types","mediator/letters-actions","service/storage"],function(require,exports,a,b,c,d,e,f,g){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.callFastAction=exports.setFastAction=void 0;f=__importDefault(f);g=__importDefault(g);exports.setFastAction=(0,a.createGlobalAction)("letter-fast-action/setFastAction",function(a){g.default.set(c.LetterFastActionKey,a,{email:false});return{}});exports.callFastAction=(0,a.createGlobalAction)("letter-fast-action/callFastAction",function(a){var g=(0,b.getFastActionCurrent)();if(g!==c.LetterFastActionType.settings){f.default.handleEvent({type:g,details:{model:a}})}else{(0,d.pushModal)(e.ModalPages.letterFastActionSettings)}return{}})});define("data-source/store/user/account/getters",["require","exports","@mail/jssdk/next/state/selector","./state"],function(require,exports,a,b){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCurrentAccount=exports.getOtherAccounts=void 0;exports.getOtherAccounts=(0,a.createGlobalStateSelector)(b.accountUserState,function(a){var b=a.accounts,c=a.email;return c?b.filter(function(a){return a.email!==c}):b});exports.getCurrentAccount=(0,a.createGlobalStateSelector)(b.accountUserState,function(a){var b=a.accounts,c=a.email;return c&&b.find(function(a){return a.email===c})})});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("data-source/store/user/fakedoor/state",["require","exports","@mail/jssdk/next/state/global","service/storage"],function(require,exports,a,b){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fakeDoorUserState=exports.FD_LETTER_LIST_CLND_INTEGRATION_LS=void 0;b=__importDefault(b);exports.FD_LETTER_LIST_CLND_INTEGRATION_LS="fd-ll-integrations";var c=function(){var a=b.default.get(exports.FD_LETTER_LIST_CLND_INTEGRATION_LS);return!!a};exports.fakeDoorUserState=(0,a.createGlobalState)("user/fakedoor",{isShown:c()})});var __awaiter=this&&this.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})};var __generator=this&&this.__generator||function(a,b){var c={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,e,f,g;return g={next:h(0),throw:h(1),return:h(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function h(a){return function(b){return i([a,b])}}function i(g){if(d)throw new TypeError("Generator is already executing.");while(c)try{if(d=1,e&&(f=g[0]&2?e["return"]:g[0]?e["throw"]||((f=e["return"])&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;if(e=0,f)g=[g[0]&2,f.value];switch(g[0]){case 0:case 1:f=g;break;case 4:c.label++;return{value:g[1],done:false};case 5:c.label++;e=g[1];g=[0];continue;case 7:g=c.ops.pop();c.trys.pop();continue;default:if(!(f=c.trys,f=f.length>0&&f[f.length-1])&&(g[0]===6||g[0]===2)){c=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){c.label=g[1];break}if(g[0]===6&&c.label<f[1]){c.label=f[1];f=g;break}if(f&&c.label<f[2]){c.label=f[2];c.ops.push(g);break}if(f[2])c.ops.pop();c.trys.pop();continue}g=b.call(a,c)}catch(a){g=[6,a];e=0}finally{d=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:true}}};var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("data-source/store/user/fakedoor/actions",["require","exports","@mail/jssdk/next/action/global","data-source/store/user/fakedoor/state","service/storage"],function(require,exports,a,b,c){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setIsShownFakeDoor=void 0;c=__importDefault(c);var d=function(a){c.default.set(b.FD_LETTER_LIST_CLND_INTEGRATION_LS,a)};exports.setIsShownFakeDoor=(0,a.createGlobalAction)("user/setIsShownFakeDoor",function(a){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(b){d(a);return[2,{isShown:a}]})})});b.fakeDoorUserState.on(exports.setIsShownFakeDoor.fulfilled,function(a){var c=a.payload;b.fakeDoorUserState.set(function(){return c})})});define("data-source/store/vk-overlay/getters",["require","exports","@mail/jssdk/next/state/selector","./state"],function(require,exports,a,b){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getModalDataActual=exports.getModalActual=void 0;exports.getModalActual=(0,a.createGlobalStateSelector)(b.VKOverlayState,function(a){var b=a.modalHistory;return b[b.length-1]||null});exports.getModalDataActual=(0,a.createGlobalStateSelector)(b.VKOverlayState,function(a){var b=a.modalData,c=a.modalHistory;return b[c[c.length-1]]})});define("helpers/languages",["exports","default-values"],function(exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LANG_MAP=exports.LANG_ARRAY=undefined;var b=[{key:"ru_RU",label:"Русский",src:a.PACKAGES_URL+"/static.promo/octavius/languages/ru.png"},{key:"uk_UA",label:"Українська",src:a.PACKAGES_URL+"/static.promo/octavius/languages/ua.png"},{key:"be_BY",label:"Беларуская",src:a.PACKAGES_URL+"/static.promo/octavius/languages/bel.png"},{key:"hy_AM",label:"Հայերեն",src:a.PACKAGES_URL+"/static.promo/octavius/languages/arm.png"},{key:"kk_KZ",label:"Казақша",src:a.PACKAGES_URL+"/static.promo/octavius/languages/kaz.png"},{key:"uz_UZ",label:"O‘zbek",src:a.PACKAGES_URL+"/static.promo/octavius/languages/uz.png"},{key:"mo_MD",label:"Moldovenească",src:a.PACKAGES_URL+"/static.promo/octavius/languages/mold.png"},{key:"ro_RO",label:"Română",src:a.PACKAGES_URL+"/static.promo/octavius/languages/rom.png"},{key:"en_US",label:"English",src:a.PACKAGES_URL+"/static.promo/octavius/languages/eng.png"},{key:"es_ES",label:"Español",src:a.PACKAGES_URL+"/static.promo/octavius/languages/esp.png"}];var c={};b.forEach(function(a,b){a.index=b;c[a.key]=a});exports.LANG_ARRAY=b;exports.LANG_MAP=c});define("helpers/once",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.once=void 0;var a=function(a){var b=false;return function(){var c=[];for(var d=0;d<arguments.length;d++){c[d]=arguments[d]}if(b){return}b=true;return a.apply(void 0,c)}};exports.once=a});define("helpers/plural",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function a(a,b){var c=b.one,d=b.many;return a===1?c:d}exports.default=a});define("helpers/setImmortalTimeout",["require","exports","./once"],function(require,exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setImmortalTimeout=void 0;var b=function(b,c,d){var e=Date.now();var f=(0,a.once)(function(a){if(a===void 0){a=false}document.removeEventListener("visibilitychange",h);window.clearTimeout(g);if(!a){b()}});var g=window.setTimeout(f,c);var h=function(){if(document.visibilityState==="hidden"){if((d===null||d===void 0?void 0:d.callOnlyInVisible)!==false){window.clearTimeout(g)}return}window.clearTimeout(g);var a=Date.now();if(c>a-e){c-=a-e;e=a;g=window.setTimeout(f,c)}else{f()}};document.addEventListener("visibilitychange",h);return function(){return f(true)}};exports.setImmortalTimeout=b});define("helpers/setImmortalInterval",["require","exports","./setImmortalTimeout"],function(require,exports,a){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setImmortalInterval=void 0;var b=function(){return null};var c=function(c,d){var e=b;var f=function(b){e=(0,a.setImmortalTimeout)(f,d());if(!b){return c()}};f(true);return function(){return e()}};exports.setImmortalInterval=c});(function(a,b){typeof exports==="object"&&typeof module!=="undefined"?b(exports,require("react"),require("mobx"),require("react-dom")):typeof define==="function"&&define.amd?define("mobx-react",["exports","react","mobx","react-dom"],b):b(a.mobxReact={},a.React,a.mobx,a.ReactDOM)})(this,function(exports,a,b,c){"use strict";var d="default"in a?a["default"]:a;function e(a){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e=function(a){return typeof a}}else{e=function(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return e(a)}function f(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function g(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||false;d.configurable=true;if("value"in d)d.writable=true;Object.defineProperty(a,d.key,d)}}function h(a,b,c){if(b)g(a.prototype,b);if(c)g(a,c);return a}function i(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}function j(a,b){if(typeof b!=="function"&&b!==null){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:true,configurable:true}});if(b)l(a,b)}function k(a){k=Object.setPrototypeOf?Object.getPrototypeOf:function a(b){return b.__proto__||Object.getPrototypeOf(b)};return k(a)}function l(a,b){l=Object.setPrototypeOf||function a(b,c){b.__proto__=c;return b};return l(a,b)}function m(a){if(a===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function n(a,b){if(b&&(typeof b==="object"||typeof b==="function")){return b}return m(a)}function o(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function p(a,b){return b={exports:{}},a(b,b.exports),b.exports}var q=p(function(a,exports){Object.defineProperty(exports,"__esModule",{value:!0});var b="function"===typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,i=b?Symbol.for("react.context"):60110,j=b?Symbol.for("react.async_mode"):60111,k=b?Symbol.for("react.forward_ref"):60112,l=b?Symbol.for("react.placeholder"):60113;function m(a){if("object"===typeof a&&null!==a){var b=a.$$typeof;switch(b){case c:switch(a=a.type,a){case j:case e:case g:case f:return a;default:switch(a=a&&a.$$typeof,a){case i:case k:case h:return a;default:return b}}case d:return b}}}exports.typeOf=m;exports.AsyncMode=j;exports.ContextConsumer=i;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=k;exports.Fragment=e;exports.Profiler=g;exports.Portal=d;exports.StrictMode=f;exports.isValidElementType=function(a){return"string"===typeof a||"function"===typeof a||a===e||a===j||a===g||a===f||a===l||"object"===typeof a&&null!==a&&("function"===typeof a.then||a.$$typeof===h||a.$$typeof===i||a.$$typeof===k)};exports.isAsyncMode=function(a){return m(a)===j};exports.isContextConsumer=function(a){return m(a)===i};exports.isContextProvider=function(a){return m(a)===h};exports.isElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return m(a)===k};exports.isFragment=function(a){return m(a)===e};exports.isProfiler=function(a){return m(a)===g};exports.isPortal=function(a){return m(a)===d};exports.isStrictMode=function(a){return m(a)===f}});o(q);var r=q.typeOf;var s=q.AsyncMode;var t=q.ContextConsumer;var u=q.ContextProvider;var v=q.Element;var w=q.ForwardRef;var x=q.Fragment;var y=q.Profiler;var z=q.Portal;var A=q.StrictMode;var B=q.isValidElementType;var C=q.isAsyncMode;var D=q.isContextConsumer;var E=q.isContextProvider;var F=q.isElement;var G=q.isForwardRef;var H=q.isFragment;var I=q.isProfiler;var J=q.isPortal;var K=q.isStrictMode;var L=p(function(a){{a.exports=q}});var M;function N(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:true,configurable:true,writable:true})}else{a[b]=c}return a}var O={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var P={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var Q=N({},L.ForwardRef,(M={},N(M,"$$typeof",true),N(M,"render",true),M));var R=Object.defineProperty;var S=Object.getOwnPropertyNames;var T=Object.getOwnPropertySymbols;var U=Object.getOwnPropertyDescriptor;var V=Object.getPrototypeOf;var W=Object.prototype;function X(a,b,c){if(typeof b!=="string"){if(W){var d=V(b);if(d&&d!==W){X(a,d,c)}}var e=S(b);if(T){e=e.concat(T(b))}var f=Q[a["$$typeof"]]||O;var g=Q[b["$$typeof"]]||O;for(var h=0;h<e.length;++h){var i=e[h];if(!P[i]&&!(c&&c[i])&&!(g&&g[i])&&!(f&&f[i])){var j=U(b,i);try{R(a,i,j)}catch(a){}}}return a}return a}var Y=X;var Z=function(){function a(){f(this,a);this.listeners=[]}h(a,[{key:"on",value:function a(b){var c=this;this.listeners.push(b);return function(){var a=c.listeners.indexOf(b);if(a!==-1)c.listeners.splice(a,1)}}},{key:"emit",value:function a(b){this.listeners.forEach(function(a){return a(b)})}}]);return a}();function _(a){function c(c,d,e,f,g,h){for(var i=arguments.length,j=new Array(i>6?i-6:0),k=6;k<i;k++){j[k-6]=arguments[k]}return b.untracked(function(){f=f||"<<anonymous>>";h=h||e;if(d[e]==null){if(c){var b=d[e]===null?"null":"undefined";return new Error("The "+g+" `"+h+"` is marked as required "+"in `"+f+"`, but its value is `"+b+"`.")}return null}else{return a.apply(void 0,[d,e,f,g,h].concat(j))}})}var d=c.bind(null,false);d.isRequired=c.bind(null,true);return d}function aa(a,b){if(a==="symbol"){return true}if(b["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&b instanceof Symbol){return true}return false}function ba(a){var b=e(a);if(Array.isArray(a)){return"array"}if(a instanceof RegExp){return"object"}if(aa(b,a)){return"symbol"}return b}function ca(a){var b=ba(a);if(b==="object"){if(a instanceof Date){return"date"}else if(a instanceof RegExp){return"regexp"}}return b}function da(a,c){return _(function(d,e,f,g,h){return b.untracked(function(){if(a){if(ba(d[e])===c.toLowerCase())return null}var g;switch(c){case"Array":g=b.isObservableArray;break;case"Object":g=b.isObservableObject;break;case"Map":g=b.isObservableMap;break;default:throw new Error("Unexpected mobxType: ".concat(c))}var i=d[e];if(!g(i)){var j=ca(i);var k=a?" or javascript `"+c.toLowerCase()+"`":"";return new Error("Invalid prop `"+h+"` of type `"+j+"` supplied to"+" `"+f+"`, expected `mobx.Observable"+c+"`"+k+".")}return null})})}function ea(a,c){return _(function(d,e,f,g,h){for(var i=arguments.length,j=new Array(i>5?i-5:0),k=5;k<i;k++){j[k-5]=arguments[k]}return b.untracked(function(){if(typeof c!=="function"){return new Error("Property `"+h+"` of component `"+f+"` has "+"invalid PropType notation.")}var b=da(a,"Array")(d,e,f);if(b instanceof Error)return b;var i=d[e];for(var k=0;k<i.length;k++){b=c.apply(void 0,[i,k,f,g,h+"["+k+"]"].concat(j));if(b instanceof Error)return b}return null})})}var fa=da(false,"Array");var ga=ea.bind(null,false);var ha=da(false,"Map");var ia=da(false,"Object");var ja=da(true,"Array");var ka=ea.bind(null,true);var la=da(true,"Object");var ma=Object.freeze({observableArray:fa,observableArrayOf:ga,observableMap:ha,observableObject:ia,arrayOrObservableArray:ja,arrayOrObservableArrayOf:ka,objectOrObservableObject:la});function na(a){return!(a.prototype&&a.prototype.render)}var oa=0;function pa(a){if(typeof Symbol==="function"){return Symbol(a)}var b="__$mobx-react ".concat(a," (").concat(oa,")");oa++;return b}var qa=pa("patchMixins");var ra=pa("patchedDefinition");function sa(a,b){var c=a[qa]=a[qa]||{};var d=c[b]=c[b]||{};d.locks=d.locks||0;d.methods=d.methods||[];return d}function ta(a,b){var c=this;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}b.locks++;try{var g;if(a!==undefined&&a!==null){g=a.apply(this,e)}return g}finally{b.locks--;if(b.locks===0){b.methods.forEach(function(a){a.apply(c,e)})}}}function ua(a,b){var c=function c(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++){e[f]=arguments[f]}ta.call.apply(ta,[this,a,b].concat(e))};return c}function va(a,b){var c=sa(a,b);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}for(var g=0;g<e.length;g++){var h=e[g];if(c.methods.indexOf(h)<0){c.methods.push(h)}}var i=Object.getOwnPropertyDescriptor(a,b);if(i&&i[ra]){return}var j=a[b];var k=wa(a,b,i?i.enumerable:undefined,c,j);Object.defineProperty(a,b,k)}function wa(a,b,c,d,e){var f;var g=ua(e,d);return f={},i(f,ra,true),i(f,"get",function a(){return g}),i(f,"set",function e(f){if(this===a){g=ua(f,d)}else{var h=wa(this,b,c,d,f);Object.defineProperty(this,b,h)}}),i(f,"configurable",true),i(f,"enumerable",c),f}var xa={mobxStores:la};Object.seal(xa);var ya={contextTypes:{get:function a(){return xa},set:function a(b){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:true,enumerable:false},isMobxInjector:{value:true,writable:true,configurable:true,enumerable:true}};function za(b,c,d){var e="inject-"+(c.displayName||c.name||c.constructor&&c.constructor.name||"Unknown");if(d)e+="-with-"+d;var g=function(d){j(e,d);function e(){var a;var b;f(this,e);for(var c=arguments.length,d=new Array(c),g=0;g<c;g++){d[g]=arguments[g]}b=n(this,(a=k(e)).call.apply(a,[this].concat(d)));b.storeRef=function(a){b.wrappedInstance=a};return b}h(e,[{key:"render",value:function d(){var e={};for(var f in this.props){if(this.props.hasOwnProperty(f)){e[f]=this.props[f]}}var g=b(this.context.mobxStores||{},e,this.context)||{};for(var h in g){e[h]=g[h]}if(!na(c)){e.ref=this.storeRef}return a.createElement(c,e)}}]);return e}(a.Component);g.displayName=e;Y(g,c);g.wrappedComponent=c;Object.defineProperties(g,ya);return g}function Aa(a){return function(b,c){a.forEach(function(a){if(a in c)return;if(!(a in b))throw new Error("MobX injector: Store '"+a+"' is not available! Make sure it is provided by some Provider");c[a]=b[a]});return c}}function Ba(){var a;if(typeof arguments[0]==="function"){a=arguments[0];return function(b){var c=za(a,b);c.isMobxInjector=false;c=Xa(c);c.isMobxInjector=true;return c}}else{var b=[];for(var c=0;c<arguments.length;c++){b[c]=arguments[c]}a=Aa(b);return function(c){return za(a,c,b.join("-"))}}}var Ca=b.$mobx||"$mobx";var Da=pa("isUnmounted");var Ea=false;var Fa=false;var Ga=false;var Ha=typeof WeakMap!=="undefined"?new WeakMap:undefined;var Ia=new Z;var Ja=pa("skipRender");var Ka=pa("isForcingUpdate");function La(a,b,c){if(!Object.hasOwnProperty.call(a,b)){Object.defineProperty(a,b,{enumerable:false,configurable:true,writable:true,value:c})}else{a[b]=c}}function Ma(a){if(c.findDOMNode){try{return c.findDOMNode(a)}catch(a){return null}}return null}function Na(a){var b=Ma(a);if(b&&Ha)Ha.set(b,a);Ia.emit({event:"render",renderTime:a.__$mobRenderEnd-a.__$mobRenderStart,totalTime:Date.now()-a.__$mobRenderStart,component:a,node:b})}function Oa(){if(typeof WeakMap==="undefined")throw new Error("[mobx-react] tracking components is not supported in this browser.");if(!Ea)Ea=true}function Pa(a){Fa=a}var Qa=new Z;function Ra(a,b){va(a,b,Va[b])}function Sa(a,b){if(Ta(a,b))return true;if(e(a)!=="object"||a===null||e(b)!=="object"||b===null){return false}var c=Object.keys(a);var d=Object.keys(b);if(c.length!==d.length)return false;for(var f=0;f<c.length;f++){if(!hasOwnProperty.call(b,c[f])||!Ta(a[c[f]],b[c[f]])){return false}}return true}function Ta(a,b){if(a===b){return a!==0||1/a===1/b}else{return a!==a&&b!==b}}function Ua(c){var d=this;if(Fa===true)return c.call(this);function e(){var a=this;i=false;var c=undefined;var d=undefined;j.track(function(){if(Ea){a.__$mobRenderStart=Date.now()}try{d=b._allowStateChanges(false,h)}catch(a){c=a}if(Ea){a.__$mobRenderEnd=Date.now()}});if(c){Qa.emit(c);throw c}return d}var f=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>";var g=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;La(this,Ja,false);La(this,Ka,false);var h=c.bind(this);var i=false;var j=new b.Reaction("".concat(f,"#").concat(g,".render()"),function(){if(!i){i=true;if(typeof d.componentWillReact==="function")d.componentWillReact();if(d[Da]!==true){var b=true;try{La(d,Ka,true);if(!d[Ja])a.Component.prototype.forceUpdate.call(d);b=false}finally{La(d,Ka,false);if(b)j.dispose()}}}});j.reactComponent=this;e[Ca]=j;this.render=e;return e.call(this)}var Va={componentWillUnmount:function a(){if(Fa===true)return;this.render[Ca]&&this.render[Ca].dispose();this[Da]=true;if(Ea){var b=Ma(this);if(b&&Ha){Ha.delete(b)}Ia.emit({event:"destroy",component:this,node:b})}},componentDidMount:function a(){if(Ea){Na(this)}},componentDidUpdate:function a(){if(Ea){Na(this)}},shouldComponentUpdate:function a(b,c){if(Fa){console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==c){return true}return!Sa(this.props,b)}};function Wa(a,c){var d=pa("reactProp_".concat(c,"_valueHolder"));var e=pa("reactProp_".concat(c,"_atomHolder"));function f(){if(!this[e]){La(this,e,b.createAtom("reactive "+c))}return this[e]}Object.defineProperty(a,c,{configurable:true,enumerable:true,get:function a(){f.call(this).reportObserved();return this[d]},set:function a(b){if(!this[Ka]&&!Sa(this[d],b)){La(this,d,b);La(this,Ja,true);f.call(this).reportChanged();La(this,Ja,false)}else{La(this,d,b)}}})}function Xa(b,c){if(typeof b==="string"){throw new Error("Store names should be provided as array")}if(Array.isArray(b)){if(!Ga){Ga=true;console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')}if(!c){return function(a){return Xa(b,a)}}else{return Ba.apply(null,b)(Xa(c))}}var d=b;if(d.isMobxInjector===true){console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(d.__proto__===a.PureComponent){console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together")}if(typeof d==="function"&&(!d.prototype||!d.prototype.render)&&!d.isReactClass&&!a.Component.isPrototypeOf(d)){var e,g;var i=Xa((g=e=function(a){j(b,a);function b(){f(this,b);return n(this,k(b).apply(this,arguments))}h(b,[{key:"render",value:function a(){return d.call(this,this.props,this.context)}}]);return b}(a.Component),e.displayName=d.displayName||d.name,e.contextTypes=d.contextTypes,e.propTypes=d.propTypes,e.defaultProps=d.defaultProps,g));Y(i,d);return i}if(!d){throw new Error("Please pass a valid component to 'observer'")}var l=d.prototype||d;Ya(l);d.isMobXReactObserver=true;Wa(l,"props");Wa(l,"state");var m=l.render;l.render=function(){return Ua.call(this,m)};return d}function Ya(a){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(b){Ra(a,b)});if(!a.shouldComponentUpdate){a.shouldComponentUpdate=Va.shouldComponentUpdate}else{if(a.shouldComponentUpdate!==Va.shouldComponentUpdate){console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react.")}}}var Za=Xa(function(a){var b=a.children,c=a.inject,e=a.render;var f=b||e;if(typeof f==="undefined"){return null}if(!c){return f()}console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var g=Ba(c)(f);return d.createElement(g,null)});Za.displayName="Observer";var $a=function a(b,c,d,f,g){var h=c==="children"?"render":"children";if(typeof b[c]==="function"&&typeof b[h]==="function"){return new Error("Invalid prop,do not use children and render in the same time in`"+d)}if(typeof b[c]==="function"||typeof b[h]==="function"){return}return new Error("Invalid prop `"+g+"` of type `"+e(b[c])+"` supplied to"+" `"+d+"`, expected `function`.")};Za.propTypes={render:$a,children:$a};function _a(){var a=this.constructor.getDerivedStateFromProps(this.props,this.state);if(a!==null&&a!==undefined){this.setState(a)}}function ab(a){function b(b){var c=this.constructor.getDerivedStateFromProps(a,b);return c!==null&&c!==undefined?c:null}this.setState(b.bind(this))}function bb(a,b){try{var c=this.props;var d=this.state;this.props=a;this.state=b;this.__reactInternalSnapshotFlag=true;this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(c,d)}finally{this.props=c;this.state=d}}_a.__suppressDeprecationWarning=true;ab.__suppressDeprecationWarning=true;bb.__suppressDeprecationWarning=true;function cb(a){var b=a.prototype;if(!b||!b.isReactComponent){throw new Error("Can only polyfill class components")}if(typeof a.getDerivedStateFromProps!=="function"&&typeof b.getSnapshotBeforeUpdate!=="function"){return a}var c=null;var d=null;var e=null;if(typeof b.componentWillMount==="function"){c="componentWillMount"}else if(typeof b.UNSAFE_componentWillMount==="function"){c="UNSAFE_componentWillMount"}if(typeof b.componentWillReceiveProps==="function"){d="componentWillReceiveProps"}else if(typeof b.UNSAFE_componentWillReceiveProps==="function"){d="UNSAFE_componentWillReceiveProps"}if(typeof b.componentWillUpdate==="function"){e="componentWillUpdate"}else if(typeof b.UNSAFE_componentWillUpdate==="function"){e="UNSAFE_componentWillUpdate"}if(c!==null||d!==null||e!==null){var f=a.displayName||a.name;var g=typeof a.getDerivedStateFromProps==="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+g+" but also contains the following legacy lifecycles:"+(c!==null?"\n  "+c:"")+(d!==null?"\n  "+d:"")+(e!==null?"\n  "+e:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\n"+"https://fb.me/react-async-component-lifecycle-hooks")}if(typeof a.getDerivedStateFromProps==="function"){b.componentWillMount=_a;b.componentWillReceiveProps=ab}if(typeof b.getSnapshotBeforeUpdate==="function"){if(typeof b.componentDidUpdate!=="function"){throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype")}b.componentWillUpdate=bb;var h=b.componentDidUpdate;b.componentDidUpdate=function a(b,c,d){var e=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;h.call(this,b,c,e)}}return a}var db={children:true,key:true,ref:true};var eb=function(b){j(c,b);function c(a,b){var d;f(this,c);d=n(this,k(c).call(this,a,b));d.state={};fb(a,d.state);return d}h(c,[{key:"render",value:function b(){return a.Children.only(this.props.children)}},{key:"getChildContext",value:function a(){var b={};fb(this.context.mobxStores,b);fb(this.props,b);return{mobxStores:b}}}],[{key:"getDerivedStateFromProps",value:function a(b,c){if(!b)return null;if(!c)return b;if(Object.keys(b).filter(gb).length!==Object.keys(c).filter(gb).length)console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children");if(!b.suppressChangedStoreWarning)for(var d in b){if(gb(d)&&c[d]!==b[d])console.warn("MobX Provider: Provided store '"+d+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}return b}}]);return c}(a.Component);eb.contextTypes={mobxStores:la};eb.childContextTypes={mobxStores:la.isRequired};function fb(a,b){if(!a)return;for(var c in a){if(gb(c))b[c]=a[c]}}function gb(a){return!db[a]&&a!=="suppressChangedStoreWarning"}cb(eb);var hb=pa("disposeOnUnmount");function ib(){var a=this;if(!this[hb]){return}this[hb].forEach(function(b){var c=typeof b==="string"?a[b]:b;if(c!==undefined&&c!==null){if(typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works on functions such as disposers returned by reactions, autorun, etc.")}c()}});this[hb]=[]}function jb(b,c){if(Array.isArray(c)){return c.map(function(a){return jb(b,a)})}if(!b instanceof a.Component){throw new Error("[mobx-react] disposeOnUnmount only works on class based React components.")}if(typeof c!=="string"&&typeof c!=="function"){throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.")}var d=!!b[hb];var e=b[hb]||(b[hb]=[]);e.push(c);if(!d){va(b,"componentWillUnmount",ib)}if(typeof c!=="string"){return c}}if(!a.Component)throw new Error("mobx-react requires React to be available");if(!b.spy)throw new Error("mobx-react requires mobx to be available");if(typeof c.unstable_batchedUpdates==="function")b.configure({reactionScheduler:c.unstable_batchedUpdates});var kb=function a(b){return Qa.on(b)};if((typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="undefined"?"undefined":e(__MOBX_DEVTOOLS_GLOBAL_HOOK__))==="object"){var lb={spy:b.spy,extras:{getDebugName:b.getDebugName}};var mb={renderReporter:Ia,componentByNodeRegistry:Ha,componentByNodeRegistery:Ha,trackComponents:Oa};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(mb,lb)}exports.propTypes=ma;exports.PropTypes=ma;exports.onError=kb;exports.observer=Xa;exports.Observer=Za;exports.renderReporter=Ia;exports.componentByNodeRegistery=Ha;exports.componentByNodeRegistry=Ha;exports.trackComponents=Oa;exports.useStaticRendering=Pa;exports.Provider=eb;exports.inject=Ba;exports.disposeOnUnmount=jb;Object.defineProperty(exports,"__esModule",{value:true})});!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define("prop-types",[],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PropTypes=a()}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw(i=new Error("Cannot find module '"+g+"'")).code="MODULE_NOT_FOUND",i}i=c[g]={exports:{}},b[g][0].call(i.exports,function(a){return e(b[g][1][a]||a)},i,i.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,a,exports){"use strict";var b=require(3);function c(){}function d(){}d.resetWarningCache=c,a.exports=function(){function a(a,c,d,e,f,g){if(g!==b){g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}function e(){return a}var f={array:a.isRequired=a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:e,element:a,elementType:a,instanceOf:e,node:a,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:d,resetWarningCache:c};return f.PropTypes=f}},{3:3}],2:[function(require,a,exports){a.exports=require(1)()},{1:1}],3:[function(require,a,exports){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}]},{},[2])(2)});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("@mail/feedback-loader/EventsLogger",["exports"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).EventsLogger={})}(this,function(a){"use strict";function b(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function c(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){return function(h){if(c)throw new TypeError("Generator is already executing.");for(;f&&(f=0,h[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&h[0]?d.return:h[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,h[1])).done)return e;switch(d=0,e&&(h=[2&h[0],e.value]),h[0]){case 0:case 1:e=h;break;case 4:return g.label++,{value:h[1],done:!1};case 5:g.label++,d=h[1],h=[0];continue;case 7:h=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==h[0]&&2!==h[0])){g=0;continue}if(3===h[0]&&(!e||h[1]>e[0]&&h[1]<e[3])){g.label=h[1];break}if(6===h[0]&&g.label<e[1]){g.label=e[1],e=h;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(h);break}e[2]&&g.ops.pop(),g.trys.pop();continue}h=b.call(a,g)}catch(a){h=[6,a],d=0}finally{c=e=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}}function d(a){if(null===a||!0===a||!1===a)return NaN;var b=Number(a);return isNaN(b)?b:b<0?Math.ceil(b):Math.floor(b)}function e(a,b){if(b.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+b.length+" present")}function f(a){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function g(a){e(1,arguments);var b=Object.prototype.toString.call(a);return a instanceof Date||"object"===f(a)&&"[object Date]"===b?new Date(a.getTime()):"number"==typeof a||"[object Number]"===b?new Date(a):("string"!=typeof a&&"[object String]"!==b||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function h(a,b){e(2,arguments);var c=g(a).getTime(),f=d(b);return new Date(c+f)}function i(a,b){e(2,arguments);var c=g(a),d=g(b);return c.getTime()>d.getTime()}var j=function(){function a(a,b){void 0===a&&(a=""),void 0===b&&(b=""),this.userId=a,this.surveyId=b;try{this.storage=window.localStorage}catch(a){this.storage={}}}return a.prototype.set=function(a,b){var c=this.getExpandedKey(a);try{this.storage[c]=JSON.stringify(b)}catch(a){}},a.prototype.get=function(a){var b=this.getExpandedKey(a);try{return JSON.parse(this.storage[b])}catch(a){return null}},a.prototype.getExpandedKey=function(a){return[this.surveyId,"feedback",this.userId,a].filter(Boolean).join(":")},a.checkLocalStorageEnabled=function(){try{return!!window.localStorage}catch(a){return!1}},a}(),k=function(){function a(a){void 0===a&&(a=""),this.storage=new j("EventsLogger",a)}return a.prototype.push=function(a){return b(this,void 0,void 0,function(){return c(this,function(b){return this.storage.set(a,Date.now()),[2]})})},a.prototype.check=function(a){return b(this,void 0,void 0,function(){var b,d,e,f;return c(this,function(c){return 0===a.length?[2,!0]:(b=a[a.length-1],d=b.type,e=b.minDelay,null===(f=this.storage.get(d))?[2,!1]:void 0===e?[2,!0]:[2,i(new Date,h(f,e))])})})},a}();a.default=k,Object.defineProperty(a,"__esModule",{value:!0})});!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define("@mail/feedback-loader/FeedbackLoader",["exports"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).FeedbackLoader={})}(this,function(a){"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)};var c=function(){return(c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function d(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]])}return c}function e(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function f(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){return function(h){if(c)throw new TypeError("Generator is already executing.");for(;f&&(f=0,h[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&h[0]?d.return:h[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,h[1])).done)return e;switch(d=0,e&&(h=[2&h[0],e.value]),h[0]){case 0:case 1:e=h;break;case 4:return g.label++,{value:h[1],done:!1};case 5:g.label++,d=h[1],h=[0];continue;case 7:h=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==h[0]&&2!==h[0])){g=0;continue}if(3===h[0]&&(!e||h[1]>e[0]&&h[1]<e[3])){g.label=h[1];break}if(6===h[0]&&g.label<e[1]){g.label=e[1],e=h;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(h);break}e[2]&&g.ops.pop(),g.trys.pop();continue}h=b.call(a,g)}catch(a){h=[6,a],d=0}finally{c=e=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}}function g(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var h=function(){this.__data__=[],this.size=0};var i=function(a,b){return a===b||a!=a&&b!=b};var j=function(a,b){for(var c=a.length;c--;)if(i(a[c][0],b))return c;return-1},k=Array.prototype.splice;var l=function(a){var b=this.__data__,c=j(b,a);return!(c<0)&&(c==b.length-1?b.pop():k.call(b,c,1),--this.size,!0)};var m=function(a){var b=this.__data__,c=j(b,a);return c<0?void 0:b[c][1]};var n=function(a){return j(this.__data__,a)>-1};var o=function(a,b){var c=this.__data__,d=j(c,a);return d<0?(++this.size,c.push([a,b])):c[d][1]=b,this};function p(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}p.prototype.clear=h,p.prototype.delete=l,p.prototype.get=m,p.prototype.has=n,p.prototype.set=o;var q=p;var r=function(){this.__data__=new q,this.size=0};var s=function(a){var b=this.__data__,c=b.delete(a);return this.size=b.size,c};var t=function(a){return this.__data__.get(a)};var u=function(a){return this.__data__.has(a)},v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function x(a,b){return a(b={exports:{}},b.exports),b.exports}var y="object"==typeof v&&v&&v.Object===Object&&v,z="object"==typeof self&&self&&self.Object===Object&&self,A=y||z||Function("return this")(),B=A.Symbol,C=Object.prototype,D=C.hasOwnProperty,E=C.toString,F=B?B.toStringTag:void 0;var G=function(a){var b=D.call(a,F),c=a[F];try{a[F]=void 0;var d=!0}catch(a){}var e=E.call(a);return d&&(b?a[F]=c:delete a[F]),e},H=Object.prototype.toString;var I=function(a){return H.call(a)},J=B?B.toStringTag:void 0;var K=function(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":J&&J in Object(a)?G(a):I(a)};var L=function(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)};var M,N=function(a){if(!L(a))return!1;var b=K(a);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b},O=A["__core-js_shared__"],P=(M=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";var Q=function(a){return!!P&&P in a},R=Function.prototype.toString;var S=function(a){if(null!=a){try{return R.call(a)}catch(a){}try{return a+""}catch(a){}}return""},T=/^\[object .+?Constructor\]$/,U=Function.prototype,V=Object.prototype,W=U.toString,$=V.hasOwnProperty,X=RegExp("^"+W.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Y=function(a){return!(!L(a)||Q(a))&&(N(a)?X:T).test(S(a))};var Z=function(a,b){return null==a?void 0:a[b]};var _=function(a,b){var c=Z(a,b);return Y(c)?c:void 0},aa=_(A,"Map"),ba=_(Object,"create");var ca=function(){this.__data__=ba?ba(null):{},this.size=0};var da=function(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b},ea=Object.prototype.hasOwnProperty;var fa=function(a){var b=this.__data__;if(ba){var c=b[a];return"__lodash_hash_undefined__"===c?void 0:c}return ea.call(b,a)?b[a]:void 0},ga=Object.prototype.hasOwnProperty;var ha=function(a){var b=this.__data__;return ba?void 0!==b[a]:ga.call(b,a)};var ia=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=ba&&void 0===b?"__lodash_hash_undefined__":b,this};function ja(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}ja.prototype.clear=ca,ja.prototype.delete=da,ja.prototype.get=fa,ja.prototype.has=ha,ja.prototype.set=ia;var ka=ja;var la=function(){this.size=0,this.__data__={hash:new ka,map:new(aa||q),string:new ka}};var ma=function(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a};var na=function(a,b){var c=a.__data__;return ma(b)?c["string"==typeof b?"string":"hash"]:c.map};var oa=function(a){var b=na(this,a).delete(a);return this.size-=b?1:0,b};var pa=function(a){return na(this,a).get(a)};var qa=function(a){return na(this,a).has(a)};var ra=function(a,b){var c=na(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this};function sa(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}sa.prototype.clear=la,sa.prototype.delete=oa,sa.prototype.get=pa,sa.prototype.has=qa,sa.prototype.set=ra;var ta=sa;var ua=function(a,b){var c=this.__data__;if(c instanceof q){var d=c.__data__;if(!aa||d.length<199)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new ta(d)}return c.set(a,b),this.size=c.size,this};function va(a){var b=this.__data__=new q(a);this.size=b.size}va.prototype.clear=r,va.prototype.delete=s,va.prototype.get=t,va.prototype.has=u,va.prototype.set=ua;var wa=va,xa=function(){try{var a=_(Object,"defineProperty");return a({},"",{}),a}catch(a){}}();var ya=function(a,b,c){"__proto__"==b&&xa?xa(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c};var za=function(a,b,c){(void 0!==c&&!i(a[b],c)||void 0===c&&!(b in a))&&ya(a,b,c)};var Aa=function(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(!1===c(f[i],i,f))break}return b}}(),Ba=x(function(a,b){var c=b&&!b.nodeType&&b,d=c&&a&&!a.nodeType&&a,e=d&&d.exports===c?A.Buffer:void 0,f=e?e.allocUnsafe:void 0;a.exports=function(a,b){if(b)return a.slice();var c=a.length,d=f?f(c):new a.constructor(c);return a.copy(d),d}}),Ca=A.Uint8Array;var Da=function(a){var b=new a.constructor(a.byteLength);return new Ca(b).set(new Ca(a)),b};var Ea=function(a,b){var c=b?Da(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)};var Fa=function(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b},Ga=Object.create,Ha=function(){function a(){}return function(b){if(!L(b))return{};if(Ga)return Ga(b);a.prototype=b;var c=new a;return a.prototype=void 0,c}}();var Ia=function(a,b){return function(c){return a(b(c))}}(Object.getPrototypeOf,Object),Ja=Object.prototype;var Ka=function(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||Ja)};var La=function(a){return"function"!=typeof a.constructor||Ka(a)?{}:Ha(Ia(a))};var Ma=function(a){return null!=a&&"object"==typeof a};var Na=function(a){return Ma(a)&&"[object Arguments]"==K(a)},Oa=Object.prototype,Pa=Oa.hasOwnProperty,Qa=Oa.propertyIsEnumerable,Ra=Na(function(){return arguments}())?Na:function(a){return Ma(a)&&Pa.call(a,"callee")&&!Qa.call(a,"callee")},Sa=Array.isArray;var Ta=function(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=9007199254740991};var Ua=function(a){return null!=a&&Ta(a.length)&&!N(a)};var Va=function(a){return Ma(a)&&Ua(a)};var Wa=function(){return!1},Xa=x(function(a,b){var c=b&&!b.nodeType&&b,d=c&&a&&!a.nodeType&&a,e=d&&d.exports===c?A.Buffer:void 0,f=(e?e.isBuffer:void 0)||Wa;a.exports=f}),Ya=Function.prototype,Za=Object.prototype,$a=Ya.toString,_a=Za.hasOwnProperty,ab=$a.call(Object);var bb=function(a){if(!Ma(a)||"[object Object]"!=K(a))return!1;var b=Ia(a);if(null===b)return!0;var c=_a.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&$a.call(c)==ab},cb={};cb["[object Float32Array]"]=cb["[object Float64Array]"]=cb["[object Int8Array]"]=cb["[object Int16Array]"]=cb["[object Int32Array]"]=cb["[object Uint8Array]"]=cb["[object Uint8ClampedArray]"]=cb["[object Uint16Array]"]=cb["[object Uint32Array]"]=!0,cb["[object Arguments]"]=cb["[object Array]"]=cb["[object ArrayBuffer]"]=cb["[object Boolean]"]=cb["[object DataView]"]=cb["[object Date]"]=cb["[object Error]"]=cb["[object Function]"]=cb["[object Map]"]=cb["[object Number]"]=cb["[object Object]"]=cb["[object RegExp]"]=cb["[object Set]"]=cb["[object String]"]=cb["[object WeakMap]"]=!1;var db=function(a){return Ma(a)&&Ta(a.length)&&!!cb[K(a)]};var eb=function(a){return function(b){return a(b)}},fb=x(function(a,b){var c=b&&!b.nodeType&&b,d=c&&a&&!a.nodeType&&a,e=d&&d.exports===c&&y.process,f=function(){try{var a=d&&d.require&&d.require("util").types;return a||e&&e.binding&&e.binding("util")}catch(a){}}();a.exports=f}),gb=fb&&fb.isTypedArray,hb=gb?eb(gb):db;var ib=function(a,b){if(("constructor"!==b||"function"!=typeof a[b])&&"__proto__"!=b)return a[b]},jb=Object.prototype.hasOwnProperty;var kb=function(a,b,c){var d=a[b];jb.call(a,b)&&i(d,c)&&(void 0!==c||b in a)||ya(a,b,c)};var lb=function(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):void 0;void 0===i&&(i=a[h]),e?ya(c,h,i):kb(c,h,i)}return c};var mb=function(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d},nb=/^(?:0|[1-9]\d*)$/;var ob=function(a,b){var c=typeof a;return!!(b=null==b?9007199254740991:b)&&("number"==c||"symbol"!=c&&nb.test(a))&&a>-1&&a%1==0&&a<b},pb=Object.prototype.hasOwnProperty;var qb=function(a,b){var c=Sa(a),d=!c&&Ra(a),e=!c&&!d&&Xa(a),f=!c&&!d&&!e&&hb(a),g=c||d||e||f,h=g?mb(a.length,String):[],i=h.length;for(var j in a)!b&&!pb.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||ob(j,i))||h.push(j);return h};var rb=function(a){var b=[];if(null!=a)for(var c in Object(a))b.push(c);return b},sb=Object.prototype.hasOwnProperty;var tb=function(a){if(!L(a))return rb(a);var b=Ka(a),c=[];for(var d in a)("constructor"!=d||!b&&sb.call(a,d))&&c.push(d);return c};var ub=function(a){return Ua(a)?qb(a,!0):tb(a)};var vb=function(a){return lb(a,ub(a))};var wb=function(a,b,c,d,e,f,g){var h=ib(a,c),i=ib(b,c),j=g.get(i);if(j)za(a,c,j);else{var k=f?f(h,i,c+"",a,b,g):void 0,l=void 0===k;if(l){var m=Sa(i),n=!m&&Xa(i),o=!m&&!n&&hb(i);k=i,m||n||o?Sa(h)?k=h:Va(h)?k=Fa(h):n?(l=!1,k=Ba(i,!0)):o?(l=!1,k=Ea(i,!0)):k=[]:bb(i)||Ra(i)?(k=h,Ra(h)?k=vb(h):L(h)&&!N(h)||(k=La(i))):l=!1}l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),za(a,c,k)}};var xb=function a(b,c,d,e,f){b!==c&&Aa(c,function(g,h){if(f||(f=new wa),L(g))wb(b,c,h,d,a,e,f);else{var i=e?e(ib(b,h),g,h+"",b,c,f):void 0;void 0===i&&(i=g),za(b,h,i)}},ub)};var yb=function(a){return a};var zb=function(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)},Ab=Math.max;var Bb=function(a,b,c){return b=Ab(void 0===b?a.length-1:b,0),function(){for(var d=arguments,e=-1,f=Ab(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(var h=Array(b+1);++e<b;)h[e]=d[e];return h[b]=c(g),zb(a,this,h)}};var Cb=function(a){return function(){return a}},Db=xa?function(a,b){return xa(a,"toString",{configurable:!0,enumerable:!1,value:Cb(b),writable:!0})}:yb,Eb=Date.now;var Fb=function(a){var b=0,c=0;return function(){var d=Eb(),e=16-(d-c);if(c=d,e>0){if(++b>=800)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}(Db);var Gb=function(a,b){return Fb(Bb(a,b,yb),a+"")};var Hb=function(a,b,c){if(!L(c))return!1;var d=typeof b;return!!("number"==d?Ua(c)&&ob(b,c.length):"string"==d&&b in c)&&i(c[b],a)};var Ib=function(a){return Gb(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;for(f=a.length>3&&"function"==typeof f?(e--,f):void 0,g&&Hb(c[0],c[1],g)&&(f=e<3?void 0:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}(function(a,b,c){xb(a,b,c)}),Jb=function(){function a(a,b){void 0===a&&(a=""),void 0===b&&(b=""),this.userId=a,this.surveyId=b;try{this.storage=window.localStorage}catch(a){this.storage={}}}return a.prototype.set=function(a,b){var c=this.getExpandedKey(a);try{this.storage[c]=JSON.stringify(b)}catch(a){}},a.prototype.get=function(a){var b=this.getExpandedKey(a);try{return JSON.parse(this.storage[b])}catch(a){return null}},a.prototype.getExpandedKey=function(a){return[this.surveyId,"feedback",this.userId,a].filter(Boolean).join(":")},a.checkLocalStorageEnabled=function(){try{return!!window.localStorage}catch(a){return!1}},a}();function Kb(a){if(null===a||!0===a||!1===a)return NaN;var b=Number(a);return isNaN(b)?b:b<0?Math.ceil(b):Math.floor(b)}function Lb(a,b){if(b.length<a)throw new TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+b.length+" present")}function Mb(a){return(Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function Nb(a){Lb(1,arguments);var b=Object.prototype.toString.call(a);return a instanceof Date||"object"===Mb(a)&&"[object Date]"===b?new Date(a.getTime()):"number"==typeof a||"[object Number]"===b?new Date(a):("string"!=typeof a&&"[object String]"!==b||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var Ob,Pb=function(){function a(a,b){this.window=a,this.origin=b,this.messageHandlers=[]}return a.prototype.send=function(a,b){var c={type:"feedback-evt",action:a,params:b};this.window.postMessage(c,this.origin)},a.prototype.addActionHandler=function(a,b){var c=this.createMessageHandler(a,b);window.addEventListener("message",c),this.messageHandlers.push(c)},a.prototype.clearActionHandlers=function(){this.messageHandlers.forEach(function(a){window.removeEventListener("message",a)})},a.prototype.createMessageHandler=function(a,b){var c=this;return function(d){var e=d.origin,f=d.source,g=d.data;e===c.origin&&f===c.window&&g&&"feedback-evt"===g.type&&g.action===a&&b(g)}},a}(),Qb=function(){function a(a,b){void 0===b&&(b={});var c=this;this.surveyId=a,this.frame=null,this.postMessage=null,this.handleCloseMessage=function(){c.close()},this.handleSetSizeMessage=function(a){var b=a.params||{},d=b.width,e=b.height;"number"==typeof d&&"number"==typeof e&&c.setSize(d,e)},this.handleAppLoadedMessage=function(){c.frame&&(c.frame.style.visibility="visible",c.options.loadedClassName&&c.frame.classList.add(c.options.loadedClassName))},this.handleSubmitMessage=function(){var a=c.options.successHideTimeout;a&&setTimeout(function(){c.close()},a)},this.options=Ib({},b)}return a.prototype.open=function(){var a,b,c=this;if(!this.frame){var d=this.createSrc(),e=this.options,f=e.styles,g=void 0===f?{}:f,h=e.testId,i=void 0===h?"csat":h,j=e.rootElement,k=e.openedClassName;this.frame=document.createElement("iframe"),this.frame.src=d,this.frame.width="320px",this.frame.height="120px",this.frame.dataset.testId=i,this.frame.style.border="none",this.frame.style.display="block",this.frame.style.position="fixed",this.frame.style.zIndex="500",this.frame.style.bottom="8px",this.frame.style.left="8px",this.frame.style.borderRadius="var(--vkui--size_border_radius_promo--regular, 20px)",this.frame.style.boxShadow="var(--vkui--elevation2, 0 4px 32px 0 rgba(0, 16, 61, 0.32))",this.frame.style.visibility="hidden",k&&this.frame.classList.add(k),Object.keys(g).forEach(function(a){var b=g[a];b&&c.frame&&(c.frame.style[a]=b)}),j?j.appendChild(this.frame):null===(b=null===(a=window.document)||void 0===a?void 0:a.body)||void 0===b||b.appendChild(this.frame),this.frame.contentWindow&&(this.postMessage=new Pb(this.frame.contentWindow,this.getFrameOrigin()),this.postMessage.addActionHandler("close",this.handleCloseMessage),this.postMessage.addActionHandler("setSize",this.handleSetSizeMessage),this.postMessage.addActionHandler("appLoaded",this.handleAppLoadedMessage),this.postMessage.addActionHandler("submit",this.handleSubmitMessage))}},a.prototype.setDarkTheme=function(a){var b;this.options.darkTheme=a,null===(b=this.postMessage)||void 0===b||b.send("setTheme",{darkMode:a})},a.prototype.close=function(){var a,b,c,d;null===(a=this.postMessage)||void 0===a||a.clearActionHandlers(),this.postMessage=null,null===(b=this.frame)||void 0===b||b.remove(),this.frame=null,null===(d=(c=this.options).onClose)||void 0===d||d.call(c)},a.prototype.createSrc=function(){var a=new URL(this.getFrameOrigin()),b=this.options,c=b.email,d=b.clientId,e=b.project,f=b.darkTheme,g=b.internal,h=b.theme;return a.pathname="feedback/nps",a.searchParams.append("id",String(this.surveyId)),a.searchParams.append("mode","popup"),a.searchParams.append("type","csat"),a.searchParams.append("origin",location.origin),a.searchParams.append("darkTheme",f?"1":"0"),a.searchParams.append("csatV2","1"),c&&a.searchParams.append("email",c),d&&a.searchParams.append("clientId",d),e&&a.searchParams.append("project",e),g&&a.searchParams.append("internal","1"),h&&a.searchParams.append("theme",h),a.toString()},a.prototype.getFrameOrigin=function(){return"https://".concat(this.options.domain||"e.mail.ru")},a.prototype.setSize=function(a,b){this.frame&&(this.frame.width="".concat(a,"px"),this.frame.height="".concat(b,"px"))},a}();!function(a){a.Update="feedback-loader_update",a.PassJigurda="feedback-loader_jigurda-pass",a.ApiFetchLastVotedDateGroup="feedback-loader_api-last-voted-date-group",a.Show="feedback-loader_show",a.Close="feedback-loader_close",a.EnableDarkMode="feedback-loader_set-dark_on",a.DisableDarkMode="feedback-loader_set-dark_off"}(Ob||(Ob={}));var Rb=Ob;function Sb(){var a=new Date;return a.setUTCHours(0,0,0,0),a.getTime()}function Tb(a,b){return function(a){return Sb()-864e5*a}(b)>=a}var Ub=function(){function a(a,b){void 0===b&&(b={});var e=b.frameLoaderOptions,f=d(b,["frameLoaderOptions"]),g=f.email,h=f.clientId;this.survey=a,this.options=Ib({},f),this.storage=new Jb(this.getUserId(),this.id),this.frameLoader=new Qb(this.id,c(c({},e),{email:g,clientId:h,internal:this.survey.internal}))}return Object.defineProperty(a.prototype,"id",{get:function(){return this.survey.surveyId},enumerable:!1,configurable:!0}),a.prototype.update=function(a){var b,c,d,g;return void 0===a&&(a=!1),e(this,void 0,void 0,function(){var e;return f(this,function(f){switch(f.label){case 0:return a?[4,this.show()]:[3,2];case 1:return f.sent(),[2,this.id];case 2:return this.options.ignoreLocalStorageDisable||Jb.checkLocalStorageEnabled()?(e=!!this.survey.repeatAfterDays||!!this.survey.showAfterDays,this.checkFeature()?this.checkDelay()?e&&!this.checkLastShow()?[2,Promise.reject("last_show_check_fail")]:[4,this.checkTriggerEvents()]:[2,Promise.reject("delay_check_fail")]:[2,Promise.reject("feature_check_fail")]):[2,Promise.reject("local_storage_disabled")];case 3:return f.sent()?[4,null===(c=(b=this.options).checkBeforeJigurda)||void 0===c?void 0:c.call(b)]:[2,Promise.reject("trigger_events_check_fail")];case 4:return f.sent(),this.sendRadar(Rb.Update),this.checkJigurda()?(this.sendRadar(Rb.PassJigurda),this.options.dryRun?[2,Promise.reject("dry_run")]:[4,null===(g=(d=this.options).checkBeforeShow)||void 0===g?void 0:g.call(d)]):[2,Promise.reject("jigurda_check_fail")];case 5:return f.sent(),[4,this.show()];case 6:return f.sent(),[2,this.id]}})})},a.prototype.close=function(){this.frameLoader.close(),this.sendRadar(Rb.Close)},a.prototype.setDarkTheme=function(a){this.frameLoader.setDarkTheme(a),this.sendRadar(a?Rb.EnableDarkMode:Rb.DisableDarkMode)},a.prototype.checkLastShow=function(a){var b=this.survey,c=b.repeatAfterDays,d=b.showAfterDays,e=null!=a?a:void 0===d?c:d,f=this.storage.get("lastShow");return!!e&&(!f||Tb(f,e))},a.prototype.checkFeature=function(){var a=this.options.checkFeature;return!a||a(this.survey.feature)},a.prototype.checkDelay=function(){var a=this.survey.delay,b=this.storage.get("activeFrom");return null===b&&(b=Date.now(),this.storage.set("activeFrom",b)),!a||function(a,b){Lb(2,arguments);var c=Nb(a),d=Nb(b);return c.getTime()>d.getTime()}(new Date,function(a,b){Lb(2,arguments);var c=Nb(a).getTime(),d=Kb(b);return new Date(c+d)}(b,a))},a.prototype.checkJigurda=function(){var a=this.storage.get("lastCheck"),b=Sb();if(a===b)return!1;this.storage.set("lastCheck",b);var c=this.survey.permille;return function(a){var b=0,c=0;b^=-1;for(var d=0,e=a.length;d<e;d++)c=255&(b^a.charCodeAt(d)),b=b>>>8^"0x".concat("00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*c,8));return b=(-1^b)>>>0,b%=1e3}(this.getSaltedUser())<c},a.prototype.checkTriggerEvents=function(){return e(this,void 0,void 0,function(){var a,b;return f(this,function(c){return a=this.survey.triggerEvents,b=this.options.eventsLogger,a&&b?[2,a.reduce(function(a,c){return a.then(function(a){return a||b.check([c])})},Promise.resolve(!1))]:[2,!0]})})},a.prototype.getSaltedUser=function(){return"".concat(this.getUserId()).concat(this.id).concat(Sb())},a.prototype.show=function(){return e(this,void 0,void 0,function(){return f(this,function(a){return this.frameLoader.open(),this.storage.set("lastShow",Sb()),this.sendRadar(Rb.Show),[2]})})},a.prototype.sendRadar=function(a){var b=this.options,c=b.radar,d=b.dryRun,e=this.survey.permille;null==c||c(a,{userId:this.getUserId(),permille:e,surveyId:this.id,dryRun:d})},a.prototype.getUserId=function(){var a,b=this.options,c=b.email,d=b.clientId;return null!==(a=null!=c?c:d)&&void 0!==a?a:""},a}();function Vb(a){return Lb(1,arguments),1e3*a}var Wb=x(function(a,b){function c(){return"undefined"==typeof coreKeeper?void 0:coreKeeper}function d(){return"undefined"!=typeof userKeeper?userKeeper:{add:function(){},time:function(){},timeEnd:function(){}}}Object.defineProperty(b,"__esModule",{value:!0}),b.userKeeper=b.coreKeeperAPI=b.coreKeeperAppReady=b.getCoreKeeper=void 0,b.getCoreKeeper=c,b.coreKeeperAppReady=function(a){var b;null===(b=c())||void 0===b||b.appReady(a)},b.coreKeeperAPI=function(a,b){var d;null===(d=c())||void 0===d||d.api(a,b)};var e=Object.defineProperties({group:function(a,b,c){var e=d();e.time(a);var f=b(),g=function(){return e.timeEnd(a,c)};return f&&"function"==typeof f.then?f.then(g,g):g(),f}},{add:{get:function(){return d().add}},time:{get:function(){return d().time}},timeEnd:{get:function(){return d().timeEnd}}});b.userKeeper=e});w(Wb),Wb.userKeeper,Wb.coreKeeperAPI,Wb.coreKeeperAppReady;var Xb=Wb.getCoreKeeper,Yb=x(function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.now=void 0,b.now="undefined"!=typeof performance&&performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now});w(Yb),Yb.now;var Zb=x(function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.keeperFetchResponse=void 0,b.keeperFetchResponse=function(a,b){var c=Yb.now();return a.then(function(a){return Promise.all([a,a.text()])}).then(function(a){var d,e,f=a[0],g=a[1];if("text"!==b)try{d=f.ok?JSON.parse(g):null}catch(a){e=a}return Wb.coreKeeperAPI(f,{duration:Yb.now()-c,responseLength:g.length,error:e}),f.ok?d:Promise.reject(new Error(""+f.status))})}});w(Zb);var $b=Zb.keeperFetchResponse;function _b(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ac(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?_b(Object(c),!0).forEach(function(b){bc(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):_b(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function bc(a,b,c){return(b=function(a){var b=function(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:String(b)}(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function cc(a,b){return ec(a)||function(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{if(f=(c=c.call(a)).next,0===b){if(Object(c)!==c)return;i=!1}else for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),h.length!==b);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}}(a,b)||fc(a,b)||hc()}function dc(a){return ec(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||fc(a)||hc()}function ec(a){if(Array.isArray(a))return a}function fc(a,b){if(a){if("string"==typeof a)return gc(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?gc(a,b):void 0}}function gc(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function hc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ic(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=fc(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function(){c=c.call(a)},n:function(){var a=c.next();return g=a.done,a},e:function(a){h=!0,f=a},f:function(){try{g||null==c.return||c.return()}finally{if(h)throw f}}}}var jc=/#/g,kc=/&/g,lc=/=/g,mc=/\+/g,nc=/%5e/gi,oc=/%60/gi,pc=/%7c/gi,qc=/%20/gi;function rc(a){return(b="string"==typeof a?a:JSON.stringify(a),encodeURI(""+b).replace(pc,"|")).replace(mc,"%2B").replace(qc,"+").replace(jc,"%23").replace(kc,"%26").replace(oc,"`").replace(nc,"^");var b}function sc(a){return rc(a).replace(lc,"%3D")}function tc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return decodeURIComponent(""+a)}catch(b){return""+a}}function uc(a){return tc(a.replace(mc," "))}function vc(a){return Object.keys(a).filter(function(b){return void 0!==a[b]}).map(function(b){return c=b,"number"!=typeof(d=a[b])&&"boolean"!=typeof d||(d=String(d)),d?Array.isArray(d)?d.map(function(a){return"".concat(sc(c),"=").concat(rc(a))}).join("&"):"".concat(sc(c),"=").concat(rc(d)):sc(c);var c,d}).join("&")}var wc=/^\w{2,}:([/\\]{1,2})/,xc=/^\w{2,}:([/\\]{2})?/,yc=/^([/\\]\s*){2,}[^/\\]/;function zc(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"boolean"==typeof b&&(b={acceptRelative:b}),b.strict?wc.test(a):xc.test(a)||!!b.acceptRelative&&yc.test(a)}var Ac=/\/$|\/\?/;function Bc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b?Ac.test(a):a.endsWith("/")}function Cc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!b)return a.endsWith("/")?a:a+"/";if(Bc(a,!0))return a||"/";var c=a.split("?"),d=dc(c),e=d[0],f=d.slice(1);return e+"/"+(f.length>0?"?".concat(f.join("?")):"")}function Dc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.startsWith("/")}function Ec(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(Dc(a)?a.slice(1):a)||"/"}function Fc(a,b){var c=function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1?arguments[1]:void 0;if(!zc(b,{acceptRelative:!0}))return c?a(c+b):Hc(b);var d=(b.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),e=cc(d,3),f=e[0],g=void 0===f?"":f,h=e[1],i=e[2],j=void 0===i?"":i,k=(j.match(/([^#/?]*)(.*)?/)||[]).splice(1),l=cc(k,2),m=l[0],n=void 0===m?"":m,o=l[1],p=void 0===o?"":o,q=Hc(p.replace(/\/(?=[A-Za-z]:)/,"")),r=q.pathname,s=q.search,t=q.hash;return{protocol:g,auth:h?h.slice(0,Math.max(0,h.length-1)):"",host:n,pathname:r,search:s,hash:t}}(a),d=ac(ac({},function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b={};"?"===a[0]&&(a=a.slice(1));var c,d=ic(a.split("&"));try{for(d.s();!(c=d.n()).done;){var e=c.value,f=e.match(/([^=]+)=?(.*)/)||[];if(!(f.length<2)){var g=tc(f[1]);if("__proto__"!==g&&"constructor"!==g){var h=uc(f[2]||"");void 0!==b[g]?Array.isArray(b[g])?b[g].push(h):b[g]=[b[g],h]:b[g]=h}}}}catch(a){d.e(a)}finally{d.f()}return b}(c.search)),b);return c.search=vc(d),function(a){var b=a.pathname+(a.search?(a.search.startsWith("?")?"":"?")+a.search:"")+a.hash;if(!a.protocol)return b;return a.protocol+"//"+(a.auth?a.auth+"@":"")+a.host+b}(c)}function Gc(a){return a&&"/"!==a}function Hc(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=(a.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1),c=cc(b,3),d=c[0],e=void 0===d?"":d,f=c[1],g=void 0===f?"":f,h=c[2],i=void 0===h?"":h;return{pathname:e,search:g,hash:i}}var Ic,Jc=function(){function a(a){void 0===a&&(a="/api/v1"),this.baseUrl=a,this.requests=new Map,this.abortControllers=new Map}return a.prototype.get=function(a){return e(this,void 0,void 0,function(){var b,c,d,e,g;return f(this,function(f){return b=a.path,c=a.params,d=a.abortKey,e=a.cancellable,g=Fc(this.getRequestUrl(b),c||{}),[2,this.request(g,{method:"GET",requestSalt:d&&c?JSON.stringify(c[d]):void 0,cancellable:e})]})})},a.prototype.post=function(a){return e(this,void 0,void 0,function(){var b,c,d,e,g;return f(this,function(f){return b=a.path,c=a.data,d=a.abortKey,e=a.cancellable,g=this.getRequestUrl(b),[2,this.request(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),requestSalt:d&&c?JSON.stringify(c[d]):void 0,cancellable:e})]})})},a.prototype.fetch=function(a,b){return Xb()?$b(fetch(a,b),"json"):fetch(a,b).then(function(a){return a.ok?a.json():Promise.reject(a.status)})},a.prototype.request=function(a,b){var d=this,e=b.cancellable,f=b.requestSalt,g=b.method,h=b.body,i=[g,a,null!=f?f:JSON.stringify(h)].join(":"),j=this.abortControllers.get(i),k=new AbortController,l=new Promise(function(e,f){d.fetch(a,c(c({},b),{signal:k.signal})).then(function(a){200!==a.status&&f(a.status),e(a.body)}).catch(function(a){var b=d.requests.get(i);k.signal.aborted&&b&&e(b),f(a)})});return this.requests.set(i,l),this.abortControllers.set(i,k),e&&(null==j||j.abort()),l},a.prototype.getRequestUrl=function(a){return function(a){for(var b=a||"",c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f,g=ic(d.filter(function(a){return Gc(a)}));try{for(g.s();!(f=g.n()).done;){var h=f.value;b=b?Cc(b)+Ec(h):h}}catch(a){g.e(a)}finally{g.f()}return b}(this.baseUrl,a)},a}();!function(a){a.SuccessfullySaved="successfully-saved",a.UnknownError="unknown-error"}(Ic||(Ic={}));var Kc=Ic,Lc=function(a){function g(){return null!==a&&a.apply(this,arguments)||this}return function(a,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}(g,a),g.prototype.fetchLastVotedDate=function(a){return e(this,void 0,void 0,function(){var b,e;return f(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),a.without_config,b=a.survey_id,e=d(a,["without_config","survey_id"]),[4,this.get({path:"survey/info",params:c({without_config:"1",survey_id:String(b)},e)})];case 1:return[2,Vb(f.sent().previous_answer)];case 2:return f.sent(),[2,NaN];case 3:return[2]}})})},g.prototype.fetchLastVotedDateForGroup=function(a){return e(this,void 0,void 0,function(){var b;return f(this,function(d){switch(d.label){case 0:return d.trys.push([0,2,,3]),b=a.survey_ids,[4,this.get({path:"survey/last_answers",params:c(c({},a),{survey_ids:JSON.stringify(b.map(Number))})})];case 1:return[2,d.sent().last_answers_by_survey_ids.reduce(function(a,b){var d,e=b.id,f=b.answer;return c(c({},a),((d={})[e]=Vb(f),d))},{})];case 2:return d.sent(),[2,{}];case 3:return[2]}})})},g.prototype.fetchQuestions=function(a){return e(this,void 0,void 0,function(){var b,e,g,h;return f(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),b=a.lang,e=void 0===b?"ru":b,a.without_config,g=a.survey_id,h=d(a,["lang","without_config","survey_id"]),[4,this.get({path:"survey/info",params:c({lang:e,survey_id:String(g)},h)})];case 1:return[2,f.sent().questions.map(function(a){return"stars"===a.type?c(c({},a),{options:a.options||[]}):a})];case 2:return f.sent(),[2,[]];case 3:return[2]}})})},g.prototype.saveAnswers=function(a){return e(this,void 0,void 0,function(){var b,d;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),b=a.survey_id,d=Number(b),[4,this.post({path:"survey/answer",abortKey:"survey_id",cancellable:!0,data:c(c({},a),{survey_id:Number.isNaN(d)?b:d})})];case 1:return e.sent(),[2,Kc.SuccessfullySaved];case 2:return e.sent(),[2,Kc.UnknownError];case 3:return[2]}})})},g}(Jc);new Lc;var Mc=function(a,b){var c=b.map(function(a){return String(a)}),d=Object.entries(a).filter(function(a){var b=a[0];return c.includes(b)});return function(a){return Object.values(a).reduce(function(a,b){return Math.max(a,b)},0)}(Object.fromEntries(d))},Nc=function(){function a(a,b){void 0===b&&(b={});var d=this;this.surveys=a,this.options={},this.surveyLoaders=[],this.activeSurveyId=null,this.surveyService=new Lc,this.isObserving=!1,this.lastShowCheck=new Map,this.lastAnswerCheck=new Map,this.quarantinePropsSet=new Map;var e=b.surveyLoaderOptions,f=b.apiBaseUrl;((null==e?void 0:e.email)||(null==e?void 0:e.clientId))&&(this.surveyLoaders=this.surveys.map(function(a){return new Ub(a,c(c({},e),{checkBeforeJigurda:d.checkSurveyBeforeJigurda.bind(d,a),checkBeforeShow:d.checkSurveyBeforeShow.bind(d,a),frameLoaderOptions:c(c({},null==e?void 0:e.frameLoaderOptions),{onClose:function(){var a,b;null===(b=null===(a=null==e?void 0:e.frameLoaderOptions)||void 0===a?void 0:a.onClose)||void 0===b||b.call(a),d.resetActiveSurveyId()}})}))}),this.options=Ib({},b),this.surveyService=new Lc(f))}return a.getClientId=function(){var a=new Jb,b=a.get("clientId");return b||(b=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(a)).reduce(function(a,b){return a+=(b&=63)<36?b.toString(36):b<62?(b-26).toString(36).toUpperCase():b>62?"-":"_"},"")}(),a.set("clientId",b)),b},a.prototype.update=function(){return e(this,void 0,void 0,function(){var a,b,c,d,e,g=this;return f(this,function(f){return this.activeSurveyId||(a=this.options,b=a.forceShowSurveyId,c=a.checkBeforeUpdate,d=void 0===c?function(){return Promise.resolve()}:c,e=this.surveyLoaders.find(function(a){return a.id===b}),this.activeSurveyId=d().then(function(){return e?e.update(!0):g.surveyLoaders.reduce(function(a,b){return a.catch(function(){return b.update()})},Promise.reject())}),this.activeSurveyId.catch(function(){g.resetActiveSurveyId()})),[2,this.activeSurveyId]})})},a.prototype.close=function(){return e(this,void 0,void 0,function(){var a,b;return f(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.activeSurveyId];case 1:return a=c.sent(),null==(b=this.surveyLoaders.find(function(b){return b.id===a}))||b.close(),this.resetActiveSurveyId(),[3,3];case 2:return c.sent(),[3,3];case 3:return[2]}})})},a.prototype.setDarkTheme=function(a){this.surveyLoaders.forEach(function(b){b.setDarkTheme(a)})},a.prototype.observe=function(a){void 0===a&&(a=3e4),this.isObserving||(this.isObserving=!0,this.observerTick(a))},a.prototype.disconnect=function(){clearTimeout(this.observerTimeoutId),this.observerTimeoutId=void 0,this.isObserving=!1},a.prototype.isVisible=function(){return e(this,void 0,void 0,function(){return f(this,function(a){return this.activeSurveyId?[2,this.activeSurveyId.then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},a.prototype.forceShowSurvey=function(a){return e(this,void 0,void 0,function(){var b;return f(this,function(c){switch(c.label){case 0:return(b=this.surveyLoaders.find(function(b){return b.id===a}))?[4,this.close()]:[2,Promise.reject("survey_does_not_exist")];case 1:return c.sent(),this.activeSurveyId=b.update(!0),[2,this.activeSurveyId]}})})},a.prototype.observerTick=function(a){var b=this;this.update().catch(function(){}).finally(function(){try{window.__DEBUG_CSAT_UPDATED=1}catch(a){}b.isObserving&&(b.observerTimeoutId=setTimeout(function(){b.observerTick(a)},a))})},a.prototype.resetActiveSurveyId=function(){this.activeSurveyId=null,this.lastShowCheck=new Map,this.lastAnswerCheck=new Map},a.prototype.checkLastShow=function(a){var b=this.getQuarantineProps(a),c=b.surveyId,d=b.noDelay,e=b.excludeFromCommonQuarantine,f=b.surveysByQuarantineIdsWithCurrentFilter,g=this.options.ignoreShowInOneDay;if(this.lastShowCheck.get(c))return this.lastShowCheck.get(c);var h=this.options.quarantine,i=(void 0===h?{}:h).quarantineByShowDays;if(d)return!1;var j=e||f.every(function(a){return a.checkLastShow(i)}),k=g||j&&this.surveyLoaders.every(function(a){return a.checkLastShow(1)});return this.lastShowCheck.set(c,j&&k),k},a.prototype.checkLastAnswer=function(a){return e(this,void 0,void 0,function(){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q;return f(this,function(f){switch(f.label){case 0:return b=this.getQuarantineProps(a),c=b.surveyId,d=b.repeatAfter,e=b.noDelay,g=b.quarantineIdsWithCurrent,h=b.allIds,i=b.surveyIds,this.lastAnswerCheck.get(c)?[2,this.lastAnswerCheck.get(c)]:e?(this.lastAnswerCheck.set(c,!1),[2,!1]):(j=this.options.surveyLoaderOptions||{},k=j.email,l=j.clientId,m=new Jb(null!=k?k:l,i.join(":")),n="lastVotedDate",o=m.get(n),p=o?JSON.parse(o):{},null===o||Tb(Mc(p,g),d)?(this.sendRadar(Rb.ApiFetchLastVotedDateGroup),[4,this.surveyService.fetchLastVotedDateForGroup({survey_ids:h,email:k,client_id:l})]):[3,2]);case 1:p=f.sent(),m.set(n,JSON.stringify(p)),f.label=2;case 2:return q=Tb(Mc(p,g),d),this.lastAnswerCheck.set(c,q),[2,q]}})})},a.prototype.checkSurveyBeforeJigurda=function(a){return e(this,void 0,void 0,function(){return f(this,function(b){return this.checkLastShow(a)?[2]:[2,Promise.reject("last_show_check_before_jigurda_fail")]})})},a.prototype.checkSurveyBeforeShow=function(a){return e(this,void 0,void 0,function(){return f(this,function(b){switch(b.label){case 0:return[4,this.checkLastAnswer(a)];case 1:return b.sent()?[2]:[2,Promise.reject("last_answer_check_fail")]}})})},a.prototype.sendRadar=function(a){var b=this.options.surveyLoaderOptions||{},c=b.radar,d=b.dryRun;null==c||c(a,{userId:this.getUserId(),dryRun:d})},a.prototype.getUserId=function(){var a,b=this.options.surveyLoaderOptions||{},c=b.email,d=b.clientId;return null!==(a=null!=c?c:d)&&void 0!==a?a:""},a.prototype.getQuarantineProps=function(a){var b,c,d=a.surveyId;if(this.quarantinePropsSet.has(d))return this.quarantinePropsSet.get(d);var e=!!a.repeatAfterDays||!!a.showAfterDays,f=this.options.quarantine,h=void 0===f?{}:f,i=h.quarantineByAnswerDays,j=h.quarantineByShowDays,k=h.quarantineIds,l=j,m=i;e&&(l=null!==(b=a.showAfterDays)&&void 0!==b?b:a.repeatAfterDays,m=null!==(c=a.repeatAfterDays)&&void 0!==c?c:a.showAfterDays);var n=!l||!m||!k&&!e,o=this.surveys.map(function(a){return a.surveyId}),p=Array.from(new Set(g(g(g([],k||[],!0),o,!0),[d],!1))),q=e?[d]:Array.from(new Set(g(g([],k,!0),[d],!1))),r=this.surveyLoaders.filter(function(a){var b=a.id;return q.includes(b)}),s={showAfter:l,repeatAfter:m,noDelay:n,excludeFromCommonQuarantine:e,surveyId:d,quarantineByAnswerDays:i,quarantineIds:k,allIds:p,surveyIds:o,quarantineIdsWithCurrent:q,surveysByQuarantineIdsWithCurrentFilter:r};return this.quarantinePropsSet.set(d,s),s},a}();a.default=Nc,Object.defineProperty(a,"__esModule",{value:!0})});var __assign=this&&this.__assign||function(){__assign=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e]}return a};return __assign.apply(this,arguments)};var __awaiter=this&&this.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})};var __generator=this&&this.__generator||function(a,b){var c={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,e,f,g;return g={next:h(0),throw:h(1),return:h(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function h(a){return function(b){return i([a,b])}}function i(g){if(d)throw new TypeError("Generator is already executing.");while(c)try{if(d=1,e&&(f=g[0]&2?e["return"]:g[0]?e["throw"]||((f=e["return"])&&f.call(e),0):e.next)&&!(f=f.call(e,g[1])).done)return f;if(e=0,f)g=[g[0]&2,f.value];switch(g[0]){case 0:case 1:f=g;break;case 4:c.label++;return{value:g[1],done:false};case 5:c.label++;e=g[1];g=[0];continue;case 7:g=c.ops.pop();c.trys.pop();continue;default:if(!(f=c.trys,f=f.length>0&&f[f.length-1])&&(g[0]===6||g[0]===2)){c=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){c.label=g[1];break}if(g[0]===6&&c.label<f[1]){c.label=f[1];f=g;break}if(f&&c.label<f[2]){c.label=f[2];c.ops.push(g);break}if(f[2])c.ops.pop();c.trys.pop();continue}g=b.call(a,c)}catch(a){g=[6,a];e=0}finally{d=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:true}}};var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("service/feedback",["require","exports","@mail/features","@mail/feedback-loader/EventsLogger","@mail/feedback-loader/FeedbackLoader","@mail/flags","@mail/xray","default-values","helpers/deferred","helpers/getCurrentTimestamp","service/promo"],function(require,exports,a,b,c,d,e,f,g,h,i){"use strict";Object.defineProperty(exports,"__esModule",{value:true});a=__importDefault(a);b=__importDefault(b);c=__importDefault(c);d=__importDefault(d);e=__importDefault(e);g=__importDefault(g);i=__importDefault(i);var j=function(){function j(d,g,h){var k=this;this.eventsLogger=new b.default;this.handleXraySend=function(a,b,c){var d=(f.CSAT_TRIGGERS.find(function(b){return b===null||b===void 0?void 0:b.radars.includes(a)})||{}).event;if(d){k.eventsLogger.push(d)}return{t:a,params:b,sendGa:c}};if(j.instance){return j.instance}j.instance=this;j.instanceDeferred.resolve(this);var l={};if(f.CSAT_ANIMATION){l={openedClassName:"notify-stack_iframe-open",loadedClassName:"notify-stack_iframe-load"}}this.feedbackLoader=new c.default(f.CSAT_SURVEYS.surveys,{forceShowSurveyId:f.CSAT_FORCE_SHOW_SURVEY_ID,quarantine:f.CSAT_SURVEYS.quarantine,surveyLoaderOptions:{email:d,dryRun:f.CSAT_DRY_RUN,radar:e.default.send,checkFeature:a.default.has,eventsLogger:this.eventsLogger,frameLoaderOptions:__assign({domain:f.CSAT_DOMAIN,darkTheme:g,theme:f.CSAT_THEME,styles:h?{position:"static",margin:"8px 0"}:{zIndex:"9001"},successHideTimeout:f.CSAT_SUCCESS_HIDE_TIMEOUT,rootElement:h},l)},checkBeforeUpdate:function(){return __awaiter(k,void 0,void 0,function(){return __generator(this,function(a){switch(a.label){case 0:return[4,i.default.isNotifyVisible()];case 1:if(a.sent()){return[2,Promise.reject("promo_notify_is_visible")]}return[2]}})})}})}j.prototype.init=function(){if(this.isDisabled()){return}e.default.addMiddleware(this.handleXraySend);this.feedbackLoader.observe(f.CSAT_TICK_TIMEOUT)};j.prototype.setDarkTheme=function(a){var b;(b=this.feedbackLoader)===null||b===void 0?void 0:b.setDarkTheme(a)};j.prototype.isVisible=function(){return this.feedbackLoader.isVisible()};j.prototype.forceShowSurvey=function(a){return this.feedbackLoader.forceShowSurvey(a)};j.prototype.isDisabled=function(){if(f.CSAT_DISABLED){return true}var a=d.default.get("octavius");var b=(0,h.getCurrentTimestamp)();return!!a&&a.isActive()&&a.getTimeDelta(b)<f.CSAT_AFTER_REG_DELAY_IN_SECONDS};j.instance=null;j.instanceDeferred=new g.default;return j}();exports.default=j});define("feast-tpl!app/feast-tpl!ui-block/letters-divider/letters-divider.html",["feast"],function(a){return a.smartParse('<div>\n\t<b:react-async\n\t\tcomponent="LettersDivider"\n\t\ttitle="{attrs.title}"\n\t\tcounter="{attrs.counter}"\n\t\tponyMode="{attrs.ponyMode}"\n\t\tcompact="{attrs.compact}"\n\t\tfit="{attrs.fit}"\n\t\tmeta="{attrs.meta}"\n\t\tid="{attrs.id}"\n\t/>\n</div>\n',"app/feast-tpl!ui-block/letters-divider/letters-divider.html")});define("feast-tpl!ui-block/letters-divider/letters-divider.html",["feast-tpl!app/feast-tpl!ui-block/letters-divider/letters-divider.html"],function(a){return a});var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};define("ui-block/letters-divider/letters-divider",["require","exports","feast","feast-tpl!./letters-divider.html","ui-block/react-async/react-async"],function(require,exports,a,b,c){"use strict";Object.defineProperty(exports,"__esModule",{value:true});a=__importDefault(a);b=__importDefault(b);c=__importDefault(c);exports.default=a.default.Block.extend({name:"letters-divider",template:b.default,blocks:{"react-async":c.default}})});!function(a,b){if("object"==typeof exports&&"object"==typeof module)module.exports=b(require("@mail/features"),require("@mail/flags"),require("@mail/operands"),require("@mail/vkui"),require("@mail/vkui/2kit"),require("@mail/xray"),require("Emitter"),require("RPC"),require("Transaction"),require("cfg"),require("cfgUser"),require("data-source/store/letter-action/actions"),require("data-source/store/letter-action/getters"),require("data-source/store/letter-action/types"),require("data-source/store/user/account/getters"),require("data-source/store/user/fakedoor/actions"),require("data-source/store/user/fakedoor/state"),require("data-source/store/vk-overlay/actions"),require("data-source/store/vk-overlay/getters"),require("data-source/store/vk-overlay/state"),require("data-source/store/vk-overlay/types"),require("data-source/utils/letter-list-virtualization"),require("default-values"),require("feast"),require("feast-mod/correspondents"),require("feast-mod/letter-date"),require("feast-mod/utils"),require("helpers/aboutAd"),require("helpers/advert-vis-check"),require("helpers/allread-button-visible"),require("helpers/browser"),require("helpers/date-alias"),require("helpers/date-range"),require("helpers/get-adaptive"),require("helpers/get-avatar-path"),require("helpers/get-go-to-action-display-mode"),require("helpers/get-oauth"),require("helpers/get-selected-stats"),require("helpers/languages"),require("helpers/lazy"),require("helpers/letter"),require("helpers/metathreads"),require("helpers/once"),require("helpers/opener"),require("helpers/plural"),require("helpers/querystring-add"),require("helpers/radar-utils"),require("helpers/rb"),require("helpers/setImmortalInterval"),require("helpers/setImmortalTimeout"),require("helpers/smime-attachments-metrics"),require("helpers/subscribe-notify"),require("icons"),require("lazy.modules"),require("logger"),require("mail/Folder"),require("mail/Message"),require("mail/Thread"),require("mail/User"),require("mail/actions/ContactSuggests"),require("mail/getters/MessageMeta"),require("mediator/folders-navigation/utils"),require("mediator/layout-manager"),require("mediator/layout-manager/vars"),require("mediator/marusia-manager"),require("mediator/todo-manager/consts"),require("mediator/todo-manager/todo-manager"),require("mediator/user-info"),require("mobx"),require("mobx-react"),require("mobx-state-tree"),require("models/adv-letter/adv-letter"),require("models/bait-letter/bait-letter"),require("models/letters-list-divider/letters-list-divider"),require("models/promo-block-letter/promo-block-letter"),require("models/search-action-letter/search-action-letter"),require("models/spec-project-letter/spec-project-letter"),require("models/spinner-letter/spinner-letter"),require("models/tip-letter/tip-letter"),require("octavius-public/service/vkMessengerLoader"),require("prop-types"),require("react"),require("react-dom"),require("router"),require("service/auth"),require("service/compose"),require("service/emoji"),require("service/feedback"),require("service/fishing"),require("service/getModule"),require("service/layer"),require("service/notify"),require("service/promo"),require("service/radars/index"),require("service/search-attaches/attachesList"),require("service/search-attaches/getAttaches"),require("service/search-attaches/utils"),require("service/search-attaches/viewModes"),require("service/secure-folder"),require("service/smokescreen"),require("service/storage"),require("service/themes.setup"),require("service/todo"),require("state-tree/search-operand/utils"),require("state-tree/search-response/search-response"),require("state-tree/search/utils"),require("ui-block/attach-list/attach-list"),require("ui-block/avatar/avatar"),require("ui-block/button2/button2"),require("ui-block/calendar-button/calendar-button"),require("ui-block/category-feedback/category-feedback"),require("ui-block/checkbox/checkbox"),require("ui-block/contextmenu-folder/contextmenu-folder"),require("ui-block/dataset-letters/dataset-letters"),require("ui-block/dataset/dataset"),require("ui-block/delimeter/delimeter"),require("ui-block/discounts/discounts"),require("ui-block/dropdown-actions/dropdown-actions"),require("ui-block/html-parser/html-parser"),require("ui-block/ico/ico"),require("ui-block/letter-blockquote/letter-blockquote"),require("ui-block/letter-body-amp/letter-body-amp"),require("ui-block/letter-body/letter-body"),require("ui-block/letter-calendar/letter-calendar"),require("ui-block/letter-category/letter-category"),require("ui-block/letter-confirm-receipt/letter-confirm-receipt"),require("ui-block/letter-contact/letter-contact"),require("ui-block/letter-list-item-adv/letter-list-item-adv"),require("ui-block/letter-list-item-placeholder/letter-list-item-placeholder"),require("ui-block/letter-list-item/letter-list-item"),require("ui-block/letter-meta/letter-meta"),require("ui-block/letter-status2/letter-status2"),require("ui-block/letter-tooltip/letter-tooltip"),require("ui-block/letter/letter"),require("ui-block/letters-divider/letters-divider"),require("ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview"),require("ui-block/list-letter-attach-status/list-letter-attach-status"),require("ui-block/list-letter-badge/list-letter-badge"),require("ui-block/list-letter-bait/list-letter-bait"),require("ui-block/list-letter-common/list-letter-abstract"),require("ui-block/list-letter-common/list-letter-abstract-payment-die"),require("ui-block/list-letter-folder/list-letter-folder"),require("ui-block/list-letter-height-compensation/list-letter-height-compensation"),require("ui-block/list-letter-order/list-letter-abstract-order"),require("ui-block/list-letter-order/list-letter-order"),require("ui-block/list-letter-payment-button/list-letter-payment-button"),require("ui-block/list-letter-payment-die/list-letter-payment-die"),require("ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die"),require("ui-block/list-letter-preview-action/list-letter-preview-action"),require("ui-block/list-letter-preview-attaches/list-letter-preview-attaches"),require("ui-block/list-letter-preview-stub/list-letter-preview-stub"),require("ui-block/list-letter-read-status/list-letter-read-status"),require("ui-block/list-letter-schedule-status/list-letter-schedule-status"),require("ui-block/list-letter-skeleton/list-letter-skeleton"),require("ui-block/list-letter-snippet/list-letter-snippet"),require("ui-block/list-letter-spinner/list-letter-spinner"),require("ui-block/list-letter-subject/list-letter-subject"),require("ui-block/list-letter-tip/list-letter-tip"),require("ui-block/list-letter-unsubscribe/list-letter-unsubscribe"),require("ui-block/list-letter-welcome/list-letter-welcome"),require("ui-block/marusia-read-letter-button/marusia-read-letter-button"),require("ui-block/metathread-footer/metathread-footer"),require("ui-block/metathread-head-common/metathread-head-common"),require("ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded"),require("ui-block/metathread-head-compact/metathread-head-compact"),require("ui-block/metathread/metathread"),require("ui-block/nav-folders/nav-folders"),require("ui-block/notification-badge/notification-badge"),require("ui-block/octopus/octopus"),require("ui-block/portal-menu-element/portal-menu-element"),require("ui-block/portal-menu/portal-menu"),require("ui-block/promo-block-letter/promo-block-letter"),require("ui-block/promo-domain-die/promo-domain-die"),require("ui-block/search-panel-button/search-panel-button"),require("ui-block/search-panel/search-panel"),require("ui-block/spec-project-letter/spec-project-letter"),require("ui-block/swipeable/swipeable"),require("ui-block/thread/thread"),require("ui-block/translator/translator"),require("utils/util"));else if("function"==typeof define&&define.amd)define("ui-react",["@mail/features","@mail/flags","@mail/operands","@mail/vkui","@mail/vkui/2kit","@mail/xray","Emitter","RPC","Transaction","cfg","cfgUser","data-source/store/letter-action/actions","data-source/store/letter-action/getters","data-source/store/letter-action/types","data-source/store/user/account/getters","data-source/store/user/fakedoor/actions","data-source/store/user/fakedoor/state","data-source/store/vk-overlay/actions","data-source/store/vk-overlay/getters","data-source/store/vk-overlay/state","data-source/store/vk-overlay/types","data-source/utils/letter-list-virtualization","default-values","feast","feast-mod/correspondents","feast-mod/letter-date","feast-mod/utils","helpers/aboutAd","helpers/advert-vis-check","helpers/allread-button-visible","helpers/browser","helpers/date-alias","helpers/date-range","helpers/get-adaptive","helpers/get-avatar-path","helpers/get-go-to-action-display-mode","helpers/get-oauth","helpers/get-selected-stats","helpers/languages","helpers/lazy","helpers/letter","helpers/metathreads","helpers/once","helpers/opener","helpers/plural","helpers/querystring-add","helpers/radar-utils","helpers/rb","helpers/setImmortalInterval","helpers/setImmortalTimeout","helpers/smime-attachments-metrics","helpers/subscribe-notify","icons","lazy.modules","logger","mail/Folder","mail/Message","mail/Thread","mail/User","mail/actions/ContactSuggests","mail/getters/MessageMeta","mediator/folders-navigation/utils","mediator/layout-manager","mediator/layout-manager/vars","mediator/marusia-manager","mediator/todo-manager/consts","mediator/todo-manager/todo-manager","mediator/user-info","mobx","mobx-react","mobx-state-tree","models/adv-letter/adv-letter","models/bait-letter/bait-letter","models/letters-list-divider/letters-list-divider","models/promo-block-letter/promo-block-letter","models/search-action-letter/search-action-letter","models/spec-project-letter/spec-project-letter","models/spinner-letter/spinner-letter","models/tip-letter/tip-letter","octavius-public/service/vkMessengerLoader","prop-types","react","react-dom","router","service/auth","service/compose","service/emoji","service/feedback","service/fishing","service/getModule","service/layer","service/notify","service/promo","service/radars/index","service/search-attaches/attachesList","service/search-attaches/getAttaches","service/search-attaches/utils","service/search-attaches/viewModes","service/secure-folder","service/smokescreen","service/storage","service/themes.setup","service/todo","state-tree/search-operand/utils","state-tree/search-response/search-response","state-tree/search/utils","ui-block/attach-list/attach-list","ui-block/avatar/avatar","ui-block/button2/button2","ui-block/calendar-button/calendar-button","ui-block/category-feedback/category-feedback","ui-block/checkbox/checkbox","ui-block/contextmenu-folder/contextmenu-folder","ui-block/dataset-letters/dataset-letters","ui-block/dataset/dataset","ui-block/delimeter/delimeter","ui-block/discounts/discounts","ui-block/dropdown-actions/dropdown-actions","ui-block/html-parser/html-parser","ui-block/ico/ico","ui-block/letter-blockquote/letter-blockquote","ui-block/letter-body-amp/letter-body-amp","ui-block/letter-body/letter-body","ui-block/letter-calendar/letter-calendar","ui-block/letter-category/letter-category","ui-block/letter-confirm-receipt/letter-confirm-receipt","ui-block/letter-contact/letter-contact","ui-block/letter-list-item-adv/letter-list-item-adv","ui-block/letter-list-item-placeholder/letter-list-item-placeholder","ui-block/letter-list-item/letter-list-item","ui-block/letter-meta/letter-meta","ui-block/letter-status2/letter-status2","ui-block/letter-tooltip/letter-tooltip","ui-block/letter/letter","ui-block/letters-divider/letters-divider","ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview","ui-block/list-letter-attach-status/list-letter-attach-status","ui-block/list-letter-badge/list-letter-badge","ui-block/list-letter-bait/list-letter-bait","ui-block/list-letter-common/list-letter-abstract","ui-block/list-letter-common/list-letter-abstract-payment-die","ui-block/list-letter-folder/list-letter-folder","ui-block/list-letter-height-compensation/list-letter-height-compensation","ui-block/list-letter-order/list-letter-abstract-order","ui-block/list-letter-order/list-letter-order","ui-block/list-letter-payment-button/list-letter-payment-button","ui-block/list-letter-payment-die/list-letter-payment-die","ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die","ui-block/list-letter-preview-action/list-letter-preview-action","ui-block/list-letter-preview-attaches/list-letter-preview-attaches","ui-block/list-letter-preview-stub/list-letter-preview-stub","ui-block/list-letter-read-status/list-letter-read-status","ui-block/list-letter-schedule-status/list-letter-schedule-status","ui-block/list-letter-skeleton/list-letter-skeleton","ui-block/list-letter-snippet/list-letter-snippet","ui-block/list-letter-spinner/list-letter-spinner","ui-block/list-letter-subject/list-letter-subject","ui-block/list-letter-tip/list-letter-tip","ui-block/list-letter-unsubscribe/list-letter-unsubscribe","ui-block/list-letter-welcome/list-letter-welcome","ui-block/marusia-read-letter-button/marusia-read-letter-button","ui-block/metathread-footer/metathread-footer","ui-block/metathread-head-common/metathread-head-common","ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded","ui-block/metathread-head-compact/metathread-head-compact","ui-block/metathread/metathread","ui-block/nav-folders/nav-folders","ui-block/notification-badge/notification-badge","ui-block/octopus/octopus","ui-block/portal-menu-element/portal-menu-element","ui-block/portal-menu/portal-menu","ui-block/promo-block-letter/promo-block-letter","ui-block/promo-domain-die/promo-domain-die","ui-block/search-panel-button/search-panel-button","ui-block/search-panel/search-panel","ui-block/spec-project-letter/spec-project-letter","ui-block/swipeable/swipeable","ui-block/thread/thread","ui-block/translator/translator","utils/util"],b);else{var c="object"==typeof exports?b(require("@mail/features"),require("@mail/flags"),require("@mail/operands"),require("@mail/vkui"),require("@mail/vkui/2kit"),require("@mail/xray"),require("Emitter"),require("RPC"),require("Transaction"),require("cfg"),require("cfgUser"),require("data-source/store/letter-action/actions"),require("data-source/store/letter-action/getters"),require("data-source/store/letter-action/types"),require("data-source/store/user/account/getters"),require("data-source/store/user/fakedoor/actions"),require("data-source/store/user/fakedoor/state"),require("data-source/store/vk-overlay/actions"),require("data-source/store/vk-overlay/getters"),require("data-source/store/vk-overlay/state"),require("data-source/store/vk-overlay/types"),require("data-source/utils/letter-list-virtualization"),require("default-values"),require("feast"),require("feast-mod/correspondents"),require("feast-mod/letter-date"),require("feast-mod/utils"),require("helpers/aboutAd"),require("helpers/advert-vis-check"),require("helpers/allread-button-visible"),require("helpers/browser"),require("helpers/date-alias"),require("helpers/date-range"),require("helpers/get-adaptive"),require("helpers/get-avatar-path"),require("helpers/get-go-to-action-display-mode"),require("helpers/get-oauth"),require("helpers/get-selected-stats"),require("helpers/languages"),require("helpers/lazy"),require("helpers/letter"),require("helpers/metathreads"),require("helpers/once"),require("helpers/opener"),require("helpers/plural"),require("helpers/querystring-add"),require("helpers/radar-utils"),require("helpers/rb"),require("helpers/setImmortalInterval"),require("helpers/setImmortalTimeout"),require("helpers/smime-attachments-metrics"),require("helpers/subscribe-notify"),require("icons"),require("lazy.modules"),require("logger"),require("mail/Folder"),require("mail/Message"),require("mail/Thread"),require("mail/User"),require("mail/actions/ContactSuggests"),require("mail/getters/MessageMeta"),require("mediator/folders-navigation/utils"),require("mediator/layout-manager"),require("mediator/layout-manager/vars"),require("mediator/marusia-manager"),require("mediator/todo-manager/consts"),require("mediator/todo-manager/todo-manager"),require("mediator/user-info"),require("mobx"),require("mobx-react"),require("mobx-state-tree"),require("models/adv-letter/adv-letter"),require("models/bait-letter/bait-letter"),require("models/letters-list-divider/letters-list-divider"),require("models/promo-block-letter/promo-block-letter"),require("models/search-action-letter/search-action-letter"),require("models/spec-project-letter/spec-project-letter"),require("models/spinner-letter/spinner-letter"),require("models/tip-letter/tip-letter"),require("octavius-public/service/vkMessengerLoader"),require("prop-types"),require("react"),require("react-dom"),require("router"),require("service/auth"),require("service/compose"),require("service/emoji"),require("service/feedback"),require("service/fishing"),require("service/getModule"),require("service/layer"),require("service/notify"),require("service/promo"),require("service/radars/index"),require("service/search-attaches/attachesList"),require("service/search-attaches/getAttaches"),require("service/search-attaches/utils"),require("service/search-attaches/viewModes"),require("service/secure-folder"),require("service/smokescreen"),require("service/storage"),require("service/themes.setup"),require("service/todo"),require("state-tree/search-operand/utils"),require("state-tree/search-response/search-response"),require("state-tree/search/utils"),require("ui-block/attach-list/attach-list"),require("ui-block/avatar/avatar"),require("ui-block/button2/button2"),require("ui-block/calendar-button/calendar-button"),require("ui-block/category-feedback/category-feedback"),require("ui-block/checkbox/checkbox"),require("ui-block/contextmenu-folder/contextmenu-folder"),require("ui-block/dataset-letters/dataset-letters"),require("ui-block/dataset/dataset"),require("ui-block/delimeter/delimeter"),require("ui-block/discounts/discounts"),require("ui-block/dropdown-actions/dropdown-actions"),require("ui-block/html-parser/html-parser"),require("ui-block/ico/ico"),require("ui-block/letter-blockquote/letter-blockquote"),require("ui-block/letter-body-amp/letter-body-amp"),require("ui-block/letter-body/letter-body"),require("ui-block/letter-calendar/letter-calendar"),require("ui-block/letter-category/letter-category"),require("ui-block/letter-confirm-receipt/letter-confirm-receipt"),require("ui-block/letter-contact/letter-contact"),require("ui-block/letter-list-item-adv/letter-list-item-adv"),require("ui-block/letter-list-item-placeholder/letter-list-item-placeholder"),require("ui-block/letter-list-item/letter-list-item"),require("ui-block/letter-meta/letter-meta"),require("ui-block/letter-status2/letter-status2"),require("ui-block/letter-tooltip/letter-tooltip"),require("ui-block/letter/letter"),require("ui-block/letters-divider/letters-divider"),require("ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview"),require("ui-block/list-letter-attach-status/list-letter-attach-status"),require("ui-block/list-letter-badge/list-letter-badge"),require("ui-block/list-letter-bait/list-letter-bait"),require("ui-block/list-letter-common/list-letter-abstract"),require("ui-block/list-letter-common/list-letter-abstract-payment-die"),require("ui-block/list-letter-folder/list-letter-folder"),require("ui-block/list-letter-height-compensation/list-letter-height-compensation"),require("ui-block/list-letter-order/list-letter-abstract-order"),require("ui-block/list-letter-order/list-letter-order"),require("ui-block/list-letter-payment-button/list-letter-payment-button"),require("ui-block/list-letter-payment-die/list-letter-payment-die"),require("ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die"),require("ui-block/list-letter-preview-action/list-letter-preview-action"),require("ui-block/list-letter-preview-attaches/list-letter-preview-attaches"),require("ui-block/list-letter-preview-stub/list-letter-preview-stub"),require("ui-block/list-letter-read-status/list-letter-read-status"),require("ui-block/list-letter-schedule-status/list-letter-schedule-status"),require("ui-block/list-letter-skeleton/list-letter-skeleton"),require("ui-block/list-letter-snippet/list-letter-snippet"),require("ui-block/list-letter-spinner/list-letter-spinner"),require("ui-block/list-letter-subject/list-letter-subject"),require("ui-block/list-letter-tip/list-letter-tip"),require("ui-block/list-letter-unsubscribe/list-letter-unsubscribe"),require("ui-block/list-letter-welcome/list-letter-welcome"),require("ui-block/marusia-read-letter-button/marusia-read-letter-button"),require("ui-block/metathread-footer/metathread-footer"),require("ui-block/metathread-head-common/metathread-head-common"),require("ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded"),require("ui-block/metathread-head-compact/metathread-head-compact"),require("ui-block/metathread/metathread"),require("ui-block/nav-folders/nav-folders"),require("ui-block/notification-badge/notification-badge"),require("ui-block/octopus/octopus"),require("ui-block/portal-menu-element/portal-menu-element"),require("ui-block/portal-menu/portal-menu"),require("ui-block/promo-block-letter/promo-block-letter"),require("ui-block/promo-domain-die/promo-domain-die"),require("ui-block/search-panel-button/search-panel-button"),require("ui-block/search-panel/search-panel"),require("ui-block/spec-project-letter/spec-project-letter"),require("ui-block/swipeable/swipeable"),require("ui-block/thread/thread"),require("ui-block/translator/translator"),require("utils/util")):b(a["@mail/features"],a["@mail/flags"],a["@mail/operands"],a["@mail/vkui"],a["@mail/vkui/2kit"],a["@mail/xray"],a.Emitter,a.RPC,a.Transaction,a.cfg,a.cfgUser,a["data-source/store/letter-action/actions"],a["data-source/store/letter-action/getters"],a["data-source/store/letter-action/types"],a["data-source/store/user/account/getters"],a["data-source/store/user/fakedoor/actions"],a["data-source/store/user/fakedoor/state"],a["data-source/store/vk-overlay/actions"],a["data-source/store/vk-overlay/getters"],a["data-source/store/vk-overlay/state"],a["data-source/store/vk-overlay/types"],a["data-source/utils/letter-list-virtualization"],a["default-values"],a.feast,a["feast-mod/correspondents"],a["feast-mod/letter-date"],a["feast-mod/utils"],a["helpers/aboutAd"],a["helpers/advert-vis-check"],a["helpers/allread-button-visible"],a["helpers/browser"],a["helpers/date-alias"],a["helpers/date-range"],a["helpers/get-adaptive"],a["helpers/get-avatar-path"],a["helpers/get-go-to-action-display-mode"],a["helpers/get-oauth"],a["helpers/get-selected-stats"],a["helpers/languages"],a["helpers/lazy"],a["helpers/letter"],a["helpers/metathreads"],a["helpers/once"],a["helpers/opener"],a["helpers/plural"],a["helpers/querystring-add"],a["helpers/radar-utils"],a["helpers/rb"],a["helpers/setImmortalInterval"],a["helpers/setImmortalTimeout"],a["helpers/smime-attachments-metrics"],a["helpers/subscribe-notify"],a.icons,a["lazy.modules"],a.logger,a["mail/Folder"],a["mail/Message"],a["mail/Thread"],a["mail/User"],a["mail/actions/ContactSuggests"],a["mail/getters/MessageMeta"],a["mediator/folders-navigation/utils"],a["mediator/layout-manager"],a["mediator/layout-manager/vars"],a["mediator/marusia-manager"],a["mediator/todo-manager/consts"],a["mediator/todo-manager/todo-manager"],a["mediator/user-info"],a.mobx,a["mobx-react"],a["mobx-state-tree"],a["models/adv-letter/adv-letter"],a["models/bait-letter/bait-letter"],a["models/letters-list-divider/letters-list-divider"],a["models/promo-block-letter/promo-block-letter"],a["models/search-action-letter/search-action-letter"],a["models/spec-project-letter/spec-project-letter"],a["models/spinner-letter/spinner-letter"],a["models/tip-letter/tip-letter"],a["octavius-public/service/vkMessengerLoader"],a["prop-types"],a.react,a["react-dom"],a.router,a["service/auth"],a["service/compose"],a["service/emoji"],a["service/feedback"],a["service/fishing"],a["service/getModule"],a["service/layer"],a["service/notify"],a["service/promo"],a["service/radars/index"],a["service/search-attaches/attachesList"],a["service/search-attaches/getAttaches"],a["service/search-attaches/utils"],a["service/search-attaches/viewModes"],a["service/secure-folder"],a["service/smokescreen"],a["service/storage"],a["service/themes.setup"],a["service/todo"],a["state-tree/search-operand/utils"],a["state-tree/search-response/search-response"],a["state-tree/search/utils"],a["ui-block/attach-list/attach-list"],a["ui-block/avatar/avatar"],a["ui-block/button2/button2"],a["ui-block/calendar-button/calendar-button"],a["ui-block/category-feedback/category-feedback"],a["ui-block/checkbox/checkbox"],a["ui-block/contextmenu-folder/contextmenu-folder"],a["ui-block/dataset-letters/dataset-letters"],a["ui-block/dataset/dataset"],a["ui-block/delimeter/delimeter"],a["ui-block/discounts/discounts"],a["ui-block/dropdown-actions/dropdown-actions"],a["ui-block/html-parser/html-parser"],a["ui-block/ico/ico"],a["ui-block/letter-blockquote/letter-blockquote"],a["ui-block/letter-body-amp/letter-body-amp"],a["ui-block/letter-body/letter-body"],a["ui-block/letter-calendar/letter-calendar"],a["ui-block/letter-category/letter-category"],a["ui-block/letter-confirm-receipt/letter-confirm-receipt"],a["ui-block/letter-contact/letter-contact"],a["ui-block/letter-list-item-adv/letter-list-item-adv"],a["ui-block/letter-list-item-placeholder/letter-list-item-placeholder"],a["ui-block/letter-list-item/letter-list-item"],a["ui-block/letter-meta/letter-meta"],a["ui-block/letter-status2/letter-status2"],a["ui-block/letter-tooltip/letter-tooltip"],a["ui-block/letter/letter"],a["ui-block/letters-divider/letters-divider"],a["ui-block/list-letter-attach-status-preview/list-letter-attach-status-preview"],a["ui-block/list-letter-attach-status/list-letter-attach-status"],a["ui-block/list-letter-badge/list-letter-badge"],a["ui-block/list-letter-bait/list-letter-bait"],a["ui-block/list-letter-common/list-letter-abstract"],a["ui-block/list-letter-common/list-letter-abstract-payment-die"],a["ui-block/list-letter-folder/list-letter-folder"],a["ui-block/list-letter-height-compensation/list-letter-height-compensation"],a["ui-block/list-letter-order/list-letter-abstract-order"],a["ui-block/list-letter-order/list-letter-order"],a["ui-block/list-letter-payment-button/list-letter-payment-button"],a["ui-block/list-letter-payment-die/list-letter-payment-die"],a["ui-block/list-letter-payment-universal-die/list-letter-payment-universal-die"],a["ui-block/list-letter-preview-action/list-letter-preview-action"],a["ui-block/list-letter-preview-attaches/list-letter-preview-attaches"],a["ui-block/list-letter-preview-stub/list-letter-preview-stub"],a["ui-block/list-letter-read-status/list-letter-read-status"],a["ui-block/list-letter-schedule-status/list-letter-schedule-status"],a["ui-block/list-letter-skeleton/list-letter-skeleton"],a["ui-block/list-letter-snippet/list-letter-snippet"],a["ui-block/list-letter-spinner/list-letter-spinner"],a["ui-block/list-letter-subject/list-letter-subject"],a["ui-block/list-letter-tip/list-letter-tip"],a["ui-block/list-letter-unsubscribe/list-letter-unsubscribe"],a["ui-block/list-letter-welcome/list-letter-welcome"],a["ui-block/marusia-read-letter-button/marusia-read-letter-button"],a["ui-block/metathread-footer/metathread-footer"],a["ui-block/metathread-head-common/metathread-head-common"],a["ui-block/metathread-head-compact-expanded/metathread-head-compact-expanded"],a["ui-block/metathread-head-compact/metathread-head-compact"],a["ui-block/metathread/metathread"],a["ui-block/nav-folders/nav-folders"],a["ui-block/notification-badge/notification-badge"],a["ui-block/octopus/octopus"],a["ui-block/portal-menu-element/portal-menu-element"],a["ui-block/portal-menu/portal-menu"],a["ui-block/promo-block-letter/promo-block-letter"],a["ui-block/promo-domain-die/promo-domain-die"],a["ui-block/search-panel-button/search-panel-button"],a["ui-block/search-panel/search-panel"],a["ui-block/spec-project-letter/spec-project-letter"],a["ui-block/swipeable/swipeable"],a["ui-block/thread/thread"],a["ui-block/translator/translator"],a["utils/util"]);for(var d in c)("object"==typeof exports?exports:a)[d]=c[d]}}(self,function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc){return function(){var sc,tc,uc={8556:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Tag=void 0,function(a){a.Core="core",a.Global="gl",a.Self="self",a.Async="async",a.Ignore="ign",a.Known="known",a.API="api",a.Shared="shr",a.Ext="ext",a.ThirdParty="3rd",a.RB="rb",a.Unknown="unk"}(b.Tag||(b.Tag={}))},2204:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.coreLoggerHMR=b.coreLoggerDispatchKnownError=b.coreLoggerDispatchAPIError=b.coreLoggerDispatchIgnoredError=b.coreLoggerDispatchSelfError=b.coreLoggerDispatchReactError=b.coreLoggerDispatchError=b.getCoreLogger=b.Tag=void 0;var d=c(8556);Object.defineProperty(b,"Tag",{enumerable:!0,get:function(){return d.Tag}});b.getCoreLogger=function(){return"undefined"!=typeof coreLogger?coreLogger:void 0};b.coreLoggerDispatchError=function(a,c,d){var e;null===(e=(0,b.getCoreLogger)())||void 0===e||e.dispatchError(a,c,d)};b.coreLoggerDispatchReactError=function(a,c,d){var e;null===(e=(0,b.getCoreLogger)())||void 0===e||e.dispatchReactError(a,c,d)};b.coreLoggerDispatchSelfError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.Self,log:f})};b.coreLoggerDispatchIgnoredError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.Ignore,log:f})};b.coreLoggerDispatchAPIError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.API,log:f})};b.coreLoggerDispatchKnownError=function(a,c,e,f){(0,b.coreLoggerDispatchError)(c,e,{category:a,tag:d.Tag.Known,log:f})};b.coreLoggerHMR=function(a,c){var d=(0,b.getCoreLogger)();if(d){var e=d.errors.rules,f=d.errors.opts.errors,g=a.priority||[];if(e.set("clear"),f&&f.rules)e.set(f.rules),g.push.apply(g,[].concat(f.priority||Object.keys(f.rules)));if(c)e.set(c.rules),g.push.apply(g,c.priority||[]);e.set(a.rules),e.priority(g);try{d.pkg.v=process.env.PACKAGE_VERSION,localStorage.setItem(process.env.LOGGER_LS_PRESET_VER_KEY,process.env.PACKAGE_VERSION)}catch(a){}}}},5881:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){if(void 0===d)d=c;var e=Object.getOwnPropertyDescriptor(b,c);if(!e||("get"in e?!b.__esModule:e.writable||e.configurable))e={enumerable:!0,get:function(){return b[c]}};Object.defineProperty(a,d,e)}:function(a,b,c,d){if(void 0===d)d=c;a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)if("default"!==c&&!Object.prototype.hasOwnProperty.call(b,c))d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.createScopeEntry=b.createLogEntry=b.createLogger=b.octoLogger=b.logger=void 0,e(c(2204),b);var f=c(1862);Object.defineProperty(b,"logger",{enumerable:!0,get:function(){return f.logger}}),Object.defineProperty(b,"octoLogger",{enumerable:!0,get:function(){return f.octoLogger}}),Object.defineProperty(b,"createLogger",{enumerable:!0,get:function(){return f.createLogger}}),Object.defineProperty(b,"createLogEntry",{enumerable:!0,get:function(){return f.createLogEntry}}),Object.defineProperty(b,"createScopeEntry",{enumerable:!0,get:function(){return f.createScopeEntry}})},6947:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.browserFormat=b.resetFormatStyle=b.nodeFromat=b.createFormat=void 0;var d=c(6117),e=/:([^;]+)/g;function f(a,b){return function(c){return b(c,{base:a.level[c.level]||"",label:a.label[c.level]||""})}}b.createFormat=f,b.nodeFromat=f({level:{log:"[0m",info:"[34m",done:"[34m",warn:"[33m",error:"[31m",verbose:"[35m"},label:{log:"[4m",info:"[4m",done:"[4m",error:"[4m",warn:"[4m",verbose:"[4m"}},function(a,b){var c=[];if(null!=a.badge)c.push(a.badge);if(null!=a.label)c.push("".concat(b.base).concat(b.label).concat(a.label,"[0m"));if(null!=a.args)c.push.apply(c,a.args);if(null!==a.meta)c.push("".concat(a.meta.file,":").concat(a.meta.line,":").concat(a.meta.col));return c.push("[0m"),c});var g="text-decoration: underline; font-weight: bold;";function h(a){return a.replace(e,": inherit")}b.resetFormatStyle=h,b.browserFormat=f({level:{log:"color: #333;",info:"color: dodgerblue;",done:"color: #1aaa55;",warn:"color: orange;",error:"color: red;",verbose:"color: magenta;"},label:{log:g,info:g,done:g,warn:g,error:g,verbose:g}},function(a,b){var c=[],e=[],f=a.args;if(a.ts>0)e.push("%c[%s] "),c.push(b.base,(0,d.timeFormat)(a.ts));if(null!=a.badge)e.push("%s"),c.push(a.badge);if(null!=a.label)e.push("%c%s%c "),c.push(b.label+b.base,a.label,h(b.label));if(null!=f){var g=f.length;if(g>0){e.push("%c"),c.push(b.base);for(var i=0;i<g;i++){var j=f[i];e.push("".concat("string"==typeof j?"%s":"%o"," ")),c.push(j)}}}if(null!=a.meta)e.push("%s"),c.push("".concat(a.meta.file,":").concat(a.meta.line,":").concat(a.meta.col));return c.unshift(e.join("")),c})},1862:function(a,b,c){"use strict";var d=this&&this.__assign||function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.octoLogger=b.logger=b.createLogger=b.revertLoggerContext=b.switchLoggerContext=b.getLoggerContext=b.createScopeEntry=b.createLogEntry=b.isLogEntry=void 0;var e=c(7111),f=c(6117),g=c(5302),h=new Date,i=0;function j(a){return a&&3===a.length&&a[0]&&a[1]>0&&a[2]>0}function k(a){return{file:a[0],line:a[1],col:a[2]}}function l(a){return a&&void 0!==a.type&&void 0!==a.level}function m(a,b,c,d,e){return Object.defineProperty({cid:++i,ts:0,type:a,level:b,badge:c,label:d,args:e,meta:null,entries:[]},"parent",{writable:!0,enumerable:!1,value:null})}function n(a,b,c,d){return m(g.ENTRY,a,b,c,d)}function o(a,b,c,d){return m(g.SCOPE,a,b,c,d)}b.isLogEntry=l,b.createLogEntry=n,b.createScopeEntry=o;var p=null;function q(a,b){var c=function(b){return{add:function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var e,g=j(c[0])?k(c.shift()):null;if(l(c[0]))e=c[0];else e=n("log",null,null,c);if(null!==g)e.meta=g;if(a.time)e.ts=(0,f.now)();var h=b.parent;if(h){var i=(e.parent=h).entries.push(e);if(i>a.storeLast)h.entries.splice(0,1)}if(!0!==a.silent&&a.output)a.output(e);return e}}},e=o("info","🚧","#root",[{time:h,created:new Date}]),i={logger:null,parent:e},m=c(i),q=b({createEntry:n,logger:m});if(null==a.silent&&"undefined"!=typeof location)a.silent=!/^(about:|file:|https?:\/\/localhost\/)/.test("".concat(location));if(null==a.time)a.time=!0;if(null==a.storeLast)a.storeLast=1e3;return i.logger=m,["add","clear","scope","setup","entries","last","priny","m"].forEach(function(a){if(q.hasOwnProperty(a))throw new Error('[octoLogger] "'.concat(a,'" is a reserved identifier'))}),q.print=function(){if(function b(c){c.printed=!1,c.entries.forEach(function(c){if(c.printed=!1,a.output)a.output(c);if(c.type===g.SCOPE)b(c)})}(e),a.output)a.output(null)},q.add=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return m.add.apply(m,a)},q.clear=function(){return e.entries.splice(0,e.entries.length)},q.setup=function(b){a=d(d({},a),b)},q.entries=function(){return e.entries},q.last=function(){return e.entries[e.entries.length-1]||null},q.scope=function d(e,f,g){var h=arguments,m=null;if(0===h.length)return this._scopeEntry;if(j(h[0]))m=k(h[0]),e=h[1],f=h[2],g=h[3];var q=h.length>2;if(null==g&&"function"==typeof f)g=f,q=!1;var r=[e];if(q)r.push(f);var s=l(e)?e:o("info",null,null,r);s.meta=m,i.logger.add(s);var t=c({parent:s,logger:null}),u=b({createEntry:n,logger:t});if(u.add=function(){return t.add.apply(t,arguments)},u.scope=d,u._scopeEntry=s,"function"==typeof g){var v=p,w=i.parent,x=i.logger;p={entry:s,scope:u,logger:t,options:a,scopeContext:i},i.parent=s,g(u),p=v,i.parent=w,i.logger=x}return u},q}b.getLoggerContext=function(){return p},b.switchLoggerContext=function(a,b){if(null===a)return p=null,null;var c=p,d=a.scope,e=a.scopeContext,f=null;if(p=a,a.scope=b,a.scopeContext)f=a.scopeContext.parent,a.scopeContext.parent=b.scope();return{activeContext:c,ctx:a,scope:d,scopeContext:e,scopeContextParent:f}},b.revertLoggerContext=function(a){var b=a.ctx,c=a.scopeContext;if(b.scope=a.scope,b.scopeContext=c,c)c.parent=a.scopeContextParent;p=a.activeContext},b.createLogger=q;var r={log:null,info:"❕ ",done:"✅ ",warn:"⚠️ ",error:"🛑 ",verbose:"🔎 "};b.logger=q({output:(0,e.universalOutput)()},function(a){var b=a.logger;return Object.keys(r).reduce(function(a,c){return a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];b.add(n(c,r[c]||null,null,a))},a},{})}),b.octoLogger=b.logger},5302:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SCOPE=b.ENTRY=void 0,b.ENTRY=1,b.SCOPE=2},7111:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.universalOutput=b.browserOutput=b.nodeOutput=b.createOutput=void 0;var d=c(6947),e=c(5302);b.createOutput=function(a){var b=a.out,c=a.format,d=b.log,f={},g=[];return function a(h,i){if(null===h)return g.forEach(function(){b.groupEnd()}),void(g.length=0);var j=h.parent,k=g.length;if(!i||!h.printed){if(k>0){for(var l=k;l--&&g[l]!==j;)g[l].printed=!0,b.groupEnd();g.length=l+1}if(h.type===e.SCOPE)g.push(h),b.group.apply(b,c(h));else{if(!i&&j&&j.printed&&"#root"!==j.label)return void(f[j.cid]||(f[j.cid]=setTimeout(function(){g.forEach(function(){b.groupEnd()}),g.length=0;var d=[],e=j;do{d.unshift(e),e=e.parent}while(e&&"#root"!==e.label);d.forEach(function(a){b.group.apply(b,c(a))}),j.entries.forEach(function(b){a(b,!0)}),d.forEach(function(){b.groupEnd()})},0)));h.printed=!0,d.apply(b,c(h))}}}};b.nodeOutput=function(a){if(void 0===a)a={};return(0,b.createOutput)({out:a.out||console,format:a.format||d.nodeFromat})};b.browserOutput=function(a){if(void 0===a)a={};return(0,b.createOutput)({out:a.out||console,format:a.format||d.browserFormat})},b.universalOutput="undefined"==typeof self?b.nodeOutput:b.browserOutput},6117:function(a,b){"use strict";function c(a,b){var c=a<10?"0".concat(a):a;if(b>1&&a<100)c="0".concat(c);return c}Object.defineProperty(b,"__esModule",{value:!0}),b.timeFormat=b.zeroPad=b.now=void 0,b.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now,b.zeroPad=c,b.timeFormat=function(a){var b=a/1e3;return"".concat(c(b/60%24|0),":").concat(c(b%60|0),".").concat(c(a%1e3|0,2))}},6473:function(a,b,c){var d,e,f;function g(a){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(c,h){"object"==(0?0:g(b))?h(b):(e=[b],void 0===(f="function"==typeof(d=h)?d.apply(b,e):d)||(a.exports=f))}(0,function(a){"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)},d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b,c,d){return new(c=c||Promise)(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function f(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g={next:h(0),throw:h(1),return:h(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(g){return function(h){return function(g){if(c)throw new TypeError("Generator is already executing.");for(;f;)try{if(c=1,d&&(e=2&g[0]?d.return:g[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,g[1])).done)return e;switch(d=0,e&&(g=[2&g[0],e.value]),g[0]){case 0:case 1:e=g;break;case 4:return f.label++,{value:g[1],done:!1};case 5:f.label++,d=g[1],g=[0];continue;case 7:g=f.ops.pop(),f.trys.pop();continue;default:if(!(e=0<(e=f.trys).length&&e[e.length-1])&&(6===g[0]||2===g[0])){f=0;continue}if(3===g[0]&&(!e||g[1]>e[0]&&g[1]<e[3])){f.label=g[1];break}if(6===g[0]&&f.label<e[1]){f.label=e[1],e=g;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(g);break}e[2]&&f.ops.pop(),f.trys.pop();continue}g=b.call(a,f)}catch(a){g=[6,a],d=0}finally{c=e=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,h])}}}function h(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||((d=d||Array.prototype.slice.call(b,0,e))[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}var i=(j.prototype.add=function(a,b){this.hash[a]=b},j.prototype.remove=function(a){delete this.hash[a]},j.prototype.get=function(a){return this.hash[a]},j.prototype.has=function(a){return!!this.hash[a]},j.prototype.clear=function(){this.hash={}},j.prototype.values=function(){return Object.values(this.hash)},j);function j(){this.hash={}}var k,l=(function(a,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}(m,k=i),m.prototype.add=function(a,b){k.prototype.add.call(this,a.toLowerCase(),b)},m.prototype.remove=function(a){k.prototype.remove.call(this,a.toLowerCase())},m.prototype.get=function(a){return k.prototype.get.call(this,a.toLowerCase())},m.prototype.has=function(a){return k.prototype.has.call(this,a.toLowerCase())},m);function m(){return null!==k&&k.apply(this,arguments)||this}var n={"\\":"ё","`":"ё",q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","ё":"`","й":"q","ц":"w","у":"e","к":"r","е":"t","н":"y","г":"u","ш":"i","щ":"o","з":"p","х":"[","ъ":"]","ф":"a","ы":"s","в":"d","а":"f","п":"g","р":"h","о":"j","л":"k","д":"l","ж":";","э":"'","я":"z","ч":"x","с":"c","м":"v","и":"b","т":"n","ь":"m","б":",","ю":"."},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==c.g?c.g:"undefined"!=typeof self?self:{};var p,q=(function(a){Object.defineProperty(a,"__esModule",{value:!0});var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:{};function c(a,b){return a(b={exports:{}},b.exports),b.exports}function d(a){try{return!!a()}catch(a){return!0}}function e(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}function f(a){return F.call(a).slice(8,-1)}function h(a){if(null==a)throw TypeError("Can't call method on "+a);return a}function i(a){return H(h(a))}function j(a){return"object"==g(a)?null!==a:"function"==typeof a}function k(a,b){if(!j(a))return a;var c,d;if(b&&"function"==typeof(c=a.toString)&&!j(d=c.call(a)))return d;if("function"==typeof(c=a.valueOf)&&!j(d=c.call(a)))return d;if(!b&&"function"==typeof(c=a.toString)&&!j(d=c.call(a)))return d;throw TypeError("Can't convert object to primitive value")}function l(a,b){return I.call(a,b)}function m(a){return K?J.createElement(a):{}}function n(a){if(!j(a))throw TypeError(String(a)+" is not an object");return a}function p(a,b){try{Q(A,a,b)}catch(c){A[a]=b}return b}function q(a){return"Symbol("+String(void 0===a?"":a)+")_"+(++T+U).toString(36)}var r,s,t,u,v,w,x,y,z="object",A=(C=function(a){return a&&a.Math==Math&&a})(("undefined"==typeof globalThis?"undefined":g(globalThis))==z&&globalThis)||C(("undefined"==typeof window?"undefined":g(window))==z&&window)||C(("undefined"==typeof self?"undefined":g(self))==z&&self)||C(g(b)==z&&b)||Function("return this")(),B=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),C={}.propertyIsEnumerable,D=Object.getOwnPropertyDescriptor,E={f:D&&!C.call({1:2},1)?function(a){return!!(a=D(this,a))&&a.enumerable}:C},F={}.toString,G="".split,H=d(function(){return!Object("z").propertyIsEnumerable(0)})?function(a){return"String"==f(a)?G.call(a,""):Object(a)}:Object,I={}.hasOwnProperty,J=A.document,K=j(J)&&j(J.createElement),L=!B&&!d(function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a}),M=Object.getOwnPropertyDescriptor,N={f:B?M:function(a,b){if(a=i(a),b=k(b,!0),L)try{return M(a,b)}catch(a){}if(l(a,b))return e(!E.f.call(a,b),a[b])}},O=Object.defineProperty,P={f:B?O:function(a,b,c){if(n(a),b=k(b,!0),n(c),L)try{return O(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported");return"value"in c&&(a[b]=c.value),a}},Q=B?function(a,b,c){return P.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a},R=c(function(a){var b="__core-js_shared__",c=A[b]||p(b,{});(a.exports=function(a,b){return c[a]||(c[a]=void 0!==b?b:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),S=R("native-function-to-string",Function.toString),T=(b="function"==typeof(z=A.WeakMap)&&/native code/.test(S.call(z)),0),U=Math.random(),V=R("keys"),W=(C=function(a){return V[a]||(V[a]=q(a))},{});z=A.WeakMap;function X(a){return"function"==typeof a?a:void 0}function Y(a){return isNaN(a=+a)?0:(0<a?fa:ea)(a)}function Z(a){return 0<a?ga(Y(a),9007199254740991):0}function _(a,b){var c,d=i(a),e=0,f=[];for(c in d)!l(W,c)&&l(d,c)&&f.push(c);for(;b.length>e;)l(d,c=b[e++])&&(~ja(f,c)||f.push(c));return f}function $(a){if("function"!=typeof a)throw TypeError(String(a)+" is not a function");return a}function aa(a,b,c){if($(a),void 0===b)return a;switch(c){case 0:return function(){return a.call(b)};case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}x=b?(r=new z,s=r.get,t=r.has,u=r.set,v=function(a,b){return u.call(r,a,b),b},w=function(a){return s.call(r,a)||{}},function(a){return t.call(r,a)}):(y=C("state"),W[y]=!0,v=function(a,b){return Q(a,y,b),b},w=function(a){return l(a,y)?a[y]:{}},function(a){return l(a,y)});var ba={set:v,get:w,has:x,enforce:function(a){return x(a)?w(a):v(a,{})},getterFor:function(a){return function(b){var c;if(!j(b)||(c=w(b)).type!==a)throw TypeError("Incompatible receiver, "+a+" required");return c}}},ca=c(function(a){var b=ba.get,c=ba.enforce,d=String(S).split("toString");R("inspectSource",function(a){return S.call(a)}),(a.exports=function(a,b,e,f){var g=!!f&&!!f.unsafe,h=!!f&&!!f.enumerable;f=!!f&&!!f.noTargetGet;"function"==typeof e&&("string"!=typeof b||l(e,"name")||Q(e,"name",b),c(e).source=d.join("string"==typeof b?b:"")),a!==A?(g?!f&&a[b]&&(h=!0):delete a[b],h?a[b]=e:Q(a,b,e)):h?a[b]=e:p(b,e)})(Function.prototype,"toString",function(){return"function"==typeof this&&b(this).source||S.call(this)})}),da=A,ea=(b=function(a,b){return arguments.length<2?X(da[a])||X(A[a]):da[a]&&da[a][b]||A[a]&&A[a][b]},Math.ceil),fa=Math.floor,ga=Math.min,ha=Math.max,ia=Math.min,ja=((z=function(a){return function(b,c,d){var e,f=i(b),g=Z(f.length),h=function(a,b){return(a=Y(a))<0?ha(a+b,0):ia(a,b)}(d,g);if(a&&c!=c){for(;h<g;)if((e=f[h++])!=e)return!0}else for(;h<g;h++)if((a||h in f)&&f[h]===c)return a||h||0;return!a&&-1}})(!0),z(!1)),ka=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],la=ka.concat("length","prototype"),ma={f:Object.getOwnPropertyNames||function(a){return _(a,la)}},na={f:Object.getOwnPropertySymbols},oa=b("Reflect","ownKeys")||function(a){var b=ma.f(n(a)),c=na.f;return c?b.concat(c(a)):b},pa=/#|\.prototype\./,qa=(z=function(a,b){return(a=ra[qa(a)])==ta||a!=sa&&("function"==typeof b?d(b):!!b)}).normalize=function(a){return String(a).replace(pa,".").toLowerCase()},ra=z.data={},sa=z.NATIVE="N",ta=z.POLYFILL="P",ua=z,va=N.f,wa=Array.isArray||function(a){return"Array"==f(a)},xa=function a(b,c,d,e,f,g,h,i){for(var j,k=f,l=0,m=!!h&&aa(h,i,3);l<e;){if(l in d){if(j=m?m(d[l],l,c):d[l],0<g&&wa(j))k=a(b,c,j,Z(j.length),k,g-1)-1;else{if(9007199254740991<=k)throw TypeError("Exceed the acceptable array length");b[k]=j}k++}l++}return k},ya=!!Object.getOwnPropertySymbols&&!d(function(){return!String(Symbol())}),za=A.Symbol,Aa=R("wks"),Ba=(z=function(a){return Aa[a]||(Aa[a]=ya&&za[a]||(ya?za:q)("Symbol."+a))})("species");function Ca(){}!function(a,b){var c,d,e,f=a.target,h=a.global,i=a.stat,j=h?A:i?A[f]||p(f,{}):(A[f]||{}).prototype;if(j)for(c in b){if(d=b[c],e=a.noTargetGet?(e=va(j,c))&&e.value:j[c],!ua(h?c:f+(i?".":"#")+c,a.forced)&&void 0!==e){if(g(d)==g(e))continue;!function(a,b){for(var c=oa(b),d=P.f,e=N.f,f=0;f<c.length;f++){var g=c[f];l(a,g)||d(a,g,e(b,g))}}(d,e)}(a.sham||e&&e.sham)&&Q(d,"sham",!0),ca(j,c,d,a)}}({target:"Array",proto:!0},{flatMap:function(a,b){var c,d,e,f=Object(h(this)),g=Z(f.length);return $(a),d=0,wa(c=f)&&("function"==typeof(e=c.constructor)&&(e===Array||wa(e.prototype))||j(e)&&null===(e=e[Ba]))&&(e=void 0),(d=new(void 0===e?Array:e)(0===d?0:d)).length=xa(d,f,f,g,0,1,a,1<arguments.length?b:void 0),d}});var Da=Object.keys||function(a){return _(a,ka)},Ea=B?Object.defineProperties:function(a,b){n(a);for(var c,d=Da(b),e=d.length,f=0;f<e;)P.f(a,c=d[f++],b[c]);return a},Fa=b("document","documentElement"),Ga=C("IE_PROTO"),Ha="prototype",Ia=function(){var a=m("iframe"),b=ka.length;for(a.style.display="none",Fa.appendChild(a),a.src=String("javascript:"),(a=a.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),Ia=a.F;b--;)delete Ia[Ha][ka[b]];return Ia()};C=Object.create||function(a,b){var c;return null!==a?(Ca[Ha]=n(a),c=new Ca,Ca[Ha]=null,c[Ga]=a):c=Ia(),void 0===b?c:Ea(c,b)};W[Ga]=!0;var Ja=z("unscopables"),Ka=Array.prototype;null==Ka[Ja]&&Q(Ka,Ja,C(null)),Ka[Ja].flatMap=!0,aa(Function.call,A.Array.prototype.flatMap,void 0),C={cyrillicToLatin:{"а":["a"],"б":["b"],"в":["v"],"г":["g"],"д":["d"],"е":["je","ye","e"],"ё":["jo","yo"],"ж":["zh"],"з":["s","z"],"и":["i"],"ия":["ia"],"й":["jj","g","i","j","y"],"йе":["ye"],"йо":["yo"],"йу":["yu"],"йя":["ya"],"к":["c","k"],"кс":["x"],"л":["l"],"м":["m"],"н":["n"],"о":["o"],"п":["p"],"р":["r"],"с":["s"],"т":["t"],"у":["u"],"ф":["ph","f"],"х":["kh","h"],"ц":["c","ts"],"ч":["ch"],"ш":["sch","sh"],"щ":["shch","sch","shh"],"ъ":['"'],"ы":["i","y"],"ь":["'"],"э":["eh"],"ю":["u","ju","yu"],"я":["ja","ya","y"]},latinToCyrillic:{a:["а"],b:["б"],c:["к"],ch:["ч"],d:["д"],e:["е"],f:["ф"],g:["г","й"],h:["х"],i:["и","й","ы"],ia:["ия"],j:["й"],ja:["йя","я"],je:["е"],jo:["ё"],ju:["ю"],k:["к"],kh:["х"],l:["л"],m:["м"],n:["н"],o:["о"],p:["п"],r:["р"],s:["з","с"],sch:["ш","щ"],sh:["ш"],shch:["щ"],shh:["щ"],t:["т"],ts:["ц"],u:["у","ю"],v:["в"],x:["кс"],y:["ий","й","ы","я"],ya:["йя","я"],ye:["е"],yo:["ё"],yu:["ю"],z:["з"],zh:["ж"]}},a.default=function(a,b){return void 0===b&&(b=null),function(c){for(var d={"":[""]},e=Math.max.apply(Math,Object.keys(a).map(function(a){return a.length})),f=0;f<c.length;f++)for(var g=0;g<e&&"break"!==function(e){if(f-e<0)return"break";var g=c.slice(f-e,f+1),h=a[g];e=c.slice(0,f+1);if(!h)return 1===g.length&&(d[e]=d[e.slice(0,-1)].map(function(a){return a+g})),"break";var i=d[c.slice(0,f-g.length+1)];i=null!==b&&i.length<b?h.flatMap(function(a){return i.map(function(b){return b+a})}):i.map(function(a){return a+g});d[e]=(d[e]||[]).concat(i)}(g);g++);return d[c]}},a.maps=C}((p={path:void 0,exports:{},require:function(a,b){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==b&&p.path)}}).exports),p.exports),r=function(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}(q),s=q.maps.cyrillicToLatin,t=q.maps.latinToCyrillic,u=r(s,1e3),v=r(t,1e3);function w(a,b){return b.length&&b.split("").some(function(b){return!!a[b]})}function x(a,b){return{id:a.id,email:a.email,avatar:b(a),description:a.display_name?a.email:null,title:a.display_name||a.email}}function y(a){var b=this;this._state={searchValue:"",options:[],selected:[],searchWords:[],error:null},this._selected=new l,this.memCache=new i,this.searchWordsMemCache=new i,this._select=function(a){b._selected.add(a.email,d({},a))};var c=void 0===(m=a.limit)?10:m,g=a.avatarMapper,h=a.jssdkMethodContactSuggest,j=a.onStateChange,k=a.labelSuggestIcon,m=a.mapLabelOptionToDescription;a=void 0===(a=a.defaultSelected)?[]:a;this.config={labelSuggestIcon:k,onStateChange:j,jssdkMethodContactSuggest:h,avatarMapper:g,limit:c,mapLabelOptionToDescription:m,defaultSelected:a},a.forEach(this._select),this.debouncedJssdkMethod=function(a,b,c){var d=null,e=null;return function(){for(var f=this,g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];var i;return d&&(e(),clearTimeout(d)),i=b,new Promise(function(a,b){d=setTimeout(a,i),e=b}).then(function(){return d=null,a.apply(f,g)}).catch(function(){return c})}}(function(a,c){return void 0===c&&(c=b.config.limit),e(b,void 0,void 0,function(){var b,e,g;return f(this,function(f){switch(f.label){case 0:return[4,this.config.jssdkMethodContactSuggest.execute({limit:c,search:a})];case 1:return b=f.sent(),g=b.result,e=g.contacts,g=g.labels,e=e.length,g=g.length,g=Math.max(e,g),[2,d(d({},b),{canBeReplenished:g>=this.config.limit*Math.ceil(g/this.config.limit)})]}})})},150,{result:{contacts:[],labels:[]},uncache:!0}),this.searchWordsMemCache.add("",[]),this.search()}Object.defineProperty(y.prototype,"state",{get:function(){return d(d({},this._state),{selected:Array.from(this._selected.values())})},enumerable:!1,configurable:!0}),y.prototype.setState=function(a){this._state=d(d({},this._state),a),this.config.onStateChange(a)},y.prototype.search=function(){return e(this,void 0,void 0,function(){var a,b,c,d,e;return f(this,function(f){switch(f.label){case 0:d=this.state.searchValue,f.label=1;case 1:return(f.trys.push([1,6,,7]),c=this.memCache.get(d))?[3,3]:(e=this.debouncedJssdkMethod(d,2*this.config.limit),this.memCache.add(d,e),[4,e]);case 2:return(a=f.sent()).uncache&&this.memCache.remove(d),[3,5];case 3:return[4,c];case 4:a=f.sent(),f.label=5;case 5:return[3,7];case 6:return b=f.sent(),this.setState({error:new Error('[addressbook-suggests]: "'.concat(b,'"'))}),[3,7];case 7:return this.state.searchValue!==d?[2]:(e=this.formatSuggestsWithFilteredAmount(a),c=e.options,b=e.filteredContactsAmount,d=e.filteredLabelsAmount,this.setState({options:c}),e=a.result,c=e.contacts,e=e.labels,c=c.length,e=e.length,d=Math.max(c-b,e-d)<=this.config.limit,a.canBeReplenished&&d?(e=Math.max(c,e)+this.config.limit,[4,this.replenishCache(this.state.searchValue,e)]):[3,9]);case 8:f.sent(),f.label=9;case 9:return[2]}})})},y.prototype.formatSuggestsWithFilteredAmount=function(a){var b,c,e=this,f=(i=a.result).contacts,g=i.labels,i=(a=(b=function(a){return a.email.toLowerCase()},c={},f.forEach(function(a){c[b(a)]=a}),Object.values(c).filter(function(a){return!e._selected.has(a.email)}).map(function(a){return a=x(a,a=e.config.avatarMapper),d(d({},a),{contacts:[a]})})),g.filter(function(a){return a.contacts.length}).filter(function(a){return!a.contacts.every(function(a){return e._selected.has(a.email)})}).map(function(a){return b=a,c=e.config.labelSuggestIcon,f=e.config.avatarMapper,a=e.config.mapLabelOptionToDescription,{title:b.name,description:a(b),icon:c,id:b.id,contacts:b.contacts.map(function(a){return d({},x(a,f))})};var b,c,f}));return{options:h(h([],a.slice(0,this.config.limit),!0),i.slice(0,this.config.limit),!0),filteredContactsAmount:f.length-a.length,filteredLabelsAmount:g.length-i.length}},y.prototype.replenishCache=function(a,b){this.memCache.add(a,this.debouncedJssdkMethod(a,b))},y.prototype.changeValidity=function(a,b){this._selected.add(a.email,d(d({},a),{invalid:!b})),this.setState({selected:this.state.selected})},y.prototype.select=function(a){a.contacts.forEach(this._select),this.setState({selected:this.state.selected,searchValue:"",searchWords:[]}),this.search()},y.prototype.deselect=function(a){this._selected.remove(a.email),this.setState({selected:this.state.selected}),this.search()},y.prototype.changeSearchValue=function(a){var b,c,d=this.searchWordsMemCache.get(a);d||(d=h([a,a.toLocaleLowerCase().split("").map(function(a){var b;return null!==(b=n[a])&&void 0!==b?b:a}).join("")],(b=a).length?w(t,b)?null!=(c=v(b.toLocaleLowerCase()))?c:[]:w(s,b)&&null!=(c=u(b.toLocaleLowerCase()))?c:[]:[],!0),this.searchWordsMemCache.add(a,d)),this.setState({searchValue:a,searchWords:d}),this.search()},y.prototype.selectEmail=function(a){var b=a.email,c=a.isEmailValid;a=a.name;this._selected.has(b)?this.setState({searchWords:[],searchValue:"",options:[]}):(c={id:b,email:b,title:a,avatar:c?this.config.avatarMapper({display_name:b,email:b,id:b}):"",invalid:!c},this._selected.add(b,d({},c)),this.setState({selected:this.state.selected,searchValue:""}),this.search())},y.prototype.clearMemCache=function(){this.memCache.clear(),this.searchWordsMemCache.clear(),this._selected.clear()},y.prototype.clearError=function(){this.setState({error:null})},r=y,a.Suggests=r,Object.defineProperty(a,"__esModule",{value:!0})})},242:function(a,b){var c,d,e,f;function g(a){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}f=function(a){"use strict";var b="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",c=new RegExp('([\\-\\w.+а-яА-ЯёЁ!#$%&"*=/?\\^_`|~{}]+)@([\\w.а-яё\\-'+b+"]+)\\.[\\wа-яё"+b+"]+"),d={UNICODE:b,RE_EMAIL:c,RE_NAME_AND_EMAIL_IN_LTGT:new RegExp("['\"]?(.*?)['\"]?\\s*(?:<|&lt;)("+c.source+")(?:>|&gt;)$"),RE_NAME_AND_EMAIL_IN_LTGT_WITH_SPACE:new RegExp("['\"]?(.*?)['\"]?\\s+(?:<|&lt;)("+c.source+")(?:>|&gt;)$"),RE_SPLIT_BY_COMMA_SEMI_OUTSIDE_QUOTES:new RegExp('([,;])(?=(?:[^"]*"[^"]*")*[^"]*$)'),RE_SPLIT_BY_COMMA_SEMI_OUTSIDE_QUOTES_2:/[,;](?=(?:[^"]*"[^\]*")*[^"]*$))/,RE_IS_SPLITTER:new RegExp("^[,;]$"),RE_HAS_SPLITTER:new RegExp("[,;]")};function e(a){return!!a.match(d.RE_EMAIL)}function f(a){if(!a)return"";var b=a.match(d.RE_NAME_AND_EMAIL_IN_LTGT);return b?b[2]:a}function g(a){if(!a)return"";var b=a.match(d.RE_NAME_AND_EMAIL_IN_LTGT);return b?b[1]:a}function h(a){var b={valid:!1,str:a,name:"",email:"",newLabel:null},c=a.match(d.RE_EMAIL),h=c?c[0]:a,i=a;if(e(a)){if(f(a)===a&&a!==h&&a.match(/\s|"/)){for(var j=a.length,k=Math.max(a.lastIndexOf(" "),a.lastIndexOf('"'))+1,l=!1;!l;){if(a.substring(k,j).match(d.RE_EMAIL))l=!0;else{if(" "===a.charAt(k-1))j=k;k=a.substring(0,k-1).lastIndexOf(" ")+1}if(j<=0)break}if(l){var m=a.substring(0,k).replace(/(^\s+|\s+$)/g,"");if(m.length>0||j<a.length){if(j<a.length)b.newLabel=a.substring(j);b.str=a=m+" <"+a.substring(k,j).replace(/[<>\s]/g,"")+">"}}}if(h!==a)if((i=g(a).replace(/(^\s+|\s+$)/g,"")).length>0&&i!==a){if(h=f(a),b.valid=!0,b.name=i,b.email=h,!a.match(d.RE_NAME_AND_EMAIL_IN_LTGT_WITH_SPACE))b.str=a.match(/^\s*"/)?'"'+i+'" <'+h+">":i+" <"+h+">";else if(i===h)b.str=h}else if(0===i.length)b.valid=!0,b.str=b.email=h,b.name="";else if(a.replace(d.RE_EMAIL,"").match(/^["'<>()]+$/))b.valid=!0,b.str=b.email=h,b.name="";else b.str=a,b.name=b.email="",b.valid=!1;else b.valid=!0,b.str=b.email=h,b.name=""}return b}a.checkTextValidity=h,a.contactToString=function(a,b){if(void 0===b)b=/,/;var c=a.email,d=a.name,e=new RegExp(b.source);return d?e.test(d)?'"'+d+'" <'+c+">":d+" <"+c+">":c},a.hasEmail=e,a.suggestToEmail=f,a.suggestToName=g,a.shouldEscapeName=function(a){return d.RE_HAS_SPLITTER.test(a)},a.getCorrespondentsFromString=function(a){if(!a)return[];var b=a.split(d.RE_SPLIT_BY_COMMA_SEMI_OUTSIDE_QUOTES);b=b.map(function(a){return a.split(/\s+/)}).reduce(function(a,b){return a.concat(b)},[]);var c,f,g=1,i=[];if((b=b.filter(function(a){return!/^\s*$/.test(a)})).forEach(function(a){var b,j;switch(g){case 1:if(e(a))c=0,b=h(a);else c=2,j=a;break;case 0:if(d.RE_IS_SPLITTER.test(a)){c=1;break}if(e(a)){b=h(a);break}c=2,j=a;break;case 2:if(d.RE_IS_SPLITTER.test(a)){c=1;break}b=h(j=f+" "+a),c=b.valid?0:2}switch(c){case 2:f=j;break;case 1:if(f)i.push({email:f,valid:!1});f="";break;case 0:f="";var k=b.email,l=b.name,m=b.valid,n=b.str;i.push(m?{email:k,name:l?l:void 0}:{email:n,valid:!1})}g=c}),f)i.push({email:f,valid:!1});return i},Object.defineProperty(a,"__esModule",{value:!0})},"object"===(0?0:g(b))?f(b):(d=[b],void 0===(e="function"==typeof(c=f)?c.apply(b,d):c)||(a.exports=e))},3310:function(a,b,c){var d,e,f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};d=[c,b,c(7764),c(6378),c(5964),c(9865),c(855)],void 0===(e=function(a,b,c,d,e,g,h){"use strict";function i(a,b){return{configurable:!1,enumerable:!1,value:{subscribe:function(c){return a.subscribe(!b?c:function(a){if(a.state===b)c(a)})}}}}Object.defineProperty(b,"__esModule",{value:!0}),b.createGlobalAction=b.anyOf=void 0,c=f(c),h=f(h),Object.defineProperty(b,"anyOf",{enumerable:!0,get:function(){return d.anyOf}});var j=new Map,k=function(){return null};b.createGlobalAction=function(a,b,f){if(void 0===f)f={};var l=[],m=(0,d.createSubject)(),n=f.unhandledRejection;function o(d){if(f.dedup&&l.length){var i=function(a,b){for(var c=0,d=a;c<d.length;c++){var e=d[c],f=e.action.meta;if(f.arg===b)return e;if(f.arg&&b)try{if((0,h.default)(f.arg,b))return e}catch(a){}}}(l,d);if(i)return i}var o,p,q=(0,g.lazyValue)(function(){return Math.random().toString()}),r={type:a,state:"pending",payload:void 0,error:null,meta:{get uid(){return q()},arg:d,aborted:!1}},s=r,t=function(a){var b=a.state,c=l.indexOf(y);if(c>-1)l.splice(c,1);u&&u["fulfilled"===b?"commit":"rollback"](),m.dispatch(r)},u=f.transaction&&c.default.start(),v=new Promise(function(a,b){p=(0,g.lazyValue)(function(){var a=new e.AbortCtrl;return a.signal.addEventListener("abort",function(){o=o||new Error("Aborted"),b(o)}),a})}),w=function(a,b){if(null==a)return new Promise(function(a){return a(b())});if(!j.has(a))j.set(a,Promise.resolve());var c=j.get(a).then(function(){return b()});return j.set(a,c.catch(k)),c}(f.queue,function(){return b(d,{get uid(){return q()},get signal(){return p().signal}})}),x=Promise.race([v,w]).catch(function(a){return n?n(a):Promise.reject(a)}).then(function(a){return s.payload=a,s.state="fulfilled",t(r),r}).catch(function(a){return s.error=a,s.state="rejected",s.meta.aborted=!!o,t(r),Promise.reject(r)}),y=Object.defineProperties(x,{type:{configurable:!1,enumerable:!1,value:a},state:{configurable:!1,enumerable:!1,get:function(){return r.state}},action:{configurable:!1,enumerable:!1,value:r},abort:{configurable:!1,enumerable:!1,value:function(a){o=a,p().abort()}}});return l.push(y),m.dispatch(r),y}return Object.defineProperties(o,{type:{writable:!1,configurable:!1,value:a},activeList:{writable:!1,configurable:!1,value:l},any:i(m),pending:i(m,"pending"),rejected:i(m,"rejected"),fulfilled:i(m,"fulfilled")}),o}}.apply(b,d))||(a.exports=e)},6160:function(a,b,c){var d,e;d=[c,b,c(8156),c(264)],void 0===(e=function(a,b,c,d){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useGlobalActionSubscribe=b.useGlobalActionDispatch=b.useGlobalAction=void 0,b.useGlobalAction=function(a,b){var e=(0,c.useReducer)(function(a){return a+1},0)[1],f=(0,d.useMemoArg)(b),g=(0,c.useMemo)(function(){return a(b)},[f]);return(0,c.useEffect)(function(){var a=g,b=function(){if(a===g)e()};return a.then(b,b),function(){if("pending"===a.action.state)a.abort(new Error("Unmount"))}},[g]),[g.action,g]},b.useGlobalActionDispatch=function(a){var b=(0,c.useRef)(null),d=(0,c.useReducer)(function(a){return a+1},0)[1],e=a,f=(0,c.useCallback)(function(a){return e(a).catch(function(a){b.current=a.error,d()})},[e]);return(0,c.useEffect)(function(){var a=e.activeList.length;return e.any.subscribe(function(){var b=e.activeList.length;if(a!==b)a=b,d()})},[e]),[f,{loading:e.activeList.length>0,error:b.current,active:e.activeList.length}]},b.useGlobalActionSubscribe=function(a,b){var d=(0,c.useRef)(b);d.current=b,(0,c.useEffect)(function(){return a.any.subscribe(function(a){var b=d.current;if(b)if("function"==typeof b)b(a);else if(b[a.state])b[a.state](a)})},[a])}}.apply(b,d))||(a.exports=e)},467:function(a,b,c){var d,e;d=[c,b,c(6160),c(3517),c(1169),c(264)],void 0===(e=function(a,b,c,d,e,f){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useMemoArg=b.useGlobalStateSelector=b.useGlobalState=b.useGlobalActionDispatch=b.useGlobalAction=void 0,Object.defineProperty(b,"useGlobalAction",{enumerable:!0,get:function(){return c.useGlobalAction}}),Object.defineProperty(b,"useGlobalActionDispatch",{enumerable:!0,get:function(){return c.useGlobalActionDispatch}}),Object.defineProperty(b,"useGlobalState",{enumerable:!0,get:function(){return d.useGlobalState}}),Object.defineProperty(b,"useGlobalStateSelector",{enumerable:!0,get:function(){return e.useGlobalStateSelector}}),Object.defineProperty(b,"useMemoArg",{enumerable:!0,get:function(){return f.useMemoArg}})}.apply(b,d))||(a.exports=e)},1169:function(a,b,c){var d,e;d=[c,b,c(8156)],void 0===(e=function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useGlobalStateSelector=void 0,b.useGlobalStateSelector=function(a){var b=(0,c.useReducer)(function(a){return a+1},0)[1];return(0,c.useEffect)(function(){return"deps"in a?function(a,b){var c=a.map(function(a){return a.state.subscribe(b)});return function(){c.forEach(function(a){return a()})}}(a.deps,b):a.state.subscribe(b)},[a]),a()}}.apply(b,d))||(a.exports=e)},3517:function(a,b,c){var d,e;d=[c,b,c(8156)],void 0===(e=function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useGlobalState=void 0,b.useGlobalState=function(a){var b=(0,c.useReducer)(function(a){return a+1},0)[1],d=(0,c.useCallback)(a.set,[a]);return(0,c.useEffect)(function(){return a.subscribe(b)},[a]),[a.get(),d]}}.apply(b,d))||(a.exports=e)},264:function(a,b,c){var d,e,f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};d=[c,b,c(8156),c(465)],void 0===(e=function(a,b,c,d){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useMemoArg=void 0,d=f(d),b.useMemoArg=function(a){var b=(0,c.useRef)(a);if(b.current!==a&&!(0,d.default)(b.current,a))b.current=a;return b.current}}.apply(b,d))||(a.exports=e)},6378:function(a,b,c){var d;void 0===(d=function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.anyOf=b.createSubject=b.Subject=void 0;var c=function(){function a(){this.store=new Set}return a.prototype.on=function(a,b){var c=this;return a.subscribe(function(a){b(a,c)})},a.prototype.subscribe=function(a){var b=this;return this.store.add(a),function(){b.store.delete(a)}},a.prototype.dispatch=function(a){this.store.forEach(function(b){try{b(a)}catch(a){console.error(a)}})},a.prototype.clearSubscribers=function(){this.store.clear()},a}();b.Subject=c,b.createSubject=function(){return new c},b.anyOf=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return{subscribe:function(b){var c=a.map(function(a){return a.subscribe(b)});return function(){c.forEach(function(a){return a()}),c.length=0}}}}}.apply(b,[c,b]))||(a.exports=d)},5964:function(a,b,c){var d;void 0===(d=function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AbortCtrl=void 0;var c=function(){function a(){this.signal={aborted:!1,reason:null,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},throwIfAborted:function(){},removeEventListener:function(){}}}return a.prototype.abort=function(){throw new Error("AbortController not implemented, use polyfill")},a}();b.AbortCtrl="undefined"!=typeof AbortController?AbortController:c}.apply(b,[c,b]))||(a.exports=d)},9865:function(a,b,c){var d;void 0===(d=function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.lazyValue=void 0,b.lazyValue=function(a){var b,c=!1;return function(){if(!c)c=!0,b=a();return b}}}.apply(b,[c,b]))||(a.exports=d)},615:function(a,b,c){var d,e,f;function g(a){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}a=c.nmd(a),function(h,i){"object"==(0?0:g(b))&&"object"==(0?0:g(a))?a.exports=i(c(8156),c(3613),c(5264),c(7386),c(259)):(e=[c(8156),c(3613),c(5264),c(7386),c(259)],void 0===(f="function"==typeof(d=i)?d.apply(b,e):d)||(a.exports=f))}(window,function(a,b,c,d,e){return function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==g(a)&&a&&a.__esModule)return a;var d=Object.create(null);if(c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="",c(c.s=18)}([function(a,b,c){a.exports=c(16)()},function(a,b){a.exports=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}},function(b,c){b.exports=a},function(a,c){a.exports=b},function(a,b){a.exports=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}},function(a,b,c){var d;!function(){"use strict";var c={}.hasOwnProperty;function e(){for(var a=[],b=0;b<arguments.length;b++){var d=arguments[b];if(d){var f=g(d);if("string"===f||"number"===f)a.push(d);else if(Array.isArray(d)&&d.length){var h=e.apply(null,d);h&&a.push(h)}else if("object"===f)for(var i in d)c.call(d,i)&&d[i]&&a.push(i)}}return a.join(" ")}void 0!==a&&a.exports?(e.default=e,a.exports=e):void 0===(d=function(){return e}.apply(b,[]))||(a.exports=d)}()},function(a,b){a.exports=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}},function(a,b){a.exports=c},function(a,b,c){a.exports={portal:"C1JcIBcWcTdcYM1za7uy_",portalHidden:"_122QSUOT_xe0FKyL2fPauR",portalAnimate:"_16qUW3nm7QvAptwXh0NdIW",portalAnimFadeIn:"_3OMwGrjuHj5sV3IOi_dVuc"}},function(a,b){a.exports=d},function(a,b){a.exports=e},function(a,b,c){a.exports={smartOperand:"_2wGrB8FFYYBU4-b5K8PpVj"}},function(a,b,c){a.exports={placement:"DmeDMXQdGY5zHGcBWxsBR"}},function(a,b,c){a.exports={suggest:"_1Z3XJDfSWsIGB-d2PoNVn-"}},function(a,b){function c(){return a.exports=c=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},c.apply(this,arguments)}a.exports=c},function(a,b,c){a.exports={smartInput:"AFnpgR9oCbJwHlYBFuZC0"}},function(a,b,c){"use strict";var d=c(17);function e(){}a.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return c.checkPropTypes=e,c.PropTypes=c,c}},function(a,b,c){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(a,b,c){"use strict";c.r(b);var d=c(3),e={CLEAR:"clear",PUSH:"push",POP:"pop",SET_OPERAND_FLAGS:"setOperandFlags",STOP_EDITING_AND_ACTIVATE_PREV:"stopEditingAndActivatePrev",STOP_EDITING_AND_ACTIVATE_NEXT:"stopEditingAndActivateNext",DEACTIVATE_ALL:"deactivateAll",REMOVE_AND_DEACTIVATE_ALL:"removeAndDeactivateAll",SPLICE:"splice"};function f(a){var b=function(a){return d.types.model("PlacementModel",{operand:d.types.maybe(a),active:!1,editing:!1,editable:!1,portal:!1}).actions(function(a){return{setActive:function(b){a.active=!!b},setEditing:function(b){a.editing=!!b},setEditable:function(b){a.editable=!!b},setPortal:function(b){a.portal=!!b}}})}(a);return d.types.model("SmartInputModel",{placements:d.types.optional(d.types.array(b),[]),lastPlacement:d.types.optional(b,{})}).views(function(a){return{get operands(){return a.placements.map(function(a){return a.operand})},get active(){return a.lastPlacement.active?a.placements.length:a.placements.findIndex(function(a){return a.active})},get activePortal(){return a.lastPlacement.active?a.placements.length:a.placements.findIndex(function(a){return a.active&&a.portal})},getTargetOrLastPlacement:function(b){return b>=0&&b<a.placements.length?a.placements[b]:a.lastPlacement}}}).actions(function(a){var b;return(b={})[e.CLEAR]=function(){a.placements.length=0},b[e.PUSH]=function(){var b=arguments;a.placements.push.apply(a.placements,Array.from({length:arguments.length},function(a,c){return{operand:b[c]}}))},b[e.POP]=function(){a.placements.pop()},b[e.REMOVE_AND_DEACTIVATE_ALL]=function(b){a[e.DEACTIVATE_ALL](),a.placements.splice(b,1)},b[e.SET_OPERAND_FLAGS]=function(b,c){var d=c.active,e=c.editing,f=a.getTargetOrLastPlacement(b);f.active=!!d,f.editing=!(!d||!e),d&&(b!==a.placements.length&&(a.lastPlacement.active=!1,a.lastPlacement.editing=!1),a.placements.forEach(function(a,c){c!==b&&(a.active=!1,a.editing=!1)}))},b[e.STOP_EDITING_AND_ACTIVATE_PREV]=function(){a[e.SET_OPERAND_FLAGS](a.active-1,{edit:!1,active:!0})},b[e.STOP_EDITING_AND_ACTIVATE_NEXT]=function(){var b=a.active+1;b>a.placements.length&&(b=0),a[e.SET_OPERAND_FLAGS](b,{edit:!1,active:!0})},b[e.DEACTIVATE_ALL]=function(){a.lastPlacement.active=!1,a.lastPlacement.editing=!1,a.placements.forEach(function(a){a.active=!1,a.editing=!1})},b[e.SPLICE]=function(b,c){for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];var g=e.map(function(a){return{operand:a}});a.placements.splice.apply(a.placements,[b,c].concat(g))},b})}var h,i=c(6),j=c.n(i),k=c(1),l=c.n(k),m=c(4),n=c.n(m),o=c(2),p=c.n(o),q=c(9),r=c.n(q),s=c(0),t=c.n(s),u=c(5),v=c.n(u),w=c(7),x=function(a,b){return a===b},y=function(a,b){var c;void 0===b&&(b=x);var d,e=[],f=!1,g=function(a,c){return b(a,e[c])};return function(){for(var b=arguments.length,h=new Array(b),i=0;i<b;i++)h[i]=arguments[i];return f&&c===this&&h.length===e.length&&h.every(g)?d:(d=a.apply(this,h),f=!0,c=this,e=h,d)}},z=c(10),A=c(11),B=c.n(A),C=v()(((h={})[B.a.smartOperand]=!0,h)),D=p.a.createElement("div",{className:C}),E={editable:t.a.bool,portal:t.a.bool,onEditingStart:t.a.func,onEditingStarted:t.a.func,onEditingEnd:t.a.func,onEditingEnded:t.a.func},F="onEditingStart";function G(a,b){return a&&"object"==g(a)&&void 0!==a.key?a.key:b}var H,I,J,K,L,M,N,O,P,Q,R,S,T=c(12),U=c.n(T),V=Object(w.observer)((J=I=function(a){function b(b){var c;return c=a.call(this,b)||this,n()(l()(l()(c)),"renderOptions",y(function(a,b,d,e,f,g,h){return{index:a,model:b,ref:d,active:e,editing:f,SmartOperand:c.SmartOperand,portalRef:g&&h}})),c.operandRef=p.a.createRef(),c.containerRef=p.a.createRef(),c.operandCallbacks={},c.scheduledInvocations=[],c.stopReactingOnEdit=void 0,c.handleClick=c.handleClick.bind(l()(l()(c))),c.handleSmartOperandReport=c.handleSmartOperandReport.bind(l()(l()(c))),c.callEditingEndCallback=c.callEditingEndCallback.bind(l()(l()(c))),c.SmartOperand=function(a){var b=function(b){return a(b),D};return b.displayName="SmartOperand",b.propTypes=E,b}(c.handleSmartOperandReport),c}j()(b,a);var c=b.prototype;return c.handleSmartOperandReport=function(a){var b=this.props.model;this.operandCallbacks=a,b.setEditable(a.editable),b.setPortal(a.portal)},c.handleClick=function(){var a=this.props,b=a.store,c=a.model,f=a.index;Object(d.applyAction)(b,{name:e.SET_OPERAND_FLAGS,args:[f,{active:!0,editing:c.editable}]}),c.editable&&this.callbackLifecycle(F)},c.isEditing=function(){var a=this.props.model;return a&&a.editing},c.callEditingEndCallback=function(){this.isEditing()||(this.stopReactingOnEdit(),this.stopReactingOnEdit=void 0,this.callbackLifecycle("onEditingEnd"))},c.callbackLifecycle=function(a){this.invokeOperandCallback(a),this.scheduleOperandCallback(a+"ed")},c.invokeOperandCallback=function(a){var b=this,c=this.operandCallbacks[a];switch("function"==typeof c&&c(),a){case F:if(this.stopReactingOnEdit)break;this.stopReactingOnEdit=Object(z.reaction)(function(){return b.isEditing()},this.callEditingEndCallback)}},c.scheduleOperandCallback=function(a){var b=this.props,c=b.model,d=b.index;if(c){var e=G(c.operand,d);this.scheduledInvocations.push({key:e,name:a})}},c.focus=function(){var a=this.operandRef.current;a.focus?a.focus():r.a.findDOMNode(a).focus()},c.componentDidUpdate=function(a,b,c){var d=this,e=this.props,f=e.model,g=e.index;f&&(this.scheduledInvocations.forEach(function(a){var b=a.key,c=a.name;b===G(f.operand,g)&&d.invokeOperandCallback(c)}),this.scheduledInvocations=[])},c.componentWillUnmount=function(){this.stopReactingOnEdit&&(this.stopReactingOnEdit(),this.stopReactingOnEdit=void 0)},c.render=function(){var a,b=this.props,c=b.style,d=b.className,e=b.store,f=b.model,g=b.index,h=b.operandRenderer,i=b.portalRef,j=v()(((a={})[U.a.placement]=!0,a[d]=void 0!==d,a)),k=h(f.operand,this.renderOptions(g,e,this.operandRef,f&&f.active,f&&f.editing,f&&f.active&&(f.editing||g===e.placements.length),i));return p.a.createElement("span",{ref:this.containerRef,style:c,className:j,onClick:this.handleClick},k)},b}(p.a.Component),n()(I,"displayName","Placement"),n()(I,"propTypes",{operandRenderer:t.a.func.isRequired,store:t.a.any,model:t.a.any,index:t.a.any,style:t.a.object,className:t.a.string,portalRef:t.a.any}),H=J))||H,W=c(13),X=c.n(W),Y=Object(w.observer)((M=L=function(a){function b(b){var c;return(c=a.call(this,b)||this).suggestRef=p.a.createRef(),c}return j()(b,a),b.prototype.render=function(){var a,b=this.props,c=b.style,d=b.className,e=b.active,f=b.suggestRenderer,g=b.model,h=v()(((a={})[X.a.suggest]=!0,a[d]=void 0!==d,a)),i=f(g,{active:e,ref:this.suggestRef});return p.a.createElement("div",{className:h,style:c},i)},b}(p.a.Component),n()(L,"displayName","Suggest"),n()(L,"propTypes",{suggestRenderer:t.a.func.isRequired,model:t.a.any,active:t.a.bool,style:t.a.object,className:t.a.string}),K=M))||K,Z=c(14),_=c.n(Z),$=c(8),aa=c.n($),ba=Object(w.observer)((P=O=function(a){function b(b){var c;return(c=a.call(this,b)||this).state={left:0,top:0,hide:!0,willAnimate:!1,animate:!1},c.handleRef=c.handleRef.bind(l()(l()(c))),c.handleWindowResize=c.handleWindowResize.bind(l()(l()(c))),c.handleWindowResizeStop=c.handleWindowResizeStop.bind(l()(l()(c))),c.repositioning=!1,c.repositionScheduled=!1,c}j()(b,a),b.getDerivedStateFromProps=function(a,b){var c=b.placementElement,d=a.model,e=a.placementRefs[d.activePortal];return!c&&e||c&&e&&c!==e?{hide:!0,willAnimate:!0,placementElement:e}:null};var c=b.prototype;return c.handleRef=function(a){this.containerRef=a,this.props.onRefRendered&&this.props.onRefRendered(a)},c.handleWindowResize=function(){var a=this.state.placementElement;if(a)return this.repositioning?void(this.repositionScheduled=!0):(this.repositioning=!0,this.reposition(a),void window.setTimeout(this.handleWindowResizeStop,50))},c.handleWindowResizeStop=function(){var a=this.state.placementElement;a&&(this.repositioning=!1,this.repositionScheduled&&this.reposition(a))},c.setTimeout=function(a,b){window.clearTimeout(this._timerId),this._timerId=window.setTimeout(a,b)},c.transition=function(a){var b=this,c=this.state,d=c.hide,e=c.willAnimate,f=c.placementElement;switch(a){case 1:f&&this.reposition(f),e&&(this.setState({willAnimate:!1,hide:!1,animate:!0}),this.setTimeout(function(){b.transition(0)},100));break;case 0:d||this.setState({animate:!1})}},c.reposition=function(a){var b=this.props.onSuggestReposition,c=a.containerRef.current;if(c){var d=c.getBoundingClientRect(),e=d.left,f=d.top+d.height;if(b){var h=b(e,f);"object"==g(h)&&(e=h.left,f=h.top)}this.left===e&&this.top===f||(this.left=e,this.top=f,this.setState({left:e,top:f}))}},c.isImmediatelyHidden=function(){return this.containerRef&&this.containerRef.classList.contains(aa.a.portalHidden),!0},c.immediatelySyncStateWithDOM=function(){var a=this.state.hide;a!==this.isImmediatelyHidden()&&(a?this.containerRef.classList.add(aa.a.portalHidden):this.containerRef.classList.remove(aa.a.portalHidden))},c.immediatelyHide=function(){this.containerRef&&this.containerRef.classList.add(aa.a.portalHidden)},c.componentDidMount=function(){window.addEventListener("resize",this.handleWindowResize),this.transition(1)},c.componentDidUpdate=function(a,b,c){this.transition(1)},c.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),window.clearTimeout(this._timerId)},c.render=function(){var a,b=this.props,c=b.style,d=b.className,e=b.model,f=this.state,g=f.left,h=f.top,i=f.hide,j=f.animate;e.activePortal;var k=v()(((a={})[aa.a.portal]=!0,a[aa.a.portalHidden]=i,a[aa.a.portalAnimate]=j,a[d]=void 0!==d,a));return p.a.createElement("div",{ref:this.handleRef,className:k,style:_()({left:g,top:h},c)})},b}(p.a.Component),n()(O,"displayName","Portal"),n()(O,"propTypes",{placementElement:t.a.any,style:t.a.object,className:t.a.string,onRefRendered:t.a.func,onSuggestReposition:t.a.func}),N=P))||N,ca=c(15),da=c.n(ca),ea=Object(w.observer)((S=R=function(a){function b(b){var c;return c=a.call(this,b)||this,n()(l()(l()(c)),"placementRefHandlers",y(function(a){return Array.from({length:a+1},function(a,b){return c.handlePlacementRef.bind(l()(l()(c)),b)})})),c.state={},c.handleKeyDown=c.handleKeyDown.bind(l()(l()(c))),c.handleFocus=c.handleFocus.bind(l()(l()(c))),c.handleBlur=c.handleBlur.bind(l()(l()(c))),c.suggestComposedRenderer=c.suggestComposedRenderer.bind(l()(l()(c))),c.handlePortalRefRendered=c.handlePortalRefRendered.bind(l()(l()(c))),c.containerRef=p.a.createRef(),c.portalRef=p.a.createRef(),c.placementRefs={},c}j()(b,a);var c=b.prototype;return c.setupFocusAfterMove=function(a){var b=a.fromInput,c=this.props.model;c.lastPlacement.active?(Object(d.applyAction)(c,{name:e.SET_OPERAND_FLAGS,args:[c.active,{active:!0,editing:!0}]}),this.callbackLifecycle(c.active,F)):b&&this.containerRef.current.focus()},c.moveActiveOperandId=function(a,b){var c=b.cursor,f=b.fromInput,g=b.direction,h=this.props.model;(!f||f&&("prev"===g&&"start"===c||"next"===g&&"end"===c))&&(a.preventDefault(),Object(d.applyAction)(h,{name:"next"===g?e.STOP_EDITING_AND_ACTIVATE_NEXT:e.STOP_EDITING_AND_ACTIVATE_PREV}),this.setupFocusAfterMove({fromInput:f}))},c.invokeOperandCallback=function(a,b){var c=this.placementRefs[a];c&&c.invokeOperandCallback(b)},c.scheduleOperandCallback=function(a,b){var c=this.placementRefs[a];c&&c.scheduleOperandCallback(b)},c.callbackLifecycle=function(a,b){this.invokeOperandCallback(a,b),this.scheduleOperandCallback(a,b+"ed")},c.handleBackspace=function(a){var b=a.cursor,c=a.fromInput,f=this.props.model;c&&"start"===b&&f.active===f.placements.length&&Object(d.applyAction)(f,{name:e.POP})},c.handleEnter=function(a){var b=a.cursor,c=a.fromInput,f=this.props.model,g=f.getTargetOrLastPlacement(f.active);(!c||c&&"end"===b)&&(g.editing?Object(d.applyAction)(f,{name:e.STOP_EDITING_AND_ACTIVATE_NEXT}):(Object(d.applyAction)(f,{name:e.SET_OPERAND_FLAGS,args:[f.active,{active:!0,editing:g.editable}]}),g.editable&&this.callbackLifecycle(f.active,F)),this.setupFocusAfterMove({fromInput:c}))},c.handleArrowLeft=function(a,b){var c=b.cursor,d=b.fromInput;this.moveActiveOperandId(a,{cursor:c,fromInput:d,direction:"prev"})},c.handleArrowRight=function(a,b){var c=b.cursor,d=b.fromInput;this.moveActiveOperandId(a,{cursor:c,fromInput:d,direction:"next"})},c.handleKeyDown=function(a){var b=a.target,c="INPUT"===b.nodeName,d=0===b.selectionStart&&b.selectionStart===b.selectionEnd,e=b.selectionStart===(b.value||"").length&&b.selectionStart===b.selectionEnd,f="none";d?f="start":e&&(f="end");var g={cursor:f,fromInput:c};switch(a.keyCode){case 8:return this.handleBackspace(g);case 13:return this.handleEnter(g);case 37:return this.handleArrowLeft(a,g);case 39:return this.handleArrowRight(a,g)}},c.hasOwnFocus=function(){if(!this.props&&!this.containerRef||!this.containerRef.current)return!1;var a=document.activeElement,b=this.containerRef.current,c=this.state.portalRef;return a&&a!==window&&(a===b||b.contains(a)||c&&c.contains(a))},c.shouldBlur=function(){if(!this.props&&!this.containerRef||!this.containerRef.current)return!1;var a=document.activeElement,b=this.containerRef.current,c=this.state.portalRef;return!(a&&a!==window&&(b===a||b.contains(a)||c&&c.contains(a)))},c.handleFocus=function(){var a=this.portalRef.current;a&&a.immediatelySyncStateWithDOM()},c.handleBlur=function(){var a=this,b=this.portalRef.current;b&&b.immediatelyHide(),window.setTimeout(function(){if(a.shouldBlur()){var b=a.props.onBlur;a.props.model[e.DEACTIVATE_ALL](),b&&b()}},0)},c.focus=function(){var a=this.props.model,b=a.active,c=a.operands,d=this.placementRefs[b]||this.placementRefs[c.length];d&&d.focus()},c.blur=function(){if(this.hasOwnFocus()){var a=this.props.onBlur;this.props.model[e.DEACTIVATE_ALL](),a&&a(),document.activeElement&&document.activeElement.blur()}},c.handlePlacementRef=function(a,b){this.placementRefs[a]=b},c.handlePortalRefRendered=function(a){this.setState({portalRef:a})},c.suggestComposedRenderer=function(a,b){var c=this.props,d=c.model,e=c.inputRenderer,f=c.suggestRenderer,g=c.onSuggestShow,h=b.portalRef;return this.inputRef=b.ref,h&&"function"==typeof g&&g(),p.a.createElement(p.a.Fragment,null,e(a,b),h&&r.a.createPortal(p.a.createElement(Y,{model:d,active:d.lastPlacement.active,suggestRenderer:f}),h))},c.render=function(){var a,b=this.props,c=b.className,d=b.style,e=b.placementClassName,f=b.placementStyle,g=b.operandRenderer,h=b.model,i=b.portal,j=b.onSuggestReposition,k=this.state.portalRef,l=h.placements,m=this.placementRefHandlers(l.length),n=v()(((a={})[da.a.smartInput]=!0,a[c]=void 0!==c,a));return p.a.createElement("span",{ref:this.containerRef,style:d,className:n,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:0},l.map(function(a,b){return p.a.createElement(V,{ref:m[b],key:G(a.operand,b),model:a,operand:a,portalRef:k,index:b,store:h,operandRenderer:g,style:f,className:e})}),p.a.createElement(V,{ref:m[l.length],model:h.lastPlacement,store:h,index:l.length,portalRef:k,operandRenderer:this.suggestComposedRenderer}),i&&r.a.createPortal(p.a.createElement(ba,{ref:this.portalRef,model:h,placementRefs:this.placementRefs,onRefRendered:this.handlePortalRefRendered,onSuggestReposition:j}),i))},b}(p.a.Component),n()(R,"displayName","SmartInput"),n()(R,"propTypes",{model:t.a.any.isRequired,operandRenderer:t.a.func.isRequired,inputRenderer:t.a.func.isRequired,suggestRenderer:t.a.func.isRequired,style:t.a.object,className:t.a.string,placementStyle:t.a.object,placementClassName:t.a.string,portal:t.a.any,onFocus:t.a.func,onBlur:t.a.func,onSuggestShow:t.a.func,onSuggestReposition:t.a.func}),Q=S))||Q;c.d(b,"createModel",function(){return f}),c.d(b,"SmartInputActions",function(){return e}),c.d(b,"SmartInput",function(){return ea})}])})},1190:function(a,b,c){var d;function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(){"use strict";var f={}.hasOwnProperty;function g(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];if(c){var d=e(c);if("string"===d||"number"===d)a.push(c);else if(Array.isArray(c)&&c.length){var h=g.apply(null,c);if(h)a.push(h)}else if("object"===d)for(var i in c)if(f.call(c,i)&&c[i])a.push(i)}}return a.join(" ")}if(a.exports)g.default=g,a.exports=g;else if("object"===e(c.amdO)&&c.amdO)void 0===(d=function(){return g}.apply(b,[]))||(a.exports=d);else window.classNames=g}()},855:function(a){"use strict";function b(a){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}a.exports=function a(c,d){if(c===d)return!0;if(c&&d&&"object"==b(c)&&"object"==b(d)){if(c.constructor!==d.constructor)return!1;var e,f,g;if(Array.isArray(c)){if((e=c.length)!=d.length)return!1;for(f=e;0!=f--;)if(!a(c[f],d[f]))return!1;return!0}if(c.constructor===RegExp)return c.source===d.source&&c.flags===d.flags;if(c.valueOf!==Object.prototype.valueOf)return c.valueOf()===d.valueOf();if(c.toString!==Object.prototype.toString)return c.toString()===d.toString();if((e=(g=Object.keys(c)).length)!==Object.keys(d).length)return!1;for(f=e;0!=f--;)if(!Object.prototype.hasOwnProperty.call(d,g[f]))return!1;for(f=e;0!=f--;){var h=g[f];if(!a(c[h],d[h]))return!1}return!0}return c!=c&&d!=d}},465:function(a){"use strict";function b(a){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}a.exports=function a(c,d){if(c===d)return!0;if(c&&d&&"object"==b(c)&&"object"==b(d)){if(c.constructor!==d.constructor)return!1;var e,f,g;if(Array.isArray(c)){if((e=c.length)!=d.length)return!1;for(f=e;0!=f--;)if(!a(c[f],d[f]))return!1;return!0}if(c.constructor===RegExp)return c.source===d.source&&c.flags===d.flags;if(c.valueOf!==Object.prototype.valueOf)return c.valueOf()===d.valueOf();if(c.toString!==Object.prototype.toString)return c.toString()===d.toString();if((e=(g=Object.keys(c)).length)!==Object.keys(d).length)return!1;for(f=e;0!=f--;)if(!Object.prototype.hasOwnProperty.call(d,g[f]))return!1;for(f=e;0!=f--;){var h=g[f];if("_owner"!==h||!c.$$typeof)if(!a(c[h],d[h]))return!1}return!0}return c!=c&&d!=d}},6326:function(a,b,c){var d,e,f,g;function h(a){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}g=function(a){"use strict";function b(a,b,c){var d,e;if("m"===c)return b?"минута":"минуту";else return a+" "+(d=+a,e={ss:b?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:b?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[c].split("_"),d%10==1&&d%100!=11?e[0]:d%10>=2&&d%10<=4&&(d%100<10||d%100>=20)?e[1]:e[2])}var c=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];return a.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:c,longMonthsParse:c,shortMonthsParse:c,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(a){if(a.week()!==this.week())switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}else if(2===this.day())return"[Во] dddd [в] LT";else return"[В] dddd [в] LT"},lastWeek:function(a){if(a.week()!==this.week())switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}else if(2===this.day())return"[Во] dddd [в] LT";else return"[В] dddd [в] LT"},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:b,m:b,mm:b,h:"час",hh:b,d:"день",dd:b,M:"месяц",MM:b,y:"год",yy:b},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(a){return/^(дня|вечера)$/.test(a)},meridiem:function(a,b,c){if(a<4)return"ночи";else if(a<12)return"утра";else if(a<17)return"дня";else return"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:4}})},"object"===(0?0:h(b))?g(c(4898)):(e=[c(4898)],void 0===(f="function"==typeof(d=g)?d.apply(b,e):d)||(a.exports=f))},4898:function(a,b,c){var d,e,f;function g(a){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}a=c.nmd(a),f=function(){"use strict";var b,d;function e(){return b.apply(null,arguments)}function f(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function h(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function i(a){return void 0===a}function j(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function k(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function m(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function n(a,b){for(var c in b)if(m(b,c))a[c]=b[c];if(m(b,"toString"))a.toString=b.toString;if(m(b,"valueOf"))a.valueOf=b.valueOf;return a}function o(a,b,c,d){return zb(a,b,c,d,!0).utc()}function p(a){if(null==a._pf)a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1};return a._pf}if(Array.prototype.some)d=Array.prototype.some;else d=function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};function q(a){if(null==a._isValid){var b=p(a),c=d.call(b.parsedDateParts,function(a){return null!=a}),e=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict)e=e&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour;if(null==Object.isFrozen||!Object.isFrozen(a))a._isValid=e;else return e}return a._isValid}function r(a){var b=o(NaN);if(null!=a)n(p(b),a);else p(b).userInvalidated=!0;return b}var s=e.momentProperties=[];function t(a,b){var c,d,e;if(!i(b._isAMomentObject))a._isAMomentObject=b._isAMomentObject;if(!i(b._i))a._i=b._i;if(!i(b._f))a._f=b._f;if(!i(b._l))a._l=b._l;if(!i(b._strict))a._strict=b._strict;if(!i(b._tzm))a._tzm=b._tzm;if(!i(b._isUTC))a._isUTC=b._isUTC;if(!i(b._offset))a._offset=b._offset;if(!i(b._pf))a._pf=p(b);if(!i(b._locale))a._locale=b._locale;if(s.length>0)for(c=0;c<s.length;c++)if(!i(e=b[d=s[c]]))a[d]=e;return a}var u=!1;function v(a){if(t(this,a),this._d=new Date(null!=a._d?a._d.getTime():NaN),!this.isValid())this._d=new Date(NaN);if(!1===u)u=!0,e.updateOffset(this),u=!1}function w(a){return a instanceof v||null!=a&&null!=a._isAMomentObject}function x(a){if(a<0)return Math.ceil(a)||0;else return Math.floor(a)}function y(a){var b=+a,c=0;if(0!==b&&isFinite(b))c=x(b);return c}function z(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)if(c&&a[d]!==b[d]||!c&&y(a[d])!==y(b[d]))g++;return g+f}function A(a){if(!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn)console.warn("Deprecation warning: "+a)}function B(a,b){var c=!0;return n(function(){if(null!=e.deprecationHandler)e.deprecationHandler(null,a);if(c){for(var d,f=[],h=0;h<arguments.length;h++){if(d="","object"===g(arguments[h])){for(var i in d+="\n["+h+"] ",arguments[0])d+=i+": "+arguments[0][i]+", ";d=d.slice(0,-2)}else d=arguments[h];f.push(d)}A(a+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),c=!1}return b.apply(this,arguments)},b)}var C,D={};function E(a,b){if(null!=e.deprecationHandler)e.deprecationHandler(a,b);if(!D[a])A(b),D[a]=!0}function F(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function G(a,b){var c,d=n({},a);for(c in b)if(m(b,c))if(h(a[c])&&h(b[c]))d[c]={},n(d[c],a[c]),n(d[c],b[c]);else if(null!=b[c])d[c]=b[c];else delete d[c];for(c in a)if(m(a,c)&&!m(b,c)&&h(a[c]))d[c]=n({},d[c]);return d}function H(a){if(null!=a)this.set(a)}if(e.suppressDeprecationWarnings=!1,e.deprecationHandler=null,Object.keys)C=Object.keys;else C=function(a){var b,c=[];for(b in a)if(m(a,b))c.push(b);return c};var I={};function J(a,b){var c=a.toLowerCase();I[c]=I[c+"s"]=I[b]=a}function K(a){return"string"==typeof a?I[a]||I[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)if(m(a,c))if(b=K(c))d[b]=a[c];return d}var M={};function N(a,b){M[a]=b}function O(a,b,c){var d=""+Math.abs(a),e=b-d.length;return(a>=0?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Q=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},S={};function T(a,b,c,d){var e=d;if("string"==typeof d)e=function(){return this[d]()};if(a)S[a]=e;if(b)S[b[0]]=function(){return O(e.apply(this,arguments),b[1],b[2])};if(c)S[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)}}function U(a){if(a.match(/\[[\s\S]/))return a.replace(/^\[|\]$/g,"");else return a.replace(/\\/g,"")}function V(a,b){if(!a.isValid())return a.localeData().invalidDate();else return b=W(b,a.localeData()),R[b]=R[b]||function(a){var b,c,d=a.match(P);for(b=0,c=d.length;b<c;b++)if(S[d[b]])d[b]=S[d[b]];else d[b]=U(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=F(d[e])?d[e].call(b,a):d[e];return f}}(b),R[b](a)}function W(a,b){var c=5;function d(a){return b.longDateFormat(a)||a}for(Q.lastIndex=0;c>=0&&Q.test(a);)a=a.replace(Q,d),Q.lastIndex=0,c-=1;return a}var X=/\d/,Y=/\d\d/,Z=/\d{3}/,_=/\d{4}/,$=/[+-]?\d{6}/,aa=/\d\d?/,ba=/\d\d\d\d?/,ca=/\d\d\d\d\d\d?/,da=/\d{1,3}/,ea=/\d{1,4}/,fa=/[+-]?\d{1,6}/,ga=/\d+/,ha=/[+-]?\d+/,ia=/Z|[+-]\d\d:?\d\d/gi,ja=/Z|[+-]\d\d(?::?\d\d)?/gi,ka=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,la={};function ma(a,b,c){la[a]=F(b)?b:function(a,d){return a&&c?c:b}}function na(a,b){if(!m(la,a))return new RegExp(oa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})));else return la[a](b._strict,b._locale)}function oa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pa={};function qa(a,b){var c,d=b;if("string"==typeof a)a=[a];if(j(b))d=function(a,c){c[b]=y(a)};for(c=0;c<a.length;c++)pa[a[c]]=d}function ra(a,b){qa(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function sa(a,b,c){if(null!=b&&m(pa,a))pa[a](b,c._a,c,a)}function ta(a){return ua(a)?366:365}function ua(a){return a%4==0&&a%100!=0||a%400==0}T("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),J("year","y"),N("year",1),ma("Y",ha),ma("YY",aa,Y),ma("YYYY",ea,_),ma("YYYYY",fa,$),ma("YYYYYY",fa,$),qa(["YYYYY","YYYYYY"],0),qa("YYYY",function(a,b){b[0]=2===a.length?e.parseTwoDigitYear(a):y(a)}),qa("YY",function(a,b){b[0]=e.parseTwoDigitYear(a)}),qa("Y",function(a,b){b[0]=parseInt(a,10)}),e.parseTwoDigitYear=function(a){return y(a)+(y(a)>68?1900:2e3)};var va,wa=xa("FullYear",!0);function xa(a,b){return function(c){if(null!=c)return za(this,a,c),e.updateOffset(this,b),this;else return ya(this,a)}}function ya(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function za(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&ua(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),Aa(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}if(Array.prototype.indexOf)va=Array.prototype.indexOf;else va=function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};function Aa(a,b){if(isNaN(a)||isNaN(b))return NaN;var c,d=(b%(c=12)+c)%c;return a+=(b-d)/12,1===d?ua(a)?29:28:31-d%7%2}T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),T("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),N("month",8),ma("M",aa),ma("MM",aa,Y),ma("MMM",function(a,b){return b.monthsShortRegex(a)}),ma("MMMM",function(a,b){return b.monthsRegex(a)}),qa(["M","MM"],function(a,b){b[1]=y(a)-1}),qa(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);if(null!=e)b[1]=e;else p(c).invalidMonth=a});var Ba=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ca="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Da="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ea(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=o([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();if(c)if("MMM"===b)return-1!==(e=va.call(this._shortMonthsParse,g))?e:null;else return-1!==(e=va.call(this._longMonthsParse,g))?e:null;else if("MMM"===b)if(-1!==(e=va.call(this._shortMonthsParse,g)))return e;else return-1!==(e=va.call(this._longMonthsParse,g))?e:null;else if(-1!==(e=va.call(this._longMonthsParse,g)))return e;else return-1!==(e=va.call(this._shortMonthsParse,g))?e:null}function Fa(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=y(b);else if(!j(b=a.localeData().monthsParse(b)))return a;return c=Math.min(a.date(),Aa(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function Ga(a){if(null!=a)return Fa(this,a),e.updateOffset(this,!0),this;else return ya(this,"Month")}var Ha=ka,Ia=ka;function Ja(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=o([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=oa(d[b]),e[b]=oa(e[b]);for(b=0;b<24;b++)f[b]=oa(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function Ka(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);if(a<100&&a>=0&&isFinite(h.getFullYear()))h.setFullYear(a);return h}function La(a){var b=new Date(Date.UTC.apply(null,arguments));if(a<100&&a>=0&&isFinite(b.getUTCFullYear()))b.setUTCFullYear(a);return b}function Ma(a,b,c){var d=7+b-c;return-(7+La(a,0,d).getUTCDay()-b)%7+d-1}function Na(a,b,c,d,e){var f,g,h=1+7*(b-1)+(7+c-d)%7+Ma(a,d,e);if(h<=0)g=ta(f=a-1)+h;else if(h>ta(a))f=a+1,g=h-ta(a);else f=a,g=h;return{year:f,dayOfYear:g}}function Oa(a,b,c){var d,e,f=Ma(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;if(g<1)d=g+Pa(e=a.year()-1,b,c);else if(g>Pa(a.year(),b,c))d=g-Pa(a.year(),b,c),e=a.year()+1;else e=a.year(),d=g;return{week:d,year:e}}function Pa(a,b,c){var d=Ma(a,b,c),e=Ma(a+1,b,c);return(ta(a)-d+e)/7}T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),N("week",5),N("isoWeek",5),ma("w",aa),ma("ww",aa,Y),ma("W",aa),ma("WW",aa,Y),ra(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=y(a)}),T("d",0,"do","day"),T("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),T("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),T("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),ma("d",aa),ma("e",aa),ma("E",aa),ma("dd",function(a,b){return b.weekdaysMinRegex(a)}),ma("ddd",function(a,b){return b.weekdaysShortRegex(a)}),ma("dddd",function(a,b){return b.weekdaysRegex(a)}),ra(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);if(null!=e)b.d=e;else p(c).invalidWeekday=a}),ra(["d","e","E"],function(a,b,c,d){b[d]=y(a)});var Qa="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ra="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Sa="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ta(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=o([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();if(c)if("dddd"===b)return-1!==(e=va.call(this._weekdaysParse,g))?e:null;else if("ddd"===b)return-1!==(e=va.call(this._shortWeekdaysParse,g))?e:null;else return-1!==(e=va.call(this._minWeekdaysParse,g))?e:null;else if("dddd"===b){if(-1!==(e=va.call(this._weekdaysParse,g)))return e;if(-1!==(e=va.call(this._shortWeekdaysParse,g)))return e;else return-1!==(e=va.call(this._minWeekdaysParse,g))?e:null}else if("ddd"===b){if(-1!==(e=va.call(this._shortWeekdaysParse,g)))return e;if(-1!==(e=va.call(this._weekdaysParse,g)))return e;else return-1!==(e=va.call(this._minWeekdaysParse,g))?e:null}else{if(-1!==(e=va.call(this._minWeekdaysParse,g)))return e;if(-1!==(e=va.call(this._weekdaysParse,g)))return e;else return-1!==(e=va.call(this._shortWeekdaysParse,g))?e:null}}var Ua=ka,Va=ka,Wa=ka;function Xa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=o([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=oa(h[b]),i[b]=oa(i[b]),j[b]=oa(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Ya(){return this.hours()%12||12}function Za(a,b){T(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function $a(a,b){return b._meridiemParse}T("H",["HH",2],0,"hour"),T("h",["hh",2],0,Ya),T("k",["kk",2],0,function(){return this.hours()||24}),T("hmm",0,0,function(){return""+Ya.apply(this)+O(this.minutes(),2)}),T("hmmss",0,0,function(){return""+Ya.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),Za("a",!0),Za("A",!1),J("hour","h"),N("hour",13),ma("a",$a),ma("A",$a),ma("H",aa),ma("h",aa),ma("k",aa),ma("HH",aa,Y),ma("hh",aa,Y),ma("kk",aa,Y),ma("hmm",ba),ma("hmmss",ca),ma("Hmm",ba),ma("Hmmss",ca),qa(["H","HH"],3),qa(["k","kk"],function(a,b,c){var d=y(a);b[3]=24===d?0:d}),qa(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),qa(["h","hh"],function(a,b,c){b[3]=y(a),p(c).bigHour=!0}),qa("hmm",function(a,b,c){var d=a.length-2;b[3]=y(a.substr(0,d)),b[4]=y(a.substr(d)),p(c).bigHour=!0}),qa("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[3]=y(a.substr(0,d)),b[4]=y(a.substr(d,2)),b[5]=y(a.substr(e)),p(c).bigHour=!0}),qa("Hmm",function(a,b,c){var d=a.length-2;b[3]=y(a.substr(0,d)),b[4]=y(a.substr(d))}),qa("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[3]=y(a.substr(0,d)),b[4]=y(a.substr(d,2)),b[5]=y(a.substr(e))});var _a,ab=xa("Hours",!0),bb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ca,monthsShort:Da,week:{dow:0,doy:6},weekdays:Qa,weekdaysMin:Sa,weekdaysShort:Ra,meridiemParse:/[ap]\.?m?\.?/i},cb={},db={};function eb(a){return a?a.toLowerCase().replace("_","-"):a}function fb(b){var d=null;if(!cb[b]&&a&&a.exports)try{d=_a._abbr,c(8293)("./"+b),gb(d)}catch(a){}return cb[b]}function gb(a,b){var c;if(a){if(i(b))c=ib(a);else c=hb(a,b);if(c)_a=c;else if("undefined"!=typeof console&&console.warn)console.warn("Locale "+a+" not found. Did you forget to load it?")}return _a._abbr}function hb(a,b){if(null!==b){var c,d=bb;if(b.abbr=a,null!=cb[a])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),d=cb[a]._config;else if(null!=b.parentLocale)if(null!=cb[b.parentLocale])d=cb[b.parentLocale]._config;else if(null!=(c=fb(b.parentLocale)))d=c._config;else{if(!db[b.parentLocale])db[b.parentLocale]=[];return db[b.parentLocale].push({name:a,config:b}),null}if(cb[a]=new H(G(d,b)),db[a])db[a].forEach(function(a){hb(a.name,a.config)});return gb(a),cb[a]}else return delete cb[a],null}function ib(a){var b;if(a&&a._locale&&a._locale._abbr)a=a._locale._abbr;if(!a)return _a;if(!f(a)){if(b=fb(a))return b;a=[a]}return function(a){for(var b,c,d,e,f=0;f<a.length;){for(b=(e=eb(a[f]).split("-")).length,c=(c=eb(a[f+1]))?c.split("-"):null;b>0;){if(d=fb(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&z(e,c,!0)>=b-1)break;b--}f++}return _a}(a)}function jb(a){var b,c=a._a;if(c&&-2===p(a).overflow){if(b=c[1]<0||c[1]>11?1:c[2]<1||c[2]>Aa(c[0],c[1])?2:c[3]<0||c[3]>24||24===c[3]&&(0!==c[4]||0!==c[5]||0!==c[6])?3:c[4]<0||c[4]>59?4:c[5]<0||c[5]>59?5:c[6]<0||c[6]>999?6:-1,p(a)._overflowDayOfYear&&(b<0||b>2))b=2;if(p(a)._overflowWeeks&&-1===b)b=7;if(p(a)._overflowWeekday&&-1===b)b=8;p(a).overflow=b}return a}function kb(a,b,c){if(null!=a)return a;if(null!=b)return b;else return c}function lb(a){var b,c,d,f,g,h=[];if(!a._d){if(d=function(a){var b=new Date(e.now());if(a._useUTC)return[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()];else return[b.getFullYear(),b.getMonth(),b.getDate()]}(a),a._w&&null==a._a[2]&&null==a._a[1])!function(a){var b,c,d,e,f,g,h,i;if(null!=(b=a._w).GG||null!=b.W||null!=b.E){if(f=1,g=4,c=kb(b.GG,a._a[0],Oa(Ab(),1,4).year),d=kb(b.W,1),(e=kb(b.E,1))<1||e>7)i=!0}else{f=a._locale._week.dow,g=a._locale._week.doy;var j=Oa(Ab(),f,g);if(c=kb(b.gg,a._a[0],j.year),d=kb(b.w,j.week),null!=b.d){if((e=b.d)<0||e>6)i=!0}else if(null!=b.e){if(e=b.e+f,b.e<0||b.e>6)i=!0}else e=f}if(d<1||d>Pa(c,f,g))p(a)._overflowWeeks=!0;else if(null!=i)p(a)._overflowWeekday=!0;else h=Na(c,d,e,f,g),a._a[0]=h.year,a._dayOfYear=h.dayOfYear}(a);if(null!=a._dayOfYear){if(g=kb(a._a[0],d[0]),a._dayOfYear>ta(g)||0===a._dayOfYear)p(a)._overflowDayOfYear=!0;c=La(g,0,a._dayOfYear),a._a[1]=c.getUTCMonth(),a._a[2]=c.getUTCDate()}for(b=0;b<3&&null==a._a[b];++b)a._a[b]=h[b]=d[b];for(;b<7;b++)a._a[b]=h[b]=null==a._a[b]?2===b?1:0:a._a[b];if(24===a._a[3]&&0===a._a[4]&&0===a._a[5]&&0===a._a[6])a._nextDay=!0,a._a[3]=0;if(a._d=(a._useUTC?La:Ka).apply(null,h),f=a._useUTC?a._d.getUTCDay():a._d.getDay(),null!=a._tzm)a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);if(a._nextDay)a._a[3]=24;if(a._w&&void 0!==a._w.d&&a._w.d!==f)p(a).weekdayMismatch=!0}}var mb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ob=/Z|[+-]\d\d(?::?\d\d)?/,pb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],qb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],rb=/^\/?Date\((\-?\d+)/i;function sb(a){var b,c,d,e,f,g,h=a._i,i=mb.exec(h)||nb.exec(h);if(i){for(p(a).iso=!0,b=0,c=pb.length;b<c;b++)if(pb[b][1].exec(i[1])){e=pb[b][0],d=!1!==pb[b][2];break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=qb.length;b<c;b++)if(qb[b][1].exec(i[3])){f=(i[2]||" ")+qb[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4])if(ob.exec(i[4]))g="Z";else return void(a._isValid=!1);a._f=e+(f||"")+(g||""),xb(a)}else a._isValid=!1}var tb=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function ub(a){var b=parseInt(a,10);if(b<=49)return 2e3+b;else if(b<=999)return 1900+b;return b}var vb={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wb(a){var b=tb.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(b){var c=function(a,b,c,d,e,f){var g=[ub(a),Da.indexOf(b),parseInt(c,10),parseInt(d,10),parseInt(e,10)];if(f)g.push(parseInt(f,10));return g}(b[4],b[3],b[2],b[5],b[6],b[7]);if(!function(a,b,c){if(a)if(Ra.indexOf(a)!==new Date(b[0],b[1],b[2]).getDay())return p(c).weekdayMismatch=!0,c._isValid=!1,!1;return!0}(b[1],c,a))return;a._a=c,a._tzm=function(a,b,c){if(a)return vb[a];else if(b)return 0;else{var d=parseInt(c,10),e=d%100;return(d-e)/100*60+e}}(b[8],b[9],b[10]),a._d=La.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),p(a).rfc2822=!0}else a._isValid=!1}function xb(a){if(a._f!==e.ISO_8601)if(a._f!==e.RFC_2822){a._a=[],p(a).empty=!0;var b,c,d,f,g,h=""+a._i,i=h.length,j=0;for(d=W(a._f,a._locale).match(P)||[],b=0;b<d.length;b++){if(f=d[b],c=(h.match(na(f,a))||[])[0]){if((g=h.substr(0,h.indexOf(c))).length>0)p(a).unusedInput.push(g);h=h.slice(h.indexOf(c)+c.length),j+=c.length}if(S[f]){if(c)p(a).empty=!1;else p(a).unusedTokens.push(f);sa(f,c,a)}else if(a._strict&&!c)p(a).unusedTokens.push(f)}if(p(a).charsLeftOver=i-j,h.length>0)p(a).unusedInput.push(h);if(a._a[3]<=12&&!0===p(a).bigHour&&a._a[3]>0)p(a).bigHour=void 0;p(a).parsedDateParts=a._a.slice(0),p(a).meridiem=a._meridiem,a._a[3]=function(a,b,c){var d;if(null==c)return b;if(null!=a.meridiemHour)return a.meridiemHour(b,c);else if(null!=a.isPM){if((d=a.isPM(c))&&b<12)b+=12;if(!d&&12===b)b=0;return b}else return b}(a._locale,a._a[3],a._meridiem),lb(a),jb(a)}else wb(a);else sb(a)}function yb(a){var b=a._i,c=a._f;if(a._locale=a._locale||ib(a._l),null===b||void 0===c&&""===b)return r({nullInput:!0});if("string"==typeof b)a._i=b=a._locale.preparse(b);if(w(b))return new v(jb(b));else if(k(b))a._d=b;else if(f(c))!function(a){var b,c,d,e,f;if(0===a._f.length)return p(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++){if(f=0,b=t({},a),null!=a._useUTC)b._useUTC=a._useUTC;if(b._f=a._f[e],xb(b),q(b))if(f+=p(b).charsLeftOver,f+=10*p(b).unusedTokens.length,p(b).score=f,null==d||f<d)d=f,c=b}n(a,c||b)}(a);else if(c)xb(a);else!function(a){var b=a._i;if(i(b))a._d=new Date(e.now());else if(k(b))a._d=new Date(b.valueOf());else if("string"==typeof b)!function(a){var b=rb.exec(a._i);if(null===b){if(sb(a),!1===a._isValid)if(delete a._isValid,wb(a),!1===a._isValid)delete a._isValid,e.createFromInputFallback(a)}else a._d=new Date(+b[1])}(a);else if(f(b))a._a=l(b.slice(0),function(a){return parseInt(a,10)}),lb(a);else if(h(b))!function(a){if(!a._d){var b=L(a._i);a._a=l([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),lb(a)}}(a);else if(j(b))a._d=new Date(b);else e.createFromInputFallback(a)}(a);if(!q(a))a._d=null;return a}function zb(a,b,c,d,e){var g={};if(!0===c||!1===c)d=c,c=void 0;if(h(a)&&function(a){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(a).length;else{var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}}(a)||f(a)&&0===a.length)a=void 0;return g._isAMomentObject=!0,g._useUTC=g._isUTC=e,g._l=c,g._i=a,g._f=b,g._strict=d,function(a){var b=new v(jb(yb(a)));if(b._nextDay)b.add(1,"d"),b._nextDay=void 0;return b}(g)}function Ab(a,b,c,d){return zb(a,b,c,d,!1)}e.createFromInputFallback=B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var Bb=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=Ab.apply(null,arguments);if(this.isValid()&&a.isValid())return a<this?this:a;else return r()}),Cb=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=Ab.apply(null,arguments);if(this.isValid()&&a.isValid())return a>this?this:a;else return r()});function Db(a,b){var c,d;if(1===b.length&&f(b[0]))b=b[0];if(!b.length)return Ab();for(c=b[0],d=1;d<b.length;++d)if(!b[d].isValid()||b[d][a](c))c=b[d];return c}var Eb=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Fb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._isValid=function(a){for(var b in a)if(-1===va.call(Eb,b)||null!=a[b]&&isNaN(a[b]))return!1;for(var c=!1,d=0;d<Eb.length;++d)if(a[Eb[d]]){if(c)return!1;if(parseFloat(a[Eb[d]])!==y(a[Eb[d]]))c=!0}return!0}(b),this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ib(),this._bubble()}function Gb(a){return a instanceof Fb}function Hb(a){if(a<0)return-1*Math.round(-1*a);else return Math.round(a)}function Ib(a,b){T(a,0,0,function(){var a=this.utcOffset(),c="+";if(a<0)a=-a,c="-";return c+O(~~(a/60),2)+b+O(~~a%60,2)})}Ib("Z",":"),Ib("ZZ",""),ma("Z",ja),ma("ZZ",ja),qa(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Kb(ja,a)});var Jb=/([\+\-]|\d\d)/gi;function Kb(a,b){var c=(b||"").match(a);if(null===c)return null;var d=((c[c.length-1]||[])+"").match(Jb)||["-",0,0],e=60*d[1]+y(d[2]);return 0===e?0:"+"===d[0]?e:-e}function Lb(a,b){var c,d;if(b._isUTC)return c=b.clone(),d=(w(a)||k(a)?a.valueOf():Ab(a).valueOf())-c.valueOf(),c._d.setTime(c._d.valueOf()+d),e.updateOffset(c,!1),c;else return Ab(a).local()}function Mb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Nb(){return this.isValid()?this._isUTC&&0===this._offset:!1}e.updateOffset=function(){};var Ob=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Pb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Qb(a,b){var c,d,e,f=a,h=null;if(Gb(a))f={ms:a._milliseconds,d:a._days,M:a._months};else if(j(a))if(f={},b)f[b]=a;else f.milliseconds=a;else if(h=Ob.exec(a))c="-"===h[1]?-1:1,f={y:0,d:y(h[2])*c,h:y(h[3])*c,m:y(h[4])*c,s:y(h[5])*c,ms:y(Hb(1e3*h[6]))*c};else if(h=Pb.exec(a))c="-"===h[1]?-1:"+"===h[1]?1:1,f={y:Rb(h[2],c),M:Rb(h[3],c),w:Rb(h[4],c),d:Rb(h[5],c),h:Rb(h[6],c),m:Rb(h[7],c),s:Rb(h[8],c)};else if(null==f)f={};else if("object"===g(f)&&("from"in f||"to"in f))e=function(a,b){var c;if(!a.isValid()||!b.isValid())return{milliseconds:0,months:0};if(b=Lb(b,a),a.isBefore(b))c=Sb(a,b);else(c=Sb(b,a)).milliseconds=-c.milliseconds,c.months=-c.months;return c}(Ab(f.from),Ab(f.to)),(f={}).ms=e.milliseconds,f.M=e.months;if(d=new Fb(f),Gb(a)&&m(a,"_locale"))d._locale=a._locale;return d}function Rb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Sb(a,b){var c={milliseconds:0,months:0};if(c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b))--c.months;return c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Tb(a,b){return function(c,d){var e;if(null!==d&&!isNaN(+d))E(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e;return Ub(this,Qb(c="string"==typeof c?+c:c,d),a),this}}function Ub(a,b,c,d){var f=b._milliseconds,g=Hb(b._days),h=Hb(b._months);if(a.isValid()){if(d=null==d?!0:d,h)Fa(a,ya(a,"Month")+h*c);if(g)za(a,"Date",ya(a,"Date")+g*c);if(f)a._d.setTime(a._d.valueOf()+f*c);if(d)e.updateOffset(a,g||h)}}Qb.fn=Fb.prototype,Qb.invalid=function(){return Qb(NaN)};var Vb=Tb(1,"add"),Wb=Tb(-1,"subtract");function Xb(a,b){var c,d=12*(b.year()-a.year())+(b.month()-a.month()),e=a.clone().add(d,"months");if(b-e<0)c=(b-e)/(e-a.clone().add(d-1,"months"));else c=(b-e)/(a.clone().add(d+1,"months")-e);return-(d+c)||0}function Yb(a){var b;if(void 0===a)return this._locale._abbr;else{if(null!=(b=ib(a)))this._locale=b;return this}}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Zb=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){if(void 0===a)return this.localeData();else return this.locale(a)});function $b(){return this._locale}function _b(a,b){T(0,[a,a.length],0,b)}function ac(a,b,c,d,e){var f;if(null==a)return Oa(this,d,e).year;else{if(b>(f=Pa(a,d,e)))b=f;return bc.call(this,a,b,c,d,e)}}function bc(a,b,c,d,e){var f=Na(a,b,c,d,e),g=La(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),_b("gggg","weekYear"),_b("ggggg","weekYear"),_b("GGGG","isoWeekYear"),_b("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),ma("G",ha),ma("g",ha),ma("GG",aa,Y),ma("gg",aa,Y),ma("GGGG",ea,_),ma("gggg",ea,_),ma("GGGGG",fa,$),ma("ggggg",fa,$),ra(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=y(a)}),ra(["gg","GG"],function(a,b,c,d){b[d]=e.parseTwoDigitYear(a)}),T("Q",0,"Qo","quarter"),J("quarter","Q"),N("quarter",7),ma("Q",X),qa("Q",function(a,b){b[1]=3*(y(a)-1)}),T("D",["DD",2],"Do","date"),J("date","D"),N("date",9),ma("D",aa),ma("DD",aa,Y),ma("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient}),qa(["D","DD"],2),qa("Do",function(a,b){b[2]=y(a.match(aa)[0])});var cc=xa("Date",!0);T("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),N("dayOfYear",4),ma("DDD",da),ma("DDDD",Z),qa(["DDD","DDDD"],function(a,b,c){c._dayOfYear=y(a)}),T("m",["mm",2],0,"minute"),J("minute","m"),N("minute",14),ma("m",aa),ma("mm",aa,Y),qa(["m","mm"],4);var dc=xa("Minutes",!1);T("s",["ss",2],0,"second"),J("second","s"),N("second",15),ma("s",aa),ma("ss",aa,Y),qa(["s","ss"],5);var ec,fc=xa("Seconds",!1);for(T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return 10*this.millisecond()}),T(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),T(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),T(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),T(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),T(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),N("millisecond",16),ma("S",da,X),ma("SS",da,Y),ma("SSS",da,Z),ec="SSSS";ec.length<=9;ec+="S")ma(ec,ga);function gc(a,b){b[6]=y(1e3*("0."+a))}for(ec="S";ec.length<=9;ec+="S")qa(ec,gc);var hc=xa("Milliseconds",!1);T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var ic=v.prototype;function jc(a){return a}ic.add=Vb,ic.calendar=function(a,b){var c=a||Ab(),d=Lb(c,this).startOf("day"),f=e.calendarFormat(this,d)||"sameElse",g=b&&(F(b[f])?b[f].call(this,c):b[f]);return this.format(g||this.localeData().calendar(f,this,Ab(c)))},ic.clone=function(){return new v(this)},ic.diff=function(a,b,c){var d,e,f;if(!this.isValid())return NaN;if(!(d=Lb(a,this)).isValid())return NaN;switch(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b)){case"year":f=Xb(this,d)/12;break;case"month":f=Xb(this,d);break;case"quarter":f=Xb(this,d)/3;break;case"second":f=(this-d)/1e3;break;case"minute":f=(this-d)/6e4;break;case"hour":f=(this-d)/36e5;break;case"day":f=(this-d-e)/864e5;break;case"week":f=(this-d-e)/6048e5;break;default:f=this-d}return c?f:x(f)},ic.endOf=function(a){if(void 0===(a=K(a))||"millisecond"===a)return this;if("date"===a)a="day";return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},ic.format=function(a){if(!a)a=this.isUtc()?e.defaultFormatUtc:e.defaultFormat;var b=V(this,a);return this.localeData().postformat(b)},ic.from=function(a,b){if(this.isValid()&&(w(a)&&a.isValid()||Ab(a).isValid()))return Qb({to:this,from:a}).locale(this.locale()).humanize(!b);else return this.localeData().invalidDate()},ic.fromNow=function(a){return this.from(Ab(),a)},ic.to=function(a,b){if(this.isValid()&&(w(a)&&a.isValid()||Ab(a).isValid()))return Qb({from:this,to:a}).locale(this.locale()).humanize(!b);else return this.localeData().invalidDate()},ic.toNow=function(a){return this.to(Ab(),a)},ic.get=function(a){if(F(this[a=K(a)]))return this[a]();else return this},ic.invalidAt=function(){return p(this).overflow},ic.isAfter=function(a,b){var c=w(a)?a:Ab(a);if(!this.isValid()||!c.isValid())return!1;if("millisecond"===(b=K(!i(b)?b:"millisecond")))return this.valueOf()>c.valueOf();else return c.valueOf()<this.clone().startOf(b).valueOf()},ic.isBefore=function(a,b){var c=w(a)?a:Ab(a);if(!this.isValid()||!c.isValid())return!1;if("millisecond"===(b=K(!i(b)?b:"millisecond")))return this.valueOf()<c.valueOf();else return this.clone().endOf(b).valueOf()<c.valueOf()},ic.isBetween=function(a,b,c,d){return("("===(d=d||"()")[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))},ic.isSame=function(a,b){var c,d=w(a)?a:Ab(a);if(!this.isValid()||!d.isValid())return!1;if("millisecond"===(b=K(b||"millisecond")))return this.valueOf()===d.valueOf();else return c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()},ic.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)},ic.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)},ic.isValid=function(){return q(this)},ic.lang=Zb,ic.locale=Yb,ic.localeData=$b,ic.max=Cb,ic.min=Bb,ic.parsingFlags=function(){return n({},p(this))},ic.set=function(a,b){if("object"===g(a))for(var c=function(a){var b=[];for(var c in a)b.push({unit:c,priority:M[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}(a=L(a)),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit]);else if(F(this[a=K(a)]))return this[a](b);return this},ic.startOf=function(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===a)this.weekday(0);if("isoWeek"===a)this.isoWeekday(1);if("quarter"===a)this.month(3*Math.floor(this.month()/3));return this},ic.subtract=Wb,ic.toArray=function(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},ic.toObject=function(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},ic.toDate=function(){return new Date(this.valueOf())},ic.toISOString=function(a){if(!this.isValid())return null;var b=!0!==a,c=b?this.clone().utc():this;if(c.year()<0||c.year()>9999)return V(c,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ");if(F(Date.prototype.toISOString))if(b)return this.toDate().toISOString();else return new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(c,"Z"));return V(c,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ic.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";if(!this.isLocal())a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z";var c="["+a+'("]',d=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e=b+'[")]';return this.format(c+d+"-MM-DD[T]HH:mm:ss.SSS"+e)},ic.toJSON=function(){return this.isValid()?this.toISOString():null},ic.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ic.unix=function(){return Math.floor(this.valueOf()/1e3)},ic.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ic.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ic.year=wa,ic.isLeapYear=function(){return ua(this.year())},ic.weekYear=function(a){return ac.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ic.isoWeekYear=function(a){return ac.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},ic.quarter=ic.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},ic.month=Ga,ic.daysInMonth=function(){return Aa(this.year(),this.month())},ic.week=ic.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},ic.isoWeek=ic.isoWeeks=function(a){var b=Oa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},ic.weeksInYear=function(){var a=this.localeData()._week;return Pa(this.year(),a.dow,a.doy)},ic.isoWeeksInYear=function(){return Pa(this.year(),1,4)},ic.date=cc,ic.day=ic.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a)return a=function(a,b){if("string"!=typeof a)return a;if(!isNaN(a))return parseInt(a,10);if("number"==typeof(a=b.weekdaysParse(a)))return a;else return null}(a,this.localeData()),this.add(a-b,"d");else return b},ic.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},ic.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=function(a,b){if("string"==typeof a)return b.weekdaysParse(a)%7||7;else return isNaN(a)?null:a}(a,this.localeData());return this.day(this.day()%7?b:b-7)}else return this.day()||7},ic.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},ic.hour=ic.hours=ab,ic.minute=ic.minutes=dc,ic.second=ic.seconds=fc,ic.millisecond=ic.milliseconds=hc,ic.utcOffset=function(a,b,c){var d,f=this._offset||0;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"==typeof a){if(null===(a=Kb(ja,a)))return this}else if(Math.abs(a)<16&&!c)a*=60;if(!this._isUTC&&b)d=Mb(this);if(this._offset=a,this._isUTC=!0,null!=d)this.add(d,"m");if(f!==a)if(!b||this._changeInProgress)Ub(this,Qb(a-f,"m"),1,!1);else if(!this._changeInProgress)this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null;return this}else return this._isUTC?f:Mb(this)},ic.utc=function(a){return this.utcOffset(0,a)},ic.local=function(a){if(this._isUTC)if(this.utcOffset(0,a),this._isUTC=!1,a)this.subtract(Mb(this),"m");return this},ic.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var a=Kb(ia,this._i);if(null!=a)this.utcOffset(a);else this.utcOffset(0,!0)}return this},ic.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;else return a=a?Ab(a).utcOffset():0,(this.utcOffset()-a)%60==0},ic.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ic.isLocal=function(){return this.isValid()?!this._isUTC:!1},ic.isUtcOffset=function(){return this.isValid()?this._isUTC:!1},ic.isUtc=Nb,ic.isUTC=Nb,ic.zoneAbbr=function(){return this._isUTC?"UTC":""},ic.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ic.dates=B("dates accessor is deprecated. Use date instead.",cc),ic.months=B("months accessor is deprecated. Use month instead",Ga),ic.years=B("years accessor is deprecated. Use year instead",wa),ic.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){if(null!=a){if("string"!=typeof a)a=-a;return this.utcOffset(a,b),this}else return-this.utcOffset()}),ic.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!i(this._isDSTShifted))return this._isDSTShifted;var a={};if(t(a,this),(a=yb(a))._a){var b=a._isUTC?o(a._a):Ab(a._a);this._isDSTShifted=this.isValid()&&z(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var kc=H.prototype;function lc(a,b,c,d){var e=ib(),f=o().set(d,b);return e[c](f,a)}function mc(a,b,c){if(j(a))b=a,a=void 0;if(a=a||"",null!=b)return lc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=lc(a,d,c,"month");return e}function nc(a,b,c,d){if("boolean"==typeof a){if(j(b))c=b,b=void 0;b=b||""}else{if(c=b=a,a=!1,j(b))c=b,b=void 0;b=b||""}var e,f=ib(),g=a?f._week.dow:0;if(null!=c)return lc(b,(c+g)%7,d,"day");var h=[];for(e=0;e<7;e++)h[e]=lc(b,(e+g)%7,d,"day");return h}kc.calendar=function(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return F(d)?d.call(b,c):d},kc.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;else return this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]},kc.invalidDate=function(){return this._invalidDate},kc.ordinal=function(a){return this._ordinal.replace("%d",a)},kc.preparse=jc,kc.postformat=jc,kc.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return F(e)?e(a,b,c,d):e.replace(/%d/i,a)},kc.pastFuture=function(a,b){var c=this._relativeTime[a>0?"future":"past"];return F(c)?c(b):c.replace(/%s/i,b)},kc.set=function(a){var b,c;for(c in a)if(F(b=a[c]))this[c]=b;else this["_"+c]=b;this._config=a,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kc.months=function(a,b){if(!a)return f(this._months)?this._months:this._months.standalone;else return f(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||Ba).test(b)?"format":"standalone"][a.month()]},kc.monthsShort=function(a,b){if(!a)return f(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;else return f(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Ba.test(b)?"format":"standalone"][a.month()]},kc.monthsParse=function(a,b,c){var d,e,f;if(this._monthsParseExact)return Ea.call(this,a,b,c);if(!this._monthsParse)this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];for(d=0;d<12;d++){if(e=o([2e3,d]),c&&!this._longMonthsParse[d])this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i");if(!c&&!this._monthsParse[d])f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i");if(c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;else if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;else if(!c&&this._monthsParse[d].test(a))return d}},kc.monthsRegex=function(a){if(this._monthsParseExact){if(!m(this,"_monthsRegex"))Ja.call(this);if(a)return this._monthsStrictRegex;else return this._monthsRegex}else{if(!m(this,"_monthsRegex"))this._monthsRegex=Ia;return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}},kc.monthsShortRegex=function(a){if(this._monthsParseExact){if(!m(this,"_monthsRegex"))Ja.call(this);if(a)return this._monthsShortStrictRegex;else return this._monthsShortRegex}else{if(!m(this,"_monthsShortRegex"))this._monthsShortRegex=Ha;return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}},kc.week=function(a){return Oa(a,this._week.dow,this._week.doy).week},kc.firstDayOfYear=function(){return this._week.doy},kc.firstDayOfWeek=function(){return this._week.dow},kc.weekdays=function(a,b){if(!a)return f(this._weekdays)?this._weekdays:this._weekdays.standalone;else return f(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]},kc.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin},kc.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort},kc.weekdaysParse=function(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ta.call(this,a,b,c);if(!this._weekdaysParse)this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[];for(d=0;d<7;d++){if(e=o([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d])this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i");if(!this._weekdaysParse[d])f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i");if(c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;else if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;else if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;else if(!c&&this._weekdaysParse[d].test(a))return d}},kc.weekdaysRegex=function(a){if(this._weekdaysParseExact){if(!m(this,"_weekdaysRegex"))Xa.call(this);if(a)return this._weekdaysStrictRegex;else return this._weekdaysRegex}else{if(!m(this,"_weekdaysRegex"))this._weekdaysRegex=Ua;return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex}},kc.weekdaysShortRegex=function(a){if(this._weekdaysParseExact){if(!m(this,"_weekdaysRegex"))Xa.call(this);if(a)return this._weekdaysShortStrictRegex;else return this._weekdaysShortRegex}else{if(!m(this,"_weekdaysShortRegex"))this._weekdaysShortRegex=Va;return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}},kc.weekdaysMinRegex=function(a){if(this._weekdaysParseExact){if(!m(this,"_weekdaysRegex"))Xa.call(this);if(a)return this._weekdaysMinStrictRegex;else return this._weekdaysMinRegex}else{if(!m(this,"_weekdaysMinRegex"))this._weekdaysMinRegex=Wa;return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}},kc.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)},kc.meridiem=function(a,b,c){if(a>11)return c?"pm":"PM";else return c?"am":"AM"},gb("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===y(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),e.lang=B("moment.lang is deprecated. Use moment.locale instead.",gb),e.langData=B("moment.langData is deprecated. Use moment.localeData instead.",ib);var oc=Math.abs;function pc(a,b,c,d){var e=Qb(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a){if(a<0)return Math.floor(a);else return Math.ceil(a)}function rc(a){return 4800*a/146097}function sc(a){return 146097*a/4800}function tc(a){return function(){return this.as(a)}}var uc=tc("ms"),vc=tc("s"),wc=tc("m"),xc=tc("h"),yc=tc("d"),zc=tc("w"),Ac=tc("M"),Bc=tc("y");function Cc(a){return function(){return this.isValid()?this._data[a]:NaN}}var Dc=Cc("milliseconds"),Ec=Cc("seconds"),Fc=Cc("minutes"),Gc=Cc("hours"),Hc=Cc("days"),Ic=Cc("months"),Jc=Cc("years"),Kc=Math.round,Lc={ss:44,s:45,m:45,h:22,d:26,M:11};function Mc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}var Nc=Math.abs;function Oc(a){return(a>0)-(a<0)||+a}function Pc(){if(!this.isValid())return this.localeData().invalidDate();var a,b,c=Nc(this._milliseconds)/1e3,d=Nc(this._days),e=Nc(this._months);a=x(c/60),b=x(a/60),c%=60,a%=60;var f=x(e/12),g=e%=12,h=d,i=b,j=a,k=c?c.toFixed(3).replace(/\.?0+$/,""):"",l=this.asSeconds();if(!l)return"P0D";var m=l<0?"-":"",n=Oc(this._months)!==Oc(l)?"-":"",o=Oc(this._days)!==Oc(l)?"-":"",p=Oc(this._milliseconds)!==Oc(l)?"-":"";return m+"P"+(f?n+f+"Y":"")+(g?n+g+"M":"")+(h?o+h+"D":"")+(i||j||k?"T":"")+(i?p+i+"H":"")+(j?p+j+"M":"")+(k?p+k+"S":"")}var Qc=Fb.prototype;return Qc.isValid=function(){return this._isValid},Qc.abs=function(){var a=this._data;return this._milliseconds=oc(this._milliseconds),this._days=oc(this._days),this._months=oc(this._months),a.milliseconds=oc(a.milliseconds),a.seconds=oc(a.seconds),a.minutes=oc(a.minutes),a.hours=oc(a.hours),a.months=oc(a.months),a.years=oc(a.years),this},Qc.add=function(a,b){return pc(this,a,b,1)},Qc.subtract=function(a,b){return pc(this,a,b,-1)},Qc.as=function(a){if(!this.isValid())return NaN;var b,c,d=this._milliseconds;if("month"===(a=K(a))||"year"===a)return b=this._days+d/864e5,c=this._months+rc(b),"month"===a?c:c/12;else switch(b=this._days+Math.round(sc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}},Qc.asMilliseconds=uc,Qc.asSeconds=vc,Qc.asMinutes=wc,Qc.asHours=xc,Qc.asDays=yc,Qc.asWeeks=zc,Qc.asMonths=Ac,Qc.asYears=Bc,Qc.valueOf=function(){if(!this.isValid())return NaN;else return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},Qc._bubble=function(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;if(!(f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0))f+=864e5*qc(sc(h)+g),g=0,h=0;return i.milliseconds=f%1e3,a=x(f/1e3),i.seconds=a%60,b=x(a/60),i.minutes=b%60,c=x(b/60),i.hours=c%24,g+=x(c/24),h+=e=x(rc(g)),g-=qc(sc(e)),d=x(h/12),h%=12,i.days=g,i.months=h,i.years=d,this},Qc.clone=function(){return Qb(this)},Qc.get=function(a){return a=K(a),this.isValid()?this[a+"s"]():NaN},Qc.milliseconds=Dc,Qc.seconds=Ec,Qc.minutes=Fc,Qc.hours=Gc,Qc.days=Hc,Qc.weeks=function(){return x(this.days()/7)},Qc.months=Ic,Qc.years=Jc,Qc.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),c=function(a,b,c){var d=Qb(a).abs(),e=Kc(d.as("s")),f=Kc(d.as("m")),g=Kc(d.as("h")),h=Kc(d.as("d")),i=Kc(d.as("M")),j=Kc(d.as("y")),k=e<=Lc.ss&&["s",e]||e<Lc.s&&["ss",e]||f<=1&&["m"]||f<Lc.m&&["mm",f]||g<=1&&["h"]||g<Lc.h&&["hh",g]||h<=1&&["d"]||h<Lc.d&&["dd",h]||i<=1&&["M"]||i<Lc.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Mc.apply(null,k)}(this,!a,b);if(a)c=b.pastFuture(+this,c);return b.postformat(c)},Qc.toISOString=Pc,Qc.toString=Pc,Qc.toJSON=Pc,Qc.locale=Yb,Qc.localeData=$b,Qc.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pc),Qc.lang=Zb,T("X",0,0,"unix"),T("x",0,0,"valueOf"),ma("x",ha),ma("X",/[+-]?\d+(\.\d{1,3})?/),qa("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),qa("x",function(a,b,c){c._d=new Date(y(a))}),e.version="2.21.0",b=Ab,e.fn=ic,e.min=function(){var a=[].slice.call(arguments,0);return Db("isBefore",a)},e.max=function(){var a=[].slice.call(arguments,0);return Db("isAfter",a)},e.now=function(){return Date.now?Date.now():+new Date},e.utc=o,e.unix=function(a){return Ab(1e3*a)},e.months=function(a,b){return mc(a,b,"months")},e.isDate=k,e.locale=gb,e.invalid=r,e.duration=Qb,e.isMoment=w,e.weekdays=function(a,b,c){return nc(a,b,c,"weekdays")},e.parseZone=function(){return Ab.apply(null,arguments).parseZone()},e.localeData=ib,e.isDuration=Gb,e.monthsShort=function(a,b){return mc(a,b,"monthsShort")},e.weekdaysMin=function(a,b,c){return nc(a,b,c,"weekdaysMin")},e.defineLocale=hb,e.updateLocale=function(a,b){if(null!=b){var c,d,e=bb;if(null!=(d=fb(a)))e=d._config;(c=new H(b=G(e,b))).parentLocale=cb[a],cb[a]=c,gb(a)}else if(null!=cb[a])if(null!=cb[a].parentLocale)cb[a]=cb[a].parentLocale;else if(null!=cb[a])delete cb[a];return cb[a]},e.locales=function(){return C(cb)},e.weekdaysShort=function(a,b,c){return nc(a,b,c,"weekdaysShort")},e.normalizeUnits=K,e.relativeTimeRounding=function(a){if(void 0===a)return Kc;if("function"==typeof a)return Kc=a,!0;else return!1},e.relativeTimeThreshold=function(a,b){if(void 0===Lc[a])return!1;if(void 0===b)return Lc[a];if(Lc[a]=b,"s"===a)Lc.ss=b-1;return!0},e.calendarFormat=function(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"},e.prototype=ic,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},e},"object"===(0?0:g(b))?a.exports=f():void 0===(e="function"==typeof(d=f)?d.call(b,c,b,a):d)||(a.exports=e)},1670:function(a,b){"use strict";b.Z={list:"_2CfM6gTzEjkumgdnQtbEOu",closer:"_3v1vhdA3mRnOU5r3fUx9lX",marusia:"_1W5n59O0Tav8M2jm64s2yc"}},9141:function(a,b){"use strict";b.Z={bellIcon:"_2BC9h-HzDLOHFW_e0qGwaZ",active:"_19-4F1HRAiXz8UPMcjfIGv",pimple:"_3YeaRM319UbriPAoOrzHho",dropdownContainer:"_1xOOk2igN8UDdp54getghd",wrapper:"_2W47Bd5NoQwT3R5vPfErPz",inWidget:"_2dhoNF5726nuiicVe7s9Co",link:"_2t77xkKF16RsxChg_On2En",linkWrapper:"_38_YMqMMxESiYeRGxgHrbJ",ponyMode:"_3abis1BWYbSbVRsOKVOBZx",linkSeeAll:"_2pUt4YIpTJAkdWnDxTYVAq",item:"_1JiOgaMmCzoMlb7kfruu0f",itemDark:"tv0gGyZ4vtY1sQiXFjVPs",itemLearnMore:"_2h_T2FIKAOKz5bcKAOY1GG",itemArrow:"NG1VaZv5CR_nwGQGrmOop",itemArrowDark:"_3g88cZ1nyMd2ZN_eVtrthK",itemContent:"_1hTrxO3EPjmh9sbb-SCzqm",itemLink:"_1mwU-o9PrmYmygri82D0LW",itemTitle:"_3WJ4a5i2Ltgmqophq0-UMN",itemText:"_15b3li2iVPWeR0MwiT03sJ",imageWrapper:"h58tG7PkYo6hehzjyWQnE",image:"_3glBkbn5WnP2xbyPAUlZ41"}},6636:function(a,b){"use strict";b.Z={icon:"RXhP-v7_FvzvPCO0ZHNhj",marusia:"_2YkzpUrU-GBcducY_Pbeos",calendar:"_2xfR_OAhZkFJ8RmFutQhcU",notification:"_2KuwAI1fHuzfaRUN8Q68-D",todo:"_3SNoJKNFMg-7pLC5Oa0NgX"}},8293:function(a,b,c){var d={"./ru":6326,"./ru.js":6326};function e(a){var b=f(a);return c(b)}function f(a){if(!c.o(d,a)){var b=new Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}return d[a]}e.keys=function(){return Object.keys(d)},e.resolve=f,a.exports=e,e.id=8293},2412:function(a){a.exports={name:"svg",attrs:{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.25 1C6.66421 1 7 1.33579 7 1.75V2.00671C7.39296 1.99999 7.83006 2 8.31739 2H11.6826C12.1699 2 12.607 1.99999 13 2.00671V1.75C13 1.33579 13.3358 1 13.75 1C14.1642 1 14.5 1.33579 14.5 1.75V2.10571C14.9282 2.17028 15.3156 2.27785 15.6795 2.46322C16.4791 2.87068 17.1293 3.52085 17.5368 4.32054C17.7904 4.81824 17.8984 5.36012 17.9498 5.99013C18 6.60439 18 7.36493 18 8.31737V11.6826C18 12.6351 18 13.3956 17.9498 14.0099C17.8984 14.6399 17.7904 15.1818 17.5368 15.6795C17.1293 16.4791 16.4791 17.1293 15.6795 17.5368C15.1818 17.7904 14.6399 17.8983 14.0099 17.9498C13.3956 18 12.6351 18 11.6826 18H8.31737C7.36493 18 6.60439 18 5.99013 17.9498C5.36012 17.8983 4.81824 17.7904 4.32054 17.5368C3.52085 17.1293 2.87068 16.4791 2.46322 15.6795C2.20963 15.1818 2.10165 14.6399 2.05018 14.0099C1.99999 13.3956 1.99999 12.6351 2 11.6826V8.31739C1.99999 7.36494 1.99999 6.6044 2.05018 5.99013C2.10165 5.36012 2.20963 4.81824 2.46322 4.32054C2.87068 3.52085 3.52085 2.87068 4.32054 2.46322C4.68436 2.27785 5.07179 2.17028 5.5 2.10571V1.75C5.5 1.33579 5.83579 1 6.25 1ZM5.5 3.62958C5.29697 3.67352 5.13859 3.7299 5.00153 3.79973C4.48408 4.06338 4.06338 4.48408 3.79973 5.00153C3.67184 5.25252 3.58909 5.57503 3.54519 6.11228C3.5244 6.36682 3.51317 6.65467 3.50711 6.99H16.4929C16.4868 6.65467 16.4756 6.36682 16.4548 6.11228C16.4109 5.57503 16.3282 5.25252 16.2003 5.00153C15.9366 4.48408 15.5159 4.06338 14.9985 3.79973C14.8614 3.7299 14.703 3.67352 14.5 3.62958V3.75C14.5 4.16421 14.1642 4.5 13.75 4.5C13.3358 4.5 13 4.16421 13 3.75V3.50693C12.6183 3.50016 12.1752 3.5 11.65 3.5H8.35C7.8248 3.5 7.38172 3.50016 7 3.50693V3.75C7 4.16421 6.66421 4.5 6.25 4.5C5.83579 4.5 5.5 4.16421 5.5 3.75V3.62958ZM16.5 8.49H3.5V11.65C3.5 12.6425 3.50058 13.3417 3.54519 13.8877C3.58909 14.425 3.67184 14.7475 3.79973 14.9985C4.06338 15.5159 4.48408 15.9366 5.00153 16.2003C5.25252 16.3282 5.57503 16.4109 6.11228 16.4548C6.65829 16.4994 7.35753 16.5 8.35 16.5H11.65C12.6425 16.5 13.3417 16.4994 13.8877 16.4548C14.425 16.4109 14.7475 16.3282 14.9985 16.2003C15.5159 15.9366 15.9366 15.5159 16.2003 14.9985C16.3282 14.7475 16.4109 14.425 16.4548 13.8877C16.4994 13.3417 16.5 12.6425 16.5 11.65V8.49Z",fill:"currentColor"}}]},a.exports.default=a.exports},8784:function(a){a.exports={name:"svg",attrs:{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.2929 5.2929C13.6834 4.90237 14.3166 4.90237 14.7071 5.2929C15.0976 5.68342 15.0976 6.31659 14.7071 6.70711L11.4142 10L14.7071 13.2929C15.0976 13.6834 15.0976 14.3166 14.7071 14.7071C14.3166 15.0976 13.6834 15.0976 13.2929 14.7071L10 11.4142L6.70711 14.7071C6.31658 15.0976 5.68342 15.0976 5.29289 14.7071C4.90237 14.3166 4.90237 13.6834 5.29289 13.2929L8.58579 10L5.29289 6.70711C4.90237 6.31659 4.90237 5.68342 5.29289 5.2929C5.68342 4.90237 6.31658 4.90237 6.70711 5.2929L10 8.58579L13.2929 5.2929Z",fill:"currentColor"}}]},a.exports.default=a.exports},9479:function(a){a.exports={name:"svg",attrs:{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M13.2803 8.78033C13.5732 8.48744 13.5732 8.01256 13.2803 7.71967C12.9874 7.42678 12.5126 7.42678 12.2197 7.71967L9 10.9393L7.78033 9.71967C7.48744 9.42678 7.01256 9.42678 6.71967 9.71967C6.42678 10.0126 6.42678 10.4874 6.71967 10.7803L8.46967 12.5303C8.76256 12.8232 9.23744 12.8232 9.53033 12.5303L13.2803 8.78033Z",fill:"currentColor"}},{name:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.5 10C18.5 14.6944 14.6944 18.5 10 18.5C5.30558 18.5 1.5 14.6944 1.5 10C1.5 5.30558 5.30558 1.5 10 1.5C14.6944 1.5 18.5 5.30558 18.5 10ZM17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",fill:"currentColor"}}]},a.exports.default=a.exports},2935:function(a){a.exports={name:"svg",attrs:{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},childs:[{name:"path",attrs:{d:"M2.00006 14C3.00006 16.5 4.5384 14.8315 6.00014 14M6.00014 14C11.0001 11.5 14.5001 3 10.5001 3C6.00014 3 3.50012 11 6.00014 14ZM6.00014 14C7.0217 15.2259 7.41881 16.2087 9.9083 15.2259C10.5405 14.9763 11.1234 14.7175 11.6587 14.4537M11.6587 14.4537C16.7447 11.9468 17.535 8.97785 15.5609 8.97785C12.9961 8.97785 11.1881 12.5486 11.6587 14.4537ZM11.6587 14.4537C11.9163 15.4966 13.1273 16.3144 15.0001 15.5C16.7772 14.7272 17.0001 14 18.0001 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}]},a.exports.default=a.exports},8671:function(a,b,c){"use strict";var d,e=c(5881),f=c(1791),g=c(1347),h=c.n(g),i=c(8156),j=c.n(i),k=c(142),l=c(9775),m=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),n=function(){return(n=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function o(a,b,c){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;for(var f=0;f<d.length;f++)if(!((null==c?void 0:c[d[f]])||Object.hasOwnProperty.call(b,d[f])&&Object.is(a[d[f]],b[d[f]])))return!1;return!0}var p={};if(f.IS_DEBUG)window.__feastBlockCache=p;var q=function(a){function b(b){var c=a.call(this,b)||this;if(c.elementRef=j().createRef(),c.innerElRef=j().createRef(),c.isInitedComponent=null,c.componentMountState=null,c.separatelyCheckedKeys={remitDetails:!0,useMediators:!0,remitEvents:!0},c.reBroadcast=function(a){var b=c.props,d=b.broadcastEvent,e=b.remitEvents,f=b.remitDetails;if(b.updateRemitEventsName)Object.keys(e).forEach(function(a){e[(0,k.Co)(a)]=e[a]});var g=e[a.type];if(g){var h=(0,k.RV)(g);(0,k.eP)(a,h),d((0,k.BU)(h.name,f,a))}},b.useMixin)h().tags.$mixins[b.useMixin](null,b);var d=b.component;if("function"==typeof d&&!d.getInstances)d().then(function(a){c.initComponent(a,b.useContext)});else c.initComponent(d,b.useContext);return c}return m(b,a),b.clearCache=function(a){if(p[a])Object.values(p[a]).forEach(function(a){a.component.destroy()}),delete p[a]},b.clearLetterListItemAdvCache=function(){var a="letter-list-item-adv";if(p[a])Object.values(p[a]).forEach(function(a){var b=a.component;if(!b.el||!b.el.offsetParent)b.destroy()}),delete p[a]},b.prototype.initComponent=function(a,b){var c,d,e;if("unmount"!==this.componentMountState&&!this.isInitedComponent){this.isInitedComponent=!0,this.componentName=function(a){return"string"==typeof a?a:a.blockName||a.name}(a);var f=this.props.cacheKey,g=f?null===(c=p[this.componentName])||void 0===c?void 0:c[f]:null;if(!g){var h=void 0;if("string"==typeof a){var i=window.require("ui-block/".concat(a,"/").concat(a));h=null!==(d=null==i?void 0:i.default)&&void 0!==d?d:i}else h=a;this.component=new h(n({},this.props),b)}else this.component=g.component,this.cachedBlock=g;if(!this.component)this.logMissingComponent("constructor");if(!(null===(e=this.component)||void 0===e?void 0:e.on))this.logMissingComponent("constructor.prop");if("mount"===this.componentMountState)this.componentDidMount()}},b.prototype.componentDidMount=function(){var a,b=this;if(this.componentMountState="mount",this.isInitedComponent){var c=this.props,d=c.useMediators,e=c.remitEvents,f=c.broadcastEvent,g=c.cacheKey,i=null!==(a=null==d?void 0:d.map(h().Mediator.get))&&void 0!==a?a:[];if(!this.component)this.logMissingComponent("mount");if(!this.cachedBlock)i.forEach(function(a){a.register(b.component)});if(Object.keys(e||{}).map(function(a){return b.component.on(a,b.reBroadcast,!0)}),g)if(this.cachedBlock)this.elementRef.current.appendChild(this.cachedBlock.el);else{var j=document.createElement("div");this.elementRef.current.appendChild(j),this.component.renderTo(j)}else this.component.renderTo(this.elementRef.current);if(e&&!f)throw new TypeError("You passed events to remit, but did not pass the broadcastEvent function to block '".concat(this.componentName,"'"))}},b.prototype.shouldComponentUpdate=function(a){return!o(a,this.props,this.separatelyCheckedKeys)||!o(a.remitDetails,this.props.remitDetails)},b.prototype.componentDidUpdate=function(a){if(this.isInitedComponent)this.component.set(n(n({},Object.fromEntries(Object.keys(a).map(function(a){return[a,void 0]}))),this.props))},b.prototype.componentWillUnmount=function(){var a=this;if(this.componentMountState="unmount",this.isInitedComponent){var b=this.props,c=b.cacheKey,d=b.remitEvents;if(c){Object.keys(d||{}).map(function(b){return a.component.off(b,a.reBroadcast,!0)});var e=this.componentName,f=this.elementRef.current.removeChild(this.elementRef.current.firstChild);if(f.innerHTML){if(!p[e])p[e]={};p[e][c]={el:f,component:this.component}}}else this.component.destroy()}},b.prototype.logMissingComponent=function(a){var b,c,d=this.props.cacheKey,f=null===(c=null===(b=this.component)||void 0===b?void 0:b.__proto__)||void 0===c?void 0:c.__proto__;(0,e.coreLoggerDispatchSelfError)("fstblck",new Error("missing created component"),{id:a,cacheKey:d,component:this.componentName,shape:this.component&&Object.keys(this.component),protoShape:f&&Object.keys(f)})},b.prototype.render=function(){var a=this.props,b=a.className,c=a.qaIndex,d=a["data-qa-id"],e=a.inlineRoot,f={};if(a.fluid)f.width="100%";if(e)f.display="inline";return j().createElement("div",{"data-qa-id":(0,l.qa)(d),style:f,className:b,ref:this.elementRef,"data-qa-index":(0,l.qa)(c)})},b}(j().Component);b.Z=q},3825:function(a,b,c){"use strict";c.d(b,{wg:function(){return J},Ek:function(){return H},Ty:function(){return I},EA:function(){return B},ZP:function(){return K}});var d,e,f=c(7406),g=c(1190),h=c.n(g),i=c(1791),j=c(5041),k=c(8156),l=c.n(k),m=c(7745),n=c(3012),o=c(6968),p={container:"_2RFvbHgredzb598qxf1fIY",transparent:"_2INdw9pFkG3afhYXuc-Vss",text:"_3fswF9vDhtM556nP7vBolq",large:"_25jN64TaI9cAha83XnvuFW"},q=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});!function(a){a.NORMAL="normal",a.LARGE="large"}(e||(e={}));var r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return q(b,a),b.prototype.render=function(){var a,b,c=this.props,d=c.className,f=c.size,g=void 0===f?e.LARGE:f,i=c.text,j=c.transparent,k=h()(((a={})[p.container]=!0,a[p[g]]=!0,a[p.transparent]=j,a[d]=void 0!==d,a)),m=h()(((b={})[p.text]=!0,b));return l().createElement("span",{className:k},l().createElement(o.Z,{className:m,type:o.y.BADGE},i))},b}(l().PureComponent),s="_26Dn0F1HkeaVuJNtmK_38S",t=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),u=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},v=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return t(b,a),b.prototype.render=function(){var a,b=this.props.themeClassName,c=h()(((a={})[s]=!0,a[b]=void 0!==b,a));return l().createElement("hr",{className:c})},b=u([(0,n.Z)("r-hr")],b)}(l().PureComponent),w=c(9842),x=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),y=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},z=Object.values(w.ColouredIconTypes);function A(a){return z.includes(a)?a:void 0}var B,C=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return x(b,a),b.prototype.renderIcon=function(a){var b,c=this.props,d=c.isColoured,e=c.className,f=c.name,g=c.themeClassName,i=a[f],j=h()(((b={})[g]=void 0!==g,b[e]=void 0!==e,b));return l().createElement(l().Fragment,null,d&&l().createElement(w.ColouredIcon,{className:j,icon:i,type:A(f)}),!d&&l().createElement(w.Icon,{className:j,icon:i}))},b.prototype.render=function(){var a=this;return l().createElement(w.ColouredIconContext.Consumer,null,function(b){return a.renderIcon(b)})},b=y([(0,n.Z)("r-icon")],b)}(l().PureComponent),D={container:"XMGeM4f3_MAG3PtguoT0T",caption:"_1die4XfSHVyoGk-M9nYcXP",hr:"_38kbG8uq4y7IpVq0wnYUOY",compact:"XgYUmxJVRD2SkPdz7_RDh",markable:"jSmtsIDaNP9CighrQD6k9",normal:"cWMu0sJX7XUaHwjeTRW3w",nano:"_3sG86eq-T3iVswnMtaedIn",list:"enirazkQzjhqKqTY-aRDs",selected:"_7b0DcIQXtCY6SzNUmJkef",filters:"_3k_JYURSSx8BBy00lttuxQ",navigation:"_1Uh_X8Tg3l3dZcpNJUTDV6",text:"_3nnq1GzHyeR6tFzK4c4mHp",short:"_3c-zpB4-3qRxROXAgsCEvf",icon:"_1Dk2FFsjYLDLlZc3gRvOtK",badge:"_3t9W7qqi94ywHeV8deEkLI",iconRight:"MH7q6wOUz9tmXGh_cCWQn",iconEmpty:"_247_-RBUJ2om6fZqqJQcE0",hr_list:"_2EymLWvLTXASUALXCv7wYR",touch:"_1AB5kt9TP5e61Li0_Kf32M"},E=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),F=function(){return(F=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},G=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};function H(a){var b,c,d,e,f,g=a.badgeText,i=a.contentText,j=a.contentTextType,k=a.iconName,m=a.iconEmpty,n=a.rightIconName,p=!!k,q=!!n,s=h()(((b={})[D.icon]=!0,b)),t=h()(((c={})[D.iconRight]=!0,c)),u=h()(((d={})[D.iconEmpty]=!0,d[D.icon]=!0,d)),v=h()(((e={})[D.text]=!0,e)),w=h()(((f={})[D.badge]=!0,f));return l().createElement(l().Fragment,null,p&&l().createElement(C,{className:s,name:k,isColoured:!0}),m&&l().createElement("span",{className:u}),i&&l().createElement(o.Z,{className:v,text:i,type:j}),g&&l().createElement(r,{className:w,text:g,transparent:!0}),q&&l().createElement(C,{className:t,name:n,isColoured:!0}))}function I(a){var b,c,d=a.iconEmpty,e=a.short,f=a.type,g=void 0===f?B.LIST:f,i=h()(((b={})[D.hr]=!0,b[D.hr_short]=e,b[D["hr_"+g]]=void 0!==g,b)),j=h()(((c={})[D.iconEmpty]=!0,c[D.icon]=!0,c));return l().createElement("div",{className:i},d&&l().createElement("span",{className:j}),l().createElement(v,null))}function J(a){var b,c=a.text,d=a.testId,e=h()(((b={})[D.caption]=!0,b));return l().createElement("div",{"data-test-id":d,className:e},l().createElement(o.Z,{text:c,type:o.y.CAPTION}))}!function(a){a.LIST="list",a.NAVIGATION="navigation"}(B||(B={}));var K=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return E(b,a),b.prototype.render=function(){var a,b=this.props,c=b.children,d=b.contentProps,e=b.mode,g=b.navigationIndex,k=b.onMouseDown,m=b.onClick,n=b.onKeyDown,o=b.onMouseEnter,p=b.selected,q=b.isFilter,r=b.short,s=b.themeClassName,t=b.title,u=b.type,v=void 0===u?B.LIST:u,w=b.testId,x=b.markable,y=b.marked,z=h()(((a={})[D.filters]=q,a[D.container]=!0,a[D.selected]=p,a[D.short]=r,a[D[v]]=void 0!==v,a[D[e]]=void 0!==e,a[s]=void 0!==s,a[D.safe]=!0,a[D.touch]=i.TOUCH_MODE,a[D.markable]=x,a));return l().createElement("div",F({className:z,"data-navigation-index":g,onClick:m,onMouseDown:k,onKeyDown:n,onMouseEnter:o,title:t},w?{"data-test-id":w,"data-test-selected":p}:{}),c||l().createElement(H,F({},d,{short:r})),y&&l().createElement(f.Icon,{icon:j.STATUS_DONE}))},b=G([m.R,(0,n.Z)(function(a){var b="r-list-item";if(a.selected)b+=" ".concat("r-list-item","_selected");return b})],b)}(l().PureComponent)},1627:function(a,b,c){"use strict";c.d(b,{f:function(){return e},Z:function(){return E}});var d,e,f=c(9842),g=c(1190),h=c.n(g),i=c(1791),j=c(3898),k=c(6359),l=c.n(k),m=c(5264),n=c(8156),o=c.n(n),p=c(9394),q=c(9775),r=c(5920),s=c(785),t=c(3012),u=c(5012),v="_1P-oiOHEg-7UG9V2zQ4DfD",w="_2z6zZwl0J3e39TB06hFMc",x="_2ORPOPCCGymswJ4AuatjfS",y="_12Mo6ra4zfkS6ta_akGWck",z="q81CkrST1I80BkNFzPmqo",A="_3ioWJT0qqGdOvrIEA3ft5C",B=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),C=function(){return(C=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},D=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};!function(a){a.Suggest="Suggest",a.Filters="Filters"}(e||(e={}));var E=function(a){function b(b){var c=a.call(this,b)||this;return c.handleDateClick=c.handleDateClick.bind(c),c.handleMessageClick=c.handleMessageClick.bind(c),c.handleColorTagClick=c.handleColorTagClick.bind(c),c.handleFolderClick=c.handleFolderClick.bind(c),c.handleRequestClick=c.handleRequestClick.bind(c),c}return B(b,a),b.prototype.handleFolderClick=function(a){var b=this.props,c=b.search,d=b.onAppendSuggest;if(d){var e=c.folders.map(function(a){return a.idNumber}),f=c.in_excluded_folders?j.TRASH:j.INBOX,g=e.length?e[0]:f;d(a,r.SearchOperandType.FOLDER,void 0,g)}},b.prototype.handleDateClick=function(a){var b=this.props.onAppendSuggest;if(b)b(a,r.SearchOperandType.DATE,void 0,{date:Date.now(),lapse:0})},b.prototype.handleColorTagClick=function(a){var b=this.props.onAppendSuggest;if(b)b(a,r.SearchOperandType.CATEGORY,f.ColorTagTypes.TAGGED_URGENT,void 0)},b.prototype.handleMessageClick=function(a,b){var c=this.props.onAppendSuggest;if(c)c(a,r.SearchOperandType.MESSAGE,void 0,b)},b.prototype.handleRequestClick=function(a,b){var c=this.props.onAppendSuggestQuery;if(c)c(a,b)},b.prototype.renderRecent=function(a){var b=this,c=this.props.search,d=c.selectedSuggest,e=c.suggests.requests;if(!e.length)return[null,a];else return[o().createElement(o().Fragment,null,o().createElement(u.Z,{text:i18n("Вы недавно искали"),caption:!0}),e.map(function(e,f){return o().createElement(u.Z,{key:f,search:c,requestSuggest:e,onAppendSuggestQuery:b.handleRequestClick,selected:a+f===d,navigationIndex:a+f})})),a+e.length]},b.prototype.renderContacts=function(a){var b=this.props,c=b.search,d=b.onAppendSuggest,e=c.selectedSuggest,g=c.suggests.contacts;if(!g.length||!c.hiddenSuggestMap[f.OperandQueryTypes.FROM]&&!c.hiddenSuggestMap[f.OperandQueryTypes.TO])return[null,a];var h=g.slice();return h=h.slice(0,l().searchSuggestCount),[o().createElement("div",{key:"renderContacts","data-test-id":(0,q.qa)("suggest-contacts"),className:z},o().createElement(u.Z,{text:i18n("Люди"),caption:!0}),h.map(function(b,f){return o().createElement(u.Z,{key:f,search:c,contactSuggest:b,onAppendSuggest:d,selected:a+f===e,navigationIndex:a+f,testId:"suggest-contact-".concat(b.email)})})),a+h.length]},b.prototype.renderWords=function(a){var b=this.props,c=b.search,d=b.onAppendSuggest,e=b.qaEnabled,g=c.selectedSuggest,h=c.suggests.words;if(!h.length||!c.hiddenSuggestMap[f.OperandQueryTypes.QUERY])return[null,a];else return[o().createElement(o().Fragment,null,h.map(function(b,f){return o().createElement(u.Z,{key:b.word,search:c,wordSuggest:b,onAppendSuggest:d,selected:a+f===g,navigationIndex:a+f,operandType:"query",qaEnabled:e})})),a+h.length]},b.prototype.renderLetters=function(a){var b=this,c=this.props.search,d=c.selectedSuggest,e=c.suggests.messages;if(!e.length)return[null,a];var f=e.slice();return f=f.slice(0,l().searchSuggestCount),[o().createElement("div",{key:"renderLetters",className:y,"data-test-id":(0,q.qa)("suggest-messages")},o().createElement(u.Z,{text:i18n("Письма"),caption:!0}),f.map(function(e,f){return o().createElement(u.Z,{key:f,search:c,messageSuggest:e,onSuggestClick:b.handleMessageClick,selected:a+f===d,navigationIndex:a+f})})),a+f.length]},b.prototype.getOperandData=function(a,b){switch(a){case f.OperandSuggestAddTypes.FROM:return{contactSuggest:{email:b}};default:return{}}},b.prototype.renderOperands=function(a){var b=this,c=this.props,d=c.search,e=c.onAppendSuggestOperand,f=c.qaEnabled,g=d.suggests.operands;if(!g.length)return[null,a];else return[o().createElement(o().Fragment,null,g.map(function(c,g){var h=c.type,i=c.value;return o().createElement(u.Z,C({key:i,qaEnabled:f,search:d,onAppendSuggest:e,operandType:h,navigationIndex:a+g,selected:a+g===d.selectedSuggest},b.getOperandData(h,i)))})),a+g.length]},b.prototype.renderSuggestLine=function(a){if(this.props.search.hasOperands)return[null,a];var b=this.renderWords(a),c=b[0],d=b[1],e=this.renderOperands(d),f=e[0],g=e[1];if(!c&&!f)return[null,a];else return[o().createElement("div",{key:"renderSuggestLine",className:x},c,f),g]},b.prototype.renderSuggests=function(a){var b,c=this.props.search,d=c.suggests,e=d.requests,f=d.words,g=d.messages,i=d.contacts,j=d.operands;if(!f.length&&!j.length&&!i.length&&!g.length&&(!e.length||c.hasOperands))return[null,a];var k=this.renderSuggestLine(a),l=k[0],m=k[1],n=this.renderContacts(m),p=n[0],q=n[1],r=this.renderRecent(q),s=r[0],t=r[1],u=this.renderLetters(t),v=u[0];if(a=u[1],!(s||p||l||v))return[null,a];var x=h()(((b={})[w]=!0,b));return[o().createElement("div",{key:"renderSuggests",className:x},l,s,p,v),a]},b.prototype.renderFilters=function(a){var b,c,d,e,g,j,k=this.props,l=k.search,m=k.onAppendSuggest,n=k.qaEnabled,t=k.darkMode,v=k.mobileView,x=k.onSuggestClick;if(a>0&&l.smartInput.operands.length&&!v)return[null,a];var y=l.hiddenSuggestMap,z=l.displayedFilter,A=l.query,B=l.selectedSuggest,C=h()(((b={})[w]=!0,b)),D=function(a){return function(b,c){return x(b,{addressee:a})}};return[o().createElement("div",{key:"renderFilters",className:C,"data-test-id":(0,q.qa)("suggest-operands")},Boolean(y[r.SearchOperandType.MAILBOX])&&o().createElement(o().Fragment,null,o().createElement(u.Z,{testId:n?"category-mailboxes":void 0,text:i18n("Ящики"),caption:!0}),y[r.SearchOperandType.MAILBOX].map(function(b,c){return o().createElement(u.Z,{key:c,mailboxSuggest:b,navigationIndex:a++,selected:!v&&a-1===B,onAppendSuggest:m,testId:n?"".concat(r.SearchOperandType.MAILBOX,":").concat(b.email):void 0})})),v&&z===r.SearchOperandType.ADDRESSEE&&o().createElement(o().Fragment,null,o().createElement(u.Z,{onSuggestClick:D(s.tW.FROM),testId:n?"addressee:".concat(s.tW.FROM):void 0,search:l,text:p.Ek[s.tW.FROM],rightIconName:void 0!==(null===(c=A.correspondents)||void 0===c?void 0:c.from)&&s.tW.STATUS_DONE}),o().createElement(u.Z,{onSuggestClick:D(s.tW.TO),testId:n?"addressee:".concat(s.tW.TO):void 0,search:l,text:p.Ek[s.tW.TO],rightIconName:void 0!==(null===(d=A.correspondents)||void 0===d?void 0:d.to)&&s.tW.STATUS_DONE}),o().createElement(u.Z,{onSuggestClick:D(s.tW.SUBJECT),testId:n?"addressee:".concat(s.tW.SUBJECT):void 0,search:l,text:p.Ek[s.tW.SUBJECT],rightIconName:void 0!==A.subject&&s.tW.STATUS_DONE}),o().createElement(u.Z,{onSuggestClick:D(s.tW.QUERY),testId:n?"addressee:".concat(s.tW.QUERY):void 0,search:l,text:p.Ek[s.tW.QUERY],rightIconName:void 0!==A.query&&s.tW.STATUS_DONE})),v&&z===r.SearchOperandType.FOLDER&&l.folders.map(function(a){return o().createElement(u.Z,{key:a.idNumber,onSuggestClick:(b=a.idNumber,function(a,c){return x(a,{folder:b})}),testId:n?"folder:".concat(a.idNumber):void 0,search:l,text:a.folderName,rightIconName:l.query.folder===a.idNumber&&s.tW.STATUS_DONE});var b}),(y[r.SearchOperandType.FILTER]||y[r.SearchOperandType.CATEGORY]||y[r.SearchOperandType.DATE]||y[r.SearchOperandType.FOLDER])&&!v&&o().createElement(u.Z,{text:i18n("Фильтры"),caption:!0}),y[r.SearchOperandType.FILTER]&&o().createElement(o().Fragment,null,y[f.OperandFilterTypes.UNREAD]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.UNREAD,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:(null===(e=A.flags)||void 0===e?void 0:e.unread)&&s.tW.STATUS_DONE,testId:n?"filter:".concat(f.OperandFilterTypes.UNREAD):void 0}),y[f.OperandFilterTypes.FLAGGED]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.FLAGGED,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:(null===(g=A.flags)||void 0===g?void 0:g.flagged)&&s.tW.STATUS_DONE,testId:n?"filter:".concat(f.OperandFilterTypes.FLAGGED):void 0}),y[f.OperandFilterTypes.ATTACH]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.ATTACH,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:(null===(j=A.flags)||void 0===j?void 0:j.attach)&&s.tW.STATUS_DONE,testId:n?"filter:".concat(f.OperandFilterTypes.ATTACH):void 0})),y[r.SearchOperandType.FILTER]&&y[r.SearchOperandType.CATEGORY]&&o().createElement(u.Z,{iconEmpty:!0,hr:!0}),y[r.SearchOperandType.CATEGORY]&&o().createElement(o().Fragment,null,y[f.CategoryTypes.DOCUMENT_SCANS]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.DOCUMENT_SCANS,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.DOCUMENT_SCANS&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.DOCUMENT_SCANS):void 0}),y[f.CategoryTypes.ORDER]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.ORDER,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.ORDER&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.ORDER):void 0}),y[f.CategoryTypes.FINANCE]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.FINANCE,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.FINANCE&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.FINANCE):void 0}),y[f.CategoryTypes.REGISTRATION]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.REGISTRATION,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.REGISTRATION&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.REGISTRATION):void 0}),y[f.CategoryTypes.TRAVEL]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.TRAVEL,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.TRAVEL&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.TRAVEL):void 0}),y[f.CategoryTypes.EVENT]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.EVENT,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.EVENT&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.EVENT):void 0}),y[f.CategoryTypes.FEES]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.FEES,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.FEES&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.FEES):void 0}),y[f.CategoryTypes.OFFICIAL]&&o().createElement(u.Z,{onAppendSuggest:m,type:f.ColouredIconTypes.OFFICIAL,search:l,navigationIndex:a++,selected:!v&&a-1===B,rightIconName:A.transaction_category===f.ColouredIconTypes.OFFICIAL&&s.tW.STATUS_DONE,testId:n?"category:".concat(f.CategoryTypes.OFFICIAL):void 0})),(y[r.SearchOperandType.FILTER]||y[r.SearchOperandType.CATEGORY])&&y[r.SearchOperandType.DATE]&&o().createElement(u.Z,{iconEmpty:!0,hr:!0}),y[r.SearchOperandType.DATE]&&o().createElement(u.Z,{text:i18n("Указать дату"),iconName:s.tW.CALENDAR,search:l,onClick:this.handleDateClick,navigationIndex:a++,selected:!v&&a-1===B}),i.ENABLE_COLOR_TAGS_SEARCH&&y.COLOR_TAG_CUSTOM&&o().createElement(u.Z,{text:i18n("Метки"),iconName:s.tW.STATUS_TAG,rightIconName:t?s.tW.COLOR_TAG_SUGGEST_DARK:s.tW.COLOR_TAG_SUGGEST_LIGHT,search:l,onClick:this.handleColorTagClick,navigationIndex:a++,selected:!v&&a-1===B}),(y[r.SearchOperandType.FILTER]||y[r.SearchOperandType.CATEGORY]||y[r.SearchOperandType.DATE])&&y[r.SearchOperandType.FOLDER]&&!v&&o().createElement(u.Z,{iconEmpty:!0,hr:!0}),y[r.SearchOperandType.FOLDER]&&!v&&o().createElement(u.Z,{testId:n?"".concat(r.SearchOperandType.FOLDER):void 0,text:i18n("В папке"),iconName:s.tW.FOLDER,search:l,onClick:this.handleFolderClick,navigationIndex:a++,selected:!v&&a-1===B})),a]},b.prototype.render=function(){var a,b=this.props,c=b.themeClassName,d=b.onItemsCounted,f=b.mobileView,g=h()(((a={})[v]=!f,a[A]=f,a[c]=!0,a)),i=this.renderSuggests(0),j=i[0],k=i[1],l=this.renderFilters(k),m=l[0],n=l[1];if(d)d(n);return o().createElement("div",{className:g,"data-test-id":(0,q.qa)("search-suggest")},(!f||f===e.Suggest)&&j,(!f||f===e.Filters)&&m)},b=D([(0,t.Z)("r-search-suggest"),m.observer],b)}(o().Component)},5012:function(a,b,c){"use strict";c.d(b,{Z:function(){return V}});var d=c(9842),e=c(1373),f=c.n(e),g=c(1190),h=c.n(g),i=c(1791),j=c(8156),k=c.n(j),l=c(5125),m=c.n(l),n=c(1698),o=c.n(n),p=c(5920),q=c(3823),r=c(7406),s=c(3040),t=c.n(s),u=function(a){var b=void 0===a?{}:a,c=b.height,d=b.width,e=b.name,f=void 0===e?"":e,g=b.email,h=void 0===g?"":g;if(d<32||c<32)d=32,c=32;return t()({email:h,name:f,width:d,height:c})},v=function(a){var b=a.children,c=(0,j.useMemo)(function(){return{createUrl:u}},[]);return k().createElement(d.AvatarContext.Provider,{value:c},b)},w=c(6968),x="_3UG8ECLkpwEU8l49f--EUt",y="xIuO6wSw8nezfbcMvMfaq",z="_2xkD24AINYqp-cRCPutgfJ",A="_2Hrpw6lvdrwls5u2yLix4x",B="_3k0V5nFgoxSjmsqBX8ypFg",C="_2e6OsQnv4_rgm5F8dE7ldQ",D="e1vNIzlBa6UApOLrnaQMY",E="_3z8wuQW-6-G865YKdF3iCO",F="_30NfWRY8h2ACt23xLycfYl",G="_1hQ5Wi0Sf8XxCReuoM6Z_v";function H(a){var b,c,e,f,g=a.contact,i=a.text,j=a.subject,l=a.found,m=a.onlyEmailText,n=a.avatarSmall,o=a.tooltip,p=a.boldText,q=a.avatarSize,s=void 0===q?d.AvatarSizes.s32x32:q,t=h()(((b={})[z]=!0,b[A]=!!i,b[B]=n,b)),u=h()(((c={})[E]=!0,c)),H=h()(((e={})[F]=!0,e)),I=m||!g.name,J=h()(((f={})[C]=!0,f[D]=I,f)),K=I?g.email:g.name,L=null!==(null!=l?l:null),M=k().createElement("div",{className:y},i&&k().createElement(w.Z,{className:u,text:j||i}),k().createElement(v,null,k().createElement(d.Avatar,{className:t,model:g,size:s})),k().createElement("div",{className:J},k().createElement(w.Z,{className:H,text:K,bold:p}),!I&&k().createElement(w.Z,{className:H,text:g.email,type:w.y.SECONDARY,bold:p})),L&&k().createElement(w.Z,{className:G,text:l.toString()}));return k().createElement("div",{className:x},function(a,b){if(b)return k().createElement(r.Tooltip,{placement:"rightTop",overlay:b,overlayContainer:document.body},a);else return a}(M,o))}var I=c(3825),J="_17BcqoINrJbfoEjkhS70b_",K="uWr0PMvnWHgtSeD5bZ7oc",L="_3A2PW_lqyMdSgl6JP7IYz5",M="_1zYbF-t1YYgeSvkGivHBSO",N=i18n("<Без темы>");function O(a){var b,c,e,f=a.message,g=h()(((b={})[K]=!0,b)),i=h()(((c={})[M]=!0,c)),j=h()(((e={})[L]=!0,e));return k().createElement("div",{className:J},k().createElement(v,null,k().createElement(d.Avatar,{className:g,model:f,size:d.AvatarSizes.s32x32})),k().createElement("div",{className:j},k().createElement(w.Z,{className:i,text:f.subject||N}),k().createElement(w.Z,{className:i,text:f.name||f.email,type:w.y.SECONDARY})))}var P,Q="_2WVqp2iHOmm4cSPJ2JOofx",R="_36GwOVrRcJV4f6ql7FCTLr",S=(P=function(a,b){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}P(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),T=function(){return(T=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function U(a){var b=String(a);if(1===b.length)return"0".concat(b);else return b}var V=function(a){function b(b){var c=a.call(this,b)||this;return c.handleGenericClick=c.handleGenericClick.bind(c),c.handleMouseEnter=c.handleMouseEnter.bind(c),c.handleMouseDown=c.handleMouseDown.bind(c),c.handleClick=c.handleClick.bind(c),c}return S(b,a),b.renderRequest=function(a,b){var c,e,f,g,i,j,l,n,o=[],p=[];if(void 0!==a.query)o.push(k().createElement(k().Fragment,null,a.query)),p.push(a.query);if(void 0!==a.subject)o.push(k().createElement(k().Fragment,null,a.subject)),p.push(a.subject);if(a.flags){if(a.flags.unread)o.push(b[d.OperandFilterTypes.UNREAD]),p.push(null===(g=null===(f=b[d.OperandFilterTypes.UNREAD])||void 0===f?void 0:f.toLowerCase)||void 0===g?void 0:g.call(f));if(a.flags.flagged)o.push(b[d.OperandFilterTypes.FLAGGED]),p.push(null===(j=null===(i=b[d.OperandFilterTypes.FLAGGED])||void 0===i?void 0:i.toLowerCase)||void 0===j?void 0:j.call(i));if(a.flags.attach)o.push(b[d.OperandFilterTypes.ATTACH]),p.push(null===(n=null===(l=b[d.OperandFilterTypes.ATTACH])||void 0===l?void 0:l.toLowerCase)||void 0===n?void 0:n.call(l))}if(void 0!==a.transaction_category)o.push(i18n("в категории"),k().createElement(k().Fragment,null,"«",b[a.transaction_category],"»")),p.push("".concat(i18n("в категории")," «").concat(b[a.transaction_category],"»"));if(a.correspondents){if(void 0!==a.correspondents.to)o.push("".concat(i18n("кому"),":"),k().createElement(H,{avatarSize:20,contact:{email:a.correspondents.to}})),p.push("".concat(i18n("кому"),": ").concat(a.correspondents.to));if(void 0!==a.correspondents.from)o.push("".concat(i18n("от кого"),":"),k().createElement(H,{avatarSize:20,contact:{email:a.correspondents.from}})),p.push("".concat(i18n("от кого"),": ").concat(a.correspondents.from))}if(void 0!==a.folder)o.push("".concat(i18n("в папке")),k().createElement(k().Fragment,null,"«",a.folder,"»")),p.push("".concat(i18n("в папке")," «").concat(a.folder,"»"));if(void 0!==a.interval){var q=m().fromRPCInterval(a.interval).toDateAndDateEnd(),r=q.date,s=q.dateEnd;if(o.push(i18n("за"),k().createElement(k().Fragment,null,U(r.getDate()),".",U(r.getMonth()+1),".",r.getFullYear())),p.push("".concat(i18n("за")," ").concat(U(r.getDate()),".").concat(U(r.getMonth()+1),".").concat(r.getFullYear())),s)o.push("—",k().createElement(k().Fragment,null,U(s.getDate()),".",U(s.getMonth()+1),".",s.getFullYear())),p.push("— ".concat(U(s.getDate()),".").concat(U(s.getMonth()+1),".").concat(s.getFullYear()))}var t=h()(((c={})[R]=!0,c)),u=p.join(" ");u=u[0].toUpperCase()+u.slice(1);var v=o.map(function(a,b){if("string"==typeof a)if(0===b)a=a[0].toUpperCase()+a.slice(1).toLowerCase();else a=a.toLowerCase();if(0!==b)a=k().createElement(k().Fragment,null," ",a);return k().createElement(w.Z,{className:t,key:b},a)}),x=h()(((e={})[Q]=!0,e));return{contentText:u,isFilter:!1,component:k().createElement("span",{className:x},v)}},b.prototype.applyOperand=function(a,b,c,d){var e=this.props,f=e.selected,g=e.onAppendSuggest;if(g)g(a,b,c,d,f)},b.prototype.addMailboxOperand=function(a,b){this.applyOperand(a,p.SearchOperandType.MAILBOX,void 0,b)},b.prototype.addFolderOperand=function(a,b){this.applyOperand(a,p.SearchOperandType.FOLDER,void 0,b.idNumber)},b.prototype.addDateOperand=function(a,b){this.applyOperand(a,p.SearchOperandType.DATE,void 0,m().fromRPCInterval(b).toDateAndDateEnd())},b.prototype.addFilterOperand=function(a,b){this.applyOperand(a,p.SearchOperandType.FILTER,b)},b.prototype.addCategoryOperand=function(a,b){this.applyOperand(a,p.SearchOperandType.CATEGORY,b)},b.prototype.addQueryOperand=function(a,b,c){this.applyOperand(a,p.SearchOperandType.QUERY,b,c)},b.prototype.addRequestSuggest=function(a,b){var c=this.props.onAppendSuggestQuery;if(c)c(a,b)},b.prototype.handleSearchInternetClick=function(a){f().send("suggest_".concat(d.OperandSuggestAddTypes.SEARCH_INTERNET,"_click")),o()("".concat(i.SUGGEST_SEARCH_INTERNET_URL,"&q=").concat(encodeURIComponent(a)))},b.prototype.handleGenericClick=function(a){var b=this.props,c=b.search,e=b.type,f=b.operandType,g=b.contactSuggest,h=b.requestSuggest,i=b.messageSuggest,j=b.wordSuggest,k=b.folderSuggest,l=b.dateSuggest,m=b.mailboxSuggest,n=b.onClick,o=b.onSuggestClick;if(f!==d.OperandSuggestAddTypes.SEARCH_INTERNET)if(!o)if(!n){if(g)if(!c.hiddenSuggestMap[d.OperandQueryTypes.FROM])return void this.addQueryOperand(a,d.OperandQueryTypes.TO,g.email);else return void this.addQueryOperand(a,d.OperandQueryTypes.FROM,g.email);if(!j)if(!h)if(!k)if(!l){if(m)this.addMailboxOperand(a,m);switch(e){case d.ColouredIconTypes.UNREAD:case d.ColouredIconTypes.FLAGGED:case d.ColouredIconTypes.ATTACH:return void this.addFilterOperand(a,e);case d.ColouredIconTypes.ORDER:case d.ColouredIconTypes.EVENT:case d.ColouredIconTypes.FEES:case d.ColouredIconTypes.FINANCE:case d.ColouredIconTypes.REGISTRATION:case d.ColouredIconTypes.DOCUMENT_SCANS:case d.ColouredIconTypes.OFFICIAL:case d.ColouredIconTypes.TRAVEL:case d.ColouredIconTypes.TAGGED_PERSONAL:case d.ColouredIconTypes.TAGGED_URGENT:case d.ColouredIconTypes.TAGGED_NEEDS_REPLY:case d.ColouredIconTypes.TAGGED_IMPORTANT:case d.ColouredIconTypes.TAGGED_DOCUMENTS:this.addCategoryOperand(a,e)}}else this.addDateOperand(a,l);else this.addFolderOperand(a,k);else this.addRequestSuggest(a,h);else this.addQueryOperand(a,d.OperandQueryTypes.QUERY,j.word)}else n(a);else o(a,i);else this.handleSearchInternetClick(c.value)},b.prototype.handleMouseDown=function(a){var b=this.props.onMouseDown;if(!b)this.handleGenericClick(a);else b(a)},b.prototype.handleClick=function(a){var b=this.props.onClick;if(b)b(a)},b.prototype.handleMouseEnter=function(){var a=this.props,b=a.search,c=a.navigationIndex;b&&b.setSuggestsInfo({selectedSuggest:c})},b.prototype.renderData=function(a,c){var d=this.props,e=d.iconName,f=d.rightIconName,g=d.type,h=d.contactSuggest,i=d.messageSuggest,j=d.requestSuggest,l=d.wordSuggest,m=d.folderSuggest,n=d.mailboxSuggest,o=d.dateSuggest,p=d.forceFilter,r=a;if(h)return{contentText:r,isFilter:p,component:k().createElement(H,{avatarSize:h.avatarSize,contact:h,text:a})};if(n)return{contentText:r,isFilter:p,component:k().createElement(H,{contact:n,onlyEmailText:!0,avatarSmall:!0,found:n.found,tooltip:n.tooltip,boldText:n.boldText})};if(i)return{contentText:r,isFilter:p,component:k().createElement(O,{message:i})};if(m)return{contentText:r=a||m.folderName,isFilter:p,component:k().createElement(I.Ek,{badgeText:m.found.toString(),contentText:r,iconName:(0,q.Co)(m.folderModel)})};if(o)return{contentText:r=c.intervalText(o),isFilter:p,component:k().createElement(I.Ek,{badgeText:o.found,contentText:r,iconEmpty:!0})};if(j)return b.renderRequest(j.query,c);if(l)return{contentText:r=a||l.word,isFilter:p,component:k().createElement(w.Z,{text:a||l.word,type:w.y.NORMAL})};else return{contentText:r,isFilter:!0,component:k().createElement(I.Ek,{iconName:e||g,rightIconName:f,contentText:r})}},b.prototype.renderOperand=function(a){var b=this.props,c=b.operandType,e=b.navigationIndex,f=b.selected,g=b.qaEnabled;switch(c){case"query":return k().createElement(d.OperandSuggestQuery,{qaEnabled:g,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,value:a,active:f,dataCustom:{"data-navigation-index":e}});default:return k().createElement(d.OperandSuggestAdd,{qaEnabled:g,type:c,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,active:f,dataCustom:{"data-navigation-index":e}})}},b.prototype.renderContent=function(a){var b=this.props,c=b.caption,d=b.hr,e=b.iconEmpty,f=b.listType,g=b.navigationIndex,h=b.selected,i=b.short,j=b.text,l=b.title,m=b.type,n=b.testId,o=b.mode,p=b.operandType,q=j||a[m];if(d)return k().createElement(I.Ty,{iconEmpty:e,type:f});if(c)return k().createElement(I.wg,{testId:n,text:q});var r=this.renderData(q,a),s=r.contentText,t=r.isFilter,u=r.component,v=i?{title:l||s}:{};if(p)return this.renderOperand(s);else return k().createElement(I.ZP,T({navigationIndex:g,onMouseDown:this.handleMouseDown,onClick:this.handleClick,onKeyDown:this.handleGenericClick,onMouseEnter:this.handleMouseEnter,selected:h,short:i,type:f,isFilter:t,testId:n,mode:o},v),u)},b.prototype.render=function(){var a=this;return k().createElement(d.LocalizationContext.Consumer,null,function(b){return a.renderContent(b)})},b}(k().PureComponent)},6968:function(a,b,c){"use strict";c.d(b,{y:function(){return e},Z:function(){return o}});var d,e,f=c(1190),g=c.n(f),h=c(8156),i=c.n(h),j=c(7745),k=c(3012),l={text:"LG-qpXXxvyWu6jdl5Gi7J",normal:"_2gKLkbexHGxTQZD1QZ1Rjy",compact:"_2QZhjTImYCoGipR10q4egR",type_normal:"RoFgOx4FtYsE75MGCG1F0",type_badge:"_3oebx2fsA1-fiPatjmNyF",type_secondary:"zeOwucwyESXoqO1hsz6dT",bold:"_2FBZnr8QOI7cn9pMLgkRAm",type_caption:"_2xV0XYI8vqnpAY3D78_2HI",contactName:"_2XFqcqPMFWHtYaXVX5gpnP"},m=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),n=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g};!function(a){a.NORMAL="type_normal",a.CAPTION="type_caption",a.BADGE="type_badge",a.SECONDARY="type_secondary"}(e||(e={}));var o=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.render=function(){var a,b=this.props,c=b.children,d=b.className,e=b.mode,f=b.text,h=b.themeClassName,j=b.type,k=b.bold,m=b.testId,n=g()(((a={})[l.text]=!0,a[l[j]]=void 0!==j,a[l[e]]=void 0!==e,a[l.bold]=k,a[d]=void 0!==d,a[h]=void 0!==h,a));return i().createElement("span",{"data-test-id":m,className:n},f||c)},b=n([j.R,(0,k.Z)(function(a){if(a.type!==e.SECONDARY)return"r-text";else return"ll-pd__text_subtitle"})],b)}(i().PureComponent)},7747:function(a,b,c){"use strict";c.d(b,{j:function(){return k}});var d,e,f=c(8156),g=c.n(f),h=function(){return(h=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};var i={},j=new Proxy(function(a){var b=a.children,c=g().useReducer(function(a){return a+1},0)[1];if(g().useEffect(function(){if(!d)(function(){if(e)return e;var a=new Promise(function(a,b){try{window.require(["@mail/vkui"],function(b){d=b,a(b)},function(a){b(a)})}catch(a){b(a)}});return e=a,a.catch(function(a){throw e=void 0,a})})().then(function(){c()})},[]),d)return b(d);else return null},{get:function(a,b){var c,e;if(b in a)return a[b];else return null!==(c=i[b])&&void 0!==c?c:i[b]=null!==(e=null==d?void 0:d[b])&&void 0!==e?e:function(c){return g().createElement(a,null,function(a){var d=a[b];return g().createElement(d,h({},c))})}}});b.Z=j;var k=j},6389:function(a,b,c){"use strict";c.d(b,{y:function(){return y}});var d=c(1190),e=c.n(d),f=c(8156),g=c.n(f),h=c(2883),i=c(4169),j=c(7406),k=c(785),l=c(3823),m=c(5058),n=c(8655),o=c(6561),p="bysVRe7CKysr1GyqmP4nW",q="_2ct4ANbUMjS2FKRm_0vRCo",r=function(a){var b,c=a.active,d=a.onClick,f=a.onMouseOver,h=a.children,i=a.className,j=a.title;return g().createElement("div",{className:e()(p,i,(b={},b[q]=c,b)),onClick:d,onMouseOver:f,title:j},h)},s=c(1670),t=h.W.length>=3,u=function(a){var b=a.widget,c=a.setWidget,d=a.setOpen,e=(0,i.K)().position;return g().createElement("div",{className:s.Z.list},h.W.map(function(a){var d=a.widget,f=a.icon,h=a.text;return g().createElement(r,{title:t?h:void 0,active:b===d,onClick:function(){if((0,o.q2)(o.GE[d],e),"widget-notification"===d)(0,m.ne)(n.gw.map(function(a){return a.bannerid}),"whiteline_widget");c(d)},key:d},t?f:h)}),g().createElement("div",{className:s.Z.closer,onClick:function(){(0,o._z)(o.GE[b],e),d(!1)}},g().createElement(j.Icon,{icon:l.yk[k.tW.ACTIONS_CLOSE_BIG]})))},v="_22srU5R5c4xv8zI2DArAIT",w="tQ-k_pJIrW0RMAGwSyWfe",x="_33NhpwM5j09x0YmmrBtNRA",y=function(a){var b,c=a.open,d=a.setOpen,j=a.setWidget,k=a.showList,l=a.widget,m=(0,f.useRef)(!1);m.current||(m.current=c);var n=(0,i.K)().inWidget;return m.current&&g().createElement("div",{className:e()(v,(b={},b[w]=!c,b[x]=n,b))},k&&g().createElement(u,{widget:l,setWidget:j,open:c,setOpen:d}),h.W.map(function(a){var b=a.widget,d=a.Frame;return g().createElement(d,{hidden:!c||b!==l,key:b})}))}},6561:function(a,b,c){"use strict";c.d(b,{GE:function(){return f},lP:function(){return g},Jk:function(){return h},_i:function(){return i},q2:function(){return j},_z:function(){return k},Jz:function(){return l},DM:function(){return m},pj:function(){return n},gH:function(){return o},K9:function(){return p}});var d=c(1373),e=c.n(d),f={"widget-todo":"todo","widget-calendar":"calendar","widget-notification":"notification","widget-marusia":"marusia"},g=function(a){return e().send("show_widget_hover",{dwh:{type_button:a}})},h=function(a){return e().send("show_widget_button",{dwh:{type_button:a}})},i=function(a,b){return e().send("click_widget_button",{dwh:{type_button:a,widget_show:b}})},j=function(a,b){return e().send("click_widget_tab",{dwh:{widget:a,position:b}})},k=function(a,b){return e().send("click_close_widget",{dwh:{widget:a,position:b}})},l=function(a){return e().send("click_widget_goto_todo",{dwh:{position:a}})},m=function(a){return e().send("click_widget_goto_calendar",{dwh:{position:a}})},n=function(a){return e().send("click_widget_goto_promode",{dwh:{position:a}})},o=function(a){return e().send("so_count_tasks",{p:"todo",dwh:{cnt:a}})},p=function(){return e().send("promo_productivity_wg_noad_show")}},2883:function(a,b,c){"use strict";c.d(b,{W:function(){return _},m:function(){return $}});var d=c(7406),e=c(4679),f=c(1791),g=c(5041),h=c(8156),i=c.n(h),j=c(8655),k=c(4846),l=c(8866),m=c(4707),n=c.n(m),o=c(9846),p=c(6792),q=c(6561),r=c(1190),s=c.n(r),t="_2dtAUhRJMbnovo5dAjWHBL",u="_1MNjK4_X3IqXF3-c5ac_nm",v=function(a){var b,c=a.hidden,d=a.onMessage,e=a.src,f=a.className,g=a.postMessage;(0,h.useEffect)(function(){var a=new URL(e).origin,b=function(b){if(a===b.origin)d(b)};return window.addEventListener("message",b),function(){window.removeEventListener("message",b)}},[d,e]);var j=(0,h.useRef)(!1);j.current||(j.current=!c);var k=(0,h.useRef)(!1),l=(0,h.useRef)([]);if(!k.current)g.current=function(a){l.current.push(a)};return j.current&&i().createElement("iframe",{className:s()(t,f,(b={},b[u]=c,b)),src:e,ref:function(a){if(a&&a!==k.current){if(g)g.current=function(b){a.contentWindow.postMessage(b,e)},l.current.forEach(g.current),l.current=[];k.current=a}}})},w=c(4514),x=c(7747),y=c(4169),z="_32_kr8DC3xEi-OrPzFO-oA",A="_1wtVYBN1nyXd5ra-a94t81",B="_3goyNdcNLjzZ1aajjzXA0G",C="_1EjBJ7Y5qIyJX2k6aHhsOK",D="_5d6YoT8q7C_dFyNU21-QH",E="_1As3v_bKMXHY7DG4C17B8F",F="_21tYZgpZkzyTbfP-si9HGj",G="d_DbLeem4PjlM8CzzRpDE",H="_3TyTwmVHRIPwf-5949c3AT",I=f.WIDGET_QUOTA_TYPE,J=x.j.Spinner,K=x.j.Button,L=function(a){var b,c,d=a.onGoTo,e=a.hidden,g=a.ready,j=a.children,k=a.buttonHref,l=a.buttonText,m=a.showButtonPromo,n=void 0===m?"none"!==I&&f.HIDE_TOYS!==f.BL_PROP_NAME:m,o=(0,w.U)().ponyMode?"s":"l",p=(0,y.K)(),r=p.inWidget,t=p.position,u=(0,h.useCallback)(function(){return(0,q.pj)(t)},[t]);return i().createElement("div",{className:s()(z,(b={},b[A]=e,b[D]=!g,b[B]=g,b[E]=r,b))},i().createElement("div",{className:C},i().createElement(J,{size:"large"})),(c="top",I.startsWith(c)&&n&&i().createElement("a",{className:s()(F,H),onClick:u,href:f.QUOTA_URL,target:"_blank",rel:"noreferrer"},i().createElement("span",null,"top"===I?i18n("Улучшить виджеты"):i18n("Попробовать подписку")),i().createElement("span",null,i18n("Никакой рекламы и удобный вид")))),j,l&&i().createElement(K,{size:o,mode:r?"secondary":"tertiary",appearance:"neutral",className:F,onClick:d,href:k,target:"_blank"},l),"bottom"===I&&n&&i().createElement(K,{size:o,mode:"tertiary",appearance:"neutral",className:s()(F,G),onClick:u,href:f.QUOTA_URL,target:"_blank"},i18n("Попробовать подписку")))},M=c(1670),N=function(){return(N=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},O=function(){return{start_with_command:"погода"}},P=c(2681),Q=c(1146),R=c(4132),S=c(2152),T=c.n(S),U=c(793),V=c(142),W=c(1286),X=(0,W.debounce)((0,P.once)(q.gH),100),Y=(0,W.debounce)(function(){return U.a.current()},100),Z={position:"whiteline_widget"},_=[{when:f.WIDGET_CALENDAR,widget:"widget-calendar",icon:i().createElement(d.Icon,{icon:g.NAVIGATION_CALENDAR_MONTH}),text:i18n("Календарь"),Frame:(0,h.memo)(function(a){var b=a.hidden,c=(0,p.C)({name:"CalendarIframe",mediators:["themes-manager"]})[0].darkMode,d=(0,y.K)().position,e=(0,h.useState)(function(){return n()(f.CALENDAR_URL,{utm_source:"mail",utm_medium:"sidebar"===d?"widget_noad":"widget_whiteline",utm_campaign:"calendar.mail.ru",source:"octavius",theme:c?"dark":"light"})})[0],g=(0,h.useState)(!1),j=g[0],k=g[1],l=(0,h.useRef)(null),m=(0,h.useCallback)(function(){var a,b;null===(a=l.current)||void 0===a||a.call(l,{type:"SetTheme",data:c?"dark":"light"}),null===(b=l.current)||void 0===b||b.call(l,{type:"SetBgColor",data:getComputedStyle(document.documentElement).getPropertyValue("--vkui--color_background_content")})},[c]);return(0,h.useEffect)(m,[m]),i().createElement(L,{hidden:b,ready:j,buttonHref:f.WIDGET_X_CALENDAR_URL,buttonText:i18n("Перейти в Календарь"),onGoTo:(0,h.useCallback)(function(){return(0,q.DM)(d)},[d])},i().createElement(v,{src:e,hidden:b,onMessage:(0,h.useCallback)(function(a){var b;switch(null===(b=null==a?void 0:a.data)||void 0===b?void 0:b.handler){case"onAppLoaded":m(),k(!0);break;case"onGraphqlRequestSend":o.AK.current()}},[m]),postMessage:l}))})},{when:f.SHOW_TODO_TOGGLE,widget:"widget-todo",icon:i().createElement(d.Icon,{icon:g.STATUS_DONE_OUTLINE}),text:i18n("Задачи"),Frame:(0,h.memo)(function(a){var b=a.hidden,c=(0,p.C)({name:"ToDoIframe",mediators:["todo-manager","themes-manager"]}),d=c[0].darkMode,e=c[1],g=(0,h.useState)(!1),j=g[0],k=g[1],l=(0,h.useState)(function(){return n()(f.TODO_URL,{source:"octavius",theme:d?"dark":"light"})})[0],m=(0,h.useRef)(null),o=(0,h.useCallback)(function(){var a,b;null===(a=m.current)||void 0===a||a.call(m,{type:"todo:set-theme",theme:d?"dark":"light"}),null===(b=m.current)||void 0===b||b.call(m,{type:"todo:set-bg-color",bgColor:getComputedStyle(document.documentElement).getPropertyValue("--vkui--color_background_content")})},[d]);(0,h.useEffect)(o,[o]);var r=(0,y.K)().position;return i().createElement(L,{hidden:b,ready:j,buttonHref:f.WIDGET_TODO_URL,buttonText:i18n("Перейти в Задачи"),onGoTo:(0,h.useCallback)(function(){return(0,q.Jz)(r)},[r])},i().createElement(v,{src:l,hidden:b,onMessage:(0,h.useCallback)(function(a){var b;switch(null===(b=null==a?void 0:a.data)||void 0===b?void 0:b.type){case"todo:tasks":return X(a.data.tasksCount),void Y();case R.FROM_TODO_READY:return T()(["todo_block_visible"]),o(),void k(!0)}a.data.sendAns=m.current,e((0,V.BU)(Q.TODO_IFRAME_MESSAGE,a))},[e,o]),postMessage:m}))})},{when:e.MARUSIA_IN_WIDGET,widget:"widget-marusia",icon:i().createElement("div",{className:M.Z.marusia,style:{backgroundImage:"url(".concat(f.MARUSIA_LOGO,")")}}),text:i18n("Маруся"),Frame:(0,h.memo)(function(a){var b=a.hidden,c=(0,p.C)({name:"MarusiaIframe",mediators:["themes-manager","marusia-manager"]})[0],d=c.darkMode,e=c.marusiaGetParams,g=(0,h.useState)("marusia"===f.WIDGET_HEADER_TYPE?O:{}),j=g[0],k=g[1];(0,h.useLayoutEffect)(function(){if(e)k(e)},[e]);var l=(0,h.useMemo)(function(){return n()(f.IFRAME_MARUSIA_URL,N({dark:d?1:0,origin:window.location.origin},j))},[d,j]),m=(0,h.useState)(!1),o=m[0],q=m[1],r=(0,h.useRef)(null),s=(0,h.useCallback)(function(a){var b,c;switch(null===(c=null===(b=null==a?void 0:a.data)||void 0===b?void 0:b.event)||void 0===c?void 0:c.type){case"app_is_ready":q(!0)}},[]);return(0,h.useLayoutEffect)(function(){q(!1)},[b,l]),(0,h.useLayoutEffect)(function(){if(b)k({})},[b]),!b&&i().createElement(L,{hidden:b,ready:o,showButtonPromo:!1},i().createElement(v,{src:l,hidden:b,onMessage:s,postMessage:r}))})},{when:l.B,widget:"widget-notification",icon:i().createElement(d.Icon,{icon:f.NEW_FEATURES_MEGAFON_ICON?g.UNION_ADVERTISING_OUTLINE_20:g.NAVIGATION_NOTIFICATION}),text:i18n("Обновления"),Frame:(0,h.memo)(function(a){var b=a.hidden;return i().createElement(j.is.Provider,{value:Z},i().createElement(k.s,{hidden:b}))})}].filter(function(a){return a.when}),$=0!==_.length},4169:function(a,b,c){"use strict";c.d(b,{M:function(){return f},K:function(){return g}});var d=c(1791),e=c(8156),f=(0,e.createContext)(null),g=function(){var a=(0,e.useContext)(f).position;return{position:a,inWidget:"whiteline_widget"===a||d.WIDGET_COLUMN}}},3823:function(a,b,c){"use strict";c.d(b,{U2:function(){return l},_i:function(){return m},yk:function(){return n},h_:function(){return o},mx:function(){return p},Co:function(){return q}});var d,e,f,g,h,i=c(5041),j=c(785),k=function(){return(k=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},l=((d={})[j.qg.ATTACH_ARCHIVE]=i.ATTACH_ARCHIVE,d[j.qg.ATTACH_ANDROID]=i.ATTACH_ANDROID,d[j.qg.ATTACH_AUDIO]=i.ATTACH_AUDIO,d[j.qg.ATTACH_CALENDAR]=i.ATTACH_CALENDAR,d[j.qg.ATTACH_CHART]=i.ATTACH_CHART,d[j.qg.ATTACH_DOC]=i.ATTACH_DOC,d[j.qg.ATTACH_EBOOK]=i.ATTACH_EBOOK,d[j.qg.ATTACH_EXE]=i.ATTACH_EXE,d[j.qg.ATTACH_VIRUS]=i.ATTACH_VIRUS,d[j.qg.ATTACH_HTML]=i.ATTACH_HTML,d[j.qg.ATTACH_JSON]=i.ATTACH_JSON,d[j.qg.ATTACH_MAIL]=i.ATTACH_MAIL,d[j.qg.ATTACH_MARKDOWN]=i.ATTACH_MARKDOWN,d[j.qg.ATTACH_PICTURE]=i.ATTACH_PICTURE,d[j.qg.ATTACH_PLAYLIST]=i.ATTACH_PLAYLIST,d[j.qg.ATTACH_PRESENTATION]=i.ATTACH_PRESENTATION,d[j.qg.ATTACH_PDF]=i.ATTACH_PDF,d[j.qg.ATTACH_PSD]=i.ATTACH_PSD,d[j.qg.ATTACH_SKETCH]=i.ATTACH_SKETCH,d[j.qg.ATTACH_SOURCE]=i.ATTACH_SOURCE,d[j.qg.ATTACH_SPREADSHEET]=i.ATTACH_SPREADSHEET,d[j.qg.ATTACH_TEXT]=i.ATTACH_TEXT,d[j.qg.ATTACH_UNKNOWN]=i.ATTACH_UNKNOWN,d[j.qg.ATTACH_VCARD]=i.ATTACH_VCARD,d[j.qg.ATTACH_VIDEO]=i.ATTACH_VIDEO,d[j.qg.ATTACH_WEBFEED]=i.ATTACH_WEBFEED,d),m=((e={})[j.OX.EMPTY_FOLDER]=i.EMPTY_FOLDER_PLACEHOLDER,e[j.OX.TRASH]=i.TRASH_PLACEHOLDER,e[j.OX.SPAM]=i.SPAM_PLACEHOLDER,e[j.OX.LOCK]=i.LOCK_PLACEHOLDER,e[j.OX.NO_SEARCH]=i.NO_SEARCH_PLACEHOLDER,e[j.OX.NO_TEMPLATES]=i.NO_TEMPLATES_PLACEHOLDER,e[j.OX.NO_SELECT]=i.NO_SELECT_PLACEHOLDER,e[j.OX.NO_LETTER]=i.NO_LETTER_PLACEHOLDER,e),n=((f={})[j.tW.UNREAD]=i.STATUS_UNREAD,f[j.tW.FLAGGED]=i.ACTIONS_FAVORITE_ON,f[j.tW.ATTACH]=i.STATUS_ATTACH,f[j.tW.DOCUMENT_SCANS]=i.CATEGORIES_SCAN,f[j.tW.ORDER]=i.NAVIGATION_CART,f[j.tW.FINANCE]=i.CATEGORIES_CURRENCY_ROUBLE,f[j.tW.REGISTRATION]=i.CATEGORIES_ACCESS,f[j.tW.TRAVEL]=i.CATEGORIES_FLIGHT,f[j.tW.EVENT]=i.CATEGORIES_TICKET,f[j.tW.FEES]=i.CATEGORIES_GOVERNMENT,f[j.tW.OFFICIAL_LETTERS]=i.CATEGORIES_GOVERNMENT,f[j.tW.SCHOOL_LETTERS]=i.CATEGORIES_SCHOOL,f[j.tW.GAMES_LETTERS]=i.CATEGORIES_GAMES,f[j.tW.TAGGED_DOCUMENTS]=i.COLOR_TAG,f[j.tW.TAGGED_IMPORTANT]=i.COLOR_TAG,f[j.tW.TAGGED_NEEDS_REPLY]=i.COLOR_TAG,f[j.tW.TAGGED_PERSONAL]=i.COLOR_TAG,f[j.tW.TAGGED_URGENT]=i.COLOR_TAG,f[j.tW.CALENDAR]=i.NAVIGATION_CALENDAR_MONTH,f[j.tW.STATUS_TAG]=i.STATUS_TAG,f[j.tW.COLOR_TAG_SUGGEST_LIGHT]=i.COLOR_TAG_SUGGEST_LIGHT,f[j.tW.COLOR_TAG_SUGGEST_DARK]=i.COLOR_TAG_SUGGEST_DARK,f[j.tW.FOLDER]=i.NAVIGATION_FOLDER,f[j.tW.FOLDER_INBOX]=i.CATEGORIES_MAIL,f[j.tW.FOLDER_USER]=i.NAVIGATION_FOLDER,f[j.tW.FOLDER_TEMPLATES]=i.NAVIGATION_FOLDER,f[j.tW.FOLDER_SECRET_CLOSED]=i.STATUS_LOCK_OFF,f[j.tW.FOLDER_ARCHIVE]=i.NAVIGATION_ARCHIVE,f[j.tW.FOLDER_SENT]=i.ACTIONS_REPLY,f[j.tW.FOLDER_DRAFTS]=i.CATEGORIES_DRAFTS,f[j.tW.FOLDER_SPAM]=i.ACTIONS_DISLIKE,f[j.tW.FOLDER_TRASH]=i.ACTIONS_DELETE,f[j.tW.COMPOSE]=i.ACTIONS_COMPOSE,f[j.tW.FOLDER_SECRET_OPEN]=i.STATUS_LOCK_ON,f[j.tW.FOLDER_SOCIAL]=i.NAVIGATION_USERS,f[j.tW.FOLDER_NEWSLETTERS]=i.CATEGORIES_MAILINGS,f[j.tW.FOLDER_OUTBOX]=i.STATUS_TIME,f[j.tW.FOLDER_TOMYSELF]=i.CATEGORIES_SELF_MAIL,f[j.tW.FOLDER_NEWS]=i.CATEGORIES_SUBSCRIPTIONS,f[j.tW.FOLDER_OFFICIAL]=i.CATEGORIES_GOVERNMENT,f[j.tW.FOLDER_RECEIPTS]=i.CATEGORIES_RECEIPTS,f[j.tW.FOLDER_SCHOOL]=i.CATEGORIES_SCHOOL,f[j.tW.FOLDER_GAMES]=i.CATEGORIES_GAMES,f[j.tW.FOLDER_PARENTAL_CONTROL]=i.NAVIGATION_TIP,f[j.tW.FOLDER_CHILD_TRASH]=i.ACTIONS_DELETE,f[j.tW.KASPERSKY_LOGO_RUS]=i.KASPERSKY_LOGO_RUS,f[j.tW.KASPERSKY_LOGO_ENG]=i.KASPERSKY_LOGO_ENG,f[j.tW.KASPERSKY_LOGO_ALTER_RUS]=i.KASPERSKY_LOGO_ALTER_RUS,f[j.tW.KASPERSKY_LOGO_ALTER_ENG]=i.KASPERSKY_LOGO_ALTER_ENG,f[j.tW.NAVIGATION_MORE]=i.NAVIGATION_MORE,f[j.tW.NAVIGATION_MORE_VERTICAL]=i.NAVIGATION_MORE_VERTICAL,f[j.tW.NAVIGATION_ARROW_LIST_PREVIOUS]=i.NAVIGATION_ARROW_LIST_PREVIOUS,f[j.tW.ACTIONS_CLOSE_BIG]=i.ACTIONS_CLOSE_BIG,f[j.tW.STATUS_DONE]=i.STATUS_DONE,f),o=k(k({},n),((g={})[j.tW.FLAGGED]=i.ACTIONS_FAVORITE_S,g[j.tW.ATTACH]=i.STATUS_ATTACH_S,g[j.tW.DOCUMENT_SCANS]=i.CATEGORIES_SCAN_S,g[j.tW.ORDER]=i.NAVIGATION_CART_S,g[j.tW.REGISTRATION]=i.CATEGORIES_ACCESS_S,g[j.tW.TRAVEL]=i.CATEGORIES_FLIGHT_S,g[j.tW.EVENT]=i.CATEGORIES_TICKET_S,g[j.tW.FEES]=i.CATEGORIES_GOVERNMENT_S,g[j.tW.OFFICIAL_LETTERS]=i.CATEGORIES_GOVERNMENT_S,g[j.tW.SCHOOL_LETTERS]=i.CATEGORIES_SCHOOL_S,g[j.tW.GAMES_LETTERS]=i.CATEGORIES_GAMES_S,g[j.tW.FOLDER]=i.NAVIGATION_FOLDER_S,g[j.tW.FOLDER_INBOX]=i.CATEGORIES_MAIL_S,g[j.tW.FOLDER_USER]=i.NAVIGATION_FOLDER_S,g[j.tW.FOLDER_TEMPLATES]=i.NAVIGATION_FOLDER_S,g[j.tW.FOLDER_SECRET_CLOSED]=i.STATUS_LOCK_OFF,g[j.tW.FOLDER_ARCHIVE]=i.NAVIGATION_ARCHIVE_S,g[j.tW.FOLDER_SENT]=i.ACTIONS_REPLY_S,g[j.tW.FOLDER_DRAFTS]=i.CATEGORIES_DRAFTS_S,g[j.tW.FOLDER_SPAM]=i.ACTIONS_DISLIKE_S,g[j.tW.FOLDER_TRASH]=i.ACTIONS_DELETE_S,g[j.tW.FOLDER_SECRET_OPEN]=i.STATUS_LOCK_ON,g[j.tW.FOLDER_SOCIAL]=i.NAVIGATION_USERS_S,g[j.tW.FOLDER_NEWSLETTERS]=i.CATEGORIES_MAILINGS_S,g[j.tW.FOLDER_NEWS]=i.CATEGORIES_SUBSCRIPTIONS_S,g[j.tW.FOLDER_OFFICIAL]=i.CATEGORIES_GOVERNMENT_S,g[j.tW.FOLDER_RECEIPTS]=i.CATEGORIES_RECEIPTS,g[j.tW.FOLDER_SCHOOL]=i.CATEGORIES_SCHOOL_S,g[j.tW.FOLDER_GAMES]=i.CATEGORIES_GAMES_S,g[j.tW.FOLDER_OUTBOX]=i.STATUS_TIME_S,g[j.tW.FOLDER_PARENTAL_CONTROL]=i.NAVIGATION_TIP_S,g[j.tW.FOLDER_CHILD_TRASH]=i.ACTIONS_DELETE_S,g)),p=((h={})[j.BD.THUMB_ANDROID_PACKAGE]=i.THUMB_ANDROID_PACKAGE,h[j.BD.THUMB_ARCHIVE]=i.THUMB_ARCHIVE,h[j.BD.THUMB_AUDIO]=i.THUMB_AUDIO,h[j.BD.THUMB_CALEDAR]=i.THUMB_CALEDAR,h[j.BD.THUMB_CARD]=i.THUMB_CARD,h[j.BD.THUMB_CHART]=i.THUMB_CHART,h[j.BD.THUMB_DOCUMENT]=i.THUMB_DOCUMENT,h[j.BD.THUMB_EBOOK]=i.THUMB_EBOOK,h[j.BD.THUMB_EMAIL]=i.THUMB_EMAIL,h[j.BD.THUMB_EXCEL_ONLINE]=i.THUMB_EXCEL_ONLINE,h[j.BD.THUMB_EXE]=i.THUMB_EXE,h[j.BD.THUMB_FOLDER_CAMERA]=i.THUMB_FOLDER_CAMERA,h[j.BD.THUMB_FOLDER_SHARED]=i.THUMB_FOLDER_SHARED,h[j.BD.THUMB_FOLDER_VIRUS]=i.THUMB_FOLDER_VIRUS,h[j.BD.THUMB_FOLDER]=i.THUMB_FOLDER,h[j.BD.THUMB_HTML]=i.THUMB_HTML,h[j.BD.THUMB_JSON]=i.THUMB_JSON,h[j.BD.THUMB_MARKDOWN]=i.THUMB_MARKDOWN,h[j.BD.THUMB_PDF]=i.THUMB_PDF,h[j.BD.THUMB_PHOTOSHOP]=i.THUMB_PHOTOSHOP,h[j.BD.THUMB_PICTURE]=i.THUMB_PICTURE,h[j.BD.THUMB_PLAIN_TEXT]=i.THUMB_PLAIN_TEXT,h[j.BD.THUMB_PLAYLIST]=i.THUMB_PLAYLIST,h[j.BD.THUMB_POWERPOINT_ONLINE]=i.THUMB_POWERPOINT_ONLINE,h[j.BD.THUMB_PRESENTATION]=i.THUMB_PRESENTATION,h[j.BD.THUMB_SOURCE]=i.THUMB_SOURCE,h[j.BD.THUMB_SPREADSHEET]=i.THUMB_SPREADSHEET,h[j.BD.THUMB_UNKNOWN]=i.THUMB_UNKNOWN,h[j.BD.THUMB_VIDEO]=i.THUMB_VIDEO,h[j.BD.THUMB_WEB_FEED]=i.THUMB_WEB_FEED,h[j.BD.THUMB_VIRUS]=i.THUMB_VIRUS,h[j.BD.THUMB_WORD_ONLINE]=i.THUMB_WORD_ONLINE,h[j.BD.ACTIONS_TO_CLOUD]=i.ACTIONS_CLOUD_UPLOAD,h[j.BD.ACTIONS_DOWNLOAD_ALT]=i.ACTIONS_DOWNLOAD_ALT,h[j.BD.LINK]=i.STATUS_LINK,h[j.BD.WARNING]=i.STATUS_WARNING_ROUND,h);function q(a){var b="FOLDER_"+a.get("type").toUpperCase(),c=j.tW[b];if("archive"===c&&!a.isArchive())c=j.tW.FOLDER_USER;if(a.isArchive())c=j.tW.FOLDER_ARCHIVE;return c||j.tW.FOLDER}},785:function(a,b,c){"use strict";c.d(b,{tW:function(){return f},qg:function(){return g},BD:function(){return h},OX:function(){return i}});var d=c(9842),e=c(6753),f={TODAY:e.SearchDatesTypes.TODAY,YESTERDAY:e.SearchDatesTypes.YESTERDAY,WEEK:e.SearchDatesTypes.WEEK,MONTH:e.SearchDatesTypes.MONTH,MONTHS:e.SearchDatesTypes.MONTHS,YEARS:e.SearchDatesTypes.YEARS,UNREAD:d.OperandFilterTypes.UNREAD,FLAGGED:d.OperandFilterTypes.FLAGGED,ATTACH:d.OperandFilterTypes.ATTACH,FROM:d.OperandQueryTypes.FROM,TO:d.OperandQueryTypes.TO,SUBJECT:d.OperandQueryTypes.SUBJECT,QUERY:d.OperandQueryTypes.QUERY,STATUS_DONE:"STATUS_DONE",DOCUMENT_SCANS:d.CategoryTypes.DOCUMENT_SCANS,ORDER:d.CategoryTypes.ORDER,FINANCE:d.CategoryTypes.FINANCE,REGISTRATION:d.CategoryTypes.REGISTRATION,TRAVEL:d.CategoryTypes.TRAVEL,EVENT:d.CategoryTypes.EVENT,FEES:d.CategoryTypes.FEES,OFFICIAL_LETTERS:d.CategoryTypes.OFFICIAL,SCHOOL_LETTERS:d.CategoryTypes.SCHOOL,GAMES_LETTERS:d.CategoryTypes.GAMES,TAGGED_PERSONAL:d.ColorTagTypes.TAGGED_PERSONAL,TAGGED_DOCUMENTS:d.ColorTagTypes.TAGGED_DOCUMENTS,TAGGED_IMPORTANT:d.ColorTagTypes.TAGGED_IMPORTANT,TAGGED_URGENT:d.ColorTagTypes.TAGGED_URGENT,TAGGED_NEEDS_REPLY:d.ColorTagTypes.TAGGED_NEEDS_REPLY,STATUS_TAG:"STATUS_TAG",COLOR_TAG_SUGGEST_LIGHT:"COLOR_TAG_SUGGEST_LIGHT",COLOR_TAG_SUGGEST_DARK:"COLOR_TAG_SUGGEST_DARK",CALENDAR:"CALENDAR",FOLDER:"FOLDER",FOLDER_ARCHIVE:"FOLDER_ARCHIVE",FOLDER_SENT:"FOLDER_SENT",FOLDER_DRAFTS:"FOLDER_DRAFTS",FOLDER_TEMPLATES:"FOLDER_TEMPLATES",FOLDER_SPAM:"FOLDER_SPAM",FOLDER_TRASH:"FOLDER_TRASH",FOLDER_USER:"FOLDER_USER",FOLDER_INBOX:"FOLDER_INBOX",FOLDER_SECRET_CLOSED:"FOLDER_SECRET_CLOSED",FOLDER_SECRET_OPEN:"FOLDER_SECRET_OPEN",FOLDER_SOCIAL:"FOLDER_SOCIAL",FOLDER_NEWSLETTERS:"FOLDER_NEWSLETTERS",FOLDER_TOMYSELF:"FOLDER_TOMYSELF",FOLDER_NEWS:"FOLDER_NEWS",FOLDER_OFFICIAL:"FOLDER_OFFICIAL",FOLDER_RECEIPTS:"FOLDER_RECEIPTS",FOLDER_SCHOOL:"FOLDER_SCHOOL",FOLDER_GAMES:"FOLDER_GAMES",FOLDER_OUTBOX:"FOLDER_OUTBOX",COMPOSE:"COMPOSE",FOLDER_PARENTAL_CONTROL:"FOLDER_PARENTAL_CONTROL",FOLDER_CHILD_TRASH:"FOLDER_CHILD_TRASH",SEARCH_IN:"search",KASPERSKY_LOGO_RUS:"KASPERSKY_LOGO_RUS",KASPERSKY_LOGO_ENG:"KASPERSKY_LOGO_ENG",KASPERSKY_LOGO_ALTER_RUS:"KASPERSKY_LOGO_ALTER_RUS",KASPERSKY_LOGO_ALTER_ENG:"KASPERSKY_LOGO_ALTER_ENG",NAVIGATION_MORE:"NAVIGATION_MORE",NAVIGATION_MORE_VERTICAL:"NAVIGATION_MORE_VERTICAL",ACTIONS_CLOSE_BIG:"ACTIONS_CLOSE_BIG",NAVIGATION_ARROW_LIST_PREVIOUS:"NAVIGATION_ARROW_LIST_PREVIOUS"},g={ATTACH_ARCHIVE:"ATTACH_ARCHIVE",ATTACH_ANDROID:"ATTACH_ANDROID",ATTACH_AUDIO:"ATTACH_AUDIO",ATTACH_CALENDAR:"ATTACH_CALENDAR",ATTACH_CHART:"ATTACH_CHART",ATTACH_DOC:"ATTACH_DOC",ATTACH_EBOOK:"ATTACH_EBOOK",ATTACH_EXE:"ATTACH_EXE",ATTACH_VIRUS:"ATTACH_VIRUS",ATTACH_HTML:"ATTACH_HTML",ATTACH_JSON:"ATTACH_JSON",ATTACH_MAIL:"ATTACH_MAIL",ATTACH_MARKDOWN:"ATTACH_MARKDOWN",ATTACH_PICTURE:"ATTACH_PICTURE",ATTACH_PLAYLIST:"ATTACH_PLAYLIST",ATTACH_PRESENTATION:"ATTACH_PRESENTATION",ATTACH_PDF:"ATTACH_PDF",ATTACH_PSD:"ATTACH_PSD",ATTACH_SKETCH:"ATTACH_SKETCH",ATTACH_SOURCE:"ATTACH_SOURCE",ATTACH_SPREADSHEET:"ATTACH_SPREADSHEET",ATTACH_TEXT:"ATTACH_TEXT",ATTACH_UNKNOWN:"ATTACH_UNKNOWN",ATTACH_VCARD:"ATTACH_VCARD",ATTACH_VIDEO:"ATTACH_VIDEO",ATTACH_WEBFEED:"ATTACH_WEBFEED"},h={THUMB_ANDROID_PACKAGE:"THUMB_ANDROID_PACKAGE",THUMB_ARCHIVE:"THUMB_ARCHIVE",THUMB_AUDIO:"THUMB_AUDIO",THUMB_CALEDAR:"THUMB_CALEDAR",THUMB_CARD:"THUMB_CARD",THUMB_CHART:"THUMB_CHART",THUMB_DOCUMENT:"THUMB_DOCUMENT",THUMB_EBOOK:"THUMB_EBOOK",THUMB_EMAIL:"THUMB_EMAIL",THUMB_EXCEL_ONLINE:"THUMB_EXCEL_ONLINE",THUMB_EXE:"THUMB_EXE",THUMB_FOLDER_CAMERA:"THUMB_FOLDER_CAMERA",THUMB_FOLDER_SHARED:"THUMB_FOLDER_SHARED",THUMB_FOLDER_VIRUS:"THUMB_FOLDER_VIRUS",THUMB_FOLDER:"THUMB_FOLDER",THUMB_HTML:"THUMB_HTML",THUMB_JSON:"THUMB_JSON",THUMB_MARKDOWN:"THUMB_MARKDOWN",THUMB_PDF:"THUMB_PDF",THUMB_PHOTOSHOP:"THUMB_PHOTOSHOP",THUMB_PICTURE:"THUMB_PICTURE",THUMB_PLAIN_TEXT:"THUMB_PLAIN_TEXT",THUMB_PLAYLIST:"THUMB_PLAYLIST",THUMB_POWERPOINT_ONLINE:"THUMB_POWERPOINT_ONLINE",THUMB_PRESENTATION:"THUMB_PRESENTATION",THUMB_SOURCE:"THUMB_SOURCE",THUMB_SPREADSHEET:"THUMB_SPREADSHEET",THUMB_UNKNOWN:"THUMB_UNKNOWN",THUMB_VIDEO:"THUMB_VIDEO",THUMB_WEB_FEED:"THUMB_WEB_FEED",THUMB_VIRUS:"THUMB_VIRUS",THUMB_WORD_ONLINE:"THUMB_WORD_ONLINE",ACTIONS_TO_CLOUD:"ACTIONS_TO_CLOUD",ACTIONS_DOWNLOAD_ALT:"ACTIONS_DOWNLOAD_ALT",LINK:"LINK",WARNING:"WARNING"},i={EMPTY_FOLDER:"EMPTY_FOLDER",TRASH:"TRASH",SPAM:"SPAM",LOCK:"LOCK",NO_SEARCH:"NO_SEARCH",NO_TEMPLATES:"NO_TEMPLATES",NO_SELECT:"NO_SELECT",NO_LETTER:"NO_LETTER"}},9394:function(a,b,c){"use strict";c.d(b,{Ek:function(){return h},sK:function(){return i},V9:function(){return j},zR:function(){return k},F4:function(){return l}});var d,e=c(9842),f=c(785),g=[i18n("январь"),i18n("февраль"),i18n("март"),i18n("апрель"),i18n("май"),i18n("июнь"),i18n("июль"),i18n("август"),i18n("сентябрь"),i18n("октябрь"),i18n("ноябрь"),i18n("декабрь")],h=((d={})[f.tW.TODAY]=i18n("cегодня"),d[f.tW.YESTERDAY]=i18n("вчера"),d[f.tW.WEEK]=i18n("за эту неделю"),d[f.tW.MONTH]=i18n("за этот месяц"),d[f.tW.UNREAD]=i18n("Непрочитанные"),d[f.tW.FLAGGED]=i18n("С флагом"),d[f.tW.ATTACH]=i18n("С вложениями"),d[f.tW.FROM]=i18n("От"),d[f.tW.TO]=i18n("Кому"),d[f.tW.SUBJECT]=i18n("Тема"),d[f.tW.QUERY]=i18n("Везде"),d[f.tW.ORDER]=i18n("Заказы"),d[f.tW.FINANCE]=i18n("Финансы"),d[f.tW.REGISTRATION]=i18n("Учётные записи"),d[f.tW.TRAVEL]=i18n("Путешествия"),d[f.tW.EVENT]=i18n("Билеты"),d[f.tW.FEES]=i18n("Штрафы и налоги"),d[f.tW.OFFICIAL_LETTERS]=i18n("Госписьма"),d[f.tW.DOCUMENT_SCANS]=i18n("Сканы документов"),d[f.tW.SEARCH_IN]=i18n("искать"),d[f.tW.TAGGED_PERSONAL]=i18n("Личное"),d[f.tW.TAGGED_DOCUMENTS]=i18n("Документы"),d[f.tW.TAGGED_IMPORTANT]=i18n("Важно"),d[f.tW.TAGGED_URGENT]=i18n("Срочно"),d[f.tW.TAGGED_NEEDS_REPLY]=i18n("Ответить"),d);function i(a){var b=a.type,c="";if(h[b])c=h[b];var d=new Date(1e3*a.from);if(b===f.tW.MONTHS)c=g[d.getMonth()]||"";if(b===f.tW.YEARS)c=i18n("за {year}",{year:d.getFullYear()});return c=c[0].toUpperCase()+c.slice(1)}function j(a){return i18n("и ещё {n}",{n:a})}function k(a){return i18n.plural(a,[i18n("{n} дней",{n:a}),i18n("{n} день",{n:a}),i18n("{n} дня",{n:a})])}function l(a){switch(a){case e.OperandSuggestAddTypes.FROM:return i18n("по отправителю");case e.OperandSuggestAddTypes.SEARCH_INTERNET:return i18n("в интернете");default:return""}}},8655:function(a,b,c){"use strict";c.d(b,{Uo:function(){return z},is:function(){return x},gw:function(){return v},lt:function(){return w},II:function(){return y}});var d=c(7406),e=c(1373),f=c.n(e),g=c(769),h=c.n(g),i=c(1190),j=c.n(i),k=c(1791),l=c(5041),m=c(8156),n=c.n(m),o=c(4846),p=c(1936),q=c.n(p),r=c(6567),s=c(9775),t=c(5058),u=c(9141),v=h().get("newFeatures")||[],w=h().get("newFeaturesCount")||0,x=(0,m.createContext)(null),y=function(){var a=(0,m.useContext)(x).position;return{position:a,inWidget:"whiteline_widget"===a}},z=function(a){var b,c=a.className,e=a.isBottomRight,g=function(){var a=(0,m.useState)(function(){var a=q().get("octavius-bell-pimple");return!!a&&!a.state}),b=a[0],c=a[1],d=(0,m.useCallback)(function(){if(b)c(!1),q().get("octavius-bell-pimple").save({state:!0})},[b]);return{isShowPimple:b,hidePimple:d}}(),h=g.isShowPimple,i=g.hidePimple,p=(0,m.useState)(!1),w=p[0],x=p[1];(0,m.useEffect)(function(){f().send("bell-shown")},[]),(0,m.useEffect)(function(){if(h)f().send("pimple-shown")},[h]);var z=y().position,A=(0,m.useCallback)(function(){i(),(0,t.ne)(v.map(function(a){return a.bannerid}),z)},[i,z]);return n().createElement("div",{className:c},n().createElement(d.Dropdown,{placement:e?"bottomRight":"bottom",onChangeExpandState:x,pureOverlay:!0,overlay:function(){return n().createElement(o.s,null)}},n().createElement("div",{className:j()(u.Z.bellIcon,(0,r.d)("octavius-tooltip-mail-updates"),(b={},b[u.Z.active]=w,b)),onClick:A,"data-qa-id":(0,s.qa)("bell"),title:i18n("Последние обновления")},n().createElement(d.Icon,{icon:k.NEW_FEATURES_MEGAFON_ICON?l.UNION_ADVERTISING_OUTLINE_20:l.NAVIGATION_NOTIFICATION}),h&&n().createElement("div",{className:u.Z.pimple,"data-qa-id":(0,s.qa)("bell-pimple")}))))}},4846:function(a,b,c){"use strict";c.d(b,{s:function(){return y}});var d=c(1190),e=c.n(d),f=c(1791),g=c(8156),h=c.n(g),i=c(7747),j=c(7406),k=c(5041),l=c(9775),m=c(5058),n=c(8655),o=c(9141),p=i.j.Headline,q=i.j.Subhead,r=i.j.Spacing,s=function(a){var b,c,d,f=a.isDarkMode,g=a.banner,i=(0,n.II)().position;return h().createElement("div",{className:e()(o.Z.item,(b={},b[o.Z.itemDark]=f,b)),"data-qa-id":(0,l.qa)("banner-bell")},h().createElement("a",{className:o.Z.itemLink,href:g.link,onClick:function(){return(0,m.io)(g.bannerid,i)},target:"_blank",rel:"noreferrer"},h().createElement("div",{className:o.Z.itemContent},h().createElement(p,{level:"1",weight:"2",className:o.Z.itemTitle},g.title),h().createElement(r,{size:4}),h().createElement(q,{className:o.Z.itemText},g.text),h().createElement(r,{size:8}),h().createElement("div",{className:o.Z.itemLearnMore},null!==(d=g.learnMoreText)&&void 0!==d?d:i18n("Узнать больше"),h().createElement("span",{className:e()(o.Z.itemArrow,(c={},c[o.Z.itemArrowDark]=f,c))},h().createElement(j.Icon,{icon:k.UNION_ARROW_RIGHT_OUTLINE_20})))),h().createElement("div",{className:o.Z.imageWrapper},h().createElement("img",{className:o.Z.image,src:f?g.imageDark:g.image,alt:g.title}))))},t=c(6792),u=c(4514),v=i.j.Title,w=i.j.Spacing,x=i.j.Headline,y=function(a){var b,c=a.hidden,d=(0,t.C)({name:"new-features-dropdown",mediators:["themes-manager"]})[0].darkMode,g=(0,n.II)(),i=g.position,j=g.inWidget,k=(0,u.U)().ponyMode;return!c&&h().createElement("div",{className:e()(o.Z.wrapper,(b={},b[o.Z.inWidget]=j,b[o.Z.ponyMode]=k,b)),"data-qa-id":(0,l.qa)("dropdown-new-features-bell")},h().createElement("div",{className:e()(o.Z.dropdownContainer,"scrollable_styled","application_new-toolbar")},h().createElement(v,{level:"2"},i18n("Что нового в Почте")),h().createElement(w,{size:8}),n.gw.map(function(a){return h().createElement(s,{banner:a,key:a.bannerid,isDarkMode:d})})),n.gw.length===f.NEW_FEATURES_SHOW_COUNT&&h().createElement("div",{className:o.Z.linkWrapper},h().createElement("a",{className:o.Z.link,href:f.NEW_FEATURES_LANDING_HREF,onClick:function(){return(0,m.c)(n.gw.map(function(a){return a.bannerid}),i)},target:"_blank",rel:"noreferrer"},h().createElement(x,{level:"1",weight:"2"},h().createElement("span",{className:o.Z.linkSeeAll},i18n("Посмотреть все"))))))}},5058:function(a,b,c){"use strict";c.d(b,{ne:function(){return f},io:function(){return g},c:function(){return h}});var d=c(1373),e=c.n(d),f=function(a,b){return e().send("bell-click",{dwh:{ids:a,position:b}})},g=function(a,b){return e().send("bell-click-point",{dwh:{id:a,position:b}})},h=function(a,b){return e().send("bell-click-show-more",{dwh:{ids:a,position:b}})}},8866:function(a,b,c){"use strict";c.d(b,{B:function(){return v}});var d,e=c(1791),f=c(8156),g=c.n(f),h=c(1116),i=c.n(h),j=c(5293),k=c(9386),l=c.n(k),m=c(8671),n=c(8655),o=c(2256),p=c(6567),q=c(2312),r=c(9775),s=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),t=g().lazy(function(){return Promise.resolve().then(c.bind(c,8190))}),u=new p.k(j.searchPanelConfig.name),v=e.HAS_WIDGET_HEADER_TYPE&&e.NEW_FEATURES_BELL,w={position:"whiteline"},x=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.events=j.searchPanelConfig.events,b.focus=j.searchPanelConfig.focus,b.reset=j.searchPanelConfig.reset,b.expandSearchPanel=j.searchPanelConfig.expandSearchPanel.bind(b),b.handleSearchPanelBlur=j.searchPanelConfig.handleSearchPanelBlur.bind(b),b.searchPanelRef=g().createRef(),b.isMount=!1,b}return s(b,a),b.prototype.componentDidUpdate=function(a,b){if(e.SEARCH_PANEL_PORTAL&&b.active!==this.state.active)if(this.updatePortalHeader(),this.overflowPortalProjects(),this.state.active)this.broadcast("select:drop");if(e.SEARCH_PANEL_PORTAL&&b.onlyIcon!==this.state.onlyIcon)this.overflowPortalProjects()},b.prototype.overflowPortalProjects=function(){var a=document.querySelector("#headline");if(a)a.classList.remove("remove-overflow"),setTimeout(function(){a.classList.add("remove-overflow")},100)},b.prototype.updatePortalHeader=function(){var a,b,c=this.state.active?{eventName:"searchExtend",classAction:"add"}:{eventName:"searchCollapse",classAction:"remove"},d=c.eventName,e=c.classAction;__PH.emit(d),null===(a=document.querySelector(".ph-project_open"))||void 0===a||a.click(),null===(b=document.querySelector("#headline"))||void 0===b||b.classList[e]("search-extend")},b.prototype.getSearchInput=function(){return this.searchPanelRef.current},b.prototype.render=function(){var a,b=this.props,c=b.ponymode,d=b.store,h=b.categories,j=b.colorTags,k=this.state,p=k.rightColumn,s=k.hide,v=k.darkMode,x=k.maxWidth,y=k.size,z=k.layoutType,A=k.active,B=k.onlyIcon,C=k.leftColumn;if(!this.isMount){if(A)this.updatePortalHeader();this.overflowPortalProjects(),this.isMount=!0}var D=e.SEARCH_PANEL_PORTAL?e.SEARCH_PANEL_SIZE:p;return g().createElement("div",{"data-qa-id":(0,r.qa)("portal"),"data-qa-type":(0,r.qa)("search-panel-wrapper"),className:u.root((a={active:A,"only-icon":B,hide:s},a["size_".concat(y)]=!0,a["type_".concat(z)]=!0,a["pony-mode"]=c,a)),style:{maxWidth:x}},g().createElement("div",{"data-qa-id":(0,r.qa)("search-panel".concat(A?":active":"")),style:{width:A?"100%":"auto"},className:u.elem("wrapper",{active:A,inactive:!A})},g().createElement("div",{className:u.elem("left-col")},g().createElement(m.Z,{ico:"arrow-back",nowrap:!0,"radar-id":"back",text:i18n("Сбросить поиск"),compact:c,pure:!0,short:C<=50,centered:!0,remitEvents:{mousedown:"back"},broadcastEvent:(0,q.Yv)(this),component:i(),key:"button2",updateRemitEventsName:!0})),!e.HAS_WIDGET_HEADER_TYPE&&e.NEW_FEATURES_BELL&&g().createElement(n.is.Provider,{value:w},g().createElement(n.Uo,{className:u.elem("bell"),isBottomRight:B})),g().createElement("div",{className:u.elem("right-col"),style:{width:!B&&D}},B?g().createElement(m.Z,{ico:"search",compact:c,pure:!0,centered:!0,remitEvents:{click:{stop:!0,name:"expandSearchPanel"}},broadcastEvent:(0,q.Yv)(this),component:i(),key:"button2",updateRemitEventsName:!0}):g().createElement(m.Z,{shortcut:"/",short:p<240,useMixin:"shortcut-title",remitEvents:{click:{stop:!0,name:"expandSearchPanel"}},broadcastEvent:(0,q.Yv)(this),component:l(),key:"search-panel-button",updateRemitEventsName:!0})),g().createElement("div",{className:u.elem("layer")},g().createElement(o.Z,{ref:this.searchPanelRef,active:A,onBlur:this.handleSearchPanelBlur,search:d.search,size:y,ponyMode:c,categories:h,colorTags:j,darkMode:v})),e.HAS_WIDGET_HEADER_TYPE&&g().createElement("div",{className:u.elem("widget")},g().createElement(f.Suspense,{fallback:null},g().createElement(t,{onlyIcon:B})))))},b.defaultProps=j.searchPanelConfig.defaults,b}(g().Component);b.Z=(0,q.v$)(j.searchPanelConfig.name,x)},8190:function(a,b,c){"use strict";c.r(b),c.d(b,{WidgetHeader:function(){return T},default:function(){return U}});var d=c(7406),e=c(4679),f=c(1190),g=c.n(f),h=c(1791),i=c(5041),j=c(8156),k=c.n(j),l=c(6561),m=c(2883),n=c(4169),o=c(6389),p=c(6567),q=c(6792),r=c(5010),s=c(6636),t=c(9846),u=c(8078),v=c(4334),w=c.n(v),x="_20rexHkD6ADH5gHpmvn5_u",y="o6yRQqsQbk0_7AkdN6OHF",z={d1:"11",n1:"11",d2:"21",n2:"21",d3:"10",n3:"10",d4:"25",n4:"25",d5:"03",n5:"03",d6:"05",n6:"06",d7:"01",n7:"02",d8:"09",n8:"09",d9:"13",n9:"14",d10:"17",n10:"18",d11:"12",n11:"12",d12:"23",n12:"24",d13:"22",n13:"22",d14:"61",n14:"62",d15:"31",n15:"31",d16:"04",n16:"04",d17:"35",n17:"35",d18:"59",n18:"60",d19:"50",n19:"50",d20:"63",n20:"64",d21:"33",n21:"34",d22:"51",n22:"51",d23:"33",n23:"34",d24:"45",n24:"45",d25:"65",n25:"66",d26:"58",n26:"58",d27:"15",n27:"16",d28:"56",n28:"57",d29:"37",n29:"38",d30:"25",n30:"25",d31:"54",n31:"54",d32:"53",n32:"53",d33:"29",n33:"29",d34:"47",n34:"48",d35:"19",n35:"20",d36:"46",n36:"46",d37:"67",n37:"68",d38:"69",n38:"70",d39:"52",n39:"52",d40:"42",n40:"42",d41:"43",n41:"44",d42:"71",n42:"72",d43:"41",n43:"41",d44:"30",n44:"55",d45:"39",n45:"40",d46:"49",n46:"49",d47:"26",n47:"36",d48:"07",n48:"08"},A=c(2940),B=c(608),C=h.WEATHER_PING,D=!C?function(){return!1}:function(){return(0,A.M)(function(){return w().getSlot("t1189")},function(){return C},function(){return!1})[0]},E=function(){var a=D(),b=(0,B._)(),c=a&&function(a){var b=a.colorThemeDark,c=a.icon,d=a.status;return"https://pogoda.imgsmail.ru/icons/status/2021/".concat(b?"d":"l","t/svg/").concat(z[c+d],".svg")}({colorThemeDark:!0,icon:a.now_icon,status:a.now_status});return(0,j.useMemo)(function(){return{leftIcon:k().createElement("div",{className:g()(s.Z.icon,s.Z.marusia),style:{backgroundImage:"url(".concat(h.MARUSIA_LOGO,")")}}),title:(0,u.capitalize)(a?(0,u.formatDate)(b,[["weekday","short"]])+", "+a.now_temp+"°":(0,t.ZW)(b)),rightIcon:c&&k().createElement("div",{className:g()(x,y),style:{backgroundImage:"url(".concat(c,")")}}),analyticContent:a?"weather":"stub"}},[a,c,b])},F=c(8655),G=function(){return(G=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},H=function(){var a=F.lt;if(0===a)return{title:i18n("Нет обновлений"),analyticContent:"stub"};if(1===a)return{title:F.gw[0].title,analyticContent:"title_update"};var b={count:a};return{title:i18n.plural(a,[i18n("{count} обновлений",b),i18n("{count} обновление",b),i18n("{count} обновления",b)]),analyticContent:"n_updates"}}(),I=G({leftIcon:k().createElement("div",{className:g()(s.Z.icon,s.Z.notification)},k().createElement(d.Icon,{icon:i.WIDGET_NOTIFICATION_ICON,sizeX:4}))},H),J=function(){return I},K=c(793),L=c(1373),M=c.n(L),N={container:"_2o0VlP7GQj5jqfMtCoeizw",mask:"_3yF2Ri8MNZ6-BUBcevXugc",onlyIcon:"_3CrJLV6OXTosVvC5ksskjm",titleWrapper:"_34NBsxP3_k6khIgLG5dDvM",title:"_1p3BD21zryIMZxXy1bO90y",iconWrapper:"_2CwATIsiVdNDLXI_kYt-Gh",sceleton:"_3de9Wi3kDLI0ctF0sLN4Rw",tooltip:"rT_GQo6yjJfYRqkbEnSYi",open:"_36yA7NY49Eb5cDLnsjJTV4"},O=function(){switch(h.WIDGET_HEADER_TYPE){case"todo":return["widget-todo",K.h];case"notification":return["widget-notification",J];case"marusia":return["widget-marusia",E];case"calendar":default:return["widget-calendar",t.GX]}}(),P=O[0],Q=O[1],R=!m.m||h.HIDE_TOYS===h.BL_PROP_NAME&&(h.WIDGET_COLUMN||h.SHOW_TODO_TOGGLE),S={position:"whiteline_widget"},T=R?function(){return null}:(0,j.memo)(function(a){var b,c,f,h=a.onlyIcon,t=a.className,u=(0,q.C)({name:"WidgetHeader",mediators:["marusia-manager"]})[0].marusiaGetParams,v=Q(),w=v.leftIcon,x=v.title,y=v.rightIcon,z=v.analyticContent,A=(0,j.useRef)(),B=(0,j.useRef)(),C=(0,r.l)(!1),D=C[0],E=C[1],F=(0,j.useState)(!1),G=F[0],H=F[1],I=(0,j.useState)(function(){if(m.W.some(function(a){return a.widget===P}))return P;else return m.W[0].widget}),J=I[0],K=I[1];return(0,j.useEffect)(function(){if(u&&e.MARUSIA_IN_WIDGET)H(!0),K("widget-marusia")},[u]),(0,j.useEffect)(function(){var a,b;a=z,b=l.GE[P],M().send("show_widget",{p:"whiteline",dwh:{content:a,item:b}})},[z]),(0,j.useLayoutEffect)(function(){if(!h)E(A.current.clientWidth<B.current.clientWidth)}),k().createElement(n.M.Provider,{value:S},k().createElement("div",{title:D||h?x||void 0:void 0,onClick:function(){var a,b;a=z,b=l.GE[P],M().send("click_widget",{p:"whiteline",dwh:{content:a,item:b}}),H(!G)},className:g()(N.container,t,(0,p.d)("widget-header"),(b={},b[N.hasRightIcon]=y,b[N.onlyIcon]=h,b))},w||k().createElement("div",{className:g()(s.Z.icon,N.sceleton)}),x?k().createElement("div",{className:g()(N.titleWrapper,(c={},c[N.mask]=D,c)),ref:A},k().createElement("div",{className:N.title,ref:B},x)):k().createElement("div",{className:g()(N.titleWrapper,N.sceleton)}),y,k().createElement("div",{className:N.iconWrapper},k().createElement(d.Icon,{icon:i.WIDGET_HEADER_ICON}))),k().createElement("div",{className:g()(N.tooltip,(f={},f[N.open]=G,f))},k().createElement(o.y,{open:G,setOpen:H,widget:J,setWidget:K,showList:!0})))}),U=T},9846:function(a,b,c){"use strict";c.d(b,{ZW:function(){return s},AK:function(){return w},GX:function(){return x}});var d=c(8078),e=c(4439),f=c(1190),g=c.n(f),h=c(1791),i=c(8156),j=c.n(i),k=c(6636),l=c(5991),m=c(2967),n=c(2940),o=c(608),p=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},q=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){return function(f){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&f[0]?d.return:f[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,f[1])).done)return e;if(d=0,e)f=[2&f[0],e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,d=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==f[0]&&2!==f[0])){g=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){g.label=f[1];break}if(6===f[0]&&g.label<e[1]){g.label=e[1],e=f;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(f);break}if(e[2])g.ops.pop();g.trys.pop();continue}f=b.call(a,g)}catch(a){f=[6,a],d=0}finally{c=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,h])}}},r=h.CALENDAR_PING,s=function(a){return(0,d.capitalize)((0,d.formatDate)(a,[["weekday","short"],["day","numeric"],["month","long"]]))},t={events:!1,type:"none"},u=(0,e.lazyInit)(function(){return Promise.resolve().then(c.bind(c,1553))}),v=!r?function(){return[t,!1]}:function(){return(0,n.M)(function(a){return p(void 0,void 0,void 0,function(){var b,c,d,e;return q(this,function(f){switch(f.label){case 0:return b=a.events,[4,u()];case 1:c=f.sent().fetchNearbyEvents,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,c(1)];case 3:return d=f.sent().data,b=d.events,[3,5];case 4:return f.sent(),[3,5];case 5:if((e=function(a){if(!a)return{events:!1,type:"none"};if(!Array.isArray(a))a=[a];var b=Date.now(),c=a.filter(function(a){var c=a.fullDay,d=a.to;return!c&&b<=Date.parse(d)}),d=c.length===a.length?a:c;if(0===d.length)return{events:!1,type:"none"};var e=d.find(function(a){var c=a.from;return Date.parse(c)<=b});if(e)return{events:e,type:"now"};var f=d.reduce(function(a,c){var d=Date.parse(c.from)-b;if(d>=0&&d<=(0,l.hour)(2)&&(!a||a[1]>d))return[c,d];else return a},!1);if(f)return{events:f[0],type:"+2h"};var g=+(0,m.iX)(b),h=d.filter(function(a){var b=a.from;return Date.parse(b)<=g});if(h.length>0)return{events:d.length===h.length?d:h,type:"today"};else return{events:d,type:"later"}}(b)).events===a.events&&e.type===a.type)return[2,a];else return[2,e]}})})},function(){return r},function(){return t})},w={current:function(){return null}},x=function(){var a=(0,o._)(),b=v(),c=b[0],e=b[1];if(e)w.current=e;var f=(0,i.useMemo)(function(){switch(c.type){case"+2h":case"now":var b=c.events,e=new Date(b.from);return[(0,d.formatDate)(e,[["hour","numeric"],["minute","2-digit"]])+" "+(b.title||i18n("Без названия")),"event"];case"today":var f={count:g=c.events.length};return[i18n.plural(g,[i18n("Ещё {count} событий",f),i18n("Ещё {count} событие",f),i18n("Ещё {count} события",f)]),"n_events"];case"later":var g;f={count:g=c.events.length};return[i18n.plural(g,[i18n("Завтра {count} событий",f),i18n("Завтра {count} событие",f),i18n("Завтра {count} события",f)]),"n_events"];case"none":return[s(a),"stub"]}},[a,c]),h=f[0],l=f[1];return(0,i.useMemo)(function(){return{leftIcon:j().createElement("div",{className:g()(k.Z.icon,k.Z.calendar)},a.getDate()),title:h,analyticContent:l}},[l,a,h])}},4838:function(a,b,c){"use strict";c.d(b,{S:function(){return h}});var d=c(9318),e=c(8156),f=c(5837),g=c(7806),h=function(a,b){var c=(0,g.D)(a),h=(0,g.D)(b),i=(0,f.G)(function(){return(0,d.setImmortalInterval)(c,h)});return(0,e.useEffect)(function(){return function(){return i.current()}},[i]),(0,e.useMemo)(function(){return{clear:function(){return i.current()},force:function(){c(),i.current(),i.current=(0,d.setImmortalInterval)(c,h)}}},[i,c,h])}},2940:function(a,b,c){"use strict";c.d(b,{M:function(){return h}});var d=c(4838),e=c(8156),f=c(5010),g=function(){return null},h=function(a,b,c){var h=function(a,b){var c=(0,f.l)(b),d=c[0],h=c[1],i=(0,e.useState)(function(){return a(d)}),j=i[0],k=i[1];return(0,e.useEffect)(function(){var a=h;return j.then(function(b){return a(b)}),function(){a=g}},[j,h]),[d,k]}(a,c),i=h[0],j=h[1],k=(0,d.S)(function(){return j(a(i))},b).force;return[i,k]}},608:function(a,b,c){"use strict";c.d(b,{_:function(){return f}});var d=c(8156),e=c(4838),f=function(){var a=(0,d.useState)(function(){return new Date}),b=a[0],c=a[1];return(0,e.S)(function(){return c(new Date)},function(){var a=Date.now(),b=new Date(a);return b.setDate(b.getDate()+1),b.setHours(0,0,1,0),+b-a}),b}},793:function(a,b,c){"use strict";c.d(b,{a:function(){return t},h:function(){return u}});var d=c(7406),e=c(5080),f=c.n(e),g=c(1190),h=c.n(g),i=c(1791),j=c(5041),k=c(8156),l=c.n(k),m=c(6636),n=c(2940),o=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},p=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){return function(f){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&f[0]?d.return:f[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,f[1])).done)return e;if(d=0,e)f=[2&f[0],e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,d=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==f[0]&&2!==f[0])){g=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){g.label=f[1];break}if(6===f[0]&&g.label<e[1]){g.label=e[1],e=f;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(f);break}if(e[2])g.ops.pop();g.trys.pop();continue}f=b.call(a,g)}catch(a){f=[6,a],d=0}finally{c=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,h])}}},q=i.TODO_PING,r=!q?function(){return[i.DEFAULT_TODO_TASKS,!1]}:function(){return(0,n.M)(function(a){return o(void 0,void 0,void 0,function(){var b,c;return p(this,function(d){switch(d.label){case 0:b=a,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,f().getStatus()];case 2:return c=d.sent().tasks,b=null===c?!1:c.filter(function(a){return!a.is_done&&!a.is_deleted}).length,[3,4];case 3:return d.sent(),[3,4];case 4:return[2,b]}})})},function(){return q},function(){return i.DEFAULT_TODO_TASKS})},s=i18n("Ваши задачи"),t={current:function(){return null}},u=function(){var a=r(),b=a[0],c=a[1];if(c)t.current=c;var e=(0,k.useMemo)(function(){if(!1===b||0===b)return[s,"stub"];var a=b,c={count:a};return[i18n.plural(a,[i18n("У вас {count} задач",c),i18n("У вас {count} задача",c),i18n("У вас {count} задачи",c)]),"n_tasks"]},[b]),f=e[0],g=e[1];return(0,k.useMemo)(function(){return{leftIcon:l().createElement("div",{className:h()(m.Z.icon,m.Z.todo)},l().createElement(d.Icon,{icon:j.WIDGET_TODO_ICON})),title:f,analyticContent:g}},[g,f])}},2256:function(a,b,c){"use strict";c.d(b,{t:function(){return ha},Z:function(){return ia}});var d=c(9842),e=c(7406),f=c(1373),g=c.n(f),h=c(615),i=c(2152),j=c.n(i),k=c(1190),l=c.n(k),m=c(1791),n=c(5041);function o(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}var p,q=function(a,b){if(void 0===b)b=o;var c,d,e=[],f=!1;return function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];if(f&&c===this&&b(g,e))return d;else return d=a.apply(this,g),f=!0,c=this,e=g,d}},r=c(5264),s=c(8156),t=c.n(s),u=c(7386),v=c.n(u),w=c(6866),x=c.n(w),y=c(8671),z=c(9775),A=c(1286),B=c(5920),C=c(3825),D="_1SEcF0Q8NmDNoMXSpQHYm2",E="Fu2egnKshAdgPYYtf3iIU",F="_1bg0wx_JeuO_SqvEJRkdQx",G="_2ixMmj67tJABmCL-ZbSwIN",H=(p=function(a,b){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}p(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),I=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},J=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))},K=function(a){function b(b){var c=a.call(this,b)||this;return c.handleValueChange=c.handleValueChange.bind(c),c.handleValueApply=c.handleValueApply.bind(c),c.handleSubtypeChange=c.handleSubtypeChange.bind(c),c.handleClose=c.handleClose.bind(c),c.handleEditingStarted=c.handleEditingStarted.bind(c),c.handleEditingEnd=c.handleEditingEnd.bind(c),c.render2kitDatePicker=c.render2kitDatePicker.bind(c),c.operandRef=t().createRef(),c}return H(b,a),b.prototype.render2kitDatePicker=function(a,b){return t().createElement(e.DatePicker,{value:a,onChange:b})},b.prototype.handleValueChange=function(a,b){this.props.operand.setValue(b)},b.prototype.handleValueApply=function(a,b){var c=this.props,d=c.operand,e=c.onValueApply;if(d.setValue(b),d.applyChanges(),e)e(d)},b.prototype.handleSubtypeChange=function(a,b){var c=this.props,d=c.search,e=c.operand;if(g().send(b,{t_feature:"operand_selector"}),a&&"keydown"===a.type)d.updateOperandSubtypeAndFocus(e,b);else d.updateOperandSubtypeAndBlur(e,b)},b.prototype.handleClose=function(){var a=this.props,b=a.search,c=a.index;if(a.operand.type===B.SearchOperandType.MAILBOX)b.removeOperand(B.SearchOperandType.FOLDER);b.smartInput[h.SmartInputActions.REMOVE_AND_DEACTIVATE_ALL](c)},b.prototype.handleEditingStarted=function(){this.focus()},b.prototype.handleEditingEnd=function(){this.props.operand.applyChanges()},b.prototype.focus=function(){var a=this.operandRef.current;a.focus&&a.focus()},b.prototype.renderOperand=function(){var a=this.props,b=a.operand,c=a.search,e=a.active,f=a.editing,g=a.portalRef,h=a.categories,i=a.colorTags;switch(b.type){case B.SearchOperandType.FILTER:return t().createElement(d.OperandFilter,{active:e,type:b.subtype,testId:(0,z.qa)("".concat(B.SearchOperandType.FILTER,":").concat(b.subtype)),onClose:this.handleClose});case B.SearchOperandType.CATEGORY:if(!(m.ENABLE_COLOR_TAGS_SEARCH?J(J([],h,!0),i,!0):h).includes(b.subtype))return;var j=h.includes(b.subtype);return t().createElement(d.OperandCategory,{ref:this.operandRef,active:e,edit:f,type:b.subtype,onChange:this.handleSubtypeChange,onClose:this.handleClose,portal:g,portalOnly:!0,testId:(0,z.qa)("".concat(B.SearchOperandType.CATEGORY,":").concat(b.subtype)),qaEnabled:(0,z.U)(),categories:h,categoriesCaption:t().createElement(C.wg,{testId:"categories",text:i18n("Категория")}),colorTags:i,colorTagsCaption:t().createElement(C.wg,{testId:"colorTags",text:i18n("Метка")}),activeColumn:j?"category":"colorTag",hasColorTags:m.ENABLE_COLOR_TAGS_SEARCH});case B.SearchOperandType.QUERY:return t().createElement(d.OperandQuery,{ref:this.operandRef,active:e,edit:f,type:b.subtype,value:b.editing?b.next.value:b.value,options:c.enabledQueryOptions|d.OperandQueryOptions[b.subtype],onValueChange:this.handleValueChange,onTypeChange:this.handleSubtypeChange,onClose:this.handleClose,portal:g,portalOnly:!0,testId:(0,z.qa)("".concat(B.SearchOperandType.QUERY,":").concat(b.subtype)),qaEnabled:(0,z.U)()});case B.SearchOperandType.FOLDER:return t().createElement(d.OperandFolder,{ref:this.operandRef,testId:(0,z.qa)("".concat(B.SearchOperandType.FOLDER,":").concat(b.value)),qaEnabled:(0,z.U)(),active:e,edit:f,folders:c.folders.map(function(a){return{id:a.idNumber,name:a.folderName}}),folder:b.value,folderListClassName:G,onChange:this.handleValueApply,onClose:this.handleClose,portal:g,portalOnly:!0});case B.SearchOperandType.DATE:var k=b.value;return t().createElement(d.OperandCalendar,{ref:this.operandRef,active:e,edit:f,date:k.date,dateEnd:k.dateEnd,lapse:k.lapse,datePicker:this.render2kitDatePicker,onChange:this.handleValueApply,onClose:this.handleClose,portal:g,portalOnly:!0});case B.SearchOperandType.MAILBOX:var l=b.value;return t().createElement(d.OperandMailbox,{ref:this.operandRef,testId:(0,z.qa)("".concat(B.SearchOperandType.MAILBOX,":").concat(l.email)),qaEnabled:(0,z.U)(),mailbox:l,prefixText:i18n("В ящике"),onClose:this.handleClose})}},b.prototype.render=function(){var a,b=this.props,c=b.first,d=b.last,e=b.operand,f=b.SmartOperand,g=l()(((a={})[D]=!0,a[E]=c,a[F]=d,a));return t().createElement("span",{className:g},this.renderOperand(),f&&t().createElement(f,{editable:e.type!==B.SearchOperandType.FILTER,portal:!0,onEditingStarted:this.handleEditingStarted,onEditingEnd:this.handleEditingEnd}))},b=I([r.observer],b)}(t().Component),L=c(1627),M=c(717),N="_3yyc668S45nbm2e_p3s6u7",O="_36095dscslW_jT6c3XD9Sn",P="qjkccY5fSKjR-EEl3clWJ",Q="sIxCdzi8sUyUA4AFlh9C",R="_2ajszcoO292V4t_mDe2D_l",S="_3d04684FcOlFUxXZ88FqWO",T="elRpivMputEG7xBpep9wM",U="_27_C7urvCgQfgdOXq-YkF3",V="_3CT2rIQA3H2c77_KeUpoIa",W="_1XeZVjWI3S6j3SYMYdnVbj",X="_1V_JAvJOg6UG9bdtsIgWBR",Y="_2X_edotp2dvQ6hgewUsEiT",Z="rKjxwyqW3E2qnBQWNn-Fw",_="_1T55H2cA44INJYueGj74KP",$="_1RZoc6TqntWsBRAPwu80dM",aa="_3LyF0nmtnfsji64z95K44W",ba="_38o2ji9dqz8gS6DjWj6bW5",ca="_1UVl4UDVOlGiWZG9a-EAeO",da="_2U-voa2lJDe7WZJzWN5OFD",ea="CzzNiOhcrXFbRQkFwlcBo",fa=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ga=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},ha=13;var ia=function(a){function b(b){var c=a.call(this,b)||this;return c.searchInputRef=t().createRef(),c.ignoreBlur=!1,c.fetchSearchModel=q(function(a,b){if(void 0===b)b=!1;c.props.search.suggests.fetch({query:a,force:b})},function(a,b){if(a[0]!==b[0])return!1;else return!!a[1]==!!b[1]}),c.renderOperand=c.renderOperand.bind(c),c.renderInput=c.renderInput.bind(c),c.renderSuggest=c.renderSuggest.bind(c),c.handleInputChange=c.handleInputChange.bind(c),c.handleInputEditingStarted=c.handleInputEditingStarted.bind(c),c.handleAppendSuggest=c.handleAppendSuggest.bind(c),c.handleAppendSuggestQuery=c.handleAppendSuggestQuery.bind(c),c.handleKeyDown=c.handleKeyDown.bind(c),c.handleSuggestShow=c.handleSuggestShow.bind(c),c.handleSuggestItemsCounted=c.handleSuggestItemsCounted.bind(c),c.handleSuggestReposition=c.handleSuggestReposition.bind(c),c.handleSearchClick=c.handleSearchClick.bind(c),c.handlePageClick=c.handlePageClick.bind(c),c.handleOperandValueApply=c.handleOperandValueApply.bind(c),c.handleAppendSuggestOperand=c.handleAppendSuggestOperand.bind(c),c.fetchSearchModel=(0,A.debounce)(c.fetchSearchModel,200,[]),c.portalContainer=document.createElement("DIV"),document.body.appendChild(c.portalContainer),c}return fa(b,a),Object.defineProperty(b.prototype,"searchInput",{get:function(){var a;return null===(a=this.searchInputRef)||void 0===a?void 0:a.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){var a=this.props.search;this.fetchSearchModel(a.value),window.addEventListener("click",this.handlePageClick),window.addEventListener("touchmove",this.handlePageClick)},b.prototype.componentDidUpdate=function(a){var b=this.props,c=b.search,d=b.active,e=d!==a.active;this.fetchSearchModel(c.value,e&&d)},b.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.handlePageClick),window.removeEventListener("touchmove",this.handlePageClick),document.body.removeChild(this.portalContainer)},b.prototype.handleInputChange=function(a,b){this.props.search.setValue(b),this.fetchSearchModel(b)},b.prototype.handleInputEditingStarted=function(){var a;null===(a=this.inputRef.current)||void 0===a||a.focus()},b.prototype.handleAppendSuggest=function(a,b,c,d){var e=c?"_".concat(c):"";g().send("".concat(b).concat(e),{t_feature:"operand_select"}),this.handleAppendSuggestCommon(a,b,c,d)},b.prototype.handleAppendSuggestOperand=function(a,b,c,d){var e=c?"_".concat(c):"";g().send("suggest_".concat(b).concat(e,"_click")),this.handleAppendSuggestCommon(a,b,c,d)},b.prototype.activeElementBlur=function(){var a;null===(a=document.activeElement)||void 0===a||a.blur()},b.prototype.handleAppendSuggestCommon=function(a,b,c,d){var e=this,f=this.props,g=f.search,h=f.onSuggestSelect;if(b!==B.SearchOperandType.MESSAGE){g.applyOperandAndFocus(b,c,d);var i=g.smartInput.operands.length,j=b===B.SearchOperandType.DATE||b===B.SearchOperandType.FOLDER;if(!j&&"keydown"!==a.type)return null==h||h(),void this.activeElementBlur();window.setTimeout(function(){if(j)e.focusAfterExpand(i-1)},0)}else g.goToLetterAndClear(d)},b.prototype.handleAppendSuggestQuery=function(a,b){var c=this.props,d=c.search,e=c.onSuggestSelect;d.setQuery(b.query),g().send("recent",{t_feature:"operand_select"}),null==e||e(),this.activeElementBlur()},b.prototype.handleKeyDown=function(a){var b=this.props.search,c=b.selectedSuggest,d=b.totalSuggests;switch(a.keyCode){case ha:if(g().send("search",{t_feature:"operand_select"}),this.blur(),-1===c)return b.appendSearchQuery(a.target.value);var e=document.querySelector('[data-navigation-index="'.concat(c,'"]'));if(e)e.dispatchEvent(function(){var a;if("function"==typeof KeyboardEvent)a=new KeyboardEvent("keydown",{view:window,bubbles:!0,cancelable:!0});else(a=document.createEvent("KeyboardEvent")).initEvent("keydown",!0,!0);return a}());return;case 40:if(++c>=d)c=-1;return b.setSuggestsInfo({selectedSuggest:c});case 38:if(--c<-1)c=d-1;return b.setSuggestsInfo({selectedSuggest:c})}},b.prototype.handleSuggestShow=function(){this.props.search.setSuggestsInfo({selectedSuggest:-1})},b.prototype.handleSuggestItemsCounted=function(a){var b=this.props.search,c=b.selectedSuggest;if(c>=a)c=-1;b.setSuggestsInfo({totalSuggests:a,selectedSuggest:c})},b.prototype.handleSearchClick=function(a){a.stopPropagation(),this.ignoreBlur=!0,g().send("search",{t_feature:"operand_select"});var b=this.props.search,c=this.inputRef.current;if(null==c?void 0:c.value)b.appendSearchQuery(c.value),this.blur()},b.prototype.handleSuggestReposition=function(a,b){var c=this.props,d=c.search,e=c.ponyMode,f=d.smartInput;if(f.active!==f.operands.length)return{left:a+4,top:b};if(!f.operands.length)return{left:a-(e?30:37),top:b+2};else return{left:a,top:b+2}},b.prototype.handleOperandValueApply=function(a){var b=this;if(a.type===B.SearchOperandType.DATE)window.setTimeout(function(){b.blur()},1)},b.prototype.renderOperand=function(a,b){var c=this.props,d=c.search,e=c.categories,f=void 0===e?[]:e,g=c.colorTags,h=void 0===g?[]:g,i=c.darkMode,j=d.smartInput.operands.length;return t().createElement(K,{ref:b.ref,active:b.active,editing:b.editing,first:0===b.index,last:b.index===j-1,SmartOperand:b.SmartOperand,operand:a,search:d,index:b.index,portalRef:b.portalRef,onValueApply:this.handleOperandValueApply,categories:f,colorTags:h,darkMode:i})},b.prototype.renderInput=function(a,b){var c,f,g,h=this.props.search,i=b.SmartOperand;this.inputRef=b.ref;var j=l()(((c={})[Y]=!0,c)),k=l()(((f={})[W]=!0,f[X]=m.SEARCH_PANEL_PORTAL,f)),n=l()(((g={})[Z]=!0,g));return t().createElement("div",{className:j},h.progress&&t().createElement("span",{className:n},t().createElement(e.Progress,{size:20})),t().createElement(d.DynamicInput,{ref:b.ref,static:!0,className:k,value:h.value,onChange:this.handleInputChange,onKeyDown:this.handleKeyDown}),t().createElement(i,{onEditingStarted:this.handleInputEditingStarted}))},b.prototype.renderSuggest=function(a,b){var c=this.props,d=c.search,e=c.darkMode;return t().createElement(L.Z,{search:d,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,z.U)(),darkMode:e})},b.prototype.sendClickRadar=function(){j()("srch-input-clk")},b.prototype.renderSearchPanel=function(){var a,b,c,d,f=this,g=this.props,i=g.search,j=g.ponyMode,k=g.themeClassName,o=g.onBlur,p=l()(N,k,((a={})[ea]=j,a[S]=m.SEARCH_PANEL_PORTAL,a)),q=l()(R),r=l()(T),s=l()(U,((b={})[V]=j,b)),u=l()(ca,((c={})[da]=j,c)),v=l()(_,((d={})[ba]=j,d[$]=m.SEARCH_PANEL_PORTAL&&m.SEARCH_CLEAR,d));return t().createElement("div",{className:p,onClick:this.sendClickRadar},t().createElement("div",{className:O},t().createElement("span",{className:u},t().createElement(e.Icon,{icon:j?n.NAVIGATION_SEARCH_S:n.NAVIGATION_SEARCH})),t().createElement("div",{"data-test-id":(0,z.qa)("search-input-container"),className:q},t().createElement(h.SmartInput,{className:r,placementClassName:s,ref:this.searchInputRef,model:i.smartInput,operandRenderer:this.renderOperand,inputRenderer:this.renderInput,suggestRenderer:this.renderSuggest,onBlur:function(){if(!f.ignoreBlur||!m.SEARCH_PANEL_PORTAL)o()},onSuggestShow:this.handleSuggestShow,onSuggestReposition:this.handleSuggestReposition,portal:this.portalContainer})),m.SEARCH_CLEAR&&t().createElement("span",{className:aa,onMouseDown:function(a){a.stopPropagation(),f.ignoreBlur=!0;var b=f.inputRef.current;if(i.empty&&!(null==b?void 0:b.value))o();i.clear()}},t().createElement(y.Z,{component:x(),className:ca,name:"close","data-qa-id":"close"}))),m.SEARCH_PANEL_PORTAL&&m.SEARCH_CLEAR&&t().createElement("div",{className:Q}),(!m.SEARCH_PANEL_PORTAL||m.SEARCH_CLEAR)&&t().createElement("div",{className:P},t().createElement("span",{"data-test-id":(0,z.qa)("search-button"),className:v,onMouseDown:this.handleSearchClick},i18n("Найти"))))},b.prototype.handlePageClick=function(a){var b,c=this.props,d=c.active,e=c.search;if(d){var f=v().findDOMNode(this.searchInput),g=e.smartInput.operands[e.smartInput.active],h=g&&g.type===B.SearchOperandType.DATE;if(!(f===a.target||(null===(b=null==f?void 0:f.contains)||void 0===b?void 0:b.call(f,a.target))||h&&this.portalContainer.contains(a.target))&&document.body.contains(a.target))this.blur()}},b.prototype.focus=function(){var a;null===(a=this.searchInput)||void 0===a||a.focus()},b.prototype.blur=function(){var a;null===(a=this.searchInput)||void 0===a||a.blur()},b.prototype.focusAfterExpand=function(a){var b=this.props.search;if(null!=a||(a=b.smartInput.operands.length),b.smartInput[h.SmartInputActions.SET_OPERAND_FLAGS](a,{active:!0,editing:!0}),a===b.smartInput.operands.length)this.handleInputEditingStarted();else this.focus()},b.prototype.render=function(){var a=this.props.ponyMode;return t().createElement(M.Z,{ponyMode:a},this.renderSearchPanel())},b.defaultProps={themeClassName:"r-search-panel"},b=ga([r.observer],b)}(t().Component)},717:function(a,b,c){"use strict";c.d(b,{Z:function(){return t}});var d,e,f=c(8156),g=c.n(f),h=c(9394),i=c(9842),j=c(3823),k=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),l=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k(b,a),b.prototype.render=function(){var a=this.props.nanoMode?j.h_:j.yk;return g().createElement(i.ColouredIconContext.Provider,{value:a},this.props.children)},b}(g().PureComponent),m=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),n=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return m(b,a),b.prototype.render=function(){return g().createElement(i.LocalizationContext.Provider,{value:this.props.value},this.props.children)},b}(g().PureComponent);!function(a){a.NORMAL="normal",a.NORMAL_SMALL="normalSmall",a.COMPACT="compact"}(e||(e={}));var o=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return o(b,a),b.prototype.render=function(){var a=this.props.ponyMode;return g().createElement(i.ModeContext.Provider,{value:a?e.COMPACT:e.NORMAL},this.props.children)},b}(g().PureComponent),q=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),r=function(){return(r=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},s=r(r({},h.Ek),{intervalText:h.sK,moreText:h.V9,daysText:h.zR,addText:h.F4}),t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return q(b,a),b.prototype.render=function(){var a=this.props,b=a.ponyMode,c=a.nanoMode;return g().createElement(l,{nanoMode:b&&c},g().createElement(n,{value:s},g().createElement(p,{ponyMode:b},this.props.children)))},b}(g().PureComponent)},7745:function(a,b,c){"use strict";c.d(b,{R:function(){return h}});var d=c(8156),e=c.n(d),f=c(9842).ModeContext.Consumer,g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function h(a){return function(b){return e().createElement(f,null,function(c){var d=b.mode,f=void 0===d?c:d;return e().createElement(a,g({},b,{mode:f}))})}}},3012:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(8156),e=c.n(d),f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function g(a){return function(b){return function(c){var d;if("function"==typeof a)d=a(c);if("string"==typeof a)d=a;return e().createElement(b,f({themeClassName:d},c))}}}},6567:function(a,b,c){"use strict";c.d(b,{d:function(){return h},k:function(){return i}});var d=c(9573),e=c.n(d),f=c(1190),g=c.n(f);function h(a){return"".concat("js-promo-id_").concat(a)}var i=function(){function a(a){this.name=a}return a.prototype.getModsToElem=function(a,b){if(!b)return null;else return Object.entries(b).reduce(function(b,c){var d=c[0],e=c[1];return b["".concat(a,"_").concat(d)]=e,b},{})},a.prototype.postProcess=function(a){return e().lookup(a)},a.prototype.root=function(a,b){return this.postProcess(g()(this.name,this.getModsToElem(this.name,a),null==b?void 0:b.addClass))},a.prototype.elem=function(a,b,c){var d="".concat(this.name,"__").concat(a);return this.postProcess(g()(d,this.getModsToElem(d,b),null==c?void 0:c.addClass))},a}()},142:function(a,b,c){"use strict";c.d(b,{RV:function(){return f},eP:function(){return g},BU:function(){return h},BK:function(){return i},Co:function(){return k}});var d=c(4998),e=d.Event,f=function(a){return"string"==typeof a?{name:a}:a};function g(a,b){if(b.stop)a.stopPropagation();if(b.prevent)a.preventDefault()}function h(a,b,c){var d,f=new e(a);return f.target=null==c?void 0:c.target,f.details=null!=b?b:null==c?void 0:c.details,f.originalEvent=null!==(d=null==c?void 0:c.originalEvent)&&void 0!==d?d:c,f.stopPropagation=function(){var a,b;null===(b=null===(a=f.originalEvent)||void 0===a?void 0:a.stopPropagation)||void 0===b||b.call(a),e.prototype.stopPropagation.call(f)},f.preventDefault=function(){var a,b;null===(b=null===(a=f.originalEvent)||void 0===a?void 0:a.preventDefault)||void 0===b||b.call(a),e.prototype.preventDefault.call(f)},f.defaultPrevented=null==c?void 0:c.defaultPrevented,f.propagationStopped=null==c?void 0:c.propagationStopped,f}function i(a,b){if(null==b)throw new TypeError("Invalid object ".concat(b," provided"));if("function"!=typeof b.on)throw new TypeError('Invalid object with no "on" method provided');Object.entries(a).forEach(function(a){var c=a[0],d=a[1];if(null==b[d])throw new TypeError('Could not subscribe to "'.concat(c,'": class has no method named ').concat(d))}),function(a,b){Object.entries(a).forEach(function(a){var c=a[0],d=a[1];b.on(c,b[d])})}(a,b)}var j=/-/g,k=function(a){return a.toLowerCase().replace(j,"")}},2312:function(a,b,c){"use strict";c.d(b,{zf:function(){return m},uN:function(){return o},hG:function(){return p},Yv:function(){return u},CH:function(){return v},Nh:function(){return x},_N:function(){return y},Ce:function(){return z},pd:function(){return E},v$:function(){return F}});var d,e=c(5881),f=c(1347),g=c.n(f),h=c(142),i=(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)},function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}d(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),j=function(){return(j=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},k=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))};function l(a){var b,c;return null!==(c=null===(b=this.state)||void 0===b?void 0:b[a])&&void 0!==c?c:this.props[a]}function m(a){return!!l.call(this,a)}function n(a,b){var c;if("string"==typeof a)(c={})[a]=b,a=c;return this.setState(a),null}function o(a,b){var c=(0,h.Co)(a);if(this.eventsMap[c])this.eventsMap[c].push(b);else this.eventsMap[c]=[b]}function p(a,b){var c=(0,h.Co)(a);this.eventsMap[c]=this.eventsMap[c].filter(function(a){return a!==b})}var q=function(){return!1};function r(a){var b=l.call(this,a),c=0===b?1:1===b?0:!b;n.call(this,a,c)}function s(a,b,c){var d;if("string"==typeof c&&void 0!==this[c])d=this["___"+c]||(this["___"+c]=function(a){return this[c].call(this,a)});else if("function"==typeof c)d=c;if(d&&!this.findDomListener(a,b,d))a.addEventListener(b,d.bind(this),!1),this.domListeners.push({element:a,eventName:b,handle:d})}function t(a,b,c){var d;if("string"==typeof c&&void 0!==this[c])d=this["___"+c]||(this["___"+c]=function(a){return this[c].call(this,a)});else if("function"==typeof c)d=c;var e=this.findDomListener(a,b,d);if(e)a.removeEventListener(b,d,!1),this.domListeners.splice(this.domListeners.indexOf(e),1)}function u(a){return a.broadcastEvent}function v(a,b){var c,d=(0,h.RV)(b);(c=a).__events||(c.__events={});var e=a.__events,f="".concat(d.name,":").concat(d.stop,":").concat(d.prevent);if(f in e&&!d.hasOwnProperty("details"))return e[f];var g=function(b){if(d.stop)null==b||b.stopPropagation(),null==b||b.nativeEvent.stopImmediatePropagation();if(d.prevent)null==b||b.preventDefault();u(a).call(a,(0,h.BU)(d.name,d.details||null,null==b?void 0:b.nativeEvent))};return e[f]=g,g}function w(a,b){a.forEach(function(a){var c=g().Mediator.get(a);if(c)b(c);else console.warn("[sync] No mediator found for name ".concat(a))})}function x(a,b,c){w(c,function(c){c.registerInstanceByName(a,b)})}function y(a,b,c){var d=g().Block.prototype.broadcast;g().Block.prototype.broadcast=b,a(c),g().Block.prototype.broadcast=d}function z(a,b,c){if(void 0===c)c=!1;if(b)w(b,function(b){var d,e=g().Mediator.updateAttributes(b.name,a);if(e)if(c)a.setState(e);else a.state=j(j({},null!==(d=a.state)&&void 0!==d?d:{}),e)})}function A(a){if(a.remitEvents&&!a.broadcastEvent)throw new TypeError("You provided events to broadcast, but not the broadcast function");if(a.remitDetails&&!a.remitEvents)console.warn("You passed remitDetails with no events, this prop is unnecessary");return{mediators:a.useMediators,remit:a.remitEvents,broadcast:a.broadcastEvent,remitDetails:a.remitDetails,model:a.model,models:a.models,updateRemitEventsName:a.updateRemitEventsName}}var B="add remove sort reset update";function C(a,b,c){var d;null===(d=null==c?void 0:c.on)||void 0===d||d.call(c,a,b.forceUpdateFromModel)}function D(a,b,c){var d;null===(d=null==c?void 0:c.off)||void 0===d||d.call(c,a,b.forceUpdateFromModel)}var E=function(a){if(!a.feastReactMixin)throw new TypeError("castToFeastComponent called on component without a wrapper");return a};function F(a,b,c){var d;if(void 0===c)c={syncMediatorsOnRender:!1};return(d=function(b){function d(d,e){var f=b.call(this,d,e)||this;f.debug_wasMounted=!1,f.debug_wasUnmounted=!1,f.feastReactMixin=!0,f.syncMediatorsOnRender=c.syncMediatorsOnRender,f.eventsMap={},f.broadcast=function(a,b,c){if(void 0===b)b=f;f.broadcastEvent((0,h.BU)(a,b,c))},f.forceUpdateFromModel=function(a){if(f.debug)console.log("Updated from model: ",f.constructor.name,a);if(!f._debouncedRenderTimer)f._debouncedRenderTimer=window.setTimeout(f.debouncedRender,0)},f.debouncedRender=function(){f._debouncedRenderTimer=null,f.forceUpdate()},f.broadcastEvent=function(b){var c;if(f.handleInnerEvent)f.handleInnerEvent(b);if(f.debug)console.log("".concat(a," broadcast event: "),b);null===(c=f.eventsMap[b.type])||void 0===c||c.forEach(function(a){a(b)})},f.reBroadcast=function(a){var b=A(E(f).props),c=b.broadcast,d=b.remit,e=b.remitDetails;if(b.updateRemitEventsName)Object.keys(d).forEach(function(a){d[(0,h.Co)(a)]=d[a]});var g=(0,h.RV)(d[a.type]);(0,h.eP)(a,g),c((0,h.BU)(g.name,e,a))},f.domListeners=[],f.get=l,f.is=m,f.set=n,f.invert=r,f.$on=s,f.$off=t,f.vdomContains=q,f.on=o,f.off=p;var g=A(d),i=g.mediators,j=g.remit;if(i)x(a,f,i);if(f.events)(0,h.BK)(f.events,f);if(z(f,i),j)Object.keys(j).map(function(a){return f.on(a,f.reBroadcast)});return f}return i(d,b),d.prototype.logError=function(a){(0,e.coreLoggerDispatchSelfError)("fst-rct",a,{name:d.displayName,wasMounted:this.debug_wasMounted,wasUnmounted:this.debug_wasUnmounted})},d.prototype.componentDidUpdate=function(){for(var a,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(!c[0])this.logError(new Error("no prevProps"));var e=c[0],f=e.model,g=e.models,h=A(E(this).props),i=h.models,j=h.model;if(f!==j)D("change",this,f),C("change",this,j);if(g!==i)D(B,this,g),C(B,this,i);null===(a=b.prototype.componentDidUpdate)||void 0===a||a.call.apply(a,k([this],c,!1))},d.prototype.findDomListener=function(a,b,c){return this.domListeners.forEach(function(d){if(d.element===a&&d.eventName===b&&d.handle===c)return d}),null},d.prototype.render=function(){var a=A(E(this).props).mediators;if(this.syncMediatorsOnRender)z(this,a);return b.prototype.render.call(this)},d.prototype.componentDidMount=function(){var a,c=A(E(this).props),d=c.models;C("change",this,c.model),C(B,this,d),null===(a=b.prototype.componentDidMount)||void 0===a||a.call(this),this.debug_wasMounted=!0,this.broadcast("$mount",this)},d.prototype.componentWillUnmount=function(){var a;null===(a=b.prototype.componentWillUnmount)||void 0===a||a.call(this),window.clearTimeout(this._debouncedRenderTimer);var c=A(E(this).props),d=c.models;D("change",this,c.model),D(B,this,d),this.debug_wasUnmounted=!0,this.broadcast("$destroyed",this),this.domListeners=[]},d}(b)).displayName=a,d}},6792:function(a,b,c){"use strict";c.d(b,{C:function(){return i}});var d=c(8156),e=c(142),f=c(2312),g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},h=function(){function a(a){var b=this;this.setMediatorProps=null,this.eventsMap={},this.vdomContains=function(){return!1},this.on=f.uN,this.off=f.hG,this.set=function(a,c){if("string"==typeof a)b.setMediatorProps(function(b){var d;return g(g({},b),((d={})[a]=c,d))});else b.setMediatorProps(function(b){return g(g({},b),a)});return b},this.broadcastEvent=function(a){var c;null===(c=b.eventsMap[a.type])||void 0===c||c.forEach(function(b){b(a)})},this.render=function(){return null},this.setMediatorProps=a.setMediatorProps}return a.prototype.updateSetCallback=function(a){this.setMediatorProps=a},a}();var i=function(a){var b,c=a.name,g=a.mediators,i=a.forRadar,j=(b=(0,d.useRef)(!1),(0,d.useEffect)(function(){return b.current=!0,function(){b.current=!1}},[]),b.current),k=(0,d.useMemo)(function(){return null==i?void 0:i.syntheticBlock()},[]),l=(0,d.useMemo)(function(){return{}},[]),m=(0,d.useCallback)(function(a){if("function"==typeof a)Object.assign(l,a(l));else Object.assign(l,a)},[]),n=(0,d.useMemo)(function(){return new h({setMediatorProps:m})},[]),o=(0,d.useState)(l),p=o[0],q=o[1];if(i)k.state=p;if(!j){if((0,f.Nh)(c,n,g),i)k.template="synthetic ".concat(c),k.name=c,(0,f._N)(i.radar,q,k);n.updateSetCallback(q)}if(i)Object.assign(k.radarContext||(k.radarContext={}),k.getChildContext());return(0,d.useEffect)(function(){return function(){n.broadcastEvent((0,e.BU)("$destroyed",n))}},[]),[p,n.broadcastEvent,k]}},4514:function(a,b,c){"use strict";c.d(b,{U:function(){return e}});var d=c(6792),e=function(){return(0,d.C)({name:"usePonyMode",mediators:["pony-mode"]})[0]}},1553:function(a,b,c){"use strict";c.r(b),c.d(b,{fetchCalendars:function(){return Pf},fetchEvents:function(){return Of},fetchNearbyEvents:function(){return Qf}});var d=c(5991);function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(c)return(c=c.call(a)).next.bind(c);if(Array.isArray(a)||(c=function(a,b){if(!a)return;if("string"==typeof a)return g(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return g(a,b)}(a))||b&&a&&"number"==typeof a.length){if(c)a=c;var d=0;return function(){if(d>=a.length)return{done:!0};else return{done:!1,value:a[d++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function h(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function i(a,b,c){if(b)h(a.prototype,b);if(c)h(a,c);return Object.defineProperty(a,"prototype",{writable:!1}),a}var j=function(){return"function"==typeof Symbol},k=function(a){return j()&&Boolean(Symbol[a])},l=function(a){return k(a)?Symbol[a]:"@@"+a};if(j()&&!k("observable"))Symbol.observable=Symbol("observable");var m=l("iterator"),n=l("observable"),o=l("species");function p(a,b){var c=a[b];if(null!=c){if("function"!=typeof c)throw new TypeError(c+" is not a function");return c}}function q(a){var b=a.constructor;if(void 0!==b)if(null===(b=b[o]))b=void 0;return void 0!==b?b:A}function r(a){return a instanceof A}function s(a){if(s.log)s.log(a);else setTimeout(function(){throw a})}function t(a){Promise.resolve().then(function(){try{a()}catch(a){s(a)}})}function u(a){var b=a._cleanup;if(void 0!==b)if(a._cleanup=void 0,b)try{if("function"==typeof b)b();else{var c=p(b,"unsubscribe");if(c)c.call(b)}}catch(a){s(a)}}function v(a){a._observer=void 0,a._queue=void 0,a._state="closed"}function w(a,b,c){a._state="running";var d=a._observer;try{var e=p(d,b);switch(b){case"next":if(e)e.call(d,c);break;case"error":if(v(a),e)e.call(d,c);else throw c;break;case"complete":if(v(a),e)e.call(d)}}catch(a){s(a)}if("closed"===a._state)u(a);else if("running"===a._state)a._state="ready"}function x(a,b,c){if("closed"!==a._state)if("buffering"!==a._state)if("ready"!==a._state)return a._state="buffering",a._queue=[{type:b,value:c}],void t(function(){return function(a){var b=a._queue;if(b){a._queue=void 0,a._state="ready";for(var c=0;c<b.length&&(w(a,b[c].type,b[c].value),"closed"!==a._state);++c);}}(a)});else return void w(a,b,c);else a._queue.push({type:b,value:c})}var y=function(){function a(a,b){this._cleanup=void 0,this._observer=a,this._queue=void 0,this._state="initializing";var c=new z(this);try{this._cleanup=b.call(void 0,c)}catch(a){c.error(a)}if("initializing"===this._state)this._state="ready"}return a.prototype.unsubscribe=function(){if("closed"!==this._state)v(this),u(this)},i(a,[{key:"closed",get:function(){return"closed"===this._state}}]),a}(),z=function(){function a(a){this._subscription=a}var b=a.prototype;return b.next=function(a){x(this._subscription,"next",a)},b.error=function(a){x(this._subscription,"error",a)},b.complete=function(){x(this._subscription,"complete")},i(a,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),a}(),A=function(){function a(b){if(!(this instanceof a))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof b)throw new TypeError("Observable initializer must be a function");this._subscriber=b}var b=a.prototype;return b.subscribe=function(a){if("object"!==e(a)||null===a)a={next:a,error:arguments[1],complete:arguments[2]};return new y(a,this._subscriber)},b.forEach=function(a){var b=this;return new Promise(function(c,d){if("function"==typeof a)var e=b.subscribe({next:function(b){try{a(b,f)}catch(a){d(a),e.unsubscribe()}},error:d,complete:c});else d(new TypeError(a+" is not a function"));function f(){e.unsubscribe(),c()}})},b.map=function(a){var b=this;if("function"!=typeof a)throw new TypeError(a+" is not a function");return new(q(this))(function(c){return b.subscribe({next:function(b){try{b=a(b)}catch(a){return c.error(a)}c.next(b)},error:function(a){c.error(a)},complete:function(){c.complete()}})})},b.filter=function(a){var b=this;if("function"!=typeof a)throw new TypeError(a+" is not a function");return new(q(this))(function(c){return b.subscribe({next:function(b){try{if(!a(b))return}catch(a){return c.error(a)}c.next(b)},error:function(a){c.error(a)},complete:function(){c.complete()}})})},b.reduce=function(a){var b=this;if("function"!=typeof a)throw new TypeError(a+" is not a function");var c=q(this),d=arguments.length>1,e=!1,f=arguments[1],g=f;return new c(function(c){return b.subscribe({next:function(b){var f=!e;if(e=!0,!f||d)try{g=a(g,b)}catch(a){return c.error(a)}else g=b},error:function(a){c.error(a)},complete:function(){if(!e&&!d)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(g),c.complete()}})})},b.concat=function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=q(this);return new e(function(b){var d,f=0;return function a(g){d=g.subscribe({next:function(a){b.next(a)},error:function(a){b.error(a)},complete:function(){if(f===c.length)d=void 0,b.complete();else a(e.from(c[f++]))}})}(a),function(){if(d)d.unsubscribe(),d=void 0}})},b.flatMap=function(a){var b=this;if("function"!=typeof a)throw new TypeError(a+" is not a function");var c=q(this);return new c(function(d){var e=[],f=b.subscribe({next:function(b){if(a)try{b=a(b)}catch(a){return d.error(a)}var f=c.from(b).subscribe({next:function(a){d.next(a)},error:function(a){d.error(a)},complete:function(){var a=e.indexOf(f);if(a>=0)e.splice(a,1);g()}});e.push(f)},error:function(a){d.error(a)},complete:function(){g()}});function g(){if(f.closed&&0===e.length)d.complete()}return function(){e.forEach(function(a){return a.unsubscribe()}),f.unsubscribe()}})},b[n]=function(){return this},a.from=function(b){var c="function"==typeof this?this:a;if(null==b)throw new TypeError(b+" is not an object");var d=p(b,n);if(d){var e=d.call(b);if(Object(e)!==e)throw new TypeError(e+" is not an object");if(r(e)&&e.constructor===c)return e;else return new c(function(a){return e.subscribe(a)})}if(k("iterator"))if(d=p(b,m))return new c(function(a){t(function(){if(!a.closed){for(var c,e=f(d.call(b));!(c=e()).done;){var g=c.value;if(a.next(g),a.closed)return}a.complete()}})});if(Array.isArray(b))return new c(function(a){t(function(){if(!a.closed){for(var c=0;c<b.length;++c)if(a.next(b[c]),a.closed)return;a.complete()}})});throw new TypeError(b+" is not observable")},a.of=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e="function"==typeof this?this:a;return new e(function(a){t(function(){if(!a.closed){for(var b=0;b<c.length;++b)if(a.next(c[b]),a.closed)return;a.complete()}})})},i(a,null,[{key:o,get:function(){return this}}]),a}();if(j())Object.defineProperty(A,Symbol("extensions"),{value:{symbol:n,hostReportError:s},configurable:!0});var B=function(a,b){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)};function C(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}B(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}var D=function(){return(D=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};function E(a,b){var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0)c[d]=a[d];if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)if(b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e]))c[d[e]]=a[d[e]]}return c}function F(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}function G(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){return function(h){if(c)throw new TypeError("Generator is already executing.");for(;f&&(f=0,h[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&h[0]?d.return:h[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,h[1])).done)return e;if(d=0,e)h=[2&h[0],e.value];switch(h[0]){case 0:case 1:e=h;break;case 4:return g.label++,{value:h[1],done:!1};case 5:g.label++,d=h[1],h=[0];continue;case 7:h=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==h[0]&&2!==h[0])){g=0;continue}if(3===h[0]&&(!e||h[1]>e[0]&&h[1]<e[3])){g.label=h[1];break}if(6===h[0]&&g.label<e[1]){g.label=e[1],e=h;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(h);break}if(e[2])g.ops.pop();g.trys.pop();continue}h=b.call(a,g)}catch(a){h=[6,a],d=0}finally{c=e=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,i])}}}Object.create;function H(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}Object.create;var I=function(a,b){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(a,b)};Object.create;Object.create;var J=Object.setPrototypeOf,K=void 0===J?function(a,b){return a.__proto__=b,a}:J,L=function(a){function b(c){if(void 0===c)c="Invariant Violation";var d=a.call(this,"number"==typeof c?"Invariant Violation: "+c+" (see https://github.com/apollographql/invariant-packages)":c)||this;return d.framesToPop=1,d.name="Invariant Violation",K(d,b.prototype),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}I(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}(b,a),b}(Error);function M(a,b){if(!a)throw new L(b)}var N=["debug","log","warn","error","silent"],O=N.indexOf("log");function P(a){return function(){if(N.indexOf(a)>=O){var b=console[a]||console.log;return b.apply(console,arguments)}}}!function(a){a.debug=P("debug"),a.log=P("log"),a.warn=P("warn"),a.error=P("error")}(M||(M={}));function Q(a){try{return a()}catch(a){}}var R=Q(function(){return globalThis})||Q(function(){return window})||Q(function(){return self})||Q(function(){return global})||Q(function(){return Q.constructor("return this")()}),S="__",T=[S,S].join("DEV");var U=function(){try{return Boolean(__DEV__)}catch(a){return Object.defineProperty(R,T,{value:"production"!==Q(function(){return"production"}),enumerable:!1,configurable:!0,writable:!0}),R[T]}}();function V(a){try{return a()}catch(a){}}var W=V(function(){return globalThis})||V(function(){return window})||V(function(){return self})||V(function(){return global})||V(function(){return V.constructor("return this")()}),X=!1;function Y(){if(X)delete W.process,X=!1}!function(){if(W&&!V(function(){return"production"})&&!V(function(){return process}))Object.defineProperty(W,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),X=!0}();"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var Z="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag",_="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function $(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator)$=function(a){return typeof a};else $=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return $(a)}function aa(a){return ba(a,[])}function ba(a,b){switch($(a)){case"string":return JSON.stringify(a);case"function":return a.name?"[function ".concat(a.name,"]"):"[function]";case"object":if(null===a)return"null";else return function(a,b){if(-1!==b.indexOf(a))return"[Circular]";var c=[].concat(b,[a]),d=function(a){var b=a[String(_)];if("function"==typeof b)return b;if("function"==typeof a.inspect)return a.inspect}(a);if(void 0!==d){var e=d.call(a);if(e!==a)return"string"==typeof e?e:ba(e,c)}else if(Array.isArray(a))return function(a,b){if(0===a.length)return"[]";if(b.length>2)return"[Array]";for(var c=Math.min(10,a.length),d=a.length-c,e=[],f=0;f<c;++f)e.push(ba(a[f],b));if(1===d)e.push("... 1 more item");else if(d>1)e.push("... ".concat(d," more items"));return"["+e.join(", ")+"]"}(a,c);return function(a,b){var c=Object.keys(a);if(0===c.length)return"{}";if(b.length>2)return"["+function(a){var b=Object.prototype.toString.call(a).replace(/^\[object /,"").replace(/]$/,"");if("Object"===b&&"function"==typeof a.constructor){var c=a.constructor.name;if("string"==typeof c&&""!==c)return c}return b}(a)+"]";return"{ "+c.map(function(c){return c+": "+ba(a[c],b)}).join(", ")+" }"}(a,c)}(a,b);default:return String(a)}}function ca(a,b){if(!Boolean(a))throw new Error(b)}var da=1?function(a,b){return a instanceof b}:0;function ea(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}var fa=function(){function a(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof a||ca(0,"Body must be a string. Received: ".concat(aa(a),".")),this.body=a,this.name=b,this.locationOffset=c,this.locationOffset.line>0||ca(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||ca(0,"column in locationOffset is 1-indexed and must be positive.")}return function(a,b,c){if(b)ea(a.prototype,b);if(c)ea(a,c)}(a,[{key:Z,get:function(){return"Source"}}]),a}();function ga(a){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ha(a){return null!==a&&"object"===ga(a)}function ia(a,b){var c=b,d=[];if(a.definitions.forEach(function(a){if("OperationDefinition"===a.kind)throw __DEV__?new L("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new L(41);if("FragmentDefinition"===a.kind)d.push(a)}),void 0===c)__DEV__?M(1===d.length,"Found ".concat(d.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):M(1===d.length,42),c=d[0].name.value;return D(D({},a),{definitions:H([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:c}}]}}],a.definitions,!0)})}function ja(a){if(void 0===a)a=[];var b={};return a.forEach(function(a){b[a.name.value]=a}),b}function ka(a,b){switch(a.kind){case"InlineFragment":return a;case"FragmentSpread":var c=b&&b[a.name.value];return __DEV__?M(c,"No fragment named ".concat(a.name.value,".")):M(c,43),c;default:return null}}function la(a){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function ma(a){return{__ref:String(a)}}function na(a){return Boolean(a&&"object"===la(a)&&"string"==typeof a.__ref)}function oa(a,b,c,d){if(function(a){return"IntValue"===a.kind}(c)||function(a){return"FloatValue"===a.kind}(c))a[b.value]=Number(c.value);else if(function(a){return"BooleanValue"===a.kind}(c)||function(a){return"StringValue"===a.kind}(c))a[b.value]=c.value;else if(function(a){return"ObjectValue"===a.kind}(c)){var e={};c.fields.map(function(a){return oa(e,a.name,a.value,d)}),a[b.value]=e}else if(function(a){return"Variable"===a.kind}(c)){var f=(d||{})[c.name.value];a[b.value]=f}else if(function(a){return"ListValue"===a.kind}(c))a[b.value]=c.values.map(function(a){var c={};return oa(c,b,a,d),c[b.value]});else if(function(a){return"EnumValue"===a.kind}(c))a[b.value]=c.value;else if(function(a){return"NullValue"===a.kind}(c))a[b.value]=null;else throw __DEV__?new L('The inline argument "'.concat(b.value,'" of kind "').concat(c.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new L(52)}"function"==typeof fa?Y():Y(),__DEV__?M("boolean"==typeof U,U):M("boolean"==typeof U,36);var pa=["connection","include","skip","client","rest","export"],qa=Object.assign(function(a,b,c){if(b&&c&&c.connection&&c.connection.key)if(c.connection.filter&&c.connection.filter.length>0){var d=c.connection.filter?c.connection.filter:[];d.sort();var e={};return d.forEach(function(a){e[a]=b[a]}),"".concat(c.connection.key,"(").concat(ra(e),")")}else return c.connection.key;var f=a;if(b){var g=ra(b);f+="(".concat(g,")")}if(c)Object.keys(c).forEach(function(a){if(-1===pa.indexOf(a))if(c[a]&&Object.keys(c[a]).length)f+="@".concat(a,"(").concat(ra(c[a]),")");else f+="@".concat(a)});return f},{setStringify:function(a){var b=ra;return ra=a,b}}),ra=function(a){return JSON.stringify(a,sa)};function sa(a,b){if(ha(b)&&!Array.isArray(b))b=Object.keys(b).sort().reduce(function(a,c){return a[c]=b[c],a},{});return b}function ta(a,b){if(a.arguments&&a.arguments.length){var c={};return a.arguments.forEach(function(a){var d=a.name,e=a.value;return oa(c,d,e,b)}),c}return null}function ua(a){return a.alias?a.alias.value:a.name.value}function va(a,b,c){if("string"==typeof a.__typename)return a.__typename;for(var d=0,e=b.selections;d<e.length;d++){var f=e[d];if(wa(f)){if("__typename"===f.name.value)return a[ua(f)]}else{var g=va(a,ka(f,c).selectionSet,c);if("string"==typeof g)return g}}}function wa(a){return"Field"===a.kind}function xa(a){return"InlineFragment"===a.kind}function ya(a){__DEV__?M(a&&"Document"===a.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):M(a&&"Document"===a.kind,44);var b=a.definitions.filter(function(a){return"FragmentDefinition"!==a.kind}).map(function(a){if("OperationDefinition"!==a.kind)throw __DEV__?new L('Schema type definitions not allowed in queries. Found: "'.concat(a.kind,'"')):new L(45);return a});return __DEV__?M(b.length<=1,"Ambiguous GraphQL document: contains ".concat(b.length," operations")):M(b.length<=1,46),a}function za(a){return ya(a),a.definitions.filter(function(a){return"OperationDefinition"===a.kind})[0]}function Aa(a){return a.definitions.filter(function(a){return"OperationDefinition"===a.kind&&a.name}).map(function(a){return a.name.value})[0]||null}function Ba(a){return a.definitions.filter(function(a){return"FragmentDefinition"===a.kind})}function Ca(a){var b=za(a);return __DEV__?M(b&&"query"===b.operation,"Must contain a query definition."):M(b&&"query"===b.operation,47),b}function Da(a){var b;ya(a);for(var c=0,d=a.definitions;c<d.length;c++){var e=d[c];if("OperationDefinition"===e.kind){var f=e.operation;if("query"===f||"mutation"===f||"subscription"===f)return e}if("FragmentDefinition"===e.kind&&!b)b=e}if(b)return b;throw __DEV__?new L("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new L(51)}function Ea(a){var b=Object.create(null),c=a&&a.variableDefinitions;if(c&&c.length)c.forEach(function(a){if(a.defaultValue)oa(b,a.variable.name,a.defaultValue)});return b}function Fa(a,b){return b?b(a):A.of()}function Ga(a){return"function"==typeof a?new Ja(a):a}function Ha(a){return a.request.length<=1}var Ia=function(a){function b(b,c){var d=a.call(this,b)||this;return d.link=c,d}return C(b,a),b}(Error),Ja=function(){function a(a){if(a)this.request=a}return a.empty=function(){return new a(function(){return A.of()})},a.from=function(b){if(0===b.length)return a.empty();else return b.map(Ga).reduce(function(a,b){return a.concat(b)})},a.split=function(b,c,d){var e=Ga(c),f=Ga(d||new a(Fa));if(Ha(e)&&Ha(f))return new a(function(a){return b(a)?e.request(a)||A.of():f.request(a)||A.of()});else return new a(function(a,c){return b(a)?e.request(a,c)||A.of():f.request(a,c)||A.of()})},a.execute=function(a,b){return a.request(function(a,b){var c=D({},a);return Object.defineProperty(b,"setContext",{enumerable:!1,value:function(a){if("function"==typeof a)c=D(D({},c),a(c));else c=D(D({},c),a)}}),Object.defineProperty(b,"getContext",{enumerable:!1,value:function(){return D({},c)}}),b}(b.context,function(a){var b={variables:a.variables||{},extensions:a.extensions||{},operationName:a.operationName,query:a.query};if(!b.operationName)b.operationName="string"!=typeof b.query?Aa(b.query)||void 0:"";return b}(function(a){for(var b=["query","operationName","variables","extensions","context"],c=0,d=Object.keys(a);c<d.length;c++){var e=d[c];if(b.indexOf(e)<0)throw __DEV__?new L("illegal argument: ".concat(e)):new L(24)}return a}(b))))||A.of()},a.concat=function(b,c){var d=Ga(b);if(Ha(d))return __DEV__&&M.warn(new Ia("You are calling concat on a terminating link, which will have no effect",d)),d;var e=Ga(c);if(Ha(e))return new a(function(a){return d.request(a,function(a){return e.request(a)||A.of()})||A.of()});else return new a(function(a,b){return d.request(a,function(a){return e.request(a,b)||A.of()})||A.of()})},a.prototype.split=function(b,c,d){return this.concat(a.split(b,c,d||new a(Fa)))},a.prototype.concat=function(b){return a.concat(this,b)},a.prototype.request=function(a,b){throw __DEV__?new L("request is not implemented"):new L(19)},a.prototype.onError=function(a,b){if(b&&b.error)return b.error(a),!1;throw a},a.prototype.setOnError=function(a){return this.onError=a,this},a}();function Ka(a){var b=a.prototype.toJSON;if("function"==typeof b||function(a,b){if(!Boolean(a))throw new Error(null!=b?b:"Unexpected invariant triggered.")}(0),a.prototype.inspect=b,_)a.prototype[_]=b}var La=function(){function a(a,b,c){this.start=a.start,this.end=b.end,this.startToken=a,this.endToken=b,this.source=c}return a.prototype.toJSON=function(){return{start:this.start,end:this.end}},a}();Ka(La);var Ma=function(){function a(a,b,c,d,e,f,g){this.kind=a,this.start=b,this.end=c,this.line=d,this.column=e,this.value=g,this.prev=f,this.next=null}return a.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},a}();function Na(a){return null!=a&&"string"==typeof a.kind}Ka(Ma);var Oa={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Pa=Object.freeze({});function Qa(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oa,d=void 0,e=Array.isArray(a),f=[a],g=-1,h=[],i=void 0,j=void 0,k=void 0,l=[],m=[],n=a;do{var o=++g===f.length,p=o&&0!==h.length;if(o){if(j=0===m.length?void 0:l[l.length-1],i=k,k=m.pop(),p){if(e)i=i.slice();else{for(var q={},r=0,s=Object.keys(i);r<s.length;r++){var t=s[r];q[t]=i[t]}i=q}for(var u=0,v=0;v<h.length;v++){var w=h[v][0],x=h[v][1];if(e)w-=u;if(e&&null===x)i.splice(w,1),u++;else i[w]=x}}g=d.index,f=d.keys,h=d.edits,e=d.inArray,d=d.prev}else{if(j=k?e?g:f[g]:void 0,null==(i=k?k[j]:n))continue;if(k)l.push(j)}var y=void 0;if(!Array.isArray(i)){if(!Na(i))throw new Error("Invalid AST Node: ".concat(aa(i),"."));var z=Ra(b,i.kind,o);if(z){if((y=z.call(b,i,j,k,l,m))===Pa)break;if(!1===y){if(!o){l.pop();continue}}else if(void 0!==y)if(h.push([j,y]),!o)if(Na(y))i=y;else{l.pop();continue}}}if(void 0===y&&p)h.push([j,i]);if(o)l.pop();else{var A;if(d={inArray:e,index:g,keys:f,edits:h,prev:d},f=(e=Array.isArray(i))?i:null!==(A=c[i.kind])&&void 0!==A?A:[],g=-1,h=[],k)m.push(k);k=i}}while(void 0!==d);if(0!==h.length)n=h[h.length-1][1];return n}function Ra(a,b,c){var d=a[b];if(d){if(!c&&"function"==typeof d)return d;var e=c?d.leave:d.enter;if("function"==typeof e)return e}else{var f=c?a.leave:a.enter;if(f){if("function"==typeof f)return f;var g=f[b];if("function"==typeof g)return g}}}var Sa=function(a,b){var c;try{c=JSON.stringify(a)}catch(a){var d=__DEV__?new L("Network request failed. ".concat(b," is not serializable: ").concat(a.message)):new L(21);throw d.parseError=a,d}return c},Ta=function(a,b,c){var d=new Error(c);throw d.name="ServerError",d.response=a,d.statusCode=a.status,d.result=b,d},Ua=Object.prototype.hasOwnProperty;function Va(a){var b=a.split(/\r\n|[\n\r]/g),c=function(a){for(var b,c=!0,d=!0,e=0,f=null,g=0;g<a.length;++g)switch(a.charCodeAt(g)){case 13:if(10===a.charCodeAt(g+1))++g;case 10:c=!1,d=!0,e=0;break;case 9:case 32:++e;break;default:if(d&&!c&&(null===f||e<f))f=e;d=!1}return null!==(b=f)&&void 0!==b?b:0}(a);if(0!==c)for(var d=1;d<b.length;d++)b[d]=b[d].slice(c);for(var e=0;e<b.length&&Wa(b[e]);)++e;for(var f=b.length;f>e&&Wa(b[f-1]);)--f;return b.slice(e,f).join("\n")}function Wa(a){for(var b=0;b<a.length;++b)if(" "!==a[b]&&"\t"!==a[b])return!1;return!0}function Xa(a){return Qa(a,{leave:Ya})}var Ya={Name:function(a){return a.value},Variable:function(a){return"$"+a.name},Document:function(a){return $a(a.definitions,"\n\n")+"\n"},OperationDefinition:function(a){var b=a.operation,c=a.name,d=ab("(",$a(a.variableDefinitions,", "),")"),e=$a(a.directives," "),f=a.selectionSet;return!c&&!e&&!d&&"query"===b?f:$a([b,$a([c,d]),e,f]," ")},VariableDefinition:function(a){var b=a.variable,c=a.type,d=a.defaultValue,e=a.directives;return b+": "+c+ab(" = ",d)+ab(" ",$a(e," "))},SelectionSet:function(a){return _a(a.selections)},Field:function(a){var b=a.alias,c=a.name,d=a.arguments,e=a.directives,f=a.selectionSet,g=ab("",b,": ")+c,h=g+ab("(",$a(d,", "),")");if(h.length>80)h=g+ab("(\n",bb($a(d,"\n")),"\n)");return $a([h,$a(e," "),f]," ")},Argument:function(a){return a.name+": "+a.value},FragmentSpread:function(a){return"..."+a.name+ab(" ",$a(a.directives," "))},InlineFragment:function(a){var b=a.typeCondition,c=a.directives,d=a.selectionSet;return $a(["...",ab("on ",b),$a(c," "),d]," ")},FragmentDefinition:function(a){var b=a.name,c=a.typeCondition,d=a.variableDefinitions,e=a.directives,f=a.selectionSet;return"fragment ".concat(b).concat(ab("(",$a(d,", "),")")," ")+"on ".concat(c," ").concat(ab("",$a(e," ")," "))+f},IntValue:function(a){return a.value},FloatValue:function(a){return a.value},StringValue:function(a,b){var c=a.value;return a.block?function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,d=-1===a.indexOf("\n"),e=" "===a[0]||"\t"===a[0],f='"'===a[a.length-1],g="\\"===a[a.length-1],h=!d||f||g||c,i="";if(h&&(!d||!e))i+="\n"+b;if(i+=b?a.replace(/\n/g,"\n"+b):a,h)i+="\n";return'"""'+i.replace(/"""/g,'\\"""')+'"""'}(c,"description"===b?"":"  "):JSON.stringify(c)},BooleanValue:function(a){return a.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(a){return a.value},ListValue:function(a){return"["+$a(a.values,", ")+"]"},ObjectValue:function(a){return"{"+$a(a.fields,", ")+"}"},ObjectField:function(a){return a.name+": "+a.value},Directive:function(a){return"@"+a.name+ab("(",$a(a.arguments,", "),")")},NamedType:function(a){return a.name},ListType:function(a){return"["+a.type+"]"},NonNullType:function(a){return a.type+"!"},SchemaDefinition:Za(function(a){var b=a.directives,c=a.operationTypes;return $a(["schema",$a(b," "),_a(c)]," ")}),OperationTypeDefinition:function(a){return a.operation+": "+a.type},ScalarTypeDefinition:Za(function(a){return $a(["scalar",a.name,$a(a.directives," ")]," ")}),ObjectTypeDefinition:Za(function(a){var b=a.name,c=a.interfaces,d=a.directives,e=a.fields;return $a(["type",b,ab("implements ",$a(c," & ")),$a(d," "),_a(e)]," ")}),FieldDefinition:Za(function(a){var b=a.name,c=a.arguments,d=a.type,e=a.directives;return b+(db(c)?ab("(\n",bb($a(c,"\n")),"\n)"):ab("(",$a(c,", "),")"))+": "+d+ab(" ",$a(e," "))}),InputValueDefinition:Za(function(a){var b=a.name,c=a.type,d=a.defaultValue,e=a.directives;return $a([b+": "+c,ab("= ",d),$a(e," ")]," ")}),InterfaceTypeDefinition:Za(function(a){var b=a.name,c=a.interfaces,d=a.directives,e=a.fields;return $a(["interface",b,ab("implements ",$a(c," & ")),$a(d," "),_a(e)]," ")}),UnionTypeDefinition:Za(function(a){var b=a.name,c=a.directives,d=a.types;return $a(["union",b,$a(c," "),d&&0!==d.length?"= "+$a(d," | "):""]," ")}),EnumTypeDefinition:Za(function(a){var b=a.name,c=a.directives,d=a.values;return $a(["enum",b,$a(c," "),_a(d)]," ")}),EnumValueDefinition:Za(function(a){return $a([a.name,$a(a.directives," ")]," ")}),InputObjectTypeDefinition:Za(function(a){var b=a.name,c=a.directives,d=a.fields;return $a(["input",b,$a(c," "),_a(d)]," ")}),DirectiveDefinition:Za(function(a){var b=a.name,c=a.arguments,d=a.repeatable,e=a.locations;return"directive @"+b+(db(c)?ab("(\n",bb($a(c,"\n")),"\n)"):ab("(",$a(c,", "),")"))+(d?" repeatable":"")+" on "+$a(e," | ")}),SchemaExtension:function(a){var b=a.directives,c=a.operationTypes;return $a(["extend schema",$a(b," "),_a(c)]," ")},ScalarTypeExtension:function(a){return $a(["extend scalar",a.name,$a(a.directives," ")]," ")},ObjectTypeExtension:function(a){var b=a.name,c=a.interfaces,d=a.directives,e=a.fields;return $a(["extend type",b,ab("implements ",$a(c," & ")),$a(d," "),_a(e)]," ")},InterfaceTypeExtension:function(a){var b=a.name,c=a.interfaces,d=a.directives,e=a.fields;return $a(["extend interface",b,ab("implements ",$a(c," & ")),$a(d," "),_a(e)]," ")},UnionTypeExtension:function(a){var b=a.name,c=a.directives,d=a.types;return $a(["extend union",b,$a(c," "),d&&0!==d.length?"= "+$a(d," | "):""]," ")},EnumTypeExtension:function(a){var b=a.name,c=a.directives,d=a.values;return $a(["extend enum",b,$a(c," "),_a(d)]," ")},InputObjectTypeExtension:function(a){var b=a.name,c=a.directives,d=a.fields;return $a(["extend input",b,$a(c," "),_a(d)]," ")}};function Za(a){return function(b){return $a([b.description,a(b)],"\n")}}function $a(a){var b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(b=null==a?void 0:a.filter(function(a){return a}).join(c))&&void 0!==b?b:""}function _a(a){return ab("{\n",bb($a(a,"\n")),"\n}")}function ab(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=b&&""!==b?a+b+c:""}function bb(a){return ab("  ",a.replace(/\n/g,"\n  "))}function cb(a){return-1!==a.indexOf("\n")}function db(a){return null!=a&&a.some(cb)}var eb={http:{includeQuery:!0,includeExtensions:!1},headers:{accept:"*/*","content-type":"application/json"},options:{method:"POST"}},fb=function(a,b){return b(a)};function gb(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e={},f={};c.forEach(function(a){if(e=D(D(D({},e),a.options),{headers:D(D({},e.headers),hb(a.headers))}),a.credentials)e.credentials=a.credentials;f=D(D({},f),a.http)});var g=a.operationName,h=a.extensions,i=a.variables,j=a.query,k={operationName:g,variables:i};if(f.includeExtensions)k.extensions=h;if(f.includeQuery)k.query=b(j,Xa);return{options:e,body:k}}function hb(a){if(a){var b=Object.create(null);return Object.keys(Object(a)).forEach(function(c){b[c.toLowerCase()]=a[c]}),b}return a}function ib(a){return new A(function(b){b.error(a)})}var jb=Q(function(){return fetch}),kb=function(a){if(void 0===a)a={};var b=a.uri,c=void 0===b?"/graphql":b,d=a.fetch,e=a.print,f=void 0===e?fb:e,g=a.includeExtensions,h=a.useGETForQueries,i=a.includeUnusedVariables,j=void 0===i?!1:i,k=E(a,["uri","fetch","print","includeExtensions","useGETForQueries","includeUnusedVariables"]);if(__DEV__)!function(a){if(!a&&"undefined"==typeof fetch)throw __DEV__?new L("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    "):new L(20)}(d||jb);var l={http:{includeExtensions:g},options:k.fetchOptions,credentials:k.credentials,headers:k.headers};return new Ja(function(a){var b=function(a,b){var c=a.getContext().uri;if(c)return c;else if("function"==typeof b)return b(a);else return b||"/graphql"}(a,c),e=a.getContext(),g={};if(e.clientAwareness){var i=e.clientAwareness,k=i.name,m=i.version;if(k)g["apollographql-client-name"]=k;if(m)g["apollographql-client-version"]=m}var n,o=D(D({},g),e.headers),p={http:e.http,options:e.fetchOptions,credentials:e.credentials,headers:o},q=gb(a,f,eb,l,p),r=q.options,s=q.body;if(s.variables&&!j){var t=new Set(Object.keys(s.variables));if(Qa(a.query,{Variable:function(a,b,c){if(c&&"VariableDefinition"!==c.kind)t.delete(a.name.value)}}),t.size)s.variables=D({},s.variables),t.forEach(function(a){delete s.variables[a]})}if(!r.signal){var u=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var a=new AbortController;return{controller:a,signal:a.signal}}(),v=u.controller,w=u.signal;if(n=v)r.signal=w}if(h&&!a.query.definitions.some(function(a){return"OperationDefinition"===a.kind&&"mutation"===a.operation}))r.method="GET";if("GET"===r.method){var x=function(a,b){var c=[],d=function(a,b){c.push("".concat(a,"=").concat(encodeURIComponent(b)))};if("query"in b)d("query",b.query);if(b.operationName)d("operationName",b.operationName);if(b.variables){var e=void 0;try{e=Sa(b.variables,"Variables map")}catch(a){return{parseError:a}}d("variables",e)}if(b.extensions){var f=void 0;try{f=Sa(b.extensions,"Extensions map")}catch(a){return{parseError:a}}d("extensions",f)}var g="",h=a,i=a.indexOf("#");if(-1!==i)g=a.substr(i),h=a.substr(0,i);var j=-1===h.indexOf("?")?"?":"&";return{newURI:h+j+c.join("&")+g}}(b,s),y=x.newURI,z=x.parseError;if(z)return ib(z);b=y}else try{r.body=Sa(s,"Payload")}catch(z){return ib(z)}return new A(function(c){var e;return(d||Q(function(){return fetch})||jb)(b,r).then(function(b){return a.setContext({response:b}),b}).then((e=a,function(a){return a.text().then(function(b){try{return JSON.parse(b)}catch(d){var c=d;throw c.name="ServerParseError",c.response=a,c.statusCode=a.status,c.bodyText=b,c}}).then(function(b){if(a.status>=300)Ta(a,b,"Response not successful: Received status code ".concat(a.status));if(!Array.isArray(b)&&!Ua.call(b,"data")&&!Ua.call(b,"errors"))Ta(a,b,"Server response was missing for query '".concat(Array.isArray(e)?e.map(function(a){return a.operationName}):e.operationName,"'."));return b})})).then(function(a){return c.next(a),c.complete(),a}).catch(function(a){if("AbortError"!==a.name){if(a.result&&a.result.errors&&a.result.data)c.next(a.result);c.error(a)}}),function(){if(n)n.abort()}})})},lb=function(a){function b(b){if(void 0===b)b={};var c=a.call(this,kb(b).request)||this;return c.options=b,c}return C(b,a),b}(Ja),mb=Ja.execute;function nb(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{if(f=(c=c.call(a)).next,0===b){if(Object(c)!==c)return;i=!1}else for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),h.length!==b);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}}(a,b)||function(a,b){if(!a)return;if("string"==typeof a)return ob(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ob(a,b)}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ob(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}var pb=Object.prototype,qb=pb.toString,rb=pb.hasOwnProperty,sb=Function.prototype.toString,tb=new Map;function ub(a,b){try{return function a(b,c){if(b===c)return!0;var d=qb.call(b),e=qb.call(c);if(d!==e)return!1;switch(d){case"[object Array]":if(b.length!==c.length)return!1;case"[object Object]":if(yb(b,c))return!0;var f=vb(b),g=vb(c),h=f.length;if(h!==g.length)return!1;for(var i=0;i<h;++i)if(!rb.call(c,f[i]))return!1;for(var j=0;j<h;++j){var k=f[j];if(!a(b[k],c[k]))return!1}return!0;case"[object Error]":return b.name===c.name&&b.message===c.message;case"[object Number]":if(b!=b)return c!=c;case"[object Boolean]":case"[object Date]":return+b==+c;case"[object RegExp]":case"[object String]":return b=="".concat(c);case"[object Map]":case"[object Set]":if(b.size!==c.size)return!1;if(yb(b,c))return!0;for(var l=b.entries(),m="[object Map]"===d;;){var n=l.next();if(n.done)break;var o=nb(n.value,2),p=o[0],q=o[1];if(!c.has(p))return!1;if(m&&!a(q,c.get(p)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":b=new Uint8Array(b),c=new Uint8Array(c);case"[object DataView]":var r=b.byteLength;if(r===c.byteLength)for(;r--&&b[r]===c[r];);return-1===r;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var s=sb.call(b);if(s!==sb.call(c))return!1;else return u=xb,!((v=(t=s).length-u.length)>=0&&t.indexOf(u,v)===v)}var t,u,v;return!1}(a,b)}finally{tb.clear()}}function vb(a){return Object.keys(a).filter(wb,a)}function wb(a){return void 0!==this[a]}var xb="{ [native code] }";function yb(a,b){var c=tb.get(a);if(c){if(c.has(b))return!0}else tb.set(a,c=new Set);return c.add(b),!1}function zb(a){return(zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var Ab=function(){return Object.create(null)},Bb=Array.prototype,Cb=Bb.forEach,Db=Bb.slice,Eb=function(){function a(a,b){if(void 0===a)a=!0;if(void 0===b)b=Ab;this.weakness=a,this.makeData=b}return a.prototype.lookup=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return this.lookupArray(a)},a.prototype.lookupArray=function(a){var b=this;return Cb.call(a,function(a){return b=b.getChildTrie(a)}),b.data||(b.data=this.makeData(Db.call(a)))},a.prototype.getChildTrie=function(b){var c=this.weakness&&function(a){switch(zb(a)){case"object":if(null===a)break;case"function":return!0}return!1}(b)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),d=c.get(b);if(!d)c.set(b,d=new a(this.weakness,this.makeData));return d},a}();var Fb="function"==typeof WeakMap&&"ReactNative"!==Q(function(){return navigator.product}),Gb="function"==typeof WeakSet,Hb="function"==typeof Symbol&&"function"==typeof Symbol.for;Q(function(){return window.document.createElement}),Q(function(){return navigator.userAgent.indexOf("jsdom")>=0});function Ib(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=Object.create(null);return a.forEach(function(a){if(a)Object.keys(a).forEach(function(b){var d=a[b];if(void 0!==d)c[b]=d})}),c}function Jb(a,b){var c=a.directives;if(!c||!c.length)return!0;else return function(a){var b=[];if(a&&a.length)a.forEach(function(a){if(function(a){var b=a.name.value;return"skip"===b||"include"===b}(a)){var c=a.arguments,d=a.name.value;__DEV__?M(c&&1===c.length,"Incorrect number of arguments for the @".concat(d," directive.")):M(c&&1===c.length,38);var e=c[0];__DEV__?M(e.name&&"if"===e.name.value,"Invalid argument for the @".concat(d," directive.")):M(e.name&&"if"===e.name.value,39);var f=e.value;__DEV__?M(f&&("Variable"===f.kind||"BooleanValue"===f.kind),"Argument for the @".concat(d," directive must be a variable or a boolean value.")):M(f&&("Variable"===f.kind||"BooleanValue"===f.kind),40),b.push({directive:a,ifArgument:e})}});return b}(c).every(function(a){var c=a.directive,d=a.ifArgument,e=!1;if("Variable"===d.value.kind)e=b&&b[d.value.name.value],__DEV__?M(void 0!==e,"Invalid variable referenced in @".concat(c.name.value," directive.")):M(void 0!==e,37);else e=d.value.value;return"skip"===c.name.value?!e:e})}function Kb(a,b){return function(a){var b=[];return Qa(a,{Directive:function(a){b.push(a.name.value)}}),b}(b).some(function(b){return a.indexOf(b)>-1})}function Lb(a){return a&&Kb(["client"],a)&&Kb(["export"],a)}var Mb=Object.prototype.hasOwnProperty;function Nb(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return Ob(a)}function Ob(a){var b=a[0]||{},c=a.length;if(c>1)for(var d=new Qb,e=1;e<c;++e)b=d.merge(b,a[e]);return b}var Pb=function(a,b,c){return this.merge(a[c],b[c])},Qb=function(){function a(a){if(void 0===a)a=Pb;this.reconciler=a,this.isObject=ha,this.pastCopies=new Set}return a.prototype.merge=function(a,b){for(var c=this,d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];if(ha(b)&&ha(a))return Object.keys(b).forEach(function(e){if(Mb.call(a,e)){var f=a[e];if(b[e]!==f){var g=c.reconciler.apply(c,H([a,b,e],d,!1));if(g!==f)(a=c.shallowCopyForMerge(a))[e]=g}}else(a=c.shallowCopyForMerge(a))[e]=b[e]}),a;else return b},a.prototype.shallowCopyForMerge=function(a){if(ha(a))if(!this.pastCopies.has(a)){if(Array.isArray(a))a=a.slice(0);else a=D({__proto__:Object.getPrototypeOf(a)},a);this.pastCopies.add(a)}return a},a}(),Rb=Object.prototype.hasOwnProperty;function Sb(a,b){var c=a.__typename,d=a.id,e=a._id;if("string"==typeof c){if(b)b.keyObject=void 0!==d?{id:d}:void 0!==e?{_id:e}:void 0;if(void 0===d)d=e;if(void 0!==d)return"".concat(c,":").concat("number"==typeof d||"string"==typeof d?d:JSON.stringify(d))}}var Tb={dataIdFromObject:Sb,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Ub(a){var b=a.canonizeResults;return void 0===b?Tb.canonizeResults:b}var Vb=/^[_a-z][_0-9a-z]*/i;function Wb(a){var b=a.match(Vb);return b?b[0]:a}function Xb(a,b,c){if(ha(b))return Zb(b)?b.every(function(b){return Xb(a,b,c)}):a.selections.every(function(a){if(wa(a)&&Jb(a,c)){var d=ua(a);return Rb.call(b,d)&&(!a.selectionSet||Xb(a.selectionSet,b[d],c))}return!0});else return!1}function Yb(a){return ha(a)&&!na(a)&&!Zb(a)}var Zb=function(a){return Array.isArray(a)};var $b,_b,ac=function(){function a(){this.known=new(Gb?WeakSet:Set),this.pool=new Eb(Fb),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return a.prototype.isKnown=function(a){return ha(a)&&this.known.has(a)},a.prototype.pass=function(a){if(ha(a)){var b=function(a){if(ha(a))return Zb(a)?a.slice(0):D({__proto__:Object.getPrototypeOf(a)},a);else return a}(a);return this.passes.set(b,a),b}return a},a.prototype.admit=function(a){var b=this;if(ha(a)){var c=this.passes.get(a);if(c)return c;switch(Object.getPrototypeOf(a)){case Array.prototype:if(this.known.has(a))return a;var d=a.map(this.admit,this);if(!(h=this.pool.lookupArray(d)).array)if(this.known.add(h.array=d),__DEV__)Object.freeze(d);return h.array;case null:case Object.prototype:if(this.known.has(a))return a;var e=Object.getPrototypeOf(a),f=[e],g=this.sortedKeys(a);f.push(g.json);var h,i=f.length;if(g.sorted.forEach(function(c){f.push(b.admit(a[c]))}),!(h=this.pool.lookupArray(f)).object){var j=h.object=Object.create(e);if(this.known.add(j),g.sorted.forEach(function(a,b){j[a]=f[i+b]}),__DEV__)Object.freeze(j)}return h.object}}return a},a.prototype.sortedKeys=function(a){var b=Object.keys(a),c=this.pool.lookupArray(b);if(!c.keys){b.sort();var d=JSON.stringify(b);if(!(c.keys=this.keysByJSON.get(d)))this.keysByJSON.set(d,c.keys={sorted:b,json:d})}return c.keys},a}(),bc=Object.assign(function(a){if(ha(a)){if(void 0===$b)cc();var b=$b.admit(a),c=_b.get(b);if(void 0===c)_b.set(b,c=JSON.stringify(b));return c}return JSON.stringify(a)},{reset:cc});function cc(){$b=new ac,_b=new(Fb?WeakMap:Map)}function dc(a,b,c){return new A(function(d){var e=d.next,f=d.error,g=d.complete,h=0,i=!1,j={then:function(a){return new Promise(function(b){return b(a())})}};function k(a,b){if(a)return function(b){++h;var c=function(){return a(b)};j=j.then(c,c).then(function(a){if(--h,e&&e.call(d,a),i)l.complete()},function(a){throw--h,a}).catch(function(a){f&&f.call(d,a)})};else return function(a){return b&&b.call(d,a)}}var l={next:k(b,e),error:k(c,f),complete:function(){if(i=!0,!h)g&&g.call(d)}},m=a.subscribe(l);return function(){return m.unsubscribe()}})}function ec(a){return a.errors&&a.errors.length>0||!1}function fc(a,b,c){var d=0;return a.forEach(function(c,e){if(b.call(this,c,e,a))a[d++]=c},c),a.length=d,a}var gc={kind:"Field",name:{kind:"Name",value:"__typename"}};function hc(a){return function a(b,c){return b.selectionSet.selections.every(function(b){return"FragmentSpread"===b.kind&&a(c[b.name.value],c)})}(za(a)||function(a){__DEV__?M("Document"===a.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):M("Document"===a.kind,48),__DEV__?M(a.definitions.length<=1,"Fragment must have exactly one definition."):M(a.definitions.length<=1,49);var b=a.definitions[0];return __DEV__?M("FragmentDefinition"===b.kind,"Must be a fragment definition."):M("FragmentDefinition"===b.kind,50),b}(a),ja(Ba(a)))?null:a}function ic(a){return function(b){return a.some(function(a){return a.name&&a.name===b.name.value||a.test&&a.test(b)})}}function jc(a,b){var c=Object.create(null),d=[],e=Object.create(null),f=[],g=hc(Qa(b,{Variable:{enter:function(a,b,d){if("VariableDefinition"!==d.kind)c[a.name.value]=!0}},Field:{enter:function(b){if(a&&b.directives){if(a.some(function(a){return a.remove})&&b.directives&&b.directives.some(ic(a))){if(b.arguments)b.arguments.forEach(function(a){if("Variable"===a.value.kind)d.push({name:a.value.name.value})});if(b.selectionSet)(function a(b){var c=[];return b.selections.forEach(function(b){if((wa(b)||xa(b))&&b.selectionSet)a(b.selectionSet).forEach(function(a){return c.push(a)});else if("FragmentSpread"===b.kind)c.push(b)}),c})(b.selectionSet).forEach(function(a){f.push({name:a.name.value})});return null}}}},FragmentSpread:{enter:function(a){e[a.name.value]=!0}},Directive:{enter:function(b){if(ic(a)(b))return null}}}));if(g&&fc(d,function(a){return!!a.name&&!c[a.name]}).length)g=function(a,b){var c=function(a){return function(b){return a.some(function(a){return b.value&&"Variable"===b.value.kind&&b.value.name&&(a.name===b.value.name.value||a.test&&a.test(b))})}}(a);return hc(Qa(b,{OperationDefinition:{enter:function(b){return D(D({},b),{variableDefinitions:b.variableDefinitions?b.variableDefinitions.filter(function(b){return!a.some(function(a){return a.name===b.variable.name.value})}):[]})}},Field:{enter:function(b){if(a.some(function(a){return a.remove})){var d=0;if(b.arguments)b.arguments.forEach(function(a){if(c(a))d+=1});if(1===d)return null}}},Argument:{enter:function(a){if(c(a))return null}}}))}(d,g);if(g&&fc(f,function(a){return!!a.name&&!e[a.name]}).length)g=function(a,b){function c(b){if(a.some(function(a){return a.name===b.name.value}))return null}return hc(Qa(b,{FragmentSpread:{enter:c},FragmentDefinition:{enter:c}}))}(f,g);return g}var kc=Object.assign(function(a){return Qa(a,{SelectionSet:{enter:function(a,b,c){if(!c||"OperationDefinition"!==c.kind){var d=a.selections;if(d){if(!d.some(function(a){return wa(a)&&("__typename"===a.name.value||0===a.name.value.lastIndexOf("__",0))})){var e=c;if(!(wa(e)&&e.directives&&e.directives.some(function(a){return"export"===a.name.value})))return D(D({},a),{selections:H(H([],d,!0),[gc],!1)})}}}}}})},{added:function(a){return a===gc}}),lc={test:function(a){var b="connection"===a.name.value;if(b)if(!a.arguments||!a.arguments.some(function(a){return"key"===a.name.value}))__DEV__&&M.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.");return b}};function mc(a){if("query"===Da(a).operation)return a;else return Qa(a,{OperationDefinition:{enter:function(a){return D(D({},a),{operation:"query"})}}})}var nc=new Map;function oc(a){var b=nc.get(a)||1;return nc.set(a,b+1),"".concat(a,":").concat(b,":").concat(Math.random().toString(36).slice(2))}function pc(a,b,c){var d=[];a.forEach(function(a){return a[b]&&d.push(a)}),d.forEach(function(a){return a[b](c)})}function qc(a){function b(b){Object.defineProperty(a,b,{value:A})}if(Hb&&Symbol.species)b(Symbol.species);return b("@@species"),a}function rc(a){return a&&"function"==typeof a.then}var sc=function(a){function b(b){var c=a.call(this,function(a){return c.addObserver(a),function(){return c.removeObserver(a)}})||this;if(c.observers=new Set,c.addCount=0,c.promise=new Promise(function(a,b){c.resolve=a,c.reject=b}),c.handlers={next:function(a){if(null!==c.sub)c.latest=["next",a],pc(c.observers,"next",a)},error:function(a){var b=c.sub;if(null!==b){if(b)setTimeout(function(){return b.unsubscribe()});c.sub=null,c.latest=["error",a],c.reject(a),pc(c.observers,"error",a)}},complete:function(){var a=c.sub;if(null!==a){var b=c.sources.shift();if(!b){if(a)setTimeout(function(){return a.unsubscribe()});if(c.sub=null,c.latest&&"next"===c.latest[0])c.resolve(c.latest[1]);else c.resolve();pc(c.observers,"complete")}else if(rc(b))b.then(function(a){return c.sub=a.subscribe(c.handlers)});else c.sub=b.subscribe(c.handlers)}}},c.cancel=function(a){c.reject(a),c.sources=[],c.handlers.complete()},c.promise.catch(function(a){}),"function"==typeof b)b=[new A(b)];if(rc(b))b.then(function(a){return c.start(a)},c.handlers.error);else c.start(b);return c}return C(b,a),b.prototype.start=function(a){if(void 0===this.sub)this.sources=Array.from(a),this.handlers.complete()},b.prototype.deliverLastMessage=function(a){if(this.latest){var b=this.latest[0],c=a[b];if(c)c.call(a,this.latest[1]);if(null===this.sub&&"next"===b&&a.complete)a.complete()}},b.prototype.addObserver=function(a){if(!this.observers.has(a))this.deliverLastMessage(a),this.observers.add(a),++this.addCount},b.prototype.removeObserver=function(a,b){if(this.observers.delete(a)&&--this.addCount<1&&!b)this.handlers.complete()},b.prototype.cleanup=function(a){var b=this,c=!1,d=function(){if(!c)c=!0,b.observers.delete(e),a()},e={next:d,error:d,complete:d},f=this.addCount;this.addObserver(e),this.addCount=f},b}(A);function tc(a){return Array.isArray(a)&&a.length>0}qc(sc);var uc,vc=function(a){function b(c){var d=c.graphQLErrors,e=c.clientErrors,f=c.networkError,g=c.errorMessage,h=c.extraInfo,i=a.call(this,g)||this;return i.graphQLErrors=d||[],i.clientErrors=e||[],i.networkError=f||null,i.message=g||function(a){var b="";if(tc(a.graphQLErrors)||tc(a.clientErrors)){(a.graphQLErrors||[]).concat(a.clientErrors||[]).forEach(function(a){var c=a?a.message:"Error message not found.";b+="".concat(c,"\n")})}if(a.networkError)b+="".concat(a.networkError.message,"\n");return b=b.replace(/\n$/,"")}(i),i.extraInfo=h,i.__proto__=b.prototype,i}return C(b,a),b}(Error);function wc(a){return a?a<7:!1}!function(a){a[a.loading=1]="loading",a[a.setVariables=2]="setVariables",a[a.fetchMore=3]="fetchMore",a[a.refetch=4]="refetch",a[a.poll=6]="poll",a[a.ready=7]="ready",a[a.error=8]="error"}(uc||(uc={}));var xc=Object.prototype.toString;function yc(a){return function a(b,c){switch(xc.call(b)){case"[object Array]":if((c=c||new Map).has(b))return c.get(b);var d=b.slice(0);return c.set(b,d),d.forEach(function(b,e){d[e]=a(b,c)}),d;case"[object Object]":if((c=c||new Map).has(b))return c.get(b);var e=Object.create(Object.getPrototypeOf(b));return c.set(b,e),Object.keys(b).forEach(function(d){e[d]=a(b[d],c)}),e;default:return b}}(a)}var zc=Object.assign,Ac=Object.hasOwnProperty,Bc=function(a){function b(b){var c=b.queryManager,d=b.queryInfo,e=b.options,f=a.call(this,function(a){try{var b=a._subscription._observer;if(b&&!b.error)b.error=Dc}catch(a){}var c=!f.observers.size;f.observers.add(a);var d=f.last;if(d&&d.error)a.error&&a.error(d.error);else if(d&&d.result)a.next&&a.next(d.result);if(c)f.reobserve().catch(function(){});return function(){if(f.observers.delete(a)&&!f.observers.size)f.tearDownQuery()}})||this;f.observers=new Set,f.subscriptions=new Set,f.queryInfo=d,f.queryManager=c,f.isTornDown=!1;var g=c.defaultOptions.watchQuery,h=(void 0===g?{}:g).fetchPolicy,i=void 0===h?"cache-first":h,j=e.fetchPolicy,k=void 0===j?i:j,l=e.initialFetchPolicy,m=void 0===l?"standby"===k?i:k:l;f.options=D(D({},e),{initialFetchPolicy:m,fetchPolicy:k}),f.queryId=d.queryId||c.generateQueryId();var n=za(f.query);return f.queryName=n&&n.name&&n.name.value,f}return C(b,a),Object.defineProperty(b.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),b.prototype.result=function(){var a=this;return new Promise(function(b,c){var d={next:function(c){if(b(c),a.observers.delete(d),!a.observers.size)a.queryManager.removeQuery(a.queryId);setTimeout(function(){e.unsubscribe()},0)},error:c},e=a.subscribe(d)})},b.prototype.getCurrentResult=function(a){if(void 0===a)a=!0;var b=this.getLastResult(!0),c=this.queryInfo.networkStatus||b&&b.networkStatus||uc.ready,d=D(D({},b),{loading:wc(c),networkStatus:c}),e=this.options.fetchPolicy,f=void 0===e?"cache-first":e;if("network-only"===f||"no-cache"===f||"standby"===f||this.queryManager.transform(this.options.query).hasForcedResolvers);else{var g=this.queryInfo.getDiff();if(g.complete||this.options.returnPartialData)d.data=g.result;if(ub(d.data,{}))d.data=void 0;if(g.complete){if(delete d.partial,g.complete&&d.networkStatus===uc.loading&&("cache-first"===f||"cache-only"===f))d.networkStatus=uc.ready,d.loading=!1}else d.partial=!0;if(__DEV__&&!g.complete&&!this.options.partialRefetch&&!d.loading&&!d.data&&!d.error)Ec(g.missing)}if(a)this.updateLastResult(d);return d},b.prototype.isDifferentFromLastResult=function(a){return!this.last||!ub(this.last.result,a)},b.prototype.getLast=function(a,b){var c=this.last;if(c&&c[a]&&(!b||ub(c.variables,this.variables)))return c[a]},b.prototype.getLastResult=function(a){return this.getLast("result",a)},b.prototype.getLastError=function(a){return this.getLast("error",a)},b.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},b.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},b.prototype.refetch=function(a){var b,c={pollInterval:0},d=this.options.fetchPolicy;if("cache-and-network"===d)c.fetchPolicy=d;else if("no-cache"===d)c.fetchPolicy="no-cache";else c.fetchPolicy="network-only";if(__DEV__&&a&&Ac.call(a,"variables")){var e=Ca(this.query),f=e.variableDefinitions;if(!f||!f.some(function(a){return"variables"===a.variable.name.value}))__DEV__&&M.warn("Called refetch(".concat(JSON.stringify(a),") for query ").concat((null===(b=e.name)||void 0===b?void 0:b.value)||JSON.stringify(e),", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"))}if(a&&!ub(this.options.variables,a))c.variables=this.options.variables=D(D({},this.options.variables),a);return this.queryInfo.resetLastWrite(),this.reobserve(c,uc.refetch)},b.prototype.fetchMore=function(a){var b=this,c=D(D({},a.query?a:D(D(D(D({},this.options),{query:this.query}),a),{variables:D(D({},this.options.variables),a.variables)})),{fetchPolicy:"no-cache"}),d=this.queryManager.generateQueryId(),e=this.queryInfo,f=e.networkStatus;if(e.networkStatus=uc.fetchMore,c.notifyOnNetworkStatusChange)this.observe();var g=new Set;return this.queryManager.fetchQuery(d,c,uc.fetchMore).then(function(h){if(b.queryManager.removeQuery(d),e.networkStatus===uc.fetchMore)e.networkStatus=f;return b.queryManager.cache.batch({update:function(d){var e=a.updateQuery;if(e)d.updateQuery({query:b.query,variables:b.variables,returnPartialData:!0,optimistic:!1},function(a){return e(a,{fetchMoreResult:h.data,variables:c.variables})});else d.writeQuery({query:c.query,variables:c.variables,data:h.data})},onWatchUpdated:function(a){g.add(a.query)}}),h}).finally(function(){if(!g.has(b.query))Cc(b)})},b.prototype.subscribeToMore=function(a){var b=this,c=this.queryManager.startGraphQLSubscription({query:a.document,variables:a.variables,context:a.context}).subscribe({next:function(c){var d=a.updateQuery;if(d)b.updateQuery(function(a,b){var e=b.variables;return d(a,{subscriptionData:c,variables:e})})},error:function(b){if(!a.onError)__DEV__&&M.error("Unhandled GraphQL subscription error",b);else a.onError(b)}});return this.subscriptions.add(c),function(){if(b.subscriptions.delete(c))c.unsubscribe()}},b.prototype.setOptions=function(a){return this.reobserve(a)},b.prototype.setVariables=function(a){if(ub(this.variables,a))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=a,!this.observers.size)return Promise.resolve();else return this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:a},uc.setVariables)},b.prototype.updateQuery=function(a){var b=this.queryManager,c=a(b.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});if(c)b.cache.writeQuery({query:this.options.query,data:c,variables:this.variables}),b.broadcastQueries()},b.prototype.startPolling=function(a){this.options.pollInterval=a,this.updatePolling()},b.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},b.prototype.applyNextFetchPolicy=function(a,b){if(b.nextFetchPolicy){var c=b.fetchPolicy,d=void 0===c?"cache-first":c,e=b.initialFetchPolicy,f=void 0===e?d:e;if("standby"===d);else if("function"==typeof b.nextFetchPolicy)b.fetchPolicy=b.nextFetchPolicy(d,{reason:a,options:b,observable:this,initialFetchPolicy:f});else if("variables-changed"===a)b.fetchPolicy=f;else b.fetchPolicy=b.nextFetchPolicy}return b.fetchPolicy},b.prototype.fetch=function(a,b){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,a,b)},b.prototype.updatePolling=function(){var a=this;if(!this.queryManager.ssrMode){var b=this.pollingInfo,c=this.options.pollInterval;if(c){if(!b||b.interval!==c){__DEV__?M(c,"Attempted to start a polling query without a polling interval."):M(c,10),(b||(this.pollingInfo={})).interval=c;var d=function(){if(a.pollingInfo)if(!wc(a.queryInfo.networkStatus))a.reobserve({fetchPolicy:"network-only"},uc.poll).then(e,e);else e()},e=function(){var b=a.pollingInfo;if(b)clearTimeout(b.timeout),b.timeout=setTimeout(d,b.interval)};e()}}else if(b)clearTimeout(b.timeout),delete this.pollingInfo}},b.prototype.updateLastResult=function(a,b){if(void 0===b)b=this.variables;if(this.last=D(D({},this.last),{result:this.queryManager.assumeImmutableResults?a:yc(a),variables:b}),!tc(a.errors))delete this.last.error;return this.last},b.prototype.reobserve=function(a,b){var c=this;this.isTornDown=!1;var d=b===uc.refetch||b===uc.fetchMore||b===uc.poll,e=this.options.variables,f=this.options.fetchPolicy,g=Ib(this.options,a||{}),h=d?g:zc(this.options,g);if(!d)if(this.updatePolling(),a&&a.variables&&!ub(a.variables,e)&&"standby"!==h.fetchPolicy&&h.fetchPolicy===f)if(this.applyNextFetchPolicy("variables-changed",h),void 0===b)b=uc.setVariables;var i=h.variables&&D({},h.variables),j=this.fetch(h,b),k={next:function(a){c.reportResult(a,i)},error:function(a){c.reportError(a,i)}};if(!d){if(this.concast&&this.observer)this.concast.removeObserver(this.observer);this.concast=j,this.observer=k}return j.addObserver(k),j.promise},b.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},b.prototype.reportResult=function(a,b){var c=this.getLastError();if(c||this.isDifferentFromLastResult(a)){if(c||!a.partial||this.options.returnPartialData)this.updateLastResult(a,b);pc(this.observers,"next",a)}},b.prototype.reportError=function(a,b){var c=D(D({},this.getLastResult()),{error:a,errors:a.graphQLErrors,networkStatus:uc.error,loading:!1});this.updateLastResult(c,b),pc(this.observers,"error",this.last.error=a)},b.prototype.hasObservers=function(){return this.observers.size>0},b.prototype.tearDownQuery=function(){if(!this.isTornDown){if(this.concast&&this.observer)this.concast.removeObserver(this.observer),delete this.concast,delete this.observer;this.stopPolling(),this.subscriptions.forEach(function(a){return a.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0}},b}(A);function Cc(a){var b=a.options,c=b.fetchPolicy,d=b.nextFetchPolicy;if("cache-and-network"===c||"network-only"===c)return a.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){if(this.nextFetchPolicy=d,"function"==typeof d)return d.apply(this,arguments);else return c}});else return a.reobserve()}function Dc(a){__DEV__&&M.error("Unhandled error",a.message,a.stack)}function Ec(a){if(__DEV__&&a)__DEV__&&M.debug("Missing cache result fields: ".concat(JSON.stringify(a)),a)}function Fc(a){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function Gc(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d)d.writable=!0;Object.defineProperty(a,Hc(d.key),d)}}function Hc(a){var b=function(a,b){if("object"!==Fc(a)||null===a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!==Fc(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"===Fc(b)?b:String(b)}qc(Bc);var Ic=null,Jc={},Kc=1;function Lc(a){try{return a()}catch(a){}}var Mc=Lc(function(){return globalThis})||Lc(function(){return global})||Object.create(null),Nc=Mc["@wry/context:Slot"]||Array["@wry/context:Slot"]||function(a){try{Object.defineProperty(Mc,"@wry/context:Slot",{value:a,enumerable:!1,writable:!1,configurable:!0})}finally{return a}}(function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.id=["slot",Kc++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return function(a,b,c){if(b)Gc(a.prototype,b);if(c)Gc(a,c);Object.defineProperty(a,"prototype",{writable:!1})}(a,[{key:"hasValue",value:function(){for(var a=Ic;a;a=a.parent)if(this.id in a.slots){var b=a.slots[this.id];if(b===Jc)break;if(a!==Ic)Ic.slots[this.id]=b;return!0}if(Ic)Ic.slots[this.id]=Jc;return!1}},{key:"getValue",value:function(){if(this.hasValue())return Ic.slots[this.id]}},{key:"withValue",value:function(a,b,c,d){var e=function(a,b,c){if((b=Hc(b))in a)Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0});else a[b]=c;return a}({__proto__:null},this.id,a),f=Ic;Ic={parent:f,slots:e};try{return b.apply(d,c)}finally{Ic=f}}}],[{key:"bind",value:function(a){var b=Ic;return function(){var c=Ic;try{return Ic=b,a.apply(this,arguments)}finally{Ic=c}}}},{key:"noContext",value:function(a,b,c){if(Ic){var d=Ic;try{return Ic=null,a.apply(c,b)}finally{Ic=d}}else return a.apply(c,b)}}]),a}());Nc.bind,Nc.noContext;function Oc(){}var Pc,Qc=function(){function a(a,b){if(void 0===a)a=1/0;if(void 0===b)b=Oc;this.max=a,this.dispose=b,this.map=new Map,this.newest=null,this.oldest=null}return a.prototype.has=function(a){return this.map.has(a)},a.prototype.get=function(a){var b=this.getNode(a);return b&&b.value},a.prototype.getNode=function(a){var b=this.map.get(a);if(b&&b!==this.newest){var c=b.older,d=b.newer;if(d)d.older=c;if(c)c.newer=d;if(b.older=this.newest,b.older.newer=b,b.newer=null,this.newest=b,b===this.oldest)this.oldest=d}return b},a.prototype.set=function(a,b){var c=this.getNode(a);if(c)return c.value=b;if(c={key:a,value:b,newer:null,older:this.newest},this.newest)this.newest.newer=c;return this.newest=c,this.oldest=this.oldest||c,this.map.set(a,c),c.value},a.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},a.prototype.delete=function(a){var b=this.map.get(a);if(b){if(b===this.newest)this.newest=b.older;if(b===this.oldest)this.oldest=b.newer;if(b.newer)b.newer.older=b.older;if(b.older)b.older.newer=b.newer;return this.map.delete(a),this.dispose(b.value,a),!0}return!1},a}(),Rc=new Nc,Sc=Object.prototype.hasOwnProperty,Tc=void 0===(Pc=Array.from)?function(a){var b=[];return a.forEach(function(a){return b.push(a)}),b}:Pc;function Uc(a){var b=a.unsubscribe;if("function"==typeof b)a.unsubscribe=void 0,b()}var Vc=[];function Wc(a,b){if(!a)throw new Error(b||"assertion failure")}function Xc(a){switch(a.length){case 0:throw new Error("unknown value");case 1:return a[0];case 2:throw a[1]}}var Yc=function(){function a(b){this.fn=b,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++a.count}return a.prototype.peek=function(){if(1===this.value.length&&!_c(this))return Zc(this),this.value[0]},a.prototype.recompute=function(a){return Wc(!this.recomputing,"already recomputing"),Zc(this),_c(this)?function(a,b){if(gd(a),Rc.withValue(a,$c,[a,b]),function(a,b){if("function"==typeof a.subscribe)try{Uc(a),a.unsubscribe=a.subscribe.apply(null,b)}catch(b){return a.setDirty(),!1}return!0}(a,b))!function(a){if(a.dirty=!1,_c(a))return;bd(a)}(a);return Xc(a.value)}(this,a):Xc(this.value)},a.prototype.setDirty=function(){if(!this.dirty)this.dirty=!0,this.value.length=0,ad(this),Uc(this)},a.prototype.dispose=function(){var a=this;this.setDirty(),gd(this),cd(this,function(b,c){b.setDirty(),hd(b,a)})},a.prototype.forget=function(){this.dispose()},a.prototype.dependOn=function(a){if(a.add(this),!this.deps)this.deps=Vc.pop()||new Set;this.deps.add(a)},a.prototype.forgetDeps=function(){var a=this;if(this.deps)Tc(this.deps).forEach(function(b){return b.delete(a)}),this.deps.clear(),Vc.push(this.deps),this.deps=null},a.count=0,a}();function Zc(a){var b=Rc.getValue();if(b){if(a.parents.add(b),!b.childValues.has(a))b.childValues.set(a,[]);if(_c(a))dd(b,a);else ed(b,a);return b}}function $c(a,b){a.recomputing=!0,a.value.length=0;try{a.value[0]=a.fn.apply(null,b)}catch(b){a.value[1]=b}a.recomputing=!1}function _c(a){return a.dirty||!(!a.dirtyChildren||!a.dirtyChildren.size)}function ad(a){cd(a,dd)}function bd(a){cd(a,ed)}function cd(a,b){var c=a.parents.size;if(c)for(var d=Tc(a.parents),e=0;e<c;++e)b(d[e],a)}function dd(a,b){Wc(a.childValues.has(b)),Wc(_c(b));var c=!_c(a);if(!a.dirtyChildren)a.dirtyChildren=Vc.pop()||new Set;else if(a.dirtyChildren.has(b))return;if(a.dirtyChildren.add(b),c)ad(a)}function ed(a,b){Wc(a.childValues.has(b)),Wc(!_c(b));var c,d,e,f=a.childValues.get(b);if(0===f.length)a.childValues.set(b,b.value.slice(0));else if(c=f,d=b.value,!((e=c.length)>0&&e===d.length&&c[e-1]===d[e-1]))a.setDirty();if(fd(a,b),!_c(a))bd(a)}function fd(a,b){var c=a.dirtyChildren;if(c)if(c.delete(b),0===c.size){if(Vc.length<100)Vc.push(c);a.dirtyChildren=null}}function gd(a){if(a.childValues.size>0)a.childValues.forEach(function(b,c){hd(a,c)});a.forgetDeps(),Wc(null===a.dirtyChildren)}function hd(a,b){b.parents.delete(a),a.childValues.delete(b),fd(a,b)}var id={setDirty:!0,dispose:!0,forget:!0};function jd(a){var b=new Map,c=a&&a.subscribe;function d(a){var d=Rc.getValue();if(d){var e=b.get(a);if(!e)b.set(a,e=new Set);if(d.dependOn(e),"function"==typeof c)Uc(e),e.unsubscribe=c(a)}}return d.dirty=function(a,c){var d=b.get(a);if(d){var e=c&&Sc.call(id,c)?c:"setDirty";Tc(d).forEach(function(a){return a[e]()}),b.delete(a),Uc(d)}},d}function kd(){var a=new Eb("function"==typeof WeakMap);return function(){return a.lookupArray(arguments)}}kd();var ld=new Set;function md(a,b){if(void 0===b)b=Object.create(null);var c=new Qc(b.max||Math.pow(2,16),function(a){return a.dispose()}),d=b.keyArgs,e=b.makeCacheKey||kd(),f=function(){var f=e.apply(null,d?d.apply(null,arguments):arguments);if(void 0===f)return a.apply(null,arguments);var g=c.get(f);if(!g)c.set(f,g=new Yc(a)),g.subscribe=b.subscribe,g.forget=function(){return c.delete(f)};var h=g.recompute(Array.prototype.slice.call(arguments));if(c.set(f,g),ld.add(c),!Rc.hasValue())ld.forEach(function(a){return a.clean()}),ld.clear();return h};function g(a){var b=c.get(a);if(b)b.setDirty()}function h(a){var b=c.get(a);if(b)return b.peek()}function i(a){return c.delete(a)}return Object.defineProperty(f,"size",{get:function(){return c.map.size},configurable:!1,enumerable:!1}),f.dirtyKey=g,f.dirty=function(){g(e.apply(null,arguments))},f.peekKey=h,f.peek=function(){return h(e.apply(null,arguments))},f.forgetKey=i,f.forget=function(){return i(e.apply(null,arguments))},f.makeCacheKey=e,f.getKey=d?function(){return e.apply(null,d.apply(null,arguments))}:e,Object.freeze(f)}var nd=null,od={},pd=1,qd=Array,rd=qd["@wry/context:Slot"]||function(){var a=function(){function a(){this.id=["slot",pd++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return a.prototype.hasValue=function(){for(var a=nd;a;a=a.parent)if(this.id in a.slots){var b=a.slots[this.id];if(b===od)break;if(a!==nd)nd.slots[this.id]=b;return!0}if(nd)nd.slots[this.id]=od;return!1},a.prototype.getValue=function(){if(this.hasValue())return nd.slots[this.id]},a.prototype.withValue=function(a,b,c,d){var e,f=((e={__proto__:null})[this.id]=a,e),g=nd;nd={parent:g,slots:f};try{return b.apply(d,c)}finally{nd=g}},a.bind=function(a){var b=nd;return function(){var c=nd;try{return nd=b,a.apply(this,arguments)}finally{nd=c}}},a.noContext=function(a,b,c){if(nd){var d=nd;try{return nd=null,a.apply(c,b)}finally{nd=d}}else return a.apply(c,b)},a}();try{Object.defineProperty(qd,"@wry/context:Slot",{value:qd["@wry/context:Slot"]=a,enumerable:!1,writable:!1,configurable:!1})}finally{return a}}();rd.bind,rd.noContext;var sd=new rd,td=new WeakMap;function ud(a){var b=td.get(a);if(!b)td.set(a,b={vars:new Set,dep:jd()});return b}function vd(a){ud(a).vars.forEach(function(b){return b.forgetCache(a)})}function wd(a){var b=new Set,c=new Set,d=function d(f){if(arguments.length>0){if(a!==f){a=f,b.forEach(function(a){ud(a).dep.dirty(d),xd(a)});var g=Array.from(c);c.clear(),g.forEach(function(b){return b(a)})}}else{var h=sd.getValue();if(h)e(h),ud(h).dep(d)}return a};d.onNextChange=function(a){return c.add(a),function(){c.delete(a)}};var e=d.attachCache=function(a){return b.add(a),ud(a).vars.add(d),d};return d.forgetCache=function(a){return b.delete(a)},d}function xd(a){if(a.broadcastWatches)a.broadcastWatches()}var yd=function(){function a(a){var b=a.cache,c=a.client,d=a.resolvers,e=a.fragmentMatcher;if(this.cache=b,c)this.client=c;if(d)this.addResolvers(d);if(e)this.setFragmentMatcher(e)}return a.prototype.addResolvers=function(a){var b=this;if(this.resolvers=this.resolvers||{},Array.isArray(a))a.forEach(function(a){b.resolvers=Nb(b.resolvers,a)});else this.resolvers=Nb(this.resolvers,a)},a.prototype.setResolvers=function(a){this.resolvers={},this.addResolvers(a)},a.prototype.getResolvers=function(){return this.resolvers||{}},a.prototype.runResolvers=function(a){var b=a.document,c=a.remoteResult,d=a.context,e=a.variables,f=a.onlyRunForcedResolvers,g=void 0===f?!1:f;return F(this,void 0,void 0,function(){return G(this,function(a){if(b)return[2,this.resolveDocument(b,c.data,d,e,this.fragmentMatcher,g).then(function(a){return D(D({},c),{data:a.result})})];else return[2,c]})})},a.prototype.setFragmentMatcher=function(a){this.fragmentMatcher=a},a.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},a.prototype.clientQuery=function(a){if(Kb(["client"],a))if(this.resolvers)return a;return null},a.prototype.serverQuery=function(a){return function(a){ya(a);var b=jc([{test:function(a){return"client"===a.name.value},remove:!0}],a);if(b)b=Qa(b,{FragmentDefinition:{enter:function(a){if(a.selectionSet){if(a.selectionSet.selections.every(function(a){return wa(a)&&"__typename"===a.name.value}))return null}}}});return b}(a)},a.prototype.prepareContext=function(a){var b=this.cache;return D(D({},a),{cache:b,getCacheKey:function(a){return b.identify(a)}})},a.prototype.addExportedVariables=function(a,b,c){if(void 0===b)b={};if(void 0===c)c={};return F(this,void 0,void 0,function(){return G(this,function(d){if(a)return[2,this.resolveDocument(a,this.buildRootValueFromCache(a,b)||{},this.prepareContext(c),b).then(function(a){return D(D({},b),a.exportedVariables)})];else return[2,D({},b)]})})},a.prototype.shouldForceResolvers=function(a){var b=!1;return Qa(a,{Directive:{enter:function(a){if("client"===a.name.value&&a.arguments)if(b=a.arguments.some(function(a){return"always"===a.name.value&&"BooleanValue"===a.value.kind&&!0===a.value.value}))return Pa}}}),b},a.prototype.buildRootValueFromCache=function(a,b){return this.cache.diff({query:mc(a),variables:b,returnPartialData:!0,optimistic:!1}).result},a.prototype.resolveDocument=function(a,b,c,d,e,f){if(void 0===c)c={};if(void 0===d)d={};if(void 0===e)e=function(){return!0};if(void 0===f)f=!1;return F(this,void 0,void 0,function(){var g,h,i,j,k,l,m,n,o;return G(this,function(p){return g=Da(a),h=Ba(a),i=ja(h),j=g.operation,k=j?j.charAt(0).toUpperCase()+j.slice(1):"Query",m=(l=this).cache,n=l.client,o={fragmentMap:i,context:D(D({},c),{cache:m,client:n}),variables:d,fragmentMatcher:e,defaultOperationType:k,exportedVariables:{},onlyRunForcedResolvers:f},[2,this.resolveSelectionSet(g.selectionSet,b,o).then(function(a){return{result:a,exportedVariables:o.exportedVariables}})]})})},a.prototype.resolveSelectionSet=function(a,b,c){return F(this,void 0,void 0,function(){var d,e,f,g,h,i=this;return G(this,function(j){return d=c.fragmentMap,e=c.context,f=c.variables,g=[b],h=function(a){return F(i,void 0,void 0,function(){var h,i;return G(this,function(j){if(!Jb(a,f))return[2];if(wa(a))return[2,this.resolveField(a,b,c).then(function(b){var c;if(void 0!==b)g.push(((c={})[ua(a)]=b,c))})];if(xa(a))h=a;else h=d[a.name.value],__DEV__?M(h,"No fragment named ".concat(a.name.value)):M(h,9);if(h&&h.typeCondition)if(i=h.typeCondition.name.value,c.fragmentMatcher(b,i,e))return[2,this.resolveSelectionSet(h.selectionSet,b,c).then(function(a){g.push(a)})];return[2]})})},[2,Promise.all(a.selections.map(h)).then(function(){return Ob(g)})]})})},a.prototype.resolveField=function(a,b,c){return F(this,void 0,void 0,function(){var d,e,f,g,h,i,j,k,l,m=this;return G(this,function(n){if(d=c.variables,e=a.name.value,f=ua(a),g=e!==f,h=b[f]||b[e],i=Promise.resolve(h),!c.onlyRunForcedResolvers||this.shouldForceResolvers(a))if(j=b.__typename||c.defaultOperationType,k=this.resolvers&&this.resolvers[j])if(l=k[g?e:f])i=Promise.resolve(sd.withValue(this.cache,l,[b,ta(a,d),c.context,{field:a,fragmentMap:c.fragmentMap}]));return[2,i.then(function(b){if(void 0===b)b=h;if(a.directives)a.directives.forEach(function(a){if("export"===a.name.value&&a.arguments)a.arguments.forEach(function(a){if("as"===a.name.value&&"StringValue"===a.value.kind)c.exportedVariables[a.value.value]=b})});if(!a.selectionSet)return b;if(null==b)return b;if(Array.isArray(b))return m.resolveSubSelectedArray(a,b,c);if(a.selectionSet)return m.resolveSelectionSet(a.selectionSet,b,c);else return})]})})},a.prototype.resolveSubSelectedArray=function(a,b,c){var d=this;return Promise.all(b.map(function(b){if(null===b)return null;if(Array.isArray(b))return d.resolveSubSelectedArray(a,b,c);if(a.selectionSet)return d.resolveSelectionSet(a.selectionSet,b,c);else return}))},a}(),zd=new(Fb?WeakMap:Map);function Ad(a,b){var c=a[b];if("function"==typeof c)a[b]=function(){return zd.set(a,(zd.get(a)+1)%1e15),c.apply(this,arguments)}}function Bd(a){if(a.notifyTimeout)clearTimeout(a.notifyTimeout),a.notifyTimeout=void 0}var Cd=function(){function a(a,b){if(void 0===b)b=a.generateQueryId();this.queryId=b,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var c=this.cache=a.cache;if(!zd.has(c))zd.set(c,0),Ad(c,"evict"),Ad(c,"modify"),Ad(c,"reset")}return a.prototype.init=function(a){var b=a.networkStatus||uc.loading;if(this.variables&&this.networkStatus!==uc.loading&&!ub(this.variables,a.variables))b=uc.setVariables;if(!ub(a.variables,this.variables))this.lastDiff=void 0;if(Object.assign(this,{document:a.document,variables:a.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:b}),a.observableQuery)this.setObservableQuery(a.observableQuery);if(a.lastRequestId)this.lastRequestId=a.lastRequestId;return this},a.prototype.reset=function(){Bd(this),this.lastDiff=void 0,this.dirty=!1},a.prototype.getDiff=function(a){if(void 0===a)a=this.variables;var b=this.getDiffOptions(a);if(this.lastDiff&&ub(b,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=a);var c=this.observableQuery;if(c&&"no-cache"===c.options.fetchPolicy)return{complete:!1};var d=this.cache.diff(b);return this.updateLastDiff(d,b),d},a.prototype.updateLastDiff=function(a,b){this.lastDiff=a?{diff:a,options:b||this.getDiffOptions()}:void 0},a.prototype.getDiffOptions=function(a){var b;if(void 0===a)a=this.variables;return{query:this.document,variables:a,returnPartialData:!0,optimistic:!0,canonizeResults:null===(b=this.observableQuery)||void 0===b?void 0:b.options.canonizeResults}},a.prototype.setDiff=function(a){var b=this,c=this.lastDiff&&this.lastDiff.diff;if(this.updateLastDiff(a),!this.dirty&&!ub(c&&c.result,a&&a.result))if(this.dirty=!0,!this.notifyTimeout)this.notifyTimeout=setTimeout(function(){return b.notify()},0)},a.prototype.setObservableQuery=function(a){var b=this;if(a!==this.observableQuery){if(this.oqListener)this.listeners.delete(this.oqListener);if(this.observableQuery=a,a)a.queryInfo=this,this.listeners.add(this.oqListener=function(){if(b.getDiff().fromOptimisticTransaction)a.observe();else Cc(a)});else delete this.oqListener}},a.prototype.notify=function(){var a=this;if(Bd(this),this.shouldNotify())this.listeners.forEach(function(b){return b(a)});this.dirty=!1},a.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(wc(this.networkStatus)&&this.observableQuery){var a=this.observableQuery.options.fetchPolicy;if("cache-only"!==a&&"cache-and-network"!==a)return!1}return!0},a.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=a.prototype.cancel,this.subscriptions.forEach(function(a){return a.unsubscribe()});var b=this.observableQuery;if(b)b.stopPolling()}},a.prototype.cancel=function(){},a.prototype.updateWatch=function(a){var b=this;if(void 0===a)a=this.variables;var c=this.observableQuery;if(!c||"no-cache"!==c.options.fetchPolicy){var d=D(D({},this.getDiffOptions(a)),{watcher:this,callback:function(a){return b.setDiff(a)}});if(!this.lastWatch||!ub(d,this.lastWatch))this.cancel(),this.cancel=this.cache.watch(this.lastWatch=d)}},a.prototype.resetLastWrite=function(){this.lastWrite=void 0},a.prototype.shouldWrite=function(a,b){var c=this.lastWrite;return!(c&&c.dmCount===zd.get(this.cache)&&ub(b,c.variables)&&ub(a.data,c.result.data))},a.prototype.markResult=function(a,b,c){var d=this;if(this.graphQLErrors=tc(a.errors)?a.errors:[],this.reset(),"no-cache"===b.fetchPolicy)this.updateLastDiff({result:a.data,complete:!0},this.getDiffOptions(b.variables));else if(0!==c)if(Dd(a,b.errorPolicy))this.cache.performTransaction(function(e){if(d.shouldWrite(a,b.variables))e.writeQuery({query:d.document,data:a.data,variables:b.variables,overwrite:1===c}),d.lastWrite={result:a,variables:b.variables,dmCount:zd.get(d.cache)};else if(d.lastDiff&&d.lastDiff.diff.complete)return void(a.data=d.lastDiff.diff.result);var f=d.getDiffOptions(b.variables),g=e.diff(f);if(!d.stopped)d.updateWatch(b.variables);if(d.updateLastDiff(g,f),g.complete)a.data=g.result});else this.lastWrite=void 0},a.prototype.markReady=function(){return this.networkError=null,this.networkStatus=uc.ready},a.prototype.markError=function(a){if(this.networkStatus=uc.error,this.lastWrite=void 0,this.reset(),a.graphQLErrors)this.graphQLErrors=a.graphQLErrors;if(a.networkError)this.networkError=a.networkError;return a},a}();function Dd(a,b){if(void 0===b)b="none";var c="ignore"===b||"all"===b,d=!ec(a);if(!d&&c&&a.data)d=!0;return d}var Ed=Object.prototype.hasOwnProperty,Fd=function(){function a(a){var b=a.cache,c=a.link,d=a.defaultOptions,e=a.queryDeduplication,f=void 0===e?!1:e,g=a.onBroadcast,h=a.ssrMode,i=void 0===h?!1:h,j=a.clientAwareness,k=void 0===j?{}:j,l=a.localState,m=a.assumeImmutableResults;if(this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(Fb?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=b,this.link=c,this.defaultOptions=d||Object.create(null),this.queryDeduplication=f,this.clientAwareness=k,this.localState=l||new yd({cache:b}),this.ssrMode=i,this.assumeImmutableResults=!!m,this.onBroadcast=g)this.mutationStore=Object.create(null)}return a.prototype.stop=function(){var a=this;this.queries.forEach(function(b,c){a.stopQueryNoBroadcast(c)}),this.cancelPendingFetches(__DEV__?new L("QueryManager stopped while query was in flight"):new L(11))},a.prototype.cancelPendingFetches=function(a){this.fetchCancelFns.forEach(function(b){return b(a)}),this.fetchCancelFns.clear()},a.prototype.mutate=function(a){var b,c,d=a.mutation,e=a.variables,f=a.optimisticResponse,g=a.updateQueries,h=a.refetchQueries,i=void 0===h?[]:h,j=a.awaitRefetchQueries,k=void 0===j?!1:j,l=a.update,m=a.onQueryUpdated,n=a.fetchPolicy,o=void 0===n?(null===(b=this.defaultOptions.mutate)||void 0===b?void 0:b.fetchPolicy)||"network-only":n,p=a.errorPolicy,q=void 0===p?(null===(c=this.defaultOptions.mutate)||void 0===c?void 0:c.errorPolicy)||"none":p,r=a.keepRootFields,s=a.context;return F(this,void 0,void 0,function(){var a,b,c;return G(this,function(h){switch(h.label){case 0:if(__DEV__?M(d,"mutation option is required. You must specify your GraphQL document in the mutation option."):M(d,12),__DEV__?M("network-only"===o||"no-cache"===o,"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):M("network-only"===o||"no-cache"===o,13),a=this.generateMutationId(),d=this.transform(d).document,e=this.getVariables(d,e),!this.transform(d).hasClientExports)return[3,2];else return[4,this.localState.addExportedVariables(d,e,s)];case 1:e=h.sent(),h.label=2;case 2:if(b=this.mutationStore&&(this.mutationStore[a]={mutation:d,variables:e,loading:!0,error:null}),f)this.markMutationOptimistic(f,{mutationId:a,document:d,variables:e,fetchPolicy:o,errorPolicy:q,context:s,updateQueries:g,update:l,keepRootFields:r});return this.broadcastQueries(),c=this,[2,new Promise(function(h,j){return dc(c.getObservableFromLink(d,D(D({},s),{optimisticResponse:f}),e,!1),function(h){if(ec(h)&&"none"===q)throw new vc({graphQLErrors:h.errors});if(b)b.loading=!1,b.error=null;var j=D({},h);if("function"==typeof i)i=i(j);if("ignore"===q&&ec(j))delete j.errors;return c.markMutationResult({mutationId:a,result:j,document:d,variables:e,fetchPolicy:o,errorPolicy:q,context:s,update:l,updateQueries:g,awaitRefetchQueries:k,refetchQueries:i,removeOptimistic:f?a:void 0,onQueryUpdated:m,keepRootFields:r})}).subscribe({next:function(a){c.broadcastQueries(),h(a)},error:function(d){if(b)b.loading=!1,b.error=d;if(f)c.cache.removeOptimistic(a);c.broadcastQueries(),j(d instanceof vc?d:new vc({networkError:d}))}})})]}})})},a.prototype.markMutationResult=function(a,b){var c=this;if(void 0===b)b=this.cache;var d=a.result,e=[],f="no-cache"===a.fetchPolicy;if(!f&&Dd(d,a.errorPolicy)){e.push({result:d.data,dataId:"ROOT_MUTATION",query:a.document,variables:a.variables});var g=a.updateQueries;if(g)this.queries.forEach(function(a,f){var h=a.observableQuery,i=h&&h.queryName;if(i&&Ed.call(g,i)){var j=g[i],k=c.queries.get(f),l=k.document,m=k.variables,n=b.diff({query:l,variables:m,returnPartialData:!0,optimistic:!1}),o=n.result;if(n.complete&&o){var p=j(o,{mutationResult:d,queryName:l&&Aa(l)||void 0,queryVariables:m});if(p)e.push({result:p,dataId:"ROOT_QUERY",query:l,variables:m})}}})}if(e.length>0||a.refetchQueries||a.update||a.onQueryUpdated||a.removeOptimistic){var h=[];if(this.refetchQueries({updateCache:function(b){if(!f)e.forEach(function(a){return b.write(a)});var g=a.update;if(g){if(!f){var h=b.diff({id:"ROOT_MUTATION",query:c.transform(a.document).asQuery,variables:a.variables,optimistic:!1,returnPartialData:!0});if(h.complete)d=D(D({},d),{data:h.result})}g(b,d,{context:a.context,variables:a.variables})}if(!f&&!a.keepRootFields)b.modify({id:"ROOT_MUTATION",fields:function(a,b){var c=b.fieldName,d=b.DELETE;return"__typename"===c?a:d}})},include:a.refetchQueries,optimistic:!1,removeOptimistic:a.removeOptimistic,onQueryUpdated:a.onQueryUpdated||null}).forEach(function(a){return h.push(a)}),a.awaitRefetchQueries||a.onQueryUpdated)return Promise.all(h).then(function(){return d})}return Promise.resolve(d)},a.prototype.markMutationOptimistic=function(a,b){var c=this,d="function"==typeof a?a(b.variables):a;return this.cache.recordOptimisticTransaction(function(a){try{c.markMutationResult(D(D({},b),{result:{data:d}}),a)}catch(a){__DEV__&&M.error(a)}},b.mutationId)},a.prototype.fetchQuery=function(a,b,c){return this.fetchQueryObservable(a,b,c).promise},a.prototype.getQueryStore=function(){var a=Object.create(null);return this.queries.forEach(function(b,c){a[c]={variables:b.variables,networkStatus:b.networkStatus,networkError:b.networkError,graphQLErrors:b.graphQLErrors}}),a},a.prototype.resetErrors=function(a){var b=this.queries.get(a);if(b)b.networkError=void 0,b.graphQLErrors=[]},a.prototype.transform=function(a){var b,c=this.transformCache;if(!c.has(a)){var d=this.cache.transformDocument(a),e=(b=this.cache.transformForLink(d),jc([lc],ya(b))),f=this.localState.clientQuery(d),g=e&&this.localState.serverQuery(e),h={document:d,hasClientExports:Lb(d),hasForcedResolvers:this.localState.shouldForceResolvers(d),clientQuery:f,serverQuery:g,defaultVars:Ea(za(d)),asQuery:D(D({},d),{definitions:d.definitions.map(function(a){if("OperationDefinition"===a.kind&&"query"!==a.operation)return D(D({},a),{operation:"query"});else return a})})},i=function(a){if(a&&!c.has(a))c.set(a,h)};i(a),i(d),i(f),i(g)}return c.get(a)},a.prototype.getVariables=function(a,b){return D(D({},this.transform(a).defaultVars),b)},a.prototype.watchQuery=function(a){if(void 0===(a=D(D({},a),{variables:this.getVariables(a.query,a.variables)})).notifyOnNetworkStatusChange)a.notifyOnNetworkStatusChange=!1;var b=new Cd(this),c=new Bc({queryManager:this,queryInfo:b,options:a});return this.queries.set(c.queryId,b),b.init({document:c.query,observableQuery:c,variables:c.variables}),c},a.prototype.query=function(a,b){var c=this;if(void 0===b)b=this.generateQueryId();return __DEV__?M(a.query,"query option is required. You must specify your GraphQL document in the query option."):M(a.query,14),__DEV__?M("Document"===a.query.kind,'You must wrap the query string in a "gql" tag.'):M("Document"===a.query.kind,15),__DEV__?M(!a.returnPartialData,"returnPartialData option only supported on watchQuery."):M(!a.returnPartialData,16),__DEV__?M(!a.pollInterval,"pollInterval option only supported on watchQuery."):M(!a.pollInterval,17),this.fetchQuery(b,a).finally(function(){return c.stopQuery(b)})},a.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},a.prototype.generateRequestId=function(){return this.requestIdCounter++},a.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},a.prototype.stopQueryInStore=function(a){this.stopQueryInStoreNoBroadcast(a),this.broadcastQueries()},a.prototype.stopQueryInStoreNoBroadcast=function(a){var b=this.queries.get(a);if(b)b.stop()},a.prototype.clearStore=function(a){if(void 0===a)a={discardWatches:!0};if(this.cancelPendingFetches(__DEV__?new L("Store reset while query was in flight (not completed in link chain)"):new L(18)),this.queries.forEach(function(a){if(a.observableQuery)a.networkStatus=uc.loading;else a.stop()}),this.mutationStore)this.mutationStore=Object.create(null);return this.cache.reset(a)},a.prototype.getObservableQueries=function(a){var b=this;if(void 0===a)a="active";var c=new Map,d=new Map,e=new Set;if(Array.isArray(a))a.forEach(function(a){if("string"==typeof a)d.set(a,!1);else if(ha(c=a)&&"Document"===c.kind&&Array.isArray(c.definitions))d.set(b.transform(a).document,!1);else if(ha(a)&&a.query)e.add(a);var c});if(this.queries.forEach(function(b,e){var f=b.observableQuery,g=b.document;if(f){if("all"===a)return void c.set(e,f);var h=f.queryName;if("standby"===f.options.fetchPolicy||"active"===a&&!f.hasObservers())return;if("active"===a||h&&d.has(h)||g&&d.has(g)){if(c.set(e,f),h)d.set(h,!0);if(g)d.set(g,!0)}}}),e.size)e.forEach(function(a){var d=oc("legacyOneTimeQuery"),e=b.getQuery(d).init({document:a.query,variables:a.variables}),f=new Bc({queryManager:b,queryInfo:e,options:D(D({},a),{fetchPolicy:"network-only"})});M(f.queryId===d),e.setObservableQuery(f),c.set(d,f)});if(__DEV__&&d.size)d.forEach(function(a,b){if(!a)__DEV__&&M.warn("Unknown query ".concat("string"==typeof b?"named ":"").concat(JSON.stringify(b,null,2)," requested in refetchQueries options.include array"))});return c},a.prototype.reFetchObservableQueries=function(a){var b=this;if(void 0===a)a=!1;var c=[];return this.getObservableQueries(a?"all":"active").forEach(function(d,e){var f=d.options.fetchPolicy;if(d.resetLastResults(),a||"standby"!==f&&"cache-only"!==f)c.push(d.refetch());b.getQuery(e).setDiff(null)}),this.broadcastQueries(),Promise.all(c)},a.prototype.setObservableQuery=function(a){this.getQuery(a.queryId).setObservableQuery(a)},a.prototype.startGraphQLSubscription=function(a){var b=this,c=a.query,d=a.fetchPolicy,e=a.errorPolicy,f=a.variables,g=a.context,h=void 0===g?{}:g;c=this.transform(c).document,f=this.getVariables(c,f);var i=function(a){return b.getObservableFromLink(c,h,a).map(function(f){if("no-cache"!==d){if(Dd(f,e))b.cache.write({query:c,result:f.data,dataId:"ROOT_SUBSCRIPTION",variables:a});b.broadcastQueries()}if(ec(f))throw new vc({graphQLErrors:f.errors});return f})};if(this.transform(c).hasClientExports){var j=this.localState.addExportedVariables(c,f,h).then(i);return new A(function(a){var b=null;return j.then(function(c){return b=c.subscribe(a)},a.error),function(){return b&&b.unsubscribe()}})}return i(f)},a.prototype.stopQuery=function(a){this.stopQueryNoBroadcast(a),this.broadcastQueries()},a.prototype.stopQueryNoBroadcast=function(a){this.stopQueryInStoreNoBroadcast(a),this.removeQuery(a)},a.prototype.removeQuery=function(a){if(this.fetchCancelFns.delete(a),this.queries.has(a))this.getQuery(a).stop(),this.queries.delete(a)},a.prototype.broadcastQueries=function(){if(this.onBroadcast)this.onBroadcast();this.queries.forEach(function(a){return a.notify()})},a.prototype.getLocalState=function(){return this.localState},a.prototype.getObservableFromLink=function(a,b,c,d){var e,f,g=this;if(void 0===d)d=null!==(e=null==b?void 0:b.queryDeduplication)&&void 0!==e?e:this.queryDeduplication;var h=this.transform(a).serverQuery;if(h){var i=this.inFlightLinkObservables,j=this.link,k={query:h,variables:c,operationName:Aa(h)||void 0,context:this.prepareContext(D(D({},b),{forceFetch:!d}))};if(b=k.context,d){var l=i.get(h)||new Map;i.set(h,l);var m=bc(c);if(!(f=l.get(m))){var n=new sc([mb(j,k)]);l.set(m,f=n),n.cleanup(function(){if(l.delete(m)&&l.size<1)i.delete(h)})}}else f=new sc([mb(j,k)])}else f=new sc([A.of({data:{}})]),b=this.prepareContext(b);var o=this.transform(a).clientQuery;if(o)f=dc(f,function(a){return g.localState.runResolvers({document:o,remoteResult:a,context:b,variables:c})});return f},a.prototype.getResultsFromLink=function(a,b,c){var d=a.lastRequestId=this.generateRequestId();return dc(this.getObservableFromLink(a.document,c.context,c.variables),function(e){var f=tc(e.errors);if(d>=a.lastRequestId){if(f&&"none"===c.errorPolicy)throw a.markError(new vc({graphQLErrors:e.errors}));a.markResult(e,c,b),a.markReady()}var g={data:e.data,loading:!1,networkStatus:uc.ready};if(f&&"ignore"!==c.errorPolicy)g.errors=e.errors,g.networkStatus=uc.error;return g},function(b){var c=b.hasOwnProperty("graphQLErrors")?b:new vc({networkError:b});if(d>=a.lastRequestId)a.markError(c);throw c})},a.prototype.fetchQueryObservable=function(a,b,c){var d=this;if(void 0===c)c=uc.loading;var e=this.transform(b.query).document,f=this.getVariables(e,b.variables),g=this.getQuery(a),h=this.defaultOptions.watchQuery,i=b.fetchPolicy,j=void 0===i?h&&h.fetchPolicy||"cache-first":i,k=b.errorPolicy,l=void 0===k?h&&h.errorPolicy||"none":k,m=b.returnPartialData,n=void 0===m?!1:m,o=b.notifyOnNetworkStatusChange,p=void 0===o?!1:o,q=b.context,r=void 0===q?{}:q,s=Object.assign({},b,{query:e,variables:f,fetchPolicy:j,errorPolicy:l,returnPartialData:n,notifyOnNetworkStatusChange:p,context:r}),t=function(a){s.variables=a;var e=d.fetchQueryByPolicy(g,s,c);if("standby"!==s.fetchPolicy&&e.length>0&&g.observableQuery)g.observableQuery.applyNextFetchPolicy("after-fetch",b);return e},u=function(){return d.fetchCancelFns.delete(a)};this.fetchCancelFns.set(a,function(a){u(),setTimeout(function(){return v.cancel(a)})});var v=new sc(this.transform(s.query).hasClientExports?this.localState.addExportedVariables(s.query,s.variables,s.context).then(t):t(s.variables));return v.promise.then(u,u),v},a.prototype.refetchQueries=function(a){var b=this,c=a.updateCache,d=a.include,e=a.optimistic,f=void 0===e?!1:e,g=a.removeOptimistic,h=void 0===g?f?oc("refetchQueries"):void 0:g,i=a.onQueryUpdated,j=new Map;if(d)this.getObservableQueries(d).forEach(function(a,c){j.set(c,{oq:a,lastDiff:b.getQuery(c).getDiff()})});var k=new Map;if(c)this.cache.batch({update:c,optimistic:f&&h||!1,removeOptimistic:h,onWatchUpdated:function(a,b,c){var d=a.watcher instanceof Cd&&a.watcher.observableQuery;if(d){if(i){j.delete(d.queryId);var e=i(d,b,c);if(!0===e)e=d.refetch();if(!1!==e)k.set(d,e);return e}if(null!==i)j.set(d.queryId,{oq:d,lastDiff:c,diff:b})}}});if(j.size)j.forEach(function(a,c){var d,e=a.oq,f=a.lastDiff,g=a.diff;if(i){if(!g){var h=e.queryInfo;h.reset(),g=h.getDiff()}d=i(e,g,f)}if(!i||!0===d)d=e.refetch();if(!1!==d)k.set(e,d);if(c.indexOf("legacyOneTimeQuery")>=0)b.stopQueryNoBroadcast(c)});if(h)this.cache.removeOptimistic(h);return k},a.prototype.fetchQueryByPolicy=function(a,b,c){var d=this,e=b.query,f=b.variables,g=b.fetchPolicy,h=b.refetchWritePolicy,i=b.errorPolicy,j=b.returnPartialData,k=b.context,l=b.notifyOnNetworkStatusChange,m=a.networkStatus;a.init({document:this.transform(e).document,variables:f,networkStatus:c});var n=function(){return a.getDiff(f)},o=function(b,c){if(void 0===c)c=a.networkStatus||uc.loading;var g=b.result;if(__DEV__&&!j&&!ub(g,{}))Ec(b.missing);var h=function(a){return A.of(D({data:a,loading:wc(c),networkStatus:c},b.complete?null:{partial:!0}))};if(g&&d.transform(e).hasForcedResolvers)return d.localState.runResolvers({document:e,remoteResult:{data:g},context:k,variables:f,onlyRunForcedResolvers:!0}).then(function(a){return h(a.data||void 0)});else return h(g)},p="no-cache"===g?0:c===uc.refetch&&"merge"!==h?1:2,q=function(){return d.getResultsFromLink(a,p,{variables:f,context:k,fetchPolicy:g,errorPolicy:i})},r=l&&"number"==typeof m&&m!==c&&wc(c);switch(g){default:case"cache-first":if((s=n()).complete)return[o(s,a.markReady())];if(j||r)return[o(s),q()];else return[q()];case"cache-and-network":var s;if((s=n()).complete||j||r)return[o(s),q()];else return[q()];case"cache-only":return[o(n(),a.markReady())];case"network-only":if(r)return[o(n()),q()];else return[q()];case"no-cache":if(r)return[o(a.getDiff()),q()];else return[q()];case"standby":return[]}},a.prototype.getQuery=function(a){if(a&&!this.queries.has(a))this.queries.set(a,new Cd(this,a));return this.queries.get(a)},a.prototype.prepareContext=function(a){if(void 0===a)a={};var b=this.localState.prepareContext(a);return D(D({},b),{clientAwareness:this.clientAwareness})},a}();function Gd(a,b){return Ib(a,b,b.variables&&{variables:D(D({},a&&a.variables),b.variables)})}function Hd(a){return(Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var Id=!1,Jd=function(){function a(a){var b=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var c=a.uri,d=a.credentials,e=a.headers,f=a.cache,g=a.ssrMode,h=void 0===g?!1:g,i=a.ssrForceFetchDelay,j=void 0===i?0:i,k=a.connectToDevTools,l=void 0===k?"object"===("undefined"==typeof window?"undefined":Hd(window))&&!window.__APOLLO_CLIENT__&&__DEV__:k,m=a.queryDeduplication,n=void 0===m?!0:m,o=a.defaultOptions,p=a.assumeImmutableResults,q=void 0===p?!1:p,r=a.resolvers,s=a.typeDefs,t=a.fragmentMatcher,u=a.name,v=a.version,w=a.link;if(!w)w=c?new lb({uri:c,credentials:d,headers:e}):Ja.empty();if(!f)throw __DEV__?new L("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs"):new L(7);if(this.link=w,this.cache=f,this.disableNetworkFetches=h||j>0,this.queryDeduplication=n,this.defaultOptions=o||Object.create(null),this.typeDefs=s,j)setTimeout(function(){return b.disableNetworkFetches=!1},j);if(this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),l&&"object"===("undefined"==typeof window?"undefined":Hd(window)))window.__APOLLO_CLIENT__=this;if(!Id&&__DEV__)if(Id=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var x=window.navigator,y=x&&x.userAgent,z=void 0;if("string"==typeof y)if(y.indexOf("Chrome/")>-1)z="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm";else if(y.indexOf("Firefox/")>-1)z="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/";if(z)__DEV__&&M.log("Download the Apollo DevTools for a better development experience: "+z)}this.version="3.6.9",this.localState=new yd({cache:f,client:this,resolvers:r,fragmentMatcher:t}),this.queryManager=new Fd({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:n,ssrMode:h,clientAwareness:{name:u,version:v},localState:this.localState,assumeImmutableResults:q,onBroadcast:l?function(){if(b.devToolsHookCb)b.devToolsHookCb({action:{},state:{queries:b.queryManager.getQueryStore(),mutations:b.queryManager.mutationStore||{}},dataWithOptimisticResults:b.cache.extract(!0)})}:void 0})}return a.prototype.stop=function(){this.queryManager.stop()},a.prototype.watchQuery=function(a){if(this.defaultOptions.watchQuery)a=Gd(this.defaultOptions.watchQuery,a);if(this.disableNetworkFetches&&("network-only"===a.fetchPolicy||"cache-and-network"===a.fetchPolicy))a=D(D({},a),{fetchPolicy:"cache-first"});return this.queryManager.watchQuery(a)},a.prototype.query=function(a){if(this.defaultOptions.query)a=Gd(this.defaultOptions.query,a);if(__DEV__?M("cache-and-network"!==a.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):M("cache-and-network"!==a.fetchPolicy,8),this.disableNetworkFetches&&"network-only"===a.fetchPolicy)a=D(D({},a),{fetchPolicy:"cache-first"});return this.queryManager.query(a)},a.prototype.mutate=function(a){if(this.defaultOptions.mutate)a=Gd(this.defaultOptions.mutate,a);return this.queryManager.mutate(a)},a.prototype.subscribe=function(a){return this.queryManager.startGraphQLSubscription(a)},a.prototype.readQuery=function(a,b){if(void 0===b)b=!1;return this.cache.readQuery(a,b)},a.prototype.readFragment=function(a,b){if(void 0===b)b=!1;return this.cache.readFragment(a,b)},a.prototype.writeQuery=function(a){this.cache.writeQuery(a),this.queryManager.broadcastQueries()},a.prototype.writeFragment=function(a){this.cache.writeFragment(a),this.queryManager.broadcastQueries()},a.prototype.__actionHookForDevTools=function(a){this.devToolsHookCb=a},a.prototype.__requestRaw=function(a){return mb(this.link,a)},a.prototype.resetStore=function(){var a=this;return Promise.resolve().then(function(){return a.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(a.resetStoreCallbacks.map(function(a){return a()}))}).then(function(){return a.reFetchObservableQueries()})},a.prototype.clearStore=function(){var a=this;return Promise.resolve().then(function(){return a.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(a.clearStoreCallbacks.map(function(a){return a()}))})},a.prototype.onResetStore=function(a){var b=this;return this.resetStoreCallbacks.push(a),function(){b.resetStoreCallbacks=b.resetStoreCallbacks.filter(function(b){return b!==a})}},a.prototype.onClearStore=function(a){var b=this;return this.clearStoreCallbacks.push(a),function(){b.clearStoreCallbacks=b.clearStoreCallbacks.filter(function(b){return b!==a})}},a.prototype.reFetchObservableQueries=function(a){return this.queryManager.reFetchObservableQueries(a)},a.prototype.refetchQueries=function(a){var b=this.queryManager.refetchQueries(a),c=[],d=[];b.forEach(function(a,b){c.push(b),d.push(a)});var e=Promise.all(d);return e.queries=c,e.results=d,e.catch(function(a){__DEV__&&M.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(a))}),e},a.prototype.getObservableQueries=function(a){if(void 0===a)a="active";return this.queryManager.getObservableQueries(a)},a.prototype.extract=function(a){return this.cache.extract(a)},a.prototype.restore=function(a){return this.cache.restore(a)},a.prototype.addResolvers=function(a){this.localState.addResolvers(a)},a.prototype.setResolvers=function(a){this.localState.setResolvers(a)},a.prototype.getResolvers=function(){return this.localState.getResolvers()},a.prototype.setLocalStateFragmentMatcher=function(a){this.localState.setFragmentMatcher(a)},a.prototype.setLink=function(a){this.link=this.queryManager.link=a},a}(),Kd=function(){function a(){this.getFragmentDoc=md(ia)}return a.prototype.batch=function(a){var b,c=this,d="string"==typeof a.optimistic?a.optimistic:!1===a.optimistic?null:void 0;return this.performTransaction(function(){return b=a.update(c)},d),b},a.prototype.recordOptimisticTransaction=function(a,b){this.performTransaction(a,b)},a.prototype.transformDocument=function(a){return a},a.prototype.identify=function(a){},a.prototype.gc=function(){return[]},a.prototype.modify=function(a){return!1},a.prototype.transformForLink=function(a){return a},a.prototype.readQuery=function(a,b){if(void 0===b)b=!!a.optimistic;return this.read(D(D({},a),{rootId:a.id||"ROOT_QUERY",optimistic:b}))},a.prototype.readFragment=function(a,b){if(void 0===b)b=!!a.optimistic;return this.read(D(D({},a),{query:this.getFragmentDoc(a.fragment,a.fragmentName),rootId:a.id,optimistic:b}))},a.prototype.writeQuery=function(a){var b=a.id,c=a.data,d=E(a,["id","data"]);return this.write(Object.assign(d,{dataId:b||"ROOT_QUERY",result:c}))},a.prototype.writeFragment=function(a){var b=a.id,c=a.data,d=a.fragment,e=a.fragmentName,f=E(a,["id","data","fragment","fragmentName"]);return this.write(Object.assign(f,{query:this.getFragmentDoc(d,e),dataId:b,result:c}))},a.prototype.updateQuery=function(a,b){return this.batch({update:function(c){var d=c.readQuery(a),e=b(d);if(null==e)return d;else return c.writeQuery(D(D({},a),{data:e})),e}})},a.prototype.updateFragment=function(a,b){return this.batch({update:function(c){var d=c.readFragment(a),e=b(d);if(null==e)return d;else return c.writeFragment(D(D({},a),{data:e})),e}})},a}(),Ld=function(a,b,c,d){this.message=a,this.path=b,this.query=c,this.variables=d};function Md(a){var b=new Set([a]);return b.forEach(function(a){if(ha(a)&&function(a){if(__DEV__&&!Object.isFrozen(a))try{Object.freeze(a)}catch(a){if(a instanceof TypeError)return null;throw a}return a}(a)===a)Object.getOwnPropertyNames(a).forEach(function(c){if(ha(a[c]))b.add(a[c])})}),a}function Nd(a){if(__DEV__)Md(a);return a}function Od(a){return(Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var Pd=Object.create(null),Qd=function(){return Pd},Rd=Object.create(null),Sd=function(){function a(a,b){var c=this;this.policies=a,this.group=b,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(a,b){return Nd(na(a)?c.get(a.__ref,b):a&&a[b])},this.canRead=function(a){return na(a)?c.has(a.__ref):"object"===Od(a)},this.toReference=function(a,b){if("string"==typeof a)return ma(a);if(na(a))return a;var d=c.policies.identify(a)[0];if(d){var e=ma(d);if(b)c.merge(d,a);return e}}}return a.prototype.toObject=function(){return D({},this.data)},a.prototype.has=function(a){return void 0!==this.lookup(a,!0)},a.prototype.get=function(a,b){if(this.group.depend(a,b),Rb.call(this.data,a)){var c=this.data[a];if(c&&Rb.call(c,b))return c[b]}if("__typename"===b&&Rb.call(this.policies.rootTypenamesById,a))return this.policies.rootTypenamesById[a];if(this instanceof Wd)return this.parent.get(a,b);else return},a.prototype.lookup=function(a,b){if(b)this.group.depend(a,"__exists");if(Rb.call(this.data,a))return this.data[a];if(this instanceof Wd)return this.parent.lookup(a,b);if(this.policies.rootTypenamesById[a])return Object.create(null);else return},a.prototype.merge=function(a,b){var c,d=this;if(na(a))a=a.__ref;if(na(b))b=b.__ref;var e="string"==typeof a?this.lookup(c=a):a,f="string"==typeof b?this.lookup(c=b):b;if(f){__DEV__?M("string"==typeof c,"store.merge expects a string ID"):M("string"==typeof c,1);var g=new Qb(Yd).merge(e,f);if(this.data[c]=g,g!==e)if(delete this.refs[c],this.group.caching){var h=Object.create(null);if(!e)h.__exists=1;if(Object.keys(f).forEach(function(a){if(!e||e[a]!==g[a]){h[a]=1;var b=Wb(a);if(b!==a&&!d.policies.hasKeyArgs(g.__typename,b))h[b]=1;if(void 0===g[a]&&!(d instanceof Wd))delete g[a]}}),h.__typename&&(!e||!e.__typename)&&this.policies.rootTypenamesById[c]===g.__typename)delete h.__typename;Object.keys(h).forEach(function(a){return d.group.dirty(c,a)})}}},a.prototype.modify=function(a,b){var c=this,d=this.lookup(a);if(d){var e=Object.create(null),f=!1,g=!0,h={DELETE:Pd,INVALIDATE:Rd,isReference:na,toReference:this.toReference,canRead:this.canRead,readField:function(b,d){return c.policies.readField("string"==typeof b?{fieldName:b,from:d||ma(a)}:b,{store:c})}};if(Object.keys(d).forEach(function(i){var j=Wb(i),k=d[i];if(void 0!==k){var l="function"==typeof b?b:b[i]||b[j];if(l){var m=l===Qd?Pd:l(Nd(k),D(D({},h),{fieldName:j,storeFieldName:i,storage:c.getStorage(a,i)}));if(m===Rd)c.group.dirty(a,i);else{if(m===Pd)m=void 0;if(m!==k)e[i]=m,f=!0,k=m}}if(void 0!==k)g=!1}}),f){if(this.merge(a,e),g){if(this instanceof Wd)this.data[a]=void 0;else delete this.data[a];this.group.dirty(a,"__exists")}return!0}}return!1},a.prototype.delete=function(a,b,c){var d,e=this.lookup(a);if(e){var f=this.getFieldValue(e,"__typename"),g=b&&c?this.policies.getStoreFieldName({typename:f,fieldName:b,args:c}):b;return this.modify(a,g?((d={})[g]=Qd,d):Qd)}return!1},a.prototype.evict=function(a,b){var c=!1;if(a.id){if(Rb.call(this.data,a.id))c=this.delete(a.id,a.fieldName,a.args);if(this instanceof Wd&&this!==b)c=this.parent.evict(a,b)||c;if(a.fieldName||c)this.group.dirty(a.id,a.fieldName||"__exists")}return c},a.prototype.clear=function(){this.replace(null)},a.prototype.extract=function(){var a=this,b=this.toObject(),c=[];if(this.getRootIdSet().forEach(function(b){if(!Rb.call(a.policies.rootTypenamesById,b))c.push(b)}),c.length)b.__META={extraRootIds:c.sort()};return b},a.prototype.replace=function(a){var b=this;if(Object.keys(this.data).forEach(function(c){if(!a||!Rb.call(a,c))b.delete(c)}),a){var c=a.__META,d=E(a,["__META"]);if(Object.keys(d).forEach(function(a){b.merge(a,d[a])}),c)c.extraRootIds.forEach(this.retain,this)}},a.prototype.retain=function(a){return this.rootIds[a]=(this.rootIds[a]||0)+1},a.prototype.release=function(a){if(this.rootIds[a]>0){var b=--this.rootIds[a];if(!b)delete this.rootIds[a];return b}return 0},a.prototype.getRootIdSet=function(a){if(void 0===a)a=new Set;if(Object.keys(this.rootIds).forEach(a.add,a),this instanceof Wd)this.parent.getRootIdSet(a);else Object.keys(this.policies.rootTypenamesById).forEach(a.add,a);return a},a.prototype.gc=function(){var a=this,b=this.getRootIdSet(),c=this.toObject();b.forEach(function(d){if(Rb.call(c,d))Object.keys(a.findChildRefIds(d)).forEach(b.add,b),delete c[d]});var d=Object.keys(c);if(d.length){for(var e=this;e instanceof Wd;)e=e.parent;d.forEach(function(a){return e.delete(a)})}return d},a.prototype.findChildRefIds=function(a){if(!Rb.call(this.refs,a)){var b=this.refs[a]=Object.create(null),c=this.data[a];if(!c)return b;var d=new Set([c]);d.forEach(function(a){if(na(a))b[a.__ref]=!0;if(ha(a))Object.keys(a).forEach(function(b){var c=a[b];if(ha(c))d.add(c)})})}return this.refs[a]},a.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},a}(),Td=function(){function a(a,b){if(void 0===b)b=null;this.caching=a,this.parent=b,this.d=null,this.resetCaching()}return a.prototype.resetCaching=function(){this.d=this.caching?jd():null,this.keyMaker=new Eb(Fb)},a.prototype.depend=function(a,b){if(this.d){this.d(Ud(a,b));var c=Wb(b);if(c!==b)this.d(Ud(a,c));if(this.parent)this.parent.depend(a,b)}},a.prototype.dirty=function(a,b){if(this.d)this.d.dirty(Ud(a,b),"__exists"===b?"forget":"setDirty")},a}();function Ud(a,b){return b+"#"+a}function Vd(a,b){if(Zd(a))a.group.depend(b,"__exists")}!function(a){var b=function(a){function b(b){var c=b.policies,d=b.resultCaching,e=void 0===d?!0:d,f=b.seed,g=a.call(this,c,new Td(e))||this;if(g.stump=new Xd(g),g.storageTrie=new Eb(Fb),f)g.replace(f);return g}return C(b,a),b.prototype.addLayer=function(a,b){return this.stump.addLayer(a,b)},b.prototype.removeLayer=function(){return this},b.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},b}(a);a.Root=b}(Sd||(Sd={}));var Wd=function(a){function b(b,c,d,e){var f=a.call(this,c.policies,e)||this;return f.id=b,f.parent=c,f.replay=d,f.group=e,d(f),f}return C(b,a),b.prototype.addLayer=function(a,c){return new b(a,this,c,this.group)},b.prototype.removeLayer=function(a){var b=this,c=this.parent.removeLayer(a);if(a===this.id){if(this.group.caching)Object.keys(this.data).forEach(function(a){var d=b.data[a],e=c.lookup(a);if(!e)b.delete(a);else if(!d)b.group.dirty(a,"__exists"),Object.keys(e).forEach(function(c){b.group.dirty(a,c)});else if(d!==e)Object.keys(d).forEach(function(c){if(!ub(d[c],e[c]))b.group.dirty(a,c)})});return c}if(c===this.parent)return this;else return c.addLayer(this.id,this.replay)},b.prototype.toObject=function(){return D(D({},this.parent.toObject()),this.data)},b.prototype.findChildRefIds=function(b){var c=this.parent.findChildRefIds(b);return Rb.call(this.data,b)?D(D({},c),a.prototype.findChildRefIds.call(this,b)):c},b.prototype.getStorage=function(){for(var a=this.parent;a.parent;)a=a.parent;return a.getStorage.apply(a,arguments)},b}(Sd),Xd=function(a){function b(b){return a.call(this,"EntityStore.Stump",b,function(){},new Td(b.group.caching,b.group))||this}return C(b,a),b.prototype.removeLayer=function(){return this},b.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},b}(Wd);function Yd(a,b,c){var d=a[c],e=b[c];return ub(d,e)?d:e}function Zd(a){return!!(a instanceof Sd&&a.group.caching)}function $d(a){return[a.selectionSet,a.objectOrReference,a.context,a.context.canonizeResults]}var _d=function(){function a(a){var b=this;this.knownResults=new(Fb?WeakMap:Map),this.config=Ib(a,{addTypename:!1!==a.addTypename,canonizeResults:Ub(a)}),this.canon=a.canon||new ac,this.executeSelectionSet=md(function(a){var c,d=a.context.canonizeResults,e=$d(a);e[3]=!d;var f=(c=b.executeSelectionSet).peek.apply(c,e);if(f)if(d)return D(D({},f),{result:b.canon.admit(f.result)});else return f;return Vd(a.context.store,a.enclosingRef.__ref),b.execSelectionSetImpl(a)},{max:this.config.resultCacheMaxSize,keyArgs:$d,makeCacheKey:function(a,b,c,d){if(Zd(c.store))return c.store.makeCacheKey(a,na(b)?b.__ref:b,c.varString,d)}}),this.executeSubSelectedArray=md(function(a){return Vd(a.context.store,a.enclosingRef.__ref),b.execSubSelectedArrayImpl(a)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var b=a.field,c=a.array,d=a.context;if(Zd(d.store))return d.store.makeCacheKey(b,c,d.varString)}})}return a.prototype.resetCanon=function(){this.canon=new ac},a.prototype.diffQueryAgainstStore=function(a){var b=a.store,c=a.query,d=a.rootId,e=void 0===d?"ROOT_QUERY":d,f=a.variables,g=a.returnPartialData,h=void 0===g?!0:g,i=a.canonizeResults,j=void 0===i?this.config.canonizeResults:i,k=this.config.cache.policies;f=D(D({},Ea(Ca(c))),f);var l,m=ma(e),n=this.executeSelectionSet({selectionSet:Da(c).selectionSet,objectOrReference:m,enclosingRef:m,context:{store:b,query:c,policies:k,variables:f,varString:bc(f),canonizeResults:j,fragmentMap:ja(Ba(c))}});if(n.missing)if(l=[new Ld(ae(n.missing),n.missing,c,f)],!h)throw l[0];return{result:n.result,complete:!l,missing:l}},a.prototype.isFresh=function(a,b,c,d){if(Zd(d.store)&&this.knownResults.get(a)===c){var e=this.executeSelectionSet.peek(c,b,d,this.canon.isKnown(a));if(e&&a===e.result)return!0}return!1},a.prototype.execSelectionSetImpl=function(a){var b=this,c=a.selectionSet,d=a.objectOrReference,e=a.enclosingRef,f=a.context;if(na(d)&&!f.policies.rootTypenamesById[d.__ref]&&!f.store.has(d.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(d.__ref," object")};var g,h=f.variables,i=f.policies,j=f.store.getFieldValue(d,"__typename"),k=[],l=new Qb;if(this.config.addTypename&&"string"==typeof j&&!i.rootIdsByTypename[j])k.push({__typename:j});function m(a,b){var c;if(a.missing)g=l.merge(g,((c={})[b]=a.missing,c));return a.result}var n=new Set(c.selections);n.forEach(function(a){var c,o;if(Jb(a,h))if(wa(a)){var p=i.readField({fieldName:a.name.value,field:a,variables:f.variables,from:d},f),q=ua(a);if(void 0===p){if(!kc.added(a))g=l.merge(g,((c={})[q]="Can't find field '".concat(a.name.value,"' on ").concat(na(d)?d.__ref+" object":"object "+JSON.stringify(d,null,2)),c))}else if(Zb(p))p=m(b.executeSubSelectedArray({field:a,array:p,enclosingRef:e,context:f}),q);else if(!a.selectionSet){if(f.canonizeResults)p=b.canon.pass(p)}else if(null!=p)p=m(b.executeSelectionSet({selectionSet:a.selectionSet,objectOrReference:p,enclosingRef:na(p)?p:e,context:f}),q);if(void 0!==p)k.push(((o={})[q]=p,o))}else{var r=ka(a,f.fragmentMap);if(r&&i.fragmentMatches(r,j))r.selectionSet.selections.forEach(n.add,n)}});var o={result:Ob(k),missing:g},p=f.canonizeResults?this.canon.admit(o):Nd(o);if(p.result)this.knownResults.set(p.result,c);return p},a.prototype.execSubSelectedArrayImpl=function(a){var b,c=this,d=a.field,e=a.array,f=a.enclosingRef,g=a.context,h=new Qb;function i(a,c){var d;if(a.missing)b=h.merge(b,((d={})[c]=a.missing,d));return a.result}if(d.selectionSet)e=e.filter(g.store.canRead);return e=e.map(function(a,b){if(null===a)return null;if(Zb(a))return i(c.executeSubSelectedArray({field:d,array:a,enclosingRef:f,context:g}),b);if(d.selectionSet)return i(c.executeSelectionSet({selectionSet:d.selectionSet,objectOrReference:a,enclosingRef:na(a)?a:f,context:g}),b);if(__DEV__)!function(a,b,c){if(!b.selectionSet){var d=new Set([c]);d.forEach(function(c){if(ha(c))__DEV__?M(!na(c),"Missing selection set for object of type ".concat(function(a,b){return na(b)?a.get(b.__ref,"__typename"):b&&b.__typename}(a,c)," returned for query field ").concat(b.name.value)):M(!na(c),5),Object.values(c).forEach(d.add,d)})}}(g.store,d,a);return a}),{result:g.canonizeResults?this.canon.admit(e):e,missing:b}},a}();function ae(a){try{JSON.stringify(a,function(a,b){if("string"==typeof b)throw b;return b})}catch(a){return a}}var be=Object.create(null);function ce(a){var b=JSON.stringify(a);return be[b]||(be[b]=Object.create(null))}function de(a){var b=ce(a);return b.keyFieldsFn||(b.keyFieldsFn=function(b,c){var d=function(a,b){return c.readField(b,a)},e=c.keyObject=fe(a,function(a){var e=he(c.storeObject,a,d);if(void 0===e&&b!==c.storeObject&&Rb.call(b,a[0]))e=he(b,a,ge);return __DEV__?M(void 0!==e,"Missing field '".concat(a.join("."),"' while extracting keyFields from ").concat(JSON.stringify(b))):M(void 0!==e,2),e});return"".concat(c.typename,":").concat(JSON.stringify(e))})}function ee(a){var b=ce(a);return b.keyArgsFn||(b.keyArgsFn=function(b,c){var d=c.field,e=c.variables,f=c.fieldName,g=fe(a,function(a){var c=a[0],f=c.charAt(0);if("@"!==f)if("$"!==f){if(b)return he(b,a)}else{var g=c.slice(1);if(e&&Rb.call(e,g)){var h=a.slice(0);return h[0]=g,he(e,h)}}else if(d&&tc(d.directives)){var i=c.slice(1),j=d.directives.find(function(a){return a.name.value===i}),k=j&&ta(j,e);return k&&he(k,a.slice(1))}}),h=JSON.stringify(g);if(b||"{}"!==h)f+=":"+h;return f})}function fe(a,b){var c=new Qb;return function a(b){var c=ce(b);if(!c.paths){var d=c.paths=[],e=[];b.forEach(function(c,f){if(Zb(c))a(c).forEach(function(a){return d.push(e.concat(a))}),e.length=0;else if(e.push(c),!Zb(b[f+1]))d.push(e.slice(0)),e.length=0})}return c.paths}(a).reduce(function(a,d){var e,f=b(d);if(void 0!==f){for(var g=d.length-1;g>=0;--g)(e={})[d[g]]=f,f=e;a=c.merge(a,f)}return a},Object.create(null))}function ge(a,b){return a[b]}function he(a,b,c){return c=c||ge,ie(b.reduce(function a(b,d){return Zb(b)?b.map(function(b){return a(b,d)}):b&&c(b,d)},a))}function ie(a){if(ha(a))if(Zb(a))return a.map(ie);else return fe(Object.keys(a).sort(),function(b){return he(a,b)});return a}function je(a){return void 0!==a.args?a.args:a.field?ta(a.field,a.variables):null}qa.setStringify(bc);var ke=function(){},le=function(a,b){return b.fieldName},me=function(a,b,c){return(0,c.mergeObjects)(a,b)},ne=function(a,b){return b},oe=function(){function a(a){if(this.config=a,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=D({dataIdFromObject:Sb},a),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),a.possibleTypes)this.addPossibleTypes(a.possibleTypes);if(a.typePolicies)this.addTypePolicies(a.typePolicies)}return a.prototype.identify=function(a,b){var c,d=this,e=b&&(b.typename||(null===(c=b.storeObject)||void 0===c?void 0:c.__typename))||a.__typename;if(e===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var f,g=b&&b.storeObject||a,h=D(D({},b),{typename:e,storeObject:g,readField:b&&b.readField||function(){var a=qe(arguments,g);return d.readField(a,{store:d.cache.data,variables:a.variables})}}),i=e&&this.getTypePolicy(e),j=i&&i.keyFn||this.config.dataIdFromObject;j;){var k=j(a,h);if(Zb(k))j=de(k);else{f=k;break}}return f=f?String(f):void 0,h.keyObject?[f,h.keyObject]:[f]},a.prototype.addTypePolicies=function(a){var b=this;Object.keys(a).forEach(function(c){var d=a[c],e=d.queryType,f=d.mutationType,g=d.subscriptionType,h=E(d,["queryType","mutationType","subscriptionType"]);if(e)b.setRootTypename("Query",c);if(f)b.setRootTypename("Mutation",c);if(g)b.setRootTypename("Subscription",c);if(Rb.call(b.toBeAdded,c))b.toBeAdded[c].push(h);else b.toBeAdded[c]=[h]})},a.prototype.updateTypePolicy=function(a,b){var c=this,d=this.getTypePolicy(a),e=b.keyFields,f=b.fields;function g(a,b){a.merge="function"==typeof b?b:!0===b?me:!1===b?ne:a.merge}if(g(d,b.merge),d.keyFn=!1===e?ke:Zb(e)?de(e):"function"==typeof e?e:d.keyFn,f)Object.keys(f).forEach(function(b){var d=c.getFieldPolicy(a,b,!0),e=f[b];if("function"==typeof e)d.read=e;else{var h=e.keyArgs,i=e.read,j=e.merge;if(d.keyFn=!1===h?le:Zb(h)?ee(h):"function"==typeof h?h:d.keyFn,"function"==typeof i)d.read=i;g(d,j)}if(d.read&&d.merge)d.keyFn=d.keyFn||le})},a.prototype.setRootTypename=function(a,b){if(void 0===b)b=a;var c="ROOT_"+a.toUpperCase(),d=this.rootTypenamesById[c];if(b!==d){if(__DEV__?M(!d||d===a,"Cannot change root ".concat(a," __typename more than once")):M(!d||d===a,3),d)delete this.rootIdsByTypename[d];this.rootIdsByTypename[b]=c,this.rootTypenamesById[c]=b}},a.prototype.addPossibleTypes=function(a){var b=this;this.usingPossibleTypes=!0,Object.keys(a).forEach(function(c){b.getSupertypeSet(c,!0),a[c].forEach(function(a){b.getSupertypeSet(a,!0).add(c);var d=a.match(Vb);if(!d||d[0]!==a)b.fuzzySubtypes.set(a,new RegExp(a))})})},a.prototype.getTypePolicy=function(a){var b=this;if(!Rb.call(this.typePolicies,a)){var c=this.typePolicies[a]=Object.create(null);c.fields=Object.create(null);var d=this.supertypeMap.get(a);if(d&&d.size)d.forEach(function(a){var d=b.getTypePolicy(a),e=d.fields,f=E(d,["fields"]);Object.assign(c,f),Object.assign(c.fields,e)})}var e=this.toBeAdded[a];if(e&&e.length)e.splice(0).forEach(function(c){b.updateTypePolicy(a,c)});return this.typePolicies[a]},a.prototype.getFieldPolicy=function(a,b,c){if(a){var d=this.getTypePolicy(a).fields;return d[b]||c&&(d[b]=Object.create(null))}},a.prototype.getSupertypeSet=function(a,b){var c=this.supertypeMap.get(a);if(!c&&b)this.supertypeMap.set(a,c=new Set);return c},a.prototype.fragmentMatches=function(a,b,c,d){var e=this;if(!a.typeCondition)return!0;if(!b)return!1;var f=a.typeCondition.name.value;if(b===f)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(f))for(var g=this.getSupertypeSet(b,!0),h=[g],i=function(a){var b=e.getSupertypeSet(a,!1);if(b&&b.size&&h.indexOf(b)<0)h.push(b)},j=!(!c||!this.fuzzySubtypes.size),k=!1,l=0;l<h.length;++l){var m=h[l];if(m.has(f)){if(!g.has(f)){if(k)__DEV__&&M.warn("Inferring subtype ".concat(b," of supertype ").concat(f));g.add(f)}return!0}if(m.forEach(i),j&&l===h.length-1&&Xb(a.selectionSet,c,d))j=!1,k=!0,this.fuzzySubtypes.forEach(function(a,c){var d=b.match(a);if(d&&d[0]===b)i(c)})}return!1},a.prototype.hasKeyArgs=function(a,b){var c=this.getFieldPolicy(a,b,!1);return!(!c||!c.keyFn)},a.prototype.getStoreFieldName=function(a){var b,c=a.typename,d=a.fieldName,e=this.getFieldPolicy(c,d,!1),f=e&&e.keyFn;if(f&&c)for(var g={typename:c,fieldName:d,field:a.field||null,variables:a.variables},h=je(a);f;){var i=f(h,g);if(Zb(i))f=ee(i);else{b=i||d;break}}if(void 0===b)b=a.field?function(a,b){var c=null;if(a.directives)c={},a.directives.forEach(function(a){if(c[a.name.value]={},a.arguments)a.arguments.forEach(function(d){var e=d.name,f=d.value;return oa(c[a.name.value],e,f,b)})});var d=null;if(a.arguments&&a.arguments.length)d={},a.arguments.forEach(function(a){var c=a.name,e=a.value;return oa(d,c,e,b)});return qa(a.name.value,d,c)}(a.field,a.variables):qa(d,je(a));if(!1===b)return d;else return d===Wb(b)?b:d+":"+b},a.prototype.readField=function(a,b){var c=a.from;if(c){if(a.field||a.fieldName){if(void 0===a.typename){var d=b.store.getFieldValue(c,"__typename");if(d)a.typename=d}var e=this.getStoreFieldName(a),f=Wb(e),g=b.store.getFieldValue(c,e),h=this.getFieldPolicy(a.typename,f,!1),i=h&&h.read;if(i){var j=pe(this,c,a,b,b.store.getStorage(na(c)?c.__ref:c,e));return sd.withValue(this.cache,i,[g,j])}return g}}},a.prototype.getReadFunction=function(a,b){var c=this.getFieldPolicy(a,b,!1);return c&&c.read},a.prototype.getMergeFunction=function(a,b,c){var d=this.getFieldPolicy(a,b,!1),e=d&&d.merge;if(!e&&c)e=(d=this.getTypePolicy(c))&&d.merge;return e},a.prototype.runMergeFunction=function(a,b,c,d,e){var f=c.field,g=c.typename,h=c.merge;if(h===me)return re(d.store)(a,b);if(h===ne)return b;if(d.overwrite)a=void 0;return h(a,b,pe(this,void 0,{typename:g,fieldName:f.name.value,field:f,variables:d.variables},d,e||Object.create(null)))},a}();function pe(a,b,c,d,e){var f=a.getStoreFieldName(c),g=Wb(f),h=c.variables||d.variables,i=d.store,j=i.toReference,k=i.canRead;return{args:je(c),field:c.field||null,fieldName:g,storeFieldName:f,variables:h,isReference:na,toReference:j,storage:e,cache:a.cache,canRead:k,readField:function(){return a.readField(qe(arguments,b,h),d)},mergeObjects:re(d.store)}}function qe(a,b,c){var d,e,f,g=a[0],h=a[1],i=a.length;if("string"==typeof g)d={fieldName:g,from:i>1?h:b};else if(d=D({},g),!Rb.call(d,"from"))d.from=b;if(__DEV__&&void 0===d.from)__DEV__&&M.warn("Undefined 'from' passed to readField with arguments ".concat((e=Array.from(a),f=oc("stringifyForDisplay"),JSON.stringify(e,function(a,b){return void 0===b?f:b}).split(JSON.stringify(f)).join("<undefined>"))));if(void 0===d.variables)d.variables=c;return d}function re(a){return function(b,c){if(Zb(b)||Zb(c))throw __DEV__?new L("Cannot automatically merge arrays"):new L(4);if(ha(b)&&ha(c)){var d=a.getFieldValue(b,"__typename"),e=a.getFieldValue(c,"__typename");if(d&&e&&d!==e)return c;if(na(b)&&Yb(c))return a.merge(b.__ref,c),b;if(Yb(b)&&na(c))return a.merge(b,c.__ref),c;if(Yb(b)&&Yb(c))return D(D({},b),c)}return c}}function se(a){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function te(a,b,c){var d="".concat(b).concat(c),e=a.flavors.get(d);if(!e)a.flavors.set(d,e=a.clientOnly===b&&a.deferred===c?a:D(D({},a),{clientOnly:b,deferred:c}));return e}var ue=function(){function a(a,b){this.cache=a,this.reader=b}return a.prototype.writeToStore=function(a,b){var c=this,d=b.query,e=b.result,f=b.dataId,g=b.variables,h=b.overwrite,i=za(d),j=new Qb;g=D(D({},Ea(i)),g);var k={store:a,written:Object.create(null),merge:function(a,b){return j.merge(a,b)},variables:g,varString:bc(g),fragmentMap:ja(Ba(d)),overwrite:!!h,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map},l=this.processSelectionSet({result:e||Object.create(null),dataId:f,selectionSet:i.selectionSet,mergeTree:{map:new Map},context:k});if(!na(l))throw __DEV__?new L("Could not identify object ".concat(JSON.stringify(e))):new L(6);return k.incomingById.forEach(function(b,d){var e=b.storeObject,f=b.mergeTree,g=b.fieldNodeSet,h=ma(d);if(f&&f.map.size){var i=c.applyMerges(f,h,e,k);if(na(i))return;e=i}if(__DEV__&&!k.overwrite){var j=Object.create(null);g.forEach(function(a){if(a.selectionSet)j[a.name.value]=!0});Object.keys(e).forEach(function(a){if(function(a){return!0===j[Wb(a)]}(a)&&!function(a){var b=f&&f.map.get(a);return Boolean(b&&b.info&&b.info.merge)}(a))!function(a,b,c,d){var e=function(a){var b=d.getFieldValue(a,c);return"object"===se(b)&&b},f=e(a);if(!f)return;var g=e(b);if(!g)return;if(na(f))return;if(ub(f,g))return;if(Object.keys(f).every(function(a){return void 0!==d.getFieldValue(g,a)}))return;var h=d.getFieldValue(a,"__typename")||d.getFieldValue(b,"__typename"),i=Wb(c),j="".concat(h,".").concat(i);if(ze.has(j))return;ze.add(j);var k=[];if(!Zb(f)&&!Zb(g))[f,g].forEach(function(a){var b=d.getFieldValue(a,"__typename");if("string"==typeof b&&!k.includes(b))k.push(b)});__DEV__&&M.warn("Cache data may be lost when replacing the ".concat(i," field of a ").concat(h," object.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(k.length?"either ensure all objects of type "+k.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(j," field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(f).slice(0,1e3),"\n  incoming: ").concat(JSON.stringify(g).slice(0,1e3),"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"))}(h,e,a,k.store)})}a.merge(d,e)}),a.retain(l.__ref),l},a.prototype.processSelectionSet=function(a){var b=this,c=a.dataId,d=a.result,e=a.selectionSet,f=a.context,g=a.mergeTree,h=this.cache.policies,i=Object.create(null),j=c&&h.rootTypenamesById[c]||va(d,e,f.fragmentMap)||c&&f.store.get(c,"__typename");if("string"==typeof j)i.__typename=j;var k=function(){var a=qe(arguments,i,f.variables);if(na(a.from)){var b=f.incomingById.get(a.from.__ref);if(b){var c=h.readField(D(D({},a),{from:b.storeObject}),f);if(void 0!==c)return c}}return h.readField(a,f)},l=new Set;this.flattenFields(e,d,f,j).forEach(function(a,c){var e,f=ua(c),m=d[f];if(l.add(c),void 0!==m){var n=h.getStoreFieldName({typename:j,fieldName:c.name.value,field:c,variables:a.variables}),o=we(g,n),p=b.processFieldValue(m,c,c.selectionSet?te(a,!1,!1):a,o),q=void 0;if(c.selectionSet&&(na(p)||Yb(p)))q=k("__typename",p);var r=h.getMergeFunction(j,c.name.value,q);if(r)o.info={field:c,typename:j,merge:r};else ye(g,n);i=a.merge(i,((e={})[n]=p,e))}else if(__DEV__&&!a.clientOnly&&!a.deferred&&!kc.added(c)&&!h.getReadFunction(j,c.name.value))__DEV__&&M.error("Missing field '".concat(ua(c),"' while writing result ").concat(JSON.stringify(d,null,2)).substring(0,1e3))});try{var m=h.identify(d,{typename:j,selectionSet:e,fragmentMap:f.fragmentMap,storeObject:i,readField:k}),n=m[0],o=m[1];if(c=c||n,o)i=f.merge(i,o)}catch(a){if(!c)throw a}if("string"==typeof c){var p=ma(c),q=f.written[c]||(f.written[c]=[]);if(q.indexOf(e)>=0)return p;if(q.push(e),this.reader&&this.reader.isFresh(d,p,e,f))return p;var r=f.incomingById.get(c);if(r)r.storeObject=f.merge(r.storeObject,i),r.mergeTree=function a(b,c){if(b===c||!c||xe(c))return b;if(!b||xe(b))return c;var d=b.info&&c.info?D(D({},b.info),c.info):b.info||c.info,e=b.map.size&&c.map.size,f=e?new Map:b.map.size?b.map:c.map,g={info:d,map:f};if(e){var h=new Set(c.map.keys());b.map.forEach(function(b,d){g.map.set(d,a(b,c.map.get(d))),h.delete(d)}),h.forEach(function(d){g.map.set(d,a(c.map.get(d),b.map.get(d)))})}return g}(r.mergeTree,g),l.forEach(function(a){return r.fieldNodeSet.add(a)});else f.incomingById.set(c,{storeObject:i,mergeTree:xe(g)?void 0:g,fieldNodeSet:l});return p}return i},a.prototype.processFieldValue=function(a,b,c,d){var e=this;if(!b.selectionSet||null===a)return __DEV__?yc(a):a;if(Zb(a))return a.map(function(a,f){var g=e.processFieldValue(a,b,c,we(d,f));return ye(d,f),g});else return this.processSelectionSet({result:a,selectionSet:b.selectionSet,context:c,mergeTree:d})},a.prototype.flattenFields=function(a,b,c,d){if(void 0===d)d=va(b,a,c.fragmentMap);var e=new Map,f=this.cache.policies,g=new Eb(!1);return function a(h,i){var j=g.lookup(h,i.clientOnly,i.deferred);if(!j.visited)j.visited=!0,h.selections.forEach(function(g){if(Jb(g,c.variables)){var h=i.clientOnly,j=i.deferred;if((!h||!j)&&tc(g.directives))g.directives.forEach(function(a){var b=a.name.value;if("client"===b)h=!0;if("defer"===b){var d=ta(a,c.variables);if(!d||!1!==d.if)j=!0}});if(wa(g)){var k=e.get(g);if(k)h=h&&k.clientOnly,j=j&&k.deferred;e.set(g,te(c,h,j))}else{var l=ka(g,c.fragmentMap);if(l&&f.fragmentMatches(l,d,b,c.variables))a(l.selectionSet,te(c,h,j))}}})}(a,c),e},a.prototype.applyMerges=function(a,b,c,d,e){var f,g=this;if(a.map.size&&!na(c)){var h,i=!Zb(c)&&(na(b)||Yb(b))?b:void 0,j=c;if(i&&!e)e=[na(i)?i.__ref:i];var k=function(a,b){return Zb(a)?"number"==typeof b?a[b]:void 0:d.store.getFieldValue(a,String(b))};if(a.map.forEach(function(a,b){var c=k(i,b),f=k(j,b);if(void 0!==f){if(e)e.push(b);var l=g.applyMerges(a,c,f,d,e);if(l!==f)(h=h||new Map).set(b,l);if(e)M(e.pop()===b)}}),h)c=Zb(j)?j.slice(0):D({},j),h.forEach(function(a,b){c[b]=a})}if(a.info)return this.cache.policies.runMergeFunction(b,c,a.info,d,e&&(f=d.store).getStorage.apply(f,e));else return c},a}(),ve=[];function we(a,b){var c=a.map;if(!c.has(b))c.set(b,ve.pop()||{map:new Map});return c.get(b)}function xe(a){return!a||!(a.info||a.map.size)}function ye(a,b){var c=a.map,d=c.get(b);if(d&&xe(d))ve.push(d),c.delete(b)}var ze=new Set;var Ae=function(a){function b(b){if(void 0===b)b={};var c=a.call(this)||this;return c.watches=new Set,c.typenameDocumentCache=new Map,c.makeVar=wd,c.txCount=0,c.config=function(a){return Ib(Tb,a)}(b),c.addTypename=!!c.config.addTypename,c.policies=new oe({cache:c,dataIdFromObject:c.config.dataIdFromObject,possibleTypes:c.config.possibleTypes,typePolicies:c.config.typePolicies}),c.init(),c}return C(b,a),b.prototype.init=function(){var a=this.data=new Sd.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=a.stump,this.resetResultCache()},b.prototype.resetResultCache=function(a){var b=this,c=this.storeReader;this.storeWriter=new ue(this,this.storeReader=new _d({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Ub(this.config),canon:a?void 0:c&&c.canon})),this.maybeBroadcastWatch=md(function(a,c){return b.broadcastWatch(a,c)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(a){var c=a.optimistic?b.optimisticData:b.data;if(Zd(c)){var d=a.optimistic,e=a.rootId,f=a.variables;return c.makeCacheKey(a.query,a.callback,bc({optimistic:d,rootId:e,variables:f}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(a){return a.resetCaching()})},b.prototype.restore=function(a){if(this.init(),a)this.data.replace(a);return this},b.prototype.extract=function(a){if(void 0===a)a=!1;return(a?this.optimisticData:this.data).extract()},b.prototype.read=function(a){var b=a.returnPartialData,c=void 0===b?!1:b;try{return this.storeReader.diffQueryAgainstStore(D(D({},a),{store:a.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:c})).result||null}catch(a){if(a instanceof Ld)return null;throw a}},b.prototype.write=function(a){try{return++this.txCount,this.storeWriter.writeToStore(this.data,a)}finally{if(!--this.txCount&&!1!==a.broadcast)this.broadcastWatches()}},b.prototype.modify=function(a){if(Rb.call(a,"id")&&!a.id)return!1;var b=a.optimistic?this.optimisticData:this.data;try{return++this.txCount,b.modify(a.id||"ROOT_QUERY",a.fields)}finally{if(!--this.txCount&&!1!==a.broadcast)this.broadcastWatches()}},b.prototype.diff=function(a){return this.storeReader.diffQueryAgainstStore(D(D({},a),{store:a.optimistic?this.optimisticData:this.data,rootId:a.id||"ROOT_QUERY",config:this.config}))},b.prototype.watch=function(a){var b,c=this;if(!this.watches.size)ud(b=this).vars.forEach(function(a){return a.attachCache(b)});if(this.watches.add(a),a.immediate)this.maybeBroadcastWatch(a);return function(){if(c.watches.delete(a)&&!c.watches.size)vd(c);c.maybeBroadcastWatch.forget(a)}},b.prototype.gc=function(a){bc.reset();var b=this.optimisticData.gc();if(a&&!this.txCount)if(a.resetResultCache)this.resetResultCache(a.resetResultIdentities);else if(a.resetResultIdentities)this.storeReader.resetCanon();return b},b.prototype.retain=function(a,b){return(b?this.optimisticData:this.data).retain(a)},b.prototype.release=function(a,b){return(b?this.optimisticData:this.data).release(a)},b.prototype.identify=function(a){if(na(a))return a.__ref;try{return this.policies.identify(a)[0]}catch(a){__DEV__&&M.warn(a)}},b.prototype.evict=function(a){if(!a.id){if(Rb.call(a,"id"))return!1;a=D(D({},a),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(a,this.data)}finally{if(!--this.txCount&&!1!==a.broadcast)this.broadcastWatches()}},b.prototype.reset=function(a){var b=this;if(this.init(),bc.reset(),a&&a.discardWatches)this.watches.forEach(function(a){return b.maybeBroadcastWatch.forget(a)}),this.watches.clear(),vd(this);else this.broadcastWatches();return Promise.resolve()},b.prototype.removeOptimistic=function(a){var b=this.optimisticData.removeLayer(a);if(b!==this.optimisticData)this.optimisticData=b,this.broadcastWatches()},b.prototype.batch=function(a){var b,c=this,d=a.update,e=a.optimistic,f=void 0===e?!0:e,g=a.removeOptimistic,h=a.onWatchUpdated,i=function(a){var e=c,f=e.data,g=e.optimisticData;if(++c.txCount,a)c.data=c.optimisticData=a;try{return b=d(c)}finally{--c.txCount,c.data=f,c.optimisticData=g}},j=new Set;if(h&&!this.txCount)this.broadcastWatches(D(D({},a),{onWatchUpdated:function(a){return j.add(a),!1}}));if("string"==typeof f)this.optimisticData=this.optimisticData.addLayer(f,i);else if(!1===f)i(this.data);else i();if("string"==typeof g)this.optimisticData=this.optimisticData.removeLayer(g);if(h&&j.size){if(this.broadcastWatches(D(D({},a),{onWatchUpdated:function(a,b){var c=h.call(this,a,b);if(!1!==c)j.delete(a);return c}})),j.size)j.forEach(function(a){return c.maybeBroadcastWatch.dirty(a)})}else this.broadcastWatches(a);return b},b.prototype.performTransaction=function(a,b){return this.batch({update:a,optimistic:b||null!==b})},b.prototype.transformDocument=function(a){if(this.addTypename){var b=this.typenameDocumentCache.get(a);if(!b)b=kc(a),this.typenameDocumentCache.set(a,b),this.typenameDocumentCache.set(b,b);return b}return a},b.prototype.broadcastWatches=function(a){var b=this;if(!this.txCount)this.watches.forEach(function(c){return b.maybeBroadcastWatch(c,a)})},b.prototype.broadcastWatch=function(a,b){var c=a.lastDiff,d=this.diff(a);if(b){if(a.optimistic&&"string"==typeof b.optimistic)d.fromOptimisticTransaction=!0;if(b.onWatchUpdated&&!1===b.onWatchUpdated.call(this,a,d,c))return}if(!c||!ub(c.result,d.result))a.callback(a.lastDiff=d,c)},b}(Kd);function Be(a){return new Ja(function(b,c){return new A(function(d){var e,f,g;try{e=c(b).subscribe({next:function(e){if(e.errors)if(g=a({graphQLErrors:e.errors,response:e,operation:b,forward:c}))return void(f=g.subscribe({next:d.next.bind(d),error:d.error.bind(d),complete:d.complete.bind(d)}));d.next(e)},error:function(e){if(!(g=a({operation:b,networkError:e,graphQLErrors:e&&e.result&&e.result.errors,forward:c})))d.error(e);else f=g.subscribe({next:d.next.bind(d),error:d.error.bind(d),complete:d.complete.bind(d)})},complete:function(){if(!g)d.complete.bind(d)()}})}catch(e){a({networkError:e,operation:b,forward:c}),d.error(e)}return function(){if(e)e.unsubscribe();if(f)e.unsubscribe()}})})}!function(a){function b(b){var c=a.call(this)||this;return c.link=Be(b),c}C(b,a),b.prototype.request=function(a,b){return this.link.request(a,b)}}(Ja);var Ce=c(6502),De=c.n(Ce),Ee=c(7050),Fe=c.n(Ee),Ge=c(1791),He=function(){return(He=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ie=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},Je=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){return function(f){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&f[0]?d.return:f[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,f[1])).done)return e;if(d=0,e)f=[2&f[0],e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,d=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==f[0]&&2!==f[0])){g=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){g.label=f[1];break}if(6===f[0]&&g.label<e[1]){g.label=e[1],e=f;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(f);break}if(e[2])g.ops.pop();g.trys.pop();continue}f=b.call(a,g)}catch(a){f=[6,a],d=0}finally{c=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,h])}}},Ke=Fe().get("clnd-oauth-token",{email:!0}),Le=function(a){if(void 0===a)a=!1;return Ie(void 0,void 0,void 0,function(){return Je(this,function(b){switch(b.label){case 0:if(Ke&&!a)return[2,Ke];else return[4,De()(Ce.OAuthFeature.Calendar)];case 1:return Ke=b.sent(),Fe().set("clnd-oauth-token",Ke,{email:!0}),[2,Ke]}})})},Me=function(){var a;return{authLink:(a=function(a,b){var c=b.headers;return Ie(void 0,void 0,void 0,function(){var b,d,e,f;return Je(this,function(g){switch(g.label){case 0:if(b=Xa(a.query),d={},0===b.indexOf("mutation"))window.lastMutationTimestamp=Date.now();else e=window.lastMutationTimestamp?Math.ceil((Date.now()-window.lastMutationTimestamp)/1e3):-1,d={"X-Last-Mutation-Age":"".concat(e)};return[4,Le()];case 1:return f=g.sent(),[2,{headers:He(He(He({},c),d),{"X-Email":window.__PH.activeUser(),authorization:"Bearer ".concat(f)})}]}})})},new Ja(function(b,c){var d=E(b,[]);return new A(function(e){var f,g=!1;return Promise.resolve(d).then(function(c){return a(c,b.getContext())}).then(b.setContext).then(function(){if(!g)f=c(b).subscribe({next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)})}).catch(e.error.bind(e)),function(){if(g=!0,f)f.unsubscribe()}})})),errorLink:Be(function(a){var b,c=a.graphQLErrors,d=a.operation,e=a.forward;if(null==c?void 0:c.find(function(a){var b=a.message;return/token_invalid|no_auth/.test(b)}))return(b=new Promise(function(a){return setTimeout(a,300)}).then(function(){return Le(!0)}),new A(function(a){b.then(function(b){a.next(b),a.complete()}).catch(a.error.bind(a))})).flatMap(function(a){var b=d.getContext().headers;return d.setContext({headers:He(He({},b),{authorization:"Bearer ".concat(a)})}),e(d)})}),httpLink:new lb({uri:Ge.CALENDAR_GRAPHQL_API_URL})}},Ne=function(){var a=Me(),b=a.errorLink,c=a.authLink,d=a.httpLink;return new Jd({link:Ja.from([b,c,d]),cache:new Ae})}();var Oe=function(){return(Oe=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)};Object.create;Object.create;function Pe(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator)Pe=function(a){return typeof a};else Pe=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return Pe(a)}function Qe(a,b){for(var c,d=/\r\n|[\n\r]/g,e=1,f=b+1;(c=d.exec(a.body))&&c.index<b;)e+=1,f=b+1-(c.index+c[0].length);return{line:e,column:f}}function Re(a){return Se(a.source,Qe(a.source,a.start))}function Se(a,b){var c=a.locationOffset.column-1,d=Ue(c)+a.body,e=b.line-1,f=a.locationOffset.line-1,g=b.line+f,h=1===b.line?c:0,i=b.column+h,j="".concat(a.name,":").concat(g,":").concat(i,"\n"),k=d.split(/\r\n|[\n\r]/g),l=k[e];if(l.length>120){for(var m=Math.floor(i/80),n=i%80,o=[],p=0;p<l.length;p+=80)o.push(l.slice(p,p+80));return j+Te([["".concat(g),o[0]]].concat(o.slice(1,m+1).map(function(a){return["",a]}),[[" ",Ue(n-1)+"^"],["",o[m+1]]]))}return j+Te([["".concat(g-1),k[e-1]],["".concat(g),l],["",Ue(i-1)+"^"],["".concat(g+1),k[e+1]]])}function Te(a){var b=a.filter(function(a){a[0];return void 0!==a[1]}),c=Math.max.apply(Math,b.map(function(a){return a[0].length}));return b.map(function(a){var b,d=a[0],e=a[1];return Ue(c-(b=d).length)+b+(e?" | "+e:" |")}).join("\n")}function Ue(a){return Array(a+1).join(" ")}function Ve(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator)Ve=function(a){return typeof a};else Ve=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return Ve(a)}function We(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function Xe(a,b){if(b&&("object"===Ve(b)||"function"==typeof b))return b;else return Ye(a)}function Ye(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ze(a){var b="function"==typeof Map?new Map:void 0;return(Ze=function(a){if(null===a||(c=a,-1===Function.toString.call(c).indexOf("[native code]")))return a;var c;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,d)}function d(){return $e(a,arguments,bf(this).constructor)}return d.prototype=Object.create(a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),af(d,a)})(a)}function $e(a,b,c){if(_e())$e=Reflect.construct;else $e=function(a,b,c){var d=[null];d.push.apply(d,b);var e=new(Function.bind.apply(a,d));if(c)af(e,c.prototype);return e};return $e.apply(null,arguments)}function _e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function af(a,b){return(af=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function bf(a){return(bf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}var cf=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");if(a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b)af(a,b)}(e,a);var b,c,d=(b=e,c=_e(),function(){var a,d=bf(b);if(c){var e=bf(this).constructor;a=Reflect.construct(d,arguments,e)}else a=d.apply(this,arguments);return Xe(this,a)});function e(a,b,c,f,g,h,i){var j,k,l,m,n;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),n=d.call(this,a);var o=Array.isArray(b)?0!==b.length?b:void 0:b?[b]:void 0,p=c;if(!p&&o){var q;p=null===(q=o[0].loc)||void 0===q?void 0:q.source}var r,s=f;if(!s&&o)s=o.reduce(function(a,b){if(b.loc)a.push(b.loc.start);return a},[]);if(s&&0===s.length)s=void 0;if(f&&c)r=f.map(function(a){return Qe(c,a)});else if(o)r=o.reduce(function(a,b){if(b.loc)a.push(Qe(b.loc.source,b.loc.start));return a},[]);var t,u=i;if(null==u&&null!=h){var v=h.extensions;if("object"==Pe(t=v)&&null!==t)u=v}if(Object.defineProperties(Ye(n),{name:{value:"GraphQLError"},message:{value:a,enumerable:!0,writable:!0},locations:{value:null!==(j=r)&&void 0!==j?j:void 0,enumerable:null!=r},path:{value:null!=g?g:void 0,enumerable:null!=g},nodes:{value:null!=o?o:void 0},source:{value:null!==(k=p)&&void 0!==k?k:void 0},positions:{value:null!==(l=s)&&void 0!==l?l:void 0},originalError:{value:h},extensions:{value:null!==(m=u)&&void 0!==m?m:void 0,enumerable:null!=u}}),null!=h&&h.stack)return Object.defineProperty(Ye(n),"stack",{value:h.stack,writable:!0,configurable:!0}),Xe(n);if(Error.captureStackTrace)Error.captureStackTrace(Ye(n),e);else Object.defineProperty(Ye(n),"stack",{value:Error().stack,writable:!0,configurable:!0});return n}return function(a,b,c){if(b)We(a.prototype,b);if(c)We(a,c)}(e,[{key:"toString",value:function(){return function(a){var b=a.message;if(a.nodes)for(var c=0,d=a.nodes;c<d.length;c++){var e=d[c];if(e.loc)b+="\n\n"+Re(e.loc)}else if(a.source&&a.locations)for(var f=0,g=a.locations;f<g.length;f++){var h=g[f];b+="\n\n"+Se(a.source,h)}return b}(this)}},{key:Z,get:function(){return"Object"}}]),e}(Ze(Error));function df(a,b,c){return new cf("Syntax Error: ".concat(c),void 0,a,[b])}var ef=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),ff=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"}),gf=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}),hf=function(){function a(a){var b=new Ma(ff.SOF,0,0,0,0,null);this.source=a,this.lastToken=b,this.token=b,this.line=1,this.lineStart=0}var b=a.prototype;return b.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},b.lookahead=function(){var a=this.token;if(a.kind!==ff.EOF)do{var b;a=null!==(b=a.next)&&void 0!==b?b:a.next=kf(this,a)}while(a.kind===ff.COMMENT);return a},a}();function jf(a){return isNaN(a)?ff.EOF:a<127?JSON.stringify(String.fromCharCode(a)):'"\\u'.concat(("00"+a.toString(16).toUpperCase()).slice(-4),'"')}function kf(a,b){for(var c=a.source,d=c.body,e=d.length,f=b.end;f<e;){var g=d.charCodeAt(f),h=a.line,i=1+f-a.lineStart;switch(g){case 65279:case 9:case 32:case 44:++f;continue;case 10:++f,++a.line,a.lineStart=f;continue;case 13:if(10===d.charCodeAt(f+1))f+=2;else++f;++a.line,a.lineStart=f;continue;case 33:return new Ma(ff.BANG,f,f+1,h,i,b);case 35:return mf(c,f,h,i,b);case 36:return new Ma(ff.DOLLAR,f,f+1,h,i,b);case 38:return new Ma(ff.AMP,f,f+1,h,i,b);case 40:return new Ma(ff.PAREN_L,f,f+1,h,i,b);case 41:return new Ma(ff.PAREN_R,f,f+1,h,i,b);case 46:if(46===d.charCodeAt(f+1)&&46===d.charCodeAt(f+2))return new Ma(ff.SPREAD,f,f+3,h,i,b);break;case 58:return new Ma(ff.COLON,f,f+1,h,i,b);case 61:return new Ma(ff.EQUALS,f,f+1,h,i,b);case 64:return new Ma(ff.AT,f,f+1,h,i,b);case 91:return new Ma(ff.BRACKET_L,f,f+1,h,i,b);case 93:return new Ma(ff.BRACKET_R,f,f+1,h,i,b);case 123:return new Ma(ff.BRACE_L,f,f+1,h,i,b);case 124:return new Ma(ff.PIPE,f,f+1,h,i,b);case 125:return new Ma(ff.BRACE_R,f,f+1,h,i,b);case 34:if(34===d.charCodeAt(f+1)&&34===d.charCodeAt(f+2))return qf(c,f,h,i,b,a);else return pf(c,f,h,i,b);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return nf(c,f,g,h,i,b);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return sf(c,f,h,i,b)}throw df(c,f,lf(g))}var j=a.line,k=1+f-a.lineStart;return new Ma(ff.EOF,e,e,j,k,b)}function lf(a){if(a<32&&9!==a&&10!==a&&13!==a)return"Cannot contain the invalid character ".concat(jf(a),".");if(39===a)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";else return"Cannot parse the unexpected character ".concat(jf(a),".")}function mf(a,b,c,d,e){var f,g=a.body,h=b;do{f=g.charCodeAt(++h)}while(!isNaN(f)&&(f>31||9===f));return new Ma(ff.COMMENT,b,h,c,d,e,g.slice(b+1,h))}function nf(a,b,c,d,e,f){var g=a.body,h=c,i=b,j=!1;if(45===h)h=g.charCodeAt(++i);if(48===h){if((h=g.charCodeAt(++i))>=48&&h<=57)throw df(a,i,"Invalid number, unexpected digit after 0: ".concat(jf(h),"."))}else i=of(a,i,h),h=g.charCodeAt(i);if(46===h)j=!0,h=g.charCodeAt(++i),i=of(a,i,h),h=g.charCodeAt(i);if(69===h||101===h){if(j=!0,43===(h=g.charCodeAt(++i))||45===h)h=g.charCodeAt(++i);i=of(a,i,h),h=g.charCodeAt(i)}if(46===h||function(a){return 95===a||a>=65&&a<=90||a>=97&&a<=122}(h))throw df(a,i,"Invalid number, expected digit but got: ".concat(jf(h),"."));return new Ma(j?ff.FLOAT:ff.INT,b,i,d,e,f,g.slice(b,i))}function of(a,b,c){var d=a.body,e=b,f=c;if(f>=48&&f<=57){do{f=d.charCodeAt(++e)}while(f>=48&&f<=57);return e}throw df(a,e,"Invalid number, expected digit but got: ".concat(jf(f),"."))}function pf(a,b,c,d,e){for(var f,g,h,i,j=a.body,k=b+1,l=k,m=0,n="";k<j.length&&!isNaN(m=j.charCodeAt(k))&&10!==m&&13!==m;){if(34===m)return n+=j.slice(l,k),new Ma(ff.STRING,b,k+1,c,d,e,n);if(m<32&&9!==m)throw df(a,k,"Invalid character within String: ".concat(jf(m),"."));if(++k,92===m){switch(n+=j.slice(l,k-1),m=j.charCodeAt(k)){case 34:n+='"';break;case 47:n+="/";break;case 92:n+="\\";break;case 98:n+="\b";break;case 102:n+="\f";break;case 110:n+="\n";break;case 114:n+="\r";break;case 116:n+="\t";break;case 117:var o=(f=j.charCodeAt(k+1),g=j.charCodeAt(k+2),h=j.charCodeAt(k+3),i=j.charCodeAt(k+4),rf(f)<<12|rf(g)<<8|rf(h)<<4|rf(i));if(o<0){var p=j.slice(k+1,k+5);throw df(a,k,"Invalid character escape sequence: \\u".concat(p,"."))}n+=String.fromCharCode(o),k+=4;break;default:throw df(a,k,"Invalid character escape sequence: \\".concat(String.fromCharCode(m),"."))}l=++k}}throw df(a,k,"Unterminated string.")}function qf(a,b,c,d,e,f){for(var g=a.body,h=b+3,i=h,j=0,k="";h<g.length&&!isNaN(j=g.charCodeAt(h));){if(34===j&&34===g.charCodeAt(h+1)&&34===g.charCodeAt(h+2))return k+=g.slice(i,h),new Ma(ff.BLOCK_STRING,b,h+3,c,d,e,Va(k));if(j<32&&9!==j&&10!==j&&13!==j)throw df(a,h,"Invalid character within String: ".concat(jf(j),"."));if(10===j)++h,++f.line,f.lineStart=h;else if(13===j){if(10===g.charCodeAt(h+1))h+=2;else++h;++f.line,f.lineStart=h}else if(92===j&&34===g.charCodeAt(h+1)&&34===g.charCodeAt(h+2)&&34===g.charCodeAt(h+3))k+=g.slice(i,h)+'"""',i=h+=4;else++h}throw df(a,h,"Unterminated string.")}function rf(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:-1}function sf(a,b,c,d,e){for(var f=a.body,g=f.length,h=b+1,i=0;h!==g&&!isNaN(i=f.charCodeAt(h))&&(95===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122);)++h;return new Ma(ff.NAME,b,h,c,d,e,f.slice(b,h))}var tf=function(){function a(a,b){var c=function(a){return da(a,fa)}(a)?a:new fa(a);this._lexer=new hf(c),this._options=b}var b=a.prototype;return b.parseName=function(){var a=this.expectToken(ff.NAME);return{kind:ef.NAME,value:a.value,loc:this.loc(a)}},b.parseDocument=function(){var a=this._lexer.token;return{kind:ef.DOCUMENT,definitions:this.many(ff.SOF,this.parseDefinition,ff.EOF),loc:this.loc(a)}},b.parseDefinition=function(){if(this.peek(ff.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(ff.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},b.parseOperationDefinition=function(){var a=this._lexer.token;if(this.peek(ff.BRACE_L))return{kind:ef.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(a)};var b,c=this.parseOperationType();if(this.peek(ff.NAME))b=this.parseName();return{kind:ef.OPERATION_DEFINITION,operation:c,name:b,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(a)}},b.parseOperationType=function(){var a=this.expectToken(ff.NAME);switch(a.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(a)},b.parseVariableDefinitions=function(){return this.optionalMany(ff.PAREN_L,this.parseVariableDefinition,ff.PAREN_R)},b.parseVariableDefinition=function(){var a=this._lexer.token;return{kind:ef.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ff.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ff.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(a)}},b.parseVariable=function(){var a=this._lexer.token;return this.expectToken(ff.DOLLAR),{kind:ef.VARIABLE,name:this.parseName(),loc:this.loc(a)}},b.parseSelectionSet=function(){var a=this._lexer.token;return{kind:ef.SELECTION_SET,selections:this.many(ff.BRACE_L,this.parseSelection,ff.BRACE_R),loc:this.loc(a)}},b.parseSelection=function(){return this.peek(ff.SPREAD)?this.parseFragment():this.parseField()},b.parseField=function(){var a,b,c=this._lexer.token,d=this.parseName();if(this.expectOptionalToken(ff.COLON))a=d,b=this.parseName();else b=d;return{kind:ef.FIELD,alias:a,name:b,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ff.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(c)}},b.parseArguments=function(a){var b=a?this.parseConstArgument:this.parseArgument;return this.optionalMany(ff.PAREN_L,b,ff.PAREN_R)},b.parseArgument=function(){var a=this._lexer.token,b=this.parseName();return this.expectToken(ff.COLON),{kind:ef.ARGUMENT,name:b,value:this.parseValueLiteral(!1),loc:this.loc(a)}},b.parseConstArgument=function(){var a=this._lexer.token;return{kind:ef.ARGUMENT,name:this.parseName(),value:(this.expectToken(ff.COLON),this.parseValueLiteral(!0)),loc:this.loc(a)}},b.parseFragment=function(){var a=this._lexer.token;this.expectToken(ff.SPREAD);var b=this.expectOptionalKeyword("on");if(!b&&this.peek(ff.NAME))return{kind:ef.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(a)};else return{kind:ef.INLINE_FRAGMENT,typeCondition:b?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(a)}},b.parseFragmentDefinition=function(){var a,b=this._lexer.token;if(this.expectKeyword("fragment"),!0===(null===(a=this._options)||void 0===a?void 0:a.experimentalFragmentVariables))return{kind:ef.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(b)};else return{kind:ef.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(b)}},b.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},b.parseValueLiteral=function(a){var b=this._lexer.token;switch(b.kind){case ff.BRACKET_L:return this.parseList(a);case ff.BRACE_L:return this.parseObject(a);case ff.INT:return this._lexer.advance(),{kind:ef.INT,value:b.value,loc:this.loc(b)};case ff.FLOAT:return this._lexer.advance(),{kind:ef.FLOAT,value:b.value,loc:this.loc(b)};case ff.STRING:case ff.BLOCK_STRING:return this.parseStringLiteral();case ff.NAME:switch(this._lexer.advance(),b.value){case"true":return{kind:ef.BOOLEAN,value:!0,loc:this.loc(b)};case"false":return{kind:ef.BOOLEAN,value:!1,loc:this.loc(b)};case"null":return{kind:ef.NULL,loc:this.loc(b)};default:return{kind:ef.ENUM,value:b.value,loc:this.loc(b)}}case ff.DOLLAR:if(!a)return this.parseVariable()}throw this.unexpected()},b.parseStringLiteral=function(){var a=this._lexer.token;return this._lexer.advance(),{kind:ef.STRING,value:a.value,block:a.kind===ff.BLOCK_STRING,loc:this.loc(a)}},b.parseList=function(a){var b=this,c=this._lexer.token;return{kind:ef.LIST,values:this.any(ff.BRACKET_L,function(){return b.parseValueLiteral(a)},ff.BRACKET_R),loc:this.loc(c)}},b.parseObject=function(a){var b=this,c=this._lexer.token;return{kind:ef.OBJECT,fields:this.any(ff.BRACE_L,function(){return b.parseObjectField(a)},ff.BRACE_R),loc:this.loc(c)}},b.parseObjectField=function(a){var b=this._lexer.token,c=this.parseName();return this.expectToken(ff.COLON),{kind:ef.OBJECT_FIELD,name:c,value:this.parseValueLiteral(a),loc:this.loc(b)}},b.parseDirectives=function(a){for(var b=[];this.peek(ff.AT);)b.push(this.parseDirective(a));return b},b.parseDirective=function(a){var b=this._lexer.token;return this.expectToken(ff.AT),{kind:ef.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(a),loc:this.loc(b)}},b.parseTypeReference=function(){var a,b=this._lexer.token;if(this.expectOptionalToken(ff.BRACKET_L))a=this.parseTypeReference(),this.expectToken(ff.BRACKET_R),a={kind:ef.LIST_TYPE,type:a,loc:this.loc(b)};else a=this.parseNamedType();if(this.expectOptionalToken(ff.BANG))return{kind:ef.NON_NULL_TYPE,type:a,loc:this.loc(b)};else return a},b.parseNamedType=function(){var a=this._lexer.token;return{kind:ef.NAMED_TYPE,name:this.parseName(),loc:this.loc(a)}},b.parseTypeSystemDefinition=function(){var a=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(a.kind===ff.NAME)switch(a.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(a)},b.peekDescription=function(){return this.peek(ff.STRING)||this.peek(ff.BLOCK_STRING)},b.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},b.parseSchemaDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("schema");var c=this.parseDirectives(!0),d=this.many(ff.BRACE_L,this.parseOperationTypeDefinition,ff.BRACE_R);return{kind:ef.SCHEMA_DEFINITION,description:b,directives:c,operationTypes:d,loc:this.loc(a)}},b.parseOperationTypeDefinition=function(){var a=this._lexer.token,b=this.parseOperationType();this.expectToken(ff.COLON);var c=this.parseNamedType();return{kind:ef.OPERATION_TYPE_DEFINITION,operation:b,type:c,loc:this.loc(a)}},b.parseScalarTypeDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("scalar");var c=this.parseName(),d=this.parseDirectives(!0);return{kind:ef.SCALAR_TYPE_DEFINITION,description:b,name:c,directives:d,loc:this.loc(a)}},b.parseObjectTypeDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("type");var c=this.parseName(),d=this.parseImplementsInterfaces(),e=this.parseDirectives(!0),f=this.parseFieldsDefinition();return{kind:ef.OBJECT_TYPE_DEFINITION,description:b,name:c,interfaces:d,directives:e,fields:f,loc:this.loc(a)}},b.parseImplementsInterfaces=function(){var a;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(a=this._options)||void 0===a?void 0:a.allowLegacySDLImplementsInterfaces)){var b=[];this.expectOptionalToken(ff.AMP);do{b.push(this.parseNamedType())}while(this.expectOptionalToken(ff.AMP)||this.peek(ff.NAME));return b}return this.delimitedMany(ff.AMP,this.parseNamedType)},b.parseFieldsDefinition=function(){var a;if(!0===(null===(a=this._options)||void 0===a?void 0:a.allowLegacySDLEmptyFields)&&this.peek(ff.BRACE_L)&&this._lexer.lookahead().kind===ff.BRACE_R)return this._lexer.advance(),this._lexer.advance(),[];else return this.optionalMany(ff.BRACE_L,this.parseFieldDefinition,ff.BRACE_R)},b.parseFieldDefinition=function(){var a=this._lexer.token,b=this.parseDescription(),c=this.parseName(),d=this.parseArgumentDefs();this.expectToken(ff.COLON);var e=this.parseTypeReference(),f=this.parseDirectives(!0);return{kind:ef.FIELD_DEFINITION,description:b,name:c,arguments:d,type:e,directives:f,loc:this.loc(a)}},b.parseArgumentDefs=function(){return this.optionalMany(ff.PAREN_L,this.parseInputValueDef,ff.PAREN_R)},b.parseInputValueDef=function(){var a=this._lexer.token,b=this.parseDescription(),c=this.parseName();this.expectToken(ff.COLON);var d,e=this.parseTypeReference();if(this.expectOptionalToken(ff.EQUALS))d=this.parseValueLiteral(!0);var f=this.parseDirectives(!0);return{kind:ef.INPUT_VALUE_DEFINITION,description:b,name:c,type:e,defaultValue:d,directives:f,loc:this.loc(a)}},b.parseInterfaceTypeDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("interface");var c=this.parseName(),d=this.parseImplementsInterfaces(),e=this.parseDirectives(!0),f=this.parseFieldsDefinition();return{kind:ef.INTERFACE_TYPE_DEFINITION,description:b,name:c,interfaces:d,directives:e,fields:f,loc:this.loc(a)}},b.parseUnionTypeDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("union");var c=this.parseName(),d=this.parseDirectives(!0),e=this.parseUnionMemberTypes();return{kind:ef.UNION_TYPE_DEFINITION,description:b,name:c,directives:d,types:e,loc:this.loc(a)}},b.parseUnionMemberTypes=function(){return this.expectOptionalToken(ff.EQUALS)?this.delimitedMany(ff.PIPE,this.parseNamedType):[]},b.parseEnumTypeDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("enum");var c=this.parseName(),d=this.parseDirectives(!0),e=this.parseEnumValuesDefinition();return{kind:ef.ENUM_TYPE_DEFINITION,description:b,name:c,directives:d,values:e,loc:this.loc(a)}},b.parseEnumValuesDefinition=function(){return this.optionalMany(ff.BRACE_L,this.parseEnumValueDefinition,ff.BRACE_R)},b.parseEnumValueDefinition=function(){var a=this._lexer.token,b=this.parseDescription(),c=this.parseName(),d=this.parseDirectives(!0);return{kind:ef.ENUM_VALUE_DEFINITION,description:b,name:c,directives:d,loc:this.loc(a)}},b.parseInputObjectTypeDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("input");var c=this.parseName(),d=this.parseDirectives(!0),e=this.parseInputFieldsDefinition();return{kind:ef.INPUT_OBJECT_TYPE_DEFINITION,description:b,name:c,directives:d,fields:e,loc:this.loc(a)}},b.parseInputFieldsDefinition=function(){return this.optionalMany(ff.BRACE_L,this.parseInputValueDef,ff.BRACE_R)},b.parseTypeSystemExtension=function(){var a=this._lexer.lookahead();if(a.kind===ff.NAME)switch(a.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(a)},b.parseSchemaExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var b=this.parseDirectives(!0),c=this.optionalMany(ff.BRACE_L,this.parseOperationTypeDefinition,ff.BRACE_R);if(0===b.length&&0===c.length)throw this.unexpected();return{kind:ef.SCHEMA_EXTENSION,directives:b,operationTypes:c,loc:this.loc(a)}},b.parseScalarTypeExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var b=this.parseName(),c=this.parseDirectives(!0);if(0===c.length)throw this.unexpected();return{kind:ef.SCALAR_TYPE_EXTENSION,name:b,directives:c,loc:this.loc(a)}},b.parseObjectTypeExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var b=this.parseName(),c=this.parseImplementsInterfaces(),d=this.parseDirectives(!0),e=this.parseFieldsDefinition();if(0===c.length&&0===d.length&&0===e.length)throw this.unexpected();return{kind:ef.OBJECT_TYPE_EXTENSION,name:b,interfaces:c,directives:d,fields:e,loc:this.loc(a)}},b.parseInterfaceTypeExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var b=this.parseName(),c=this.parseImplementsInterfaces(),d=this.parseDirectives(!0),e=this.parseFieldsDefinition();if(0===c.length&&0===d.length&&0===e.length)throw this.unexpected();return{kind:ef.INTERFACE_TYPE_EXTENSION,name:b,interfaces:c,directives:d,fields:e,loc:this.loc(a)}},b.parseUnionTypeExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var b=this.parseName(),c=this.parseDirectives(!0),d=this.parseUnionMemberTypes();if(0===c.length&&0===d.length)throw this.unexpected();return{kind:ef.UNION_TYPE_EXTENSION,name:b,directives:c,types:d,loc:this.loc(a)}},b.parseEnumTypeExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var b=this.parseName(),c=this.parseDirectives(!0),d=this.parseEnumValuesDefinition();if(0===c.length&&0===d.length)throw this.unexpected();return{kind:ef.ENUM_TYPE_EXTENSION,name:b,directives:c,values:d,loc:this.loc(a)}},b.parseInputObjectTypeExtension=function(){var a=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var b=this.parseName(),c=this.parseDirectives(!0),d=this.parseInputFieldsDefinition();if(0===c.length&&0===d.length)throw this.unexpected();return{kind:ef.INPUT_OBJECT_TYPE_EXTENSION,name:b,directives:c,fields:d,loc:this.loc(a)}},b.parseDirectiveDefinition=function(){var a=this._lexer.token,b=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ff.AT);var c=this.parseName(),d=this.parseArgumentDefs(),e=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var f=this.parseDirectiveLocations();return{kind:ef.DIRECTIVE_DEFINITION,description:b,name:c,arguments:d,repeatable:e,locations:f,loc:this.loc(a)}},b.parseDirectiveLocations=function(){return this.delimitedMany(ff.PIPE,this.parseDirectiveLocation)},b.parseDirectiveLocation=function(){var a=this._lexer.token,b=this.parseName();if(void 0!==gf[b.value])return b;throw this.unexpected(a)},b.loc=function(a){var b;if(!0!==(null===(b=this._options)||void 0===b?void 0:b.noLocation))return new La(a,this._lexer.lastToken,this._lexer.source)},b.peek=function(a){return this._lexer.token.kind===a},b.expectToken=function(a){var b=this._lexer.token;if(b.kind===a)return this._lexer.advance(),b;throw df(this._lexer.source,b.start,"Expected ".concat(vf(a),", found ").concat(uf(b),"."))},b.expectOptionalToken=function(a){var b=this._lexer.token;if(b.kind===a)return this._lexer.advance(),b},b.expectKeyword=function(a){var b=this._lexer.token;if(b.kind===ff.NAME&&b.value===a)this._lexer.advance();else throw df(this._lexer.source,b.start,'Expected "'.concat(a,'", found ').concat(uf(b),"."))},b.expectOptionalKeyword=function(a){var b=this._lexer.token;if(b.kind===ff.NAME&&b.value===a)return this._lexer.advance(),!0;else return!1},b.unexpected=function(a){var b=null!=a?a:this._lexer.token;return df(this._lexer.source,b.start,"Unexpected ".concat(uf(b),"."))},b.any=function(a,b,c){this.expectToken(a);for(var d=[];!this.expectOptionalToken(c);)d.push(b.call(this));return d},b.optionalMany=function(a,b,c){if(this.expectOptionalToken(a)){var d=[];do{d.push(b.call(this))}while(!this.expectOptionalToken(c));return d}return[]},b.many=function(a,b,c){this.expectToken(a);var d=[];do{d.push(b.call(this))}while(!this.expectOptionalToken(c));return d},b.delimitedMany=function(a,b){this.expectOptionalToken(a);var c=[];do{c.push(b.call(this))}while(this.expectOptionalToken(a));return c},a}();function uf(a){var b=a.value;return vf(a.kind)+(null!=b?' "'.concat(b,'"'):"")}function vf(a){return function(a){return a===ff.BANG||a===ff.DOLLAR||a===ff.AMP||a===ff.PAREN_L||a===ff.PAREN_R||a===ff.SPREAD||a===ff.COLON||a===ff.EQUALS||a===ff.AT||a===ff.BRACKET_L||a===ff.BRACKET_R||a===ff.BRACE_L||a===ff.PIPE||a===ff.BRACE_R}(a)?'"'.concat(a,'"'):a}function wf(a){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var xf=new Map,yf=new Map,zf=!0,Af=!1;function Bf(a){return a.replace(/[\s,]+/g," ").trim()}function Cf(a){var b=new Set,c=[];return a.definitions.forEach(function(a){if("FragmentDefinition"===a.kind){var d=a.name.value,e=Bf((g=a.loc).source.body.substring(g.start,g.end)),f=yf.get(d);if(f&&!f.has(e)){if(zf)console.warn("Warning: fragment with name "+d+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names")}else if(!f)yf.set(d,f=new Set);if(f.add(e),!b.has(e))b.add(e),c.push(a)}else c.push(a);var g}),Oe(Oe({},a),{definitions:c})}function Df(a){var b=Bf(a);if(!xf.has(b)){var c=function(a,b){return new tf(a,b).parseDocument()}(a,{experimentalFragmentVariables:Af,allowLegacyFragmentVariables:Af});if(!c||"Document"!==c.kind)throw new Error("Not a valid GraphQL document.");xf.set(b,function(a){var b=new Set(a.definitions);b.forEach(function(a){if(a.loc)delete a.loc;Object.keys(a).forEach(function(c){var d=a[c];if(d&&"object"===wf(d))b.add(d)})});var c=a.loc;if(c)delete c.startToken,delete c.endToken;return a}(Cf(c)))}return xf.get(b)}function Ef(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if("string"==typeof a)a=[a];var d=a[0];return b.forEach(function(b,c){if(b&&"Document"===b.kind)d+=b.loc.source.body;else d+=b;d+=a[c+1]}),Df(d)}var Ff,Gf={gql:Ef,resetCaches:function(){xf.clear(),yf.clear()},disableFragmentWarnings:function(){zf=!1},enableExperimentalFragmentVariables:function(){Af=!0},disableExperimentalFragmentVariables:function(){Af=!1}};(Ff=Ef||(Ef={})).gql=Gf.gql,Ff.resetCaches=Gf.resetCaches,Ff.disableFragmentWarnings=Gf.disableFragmentWarnings,Ff.enableExperimentalFragmentVariables=Gf.enableExperimentalFragmentVariables,Ff.disableExperimentalFragmentVariables=Gf.disableExperimentalFragmentVariables,Ef.default=Ef;var Hf,If,Jf=Ef(Hf||(Hf=function(a,b){if(Object.defineProperty)Object.defineProperty(a,"raw",{value:b});else a.raw=b;return a}(["\n\tquery FetchCalendars {\n\t\tcalendars(onlyAccepted: true) {\n\t\t\tuid\n\t\t\tisDefault\n\t\t}\n\t}\n"],["\n\tquery FetchCalendars {\n\t\tcalendars(onlyAccepted: true) {\n\t\t\tuid\n\t\t\tisDefault\n\t\t}\n\t}\n"]))),Kf=Ef(If||(If=function(a,b){if(Object.defineProperty)Object.defineProperty(a,"raw",{value:b});else a.raw=b;return a}(["\n\tquery FetchEvents($from: Time!, $to: Time!, $calendars: [UID!]) {\n\t\tevents(from: $from, to: $to, calendars: $calendars, buildVirtual: true) {\n\t\t\tuid\n\t\t\tfrom\n\t\t\tto\n\t\t\tfullDay\n\t\t\ttitle\n\t\t}\n\t}\n"],["\n\tquery FetchEvents($from: Time!, $to: Time!, $calendars: [UID!]) {\n\t\tevents(from: $from, to: $to, calendars: $calendars, buildVirtual: true) {\n\t\t\tuid\n\t\t\tfrom\n\t\t\tto\n\t\t\tfullDay\n\t\t\ttitle\n\t\t}\n\t}\n"]))),Lf=c(2967),Mf=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},Nf=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){return function(f){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&f[0]?d.return:f[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,f[1])).done)return e;if(d=0,e)f=[2&f[0],e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,d=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==f[0]&&2!==f[0])){g=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){g.label=f[1];break}if(6===f[0]&&g.label<e[1]){g.label=e[1],e=f;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(f);break}if(e[2])g.ops.pop();g.trys.pop();continue}f=b.call(a,g)}catch(a){f=[6,a],d=0}finally{c=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,h])}}},Of=function(a){var b=a.calendarsUids,c=a.from,d=a.to;return Ne.query({query:Kf,variables:{calendars:b,from:(0,Lf.$)(c),to:(0,Lf.$)(d)},fetchPolicy:"network-only"})},Pf=function(){return Ne.query({query:Jf,fetchPolicy:"network-only"})},Qf=function(a){if(void 0===a)a=2;return Mf(void 0,void 0,void 0,function(){var b,c;return Nf(this,function(e){switch(e.label){case 0:return[4,Pf()];case 1:return b=e.sent().data.calendars,c=Date.now(),[2,Of({calendarsUids:b.map(function(a){return a.uid}),from:c,to:(0,Lf.iX)(c+(0,d.day)(a))})]}})})}},2967:function(a,b,c){"use strict";c.d(b,{$:function(){return d},iX:function(){return e}});var d=function(a){return function(a){return a instanceof Date?a:new Date(a)}(a).toISOString()},e=function(a){var b=new Date(a);return b.setHours(23,59,59,999),b}},9775:function(a,b,c){"use strict";c.d(b,{qa:function(){return f},U:function(){return g}});var d=c(769),e=c.n(d);function f(a){if(e().qa)return a;else return null}function g(){return e().qa}},5837:function(a,b,c){"use strict";c.d(b,{G:function(){return f}});var d=c(8156),e={},f=function(a){var b=(0,d.useRef)(e);if(b.current===e)b.current=a();return b}},5010:function(a,b,c){"use strict";c.d(b,{l:function(){return f}});var d=c(8156),e=c(7806),f=function(a){var b=(0,d.useState)(a),c=b[0],f=b[1],g=(0,e.D)(function(a){if(a!==c)f(a)});return[c,g]}},7806:function(a,b,c){"use strict";c.d(b,{D:function(){return e}});var d=c(8156),e=function(a){var b,c,e=(b=a,(c=(0,d.useRef)(b)).current=b,c);return(0,d.useRef)(function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return e.current.apply(e,a)}).current}},1349:function(b){"use strict";b.exports=a},1936:function(a){"use strict";a.exports=b},9842:function(a){"use strict";a.exports=c},6366:function(a){"use strict";a.exports=d},7406:function(a){"use strict";a.exports=e},1373:function(a){"use strict";a.exports=f},4998:function(a){"use strict";a.exports=g},6093:function(a){"use strict";a.exports=h},7764:function(a){"use strict";a.exports=i},769:function(a){"use strict";a.exports=j},5261:function(a){"use strict";a.exports=k},5535:function(a){"use strict";a.exports=l},1226:function(a){"use strict";a.exports=m},8258:function(a){"use strict";a.exports=n},8242:function(a){"use strict";a.exports=o},1985:function(a){"use strict";a.exports=p},1191:function(a){"use strict";a.exports=q},7732:function(a){"use strict";a.exports=r},8521:function(a){"use strict";a.exports=s},7511:function(a){"use strict";a.exports=t},9979:function(a){"use strict";a.exports=u},4002:function(a){"use strict";a.exports=v},1791:function(a){"use strict";a.exports=w},1347:function(a){"use strict";a.exports=x},8796:function(a){"use strict";a.exports=y},2685:function(a){"use strict";a.exports=z},8078:function(a){"use strict";a.exports=A},7984:function(a){"use strict";a.exports=B},198:function(a){"use strict";a.exports=C},3910:function(a){"use strict";a.exports=D},894:function(a){"use strict";a.exports=E},5991:function(a){"use strict";a.exports=F},5125:function(a){"use strict";a.exports=G},2707:function(a){"use strict";a.exports=H},3040:function(a){"use strict";a.exports=I},1559:function(a){"use strict";a.exports=J},6502:function(a){"use strict";a.exports=K},1015:function(a){"use strict";a.exports=L},5822:function(a){"use strict";a.exports=M},4439:function(a){"use strict";a.exports=N},1820:function(a){"use strict";a.exports=O},2269:function(a){"use strict";a.exports=P},2681:function(a){"use strict";a.exports=Q},1698:function(a){"use strict";a.exports=R},9299:function(a){"use strict";a.exports=S},4707:function(a){"use strict";a.exports=T},3798:function(a){"use strict";a.exports=U},4334:function(a){"use strict";a.exports=V},9318:function(a){"use strict";a.exports=W},2475:function(a){"use strict";a.exports=X},9587:function(a){"use strict";a.exports=Y},1733:function(a){"use strict";a.exports=Z},5041:function(a){"use strict";a.exports=_},1013:function(a){"use strict";a.exports=$},7920:function(a){"use strict";a.exports=aa},3898:function(a){"use strict";a.exports=ba},4149:function(a){"use strict";a.exports=ca},8066:function(a){"use strict";a.exports=da},935:function(a){"use strict";a.exports=ea},6201:function(a){"use strict";a.exports=fa},6593:function(a){"use strict";a.exports=ga},4821:function(a){"use strict";a.exports=ha},6359:function(a){"use strict";a.exports=ia},34:function(a){"use strict";a.exports=ja},4679:function(a){"use strict";a.exports=ka},1146:function(a){"use strict";a.exports=la},4132:function(a){"use strict";a.exports=ma},4198:function(a){"use strict";a.exports=na},259:function(a){"use strict";a.exports=oa},5264:function(a){"use strict";a.exports=pa},3613:function(a){"use strict";a.exports=qa},7830:function(a){"use strict";a.exports=ra},1802:function(a){"use strict";a.exports=sa},7632:function(a){"use strict";a.exports=ta},7094:function(a){"use strict";a.exports=ua},1314:function(a){"use strict";a.exports=va},6732:function(a){"use strict";a.exports=wa},7494:function(a){"use strict";a.exports=xa},3481:function(a){"use strict";a.exports=ya},5246:function(a){"use strict";a.exports=za},5099:function(a){"use strict";a.exports=Aa},8156:function(a){"use strict";a.exports=Ba},7386:function(a){"use strict";a.exports=Ca},7022:function(a){"use strict";a.exports=Da},3054:function(a){"use strict";a.exports=Ea},9714:function(a){"use strict";a.exports=Fa},525:function(a){"use strict";a.exports=Ga},7542:function(a){"use strict";a.exports=Ha},7996:function(a){"use strict";a.exports=Ia},7047:function(a){"use strict";a.exports=Ja},5872:function(a){"use strict";a.exports=Ka},8624:function(a){"use strict";a.exports=La},8211:function(a){"use strict";a.exports=Ma},2152:function(a){"use strict";a.exports=Na},2036:function(a){"use strict";a.exports=Oa},1434:function(a){"use strict";a.exports=Pa},5779:function(a){"use strict";a.exports=Qa},7353:function(a){"use strict";a.exports=Ra},8269:function(a){"use strict";a.exports=Sa},9573:function(a){"use strict";a.exports=Ta},7050:function(a){"use strict";a.exports=Ua},5793:function(a){"use strict";a.exports=Va},5080:function(a){"use strict";a.exports=Wa},5920:function(a){"use strict";a.exports=Xa},6753:function(a){"use strict";a.exports=Ya},7115:function(a){"use strict";a.exports=Za},735:function(a){"use strict";a.exports=$a},9228:function(a){"use strict";a.exports=_a},1116:function(a){"use strict";a.exports=ab},2888:function(a){"use strict";a.exports=bb},7771:function(a){"use strict";a.exports=cb},8383:function(a){"use strict";a.exports=db},9559:function(a){"use strict";a.exports=eb},5572:function(a){"use strict";a.exports=fb},3634:function(a){"use strict";a.exports=gb},4284:function(a){"use strict";a.exports=hb},7678:function(a){"use strict";a.exports=ib},4245:function(a){"use strict";a.exports=jb},2603:function(a){"use strict";a.exports=kb},6866:function(a){"use strict";a.exports=lb},1237:function(a){"use strict";a.exports=mb},8595:function(a){"use strict";a.exports=nb},6455:function(a){"use strict";a.exports=ob},4191:function(a){"use strict";a.exports=pb},8842:function(a){"use strict";a.exports=qb},6281:function(a){"use strict";a.exports=rb},7608:function(a){"use strict";a.exports=sb},5456:function(a){"use strict";a.exports=tb},5510:function(a){"use strict";a.exports=ub},3805:function(a){"use strict";a.exports=vb},5378:function(a){"use strict";a.exports=wb},2233:function(a){"use strict";a.exports=xb},770:function(a){"use strict";a.exports=yb},6534:function(a){"use strict";a.exports=zb},3738:function(a){"use strict";a.exports=Ab},8853:function(a){"use strict";a.exports=Bb},3754:function(a){"use strict";a.exports=Cb},2471:function(a){"use strict";a.exports=Db},3178:function(a){"use strict";a.exports=Eb},6820:function(a){"use strict";a.exports=Fb},9985:function(a){"use strict";a.exports=Gb},6577:function(a){"use strict";a.exports=Hb},6766:function(a){"use strict";a.exports=Ib},3277:function(a){"use strict";a.exports=Jb},9896:function(a){"use strict";a.exports=Kb},6827:function(a){"use strict";a.exports=Lb},5483:function(a){"use strict";a.exports=Mb},7641:function(a){"use strict";a.exports=Nb},9497:function(a){"use strict";a.exports=Ob},1433:function(a){"use strict";a.exports=Pb},5013:function(a){"use strict";a.exports=Qb},2258:function(a){"use strict";a.exports=Rb},604:function(a){"use strict";a.exports=Sb},8441:function(a){"use strict";a.exports=Tb},1730:function(a){"use strict";a.exports=Ub},348:function(a){"use strict";a.exports=Vb},4517:function(a){"use strict";a.exports=Wb},5207:function(a){"use strict";a.exports=Xb},5135:function(a){"use strict";a.exports=Yb},7770:function(a){"use strict";a.exports=Zb},8028:function(a){"use strict";a.exports=$b},973:function(a){"use strict";a.exports=_b},3248:function(a){"use strict";a.exports=ac},7400:function(a){"use strict";a.exports=bc},9834:function(a){"use strict";a.exports=cc},3316:function(a){"use strict";a.exports=dc},9604:function(a){"use strict";a.exports=ec},6465:function(a){"use strict";a.exports=fc},7863:function(a){"use strict";a.exports=gc},9330:function(a){"use strict";a.exports=hc},4312:function(a){"use strict";a.exports=ic},748:function(a){"use strict";a.exports=jc},6146:function(a){"use strict";a.exports=kc},9386:function(a){"use strict";a.exports=lc},5293:function(a){"use strict";a.exports=mc},7611:function(a){"use strict";a.exports=nc},2590:function(a){"use strict";a.exports=oc},7596:function(a){"use strict";a.exports=pc},5250:function(a){"use strict";a.exports=qc},1286:function(a){"use strict";a.exports=rc}},vc={};function wc(a){var b=vc[a];if(void 0!==b)return b.exports;var c=vc[a]={id:a,loaded:!1,exports:{}};return uc[a].call(c.exports,c,c.exports,wc),c.loaded=!0,c.exports}wc.amdO={},wc.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return wc.d(b,{a:b}),b},tc=Object.getPrototypeOf?function(a){return Object.getPrototypeOf(a)}:function(a){return a.__proto__},wc.t=function(a,b){if(1&b)a=this(a);if(8&b)return a;if("object"==typeof a&&a){if(4&b&&a.__esModule)return a;if(16&b&&"function"==typeof a.then)return a}var c=Object.create(null);wc.r(c);var d={};sc=sc||[null,tc({}),tc([]),tc(tc)];for(var e=2&b&&a;"object"==typeof e&&!~sc.indexOf(e);e=tc(e))Object.getOwnPropertyNames(e).forEach(function(b){d[b]=function(){return a[b]}});return d.default=function(){return a},wc.d(c,d),c},wc.d=function(a,b){for(var c in b)if(wc.o(b,c)&&!wc.o(a,c))Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},wc.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"==typeof window)return window}}(),wc.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},wc.r=function(a){if("undefined"!=typeof Symbol&&Symbol.toStringTag)Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},wc.nmd=function(a){if(a.paths=[],!a.children)a.children=[];return a};var xc={};return function(){"use strict";wc.r(xc),wc.d(xc,{default:function(){return ns}});var a,b,c=wc(7406),d=wc(8156),e=wc.n(d),f={title:i18n("Ошибка при сохранении файлов"),close:i18n("Закрыть")},g=wc(467),h=wc(1373),i=wc.n(h),j=wc(5881),k=wc(8242),l=wc(7732),m=wc(9979),n=wc(5261),o=wc.n(n),p=wc(1791),q=wc(5041),r=function(a,b){if(void 0===b)b=p.LOGIN_REDIRECT_URL;var c=a.includes("?")?"&":"?",d=encodeURIComponent(b||"https://"+window.location.host+"?mv=1");return"".concat(a).concat(c,"page=").concat(d)},s=wc(1226),t=wc(8258),u=wc(5793),v=wc.n(u),w=[t.LetterFastActionType.archive,t.LetterFastActionType.unread,t.LetterFastActionType.remove],x=function(a,b){var c=t.LetterFastActionType.archive;if(a===t.LetterFastActionType.unread)c="read";if(a===t.LetterFastActionType.remove)c="delete";return"https://img.imgsmail.ru/hb/e.mail.ru/static/settings/letters-fast-action-settings/"+c+(v().getSelectedModel().isDarkMode()?"_dark":"")+(b?"-hidpi":"")+".png"},y=function(a){var b=a;if(!b){var c=(0,s.getFastActionReal)();if(!c||c===t.LetterFastActionType.settings)b=t.LetterFastActionType.unread;else b=c}var d=new Image;d.src=x(b),d.srcset="".concat(x(b,!0)," 2x")},z="_2ve7yX_xk8E4tIfjUsqzWI",A="lsNDhqYXKed-lFu-H8CbF",B=function(a){var b=a.onClick;return e().createElement("button",{className:z,onClick:b},e().createElement("span",{className:A},e().createElement(c.Icon,{icon:q.UNION_CHEVRON_DOWN_OUTLINE_28})))},C=wc(7747),D="_6-Tcbp_vMMDn6pPmvN8c3",E="_2Zz2QtC6bDrhrH1hTzxsm5",F="_26O209NOZ1b6w_aJ1KGCCI",G="_1suaejNwTAR5Eq-jlkfIQX",H="_3SUa5Dm7FghR_bow4viGt8",I="_3-RLjw3JtqfFYJr5m9Pm2t",J="_30o2c--oE5lIg-HwovltBI",K="_2ikpJBuyMJg1cYXaWh475h",L="_1xNzla9vL5cG0ZMEelkEeT",M=wc(1698),N=wc.n(M),O=r(p.LOGOUT_URL,p.LOGOUT_REDIRECT_URL),P=function(){return(P=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Q=o().get("initialUser"),R=p.DEFAULT_AVATAR_SRC+"&email=",S=function(a){if(!(null==a?void 0:a.fullName))return R+(null==a?void 0:a.email);else return R+(null==a?void 0:a.email)+"&name="+(null==a?void 0:a.fullName)},T=function(){return i().sendImmediately("mobile-account-dock_profile-open")},U=function(){return i().sendImmediately("mobile-account-dock_account-change")},V=function(){return i().sendImmediately("mobile-account-dock_settings-open")},W=function(){return i().sendImmediately("mobile-account-dock_account-add_click")},X=function(){return i().sendImmediately("mobile-account-dock_touch-redirect_click")},Y=function(){return i().sendImmediately("mobile-account-dock_contacts_click")},Z=p.MOBILE_ADDRESSBOOK_URL+"?mv=1",_=r(p.LOGIN_URL),$=function(a){return r(p.ACCOUNT_CHANGE_URL+a)},aa=function(a){var b=a.onClose,f=(0,g.useGlobalStateSelector)(k.getOtherAccounts),h=(0,g.useGlobalStateSelector)(k.getCurrentAccount);(0,d.useEffect)(function(){return y(),function(){i().send("mobile-account-dock_close")}},[]);var n,o,r,s,t=(n=null==h?void 0:h.email,o=(0,d.useCallback)(function(){(0,l.resetSnackbar)()},[]),r=(0,d.useCallback)(function(){i().sendImmediately("mobile-account-dock_logout"),o(),N()(O,M.OpenerTarget.self)},[o]),s=(0,d.useMemo)(function(){return e().createElement(C.Z,null,function(a){var b=a.Alert;return e().createElement(b,{actions:[{title:i18n("Отмена"),autoClose:!0,mode:"default"},{title:i18n("Выйти"),autoClose:!0,mode:"destructive",action:r}],actionsLayout:"horizontal",onClose:o,header:n,text:i18n("Выйти из учётной записи?")})})},[n,o,r]),(0,d.useCallback)(function(){if(p.DISABLE_MOBILE_ACCOUNT_LOGOUT_ALERT)r();else i().send("mobile-account-dock_logout-alert_open"),(0,l.setSnackbar)(s)},[s,r])),u=(0,d.useCallback)(function(){i().send("mobile-account-dock_csat_click"),b(),Promise.resolve().then(wc.t.bind(wc,7542,23)).then(function(a){return a.default}).then(function(a){return a.instance}).then(function(a){return a.forceShowSurvey(p.MOBILE_CSAT)}).catch(function(){(0,j.coreLoggerDispatchError)(new Error("Fetch feedback module error"),j.Tag.API)})},[b]);return e().createElement(C.Z,null,function(b){var d,g=b.ModalPage,i=b.SimpleCell,j=b.Counter,k=b.Separator,n=b.Spacing,o=b.Avatar;return e().createElement(g,P({},a,{onClose:a.onClose,header:e().createElement(B,{onClick:a.onClose})}),e().createElement("div",null,e().createElement("a",{key:null==h?void 0:h.email,href:$(null==h?void 0:h.email),onClick:U},e().createElement(i,{disabled:(null==Q?void 0:Q.email)===(null==h?void 0:h.email),before:e().createElement(o,{size:48,src:S(h)}),subtitle:null==h?void 0:h.email},e().createElement("span",{className:H},null==h?void 0:h.fullName))),e().createElement(n,{size:6}),!p.DISABLE_MOBILE_ACCOUNT_PROFILE&&e().createElement("a",{href:p.PROFILE_URL,onClick:T},e().createElement(i,null,e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_USER_OUTLINE_20})),e().createElement("span",null,i18n("Личные данные"))))),!p.DISABLE_MOBILE_ACCOUNT_SECURITY&&e().createElement("a",{href:p.SECURITY_URL,onClick:V},e().createElement(i,null,e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_LOCK_OUTLINE_20})),e().createElement("span",null,i18n("Пароль и безопасность"))))),!p.DISABLE_MOBILE_CONTACTS&&e().createElement("a",{href:Z,onClick:Y},e().createElement(i,null,e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_USER_SQUARE_OUTLINE_20})),e().createElement("span",null,i18n("Контакты"))))),e().createElement(i,{onClick:function(){return(0,l.pushModal)(m.ModalPages.letterFastActionSettings)}},e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_FAVORITE_OUTLINE_20})),e().createElement("span",null,i18n("Быстрые действия")))),p.USE_NEW_MOBILE_FOLDERS_MODAL&&e().createElement(i,{onClick:function(){return(0,l.pushModal)({id:m.ModalPages.foldersSettings,data:a.data})}},e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_FOLDER_OUTLINE_20})),e().createElement("span",null,i18n("Папки")))),e().createElement(i,{onClick:t},e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_DOOR_ARROW_RIGHT_OUTLINE_20})),e().createElement("span",null,i18n("Выйти"))))),!p.DISABLE_MOBILE_ACCOUNT_CHANGE_AND_ADD&&e().createElement(e().Fragment,null,e().createElement(n,{size:16}),(null===(d=null==h?void 0:h.children)||void 0===d?void 0:d.length)>0&&e().createElement("div",null,e().createElement("div",{className:J},i18n("Детские почтовые ящики")),h.children.map(function(a){return e().createElement("a",{key:a.email,href:(null==Q?void 0:Q.email)!==a.email?$(a.email):"",onClick:U},e().createElement(i,{disabled:(null==Q?void 0:Q.email)===a.email,className:F,before:e().createElement(o,{size:48,src:S(a)},e().createElement(o.Badge,null,e().createElement("div",{className:K},e().createElement(c.Icon,{icon:q.UNION_HORSE_TOY_OUTLINE_20})))),after:a.count>0&&e().createElement(j,{mode:"primary"},e().createElement("span",{className:G},a.count)),subtitle:a.email},e().createElement("span",{className:H},a.fullName)))})),e().createElement(n,null),e().createElement(k,null),e().createElement(n,{size:12}),e().createElement("div",null,f.map(function(a){return e().createElement("a",{key:a.email,href:$(a.email),onClick:U},e().createElement(i,{className:F,before:e().createElement(o,{size:48,src:S(a)}),after:a.count>0&&e().createElement(j,{mode:"primary"},e().createElement("span",{className:G},a.count)),subtitle:a.email},e().createElement("span",{className:H},a.fullName)))}),e().createElement("a",{href:_,onClick:W},e().createElement(i,{before:e().createElement(o,{size:48,className:I,withBorder:!1},e().createElement(c.Icon,{icon:q.UNION_ADD_20}))},i18n("Добавить аккаунт")))),(p.ENABLE_OPEN_TOUCH||p.ENABLE_MOBILE_CSAT)&&e().createElement(e().Fragment,null,e().createElement(n,{size:10}),e().createElement(k,null),e().createElement(n,{size:10})),p.ENABLE_OPEN_TOUCH&&e().createElement("a",{href:p.TOUCH_URL,onClick:X},e().createElement(i,null,e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_ARROW_UTURN_LEFT_OUTLINE_20})),e().createElement("span",{className:L},i18n("Перейти в старую версию"))))),p.ENABLE_MOBILE_CSAT&&e().createElement(i,{onClick:u},e().createElement("div",{className:D},e().createElement("span",{className:E},e().createElement(c.Icon,{icon:q.UNION_MESSAGE_OUTLINE_20})),e().createElement("span",{className:L},i18n("Оставить отзыв")))),(p.ENABLE_OPEN_TOUCH||p.ENABLE_MOBILE_CSAT)&&e().createElement(n,{size:10})))})},ba=wc(1190),ca=wc.n(ba),da="_2DuBfto-XbFgBB7jA-SEgn",ea="YHziy8PL3svFrkypcrlrt",fa="_1wKDuGpSBaf5FGUQlz3_23",ga="_2O5l0pEqLgDOdXsU1kbpi0",ha="_181ioJY6x3hE1wEID1tAce",ia="_1sffr8cSZ156jZ5eSUhFby",ja=function(a){var b,d=a.title,f=a.negativeButtonText,g=a.positiveButtonText,h=a.unknownButtonText,i=a.disabled,j=a.small,k=a.indented,l=a.onPositiveClick,m=a.onNegativeClick,n=a.onUnknownClick,o=ca()(((b={})[da]=!0,b[ha]=j,b[ia]=j&&k,b));return e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement("div",{className:o},e().createElement("div",{className:ea},e().createElement(c.Text,{secondary:!0,text:d})),e().createElement("div",{className:fa},e().createElement(b,{onClick:m,disabled:i,mode:"secondary",appearance:"neutral",size:"s"},f),e().createElement("div",{className:ga}),!!h&&e().createElement(e().Fragment,null,e().createElement(b,{onClick:n,disabled:i,mode:"secondary",appearance:"neutral",size:"s"},e().createElement(c.Text,{text:h,mode:"small"})),e().createElement("div",{className:ga})),e().createElement(b,{onClick:l,disabled:i,mode:"secondary",appearance:"neutral",size:"s"},g)))})},ka="_2V7LTszlTINOh3CSVOQfgq",la="_10uBzyD3XY00dgex_ehMnA",ma="pVdU5AdXYDsvEp4hoDuFG",na="_3b_tW5VKCs76_dYO9ZQ9Hs",oa="_2FSFbDla5oQAn2yQ7xcT8P",pa="_2VZ0EY32IZhrTr-9mcUA08",qa="_2mVf7d9ZpxUMYYij7Lj7Z3",ra=function(a){var b,d,f=a.small,g=a.indented,h=a.onNotInterestingClick,i=a.onAlreadyPurchasedClick,j=a.onOtherClick,k=a.onCancelClick,l=ca()(((b={})[ka]=!0,b[la]=f,b[ma]=f&&g,b)),m=ca()(((d={})[pa]=!0,d[qa]=f,d));return e().createElement("div",{className:l},e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement("div",{className:na},e().createElement(b,{onClick:k,size:"s",mode:"tertiary",before:e().createElement("div",{style:{display:"flex"}},e().createElement(c.Icon,{icon:q.ACTIONS_CLOSE}))}))}),e().createElement("div",{className:m},e().createElement("span",{onClick:h,className:oa},i18n("Не интересует тема")),e().createElement("span",{onClick:i,className:oa},i18n("Уже куплено")),e().createElement("span",{onClick:j,className:oa},i18n("Иная причина"))))},sa=wc(785),ta=wc(3823),ua={asx:"THUMB_PLAYLIST",m3u:"THUMB_PLAYLIST",m3u8:"THUMB_PLAYLIST",playlist:"THUMB_PLAYLIST",virus:"THUMB_VIRUS",odc:"THUMB_CHART",otc:"THUMB_CHART",chart:"THUMB_CHART",cb7:"THUMB_EBOOK",cbr:"THUMB_EBOOK",cba:"THUMB_EBOOK",cbt:"THUMB_EBOOK",cbz:"THUMB_EBOOK",djv:"THUMB_EBOOK",djvu:"THUMB_EBOOK",ebook:"THUMB_EBOOK",fb2:"THUMB_EBOOK",epub:"THUMB_EBOOK",mad:"THUMB_MARKDOWN",markdown:"THUMB_MARKDOWN","android-package":"THUMB_ANDROID_PACKAGE",apk:"THUMB_ANDROID_PACKAGE",rss:"THUMB_WEB_FEED","web-feed":"THUMB_WEB_FEED",ics:"THUMB_CALEDAR",ifb:"THUMB_CALEDAR",vcs:"THUMB_CALEDAR",calendar:"THUMB_CALEDAR",ldif:"THUMB_CARD",vcard:"THUMB_CARD",vcf:"THUMB_CARD",card:"THUMB_CARD",folder:"THUMB_FOLDER","folder-camera":"THUMB_FOLDER_CAMERA","folder-shared":"THUMB_FOLDER_SHARED","folder-mounted":"THUMB_FOLDER_SHARED","folder-virus":"THUMB_FOLDER_VIRUS",chm:"THUMB_HTML",mathml:"THUMB_HTML",mht:"THUMB_HTML",mhtml:"THUMB_HTML",mml:"THUMB_HTML",htm:"THUMB_HTML",html:"THUMB_HTML",xhtml:"THUMB_HTML",apng:"THUMB_PICTURE",hdp:"THUMB_PICTURE",ico:"THUMB_PICTURE",j2k:"THUMB_PICTURE",jp2:"THUMB_PICTURE",jpe:"THUMB_PICTURE",jpf:"THUMB_PICTURE",jpm:"THUMB_PICTURE",jpx:"THUMB_PICTURE",jxr:"THUMB_PICTURE",svg:"THUMB_PICTURE",svgz:"THUMB_PICTURE",wdp:"THUMB_PICTURE",webp:"THUMB_PICTURE",jpg:"THUMB_PICTURE",jpeg:"THUMB_PICTURE",gif:"THUMB_PICTURE",bmp:"THUMB_PICTURE",tif:"THUMB_PICTURE",tiff:"THUMB_PICTURE",png:"THUMB_PICTURE",heic:"THUMB_PICTURE",tga:"THUMB_PICTURE",ai:"THUMB_PICTURE",image:"THUMB_PICTURE",raw:"THUMB_PICTURE",graphics:"THUMB_PICTURE",picture:"THUMB_PICTURE",psd:"THUMB_PHOTOSHOP",photoshop:"THUMB_PHOTOSHOP",cab:"THUMB_ARCHIVE",dmg:"THUMB_ARCHIVE",ear:"THUMB_ARCHIVE",tar:"THUMB_ARCHIVE",tbz:"THUMB_ARCHIVE",tgz:"THUMB_ARCHIVE",war:"THUMB_ARCHIVE",arj:"THUMB_ARCHIVE",zipz:"THUMB_ARCHIVE",bzip2:"THUMB_ARCHIVE",bz2:"THUMB_ARCHIVE",gz:"THUMB_ARCHIVE","7z":"THUMB_ARCHIVE",rar:"THUMB_ARCHIVE",zip:"THUMB_ARCHIVE",jar:"THUMB_ARCHIVE",hyp:"THUMB_ARCHIVE",archive:"THUMB_ARCHIVE",conf:"THUMB_PLAIN_TEXT",diff:"THUMB_PLAIN_TEXT",ini:"THUMB_PLAIN_TEXT",mime:"THUMB_PLAIN_TEXT",text:"THUMB_PLAIN_TEXT",log:"THUMB_PLAIN_TEXT",txt:"THUMB_PLAIN_TEXT",lng:"THUMB_PLAIN_TEXT","plain-text":"THUMB_PLAIN_TEXT",asm:"THUMB_SOURCE",atom:"THUMB_SOURCE",cc:"THUMB_SOURCE",cpp:"THUMB_SOURCE",css:"THUMB_SOURCE",cxx:"THUMB_SOURCE",dtd:"THUMB_SOURCE",f:"THUMB_SOURCE",f77:"THUMB_SOURCE",f90:"THUMB_SOURCE",for:"THUMB_SOURCE",gemspec:"THUMB_SOURCE",h:"THUMB_SOURCE",hh:"THUMB_SOURCE",hpp:"THUMB_SOURCE",java:"THUMB_SOURCE",masm:"THUMB_SOURCE",p:"THUMB_SOURCE",pas:"THUMB_SOURCE",pl:"THUMB_SOURCE",pm:"THUMB_SOURCE",rake:"THUMB_SOURCE",ru:"THUMB_SOURCE",s:"THUMB_SOURCE",sgm:"THUMB_SOURCE",sgml:"THUMB_SOURCE",t:"THUMB_SOURCE",tex:"THUMB_SOURCE",texi:"THUMB_SOURCE",texinfo:"THUMB_SOURCE",txi:"THUMB_SOURCE",vbs:"THUMB_SOURCE",xml:"THUMB_SOURCE",yaml:"THUMB_SOURCE",yml:"THUMB_SOURCE",c:"THUMB_SOURCE",js:"THUMB_SOURCE",php:"THUMB_SOURCE",py:"THUMB_SOURCE",rb:"THUMB_SOURCE",source:"THUMB_SOURCE",json:"THUMB_JSON",aifc:"THUMB_AUDIO",mid:"THUMB_AUDIO",oga:"THUMB_AUDIO",ra:"THUMB_AUDIO",wave:"THUMB_AUDIO",ram:"THUMB_AUDIO",midi:"THUMB_AUDIO",wav:"THUMB_AUDIO",ogg:"THUMB_AUDIO",aiff:"THUMB_AUDIO",flac:"THUMB_AUDIO",m4a:"THUMB_AUDIO",wma:"THUMB_AUDIO",mp3:"THUMB_AUDIO",audio:"THUMB_AUDIO",msg:"THUMB_EMAIL",mbox:"THUMB_EMAIL",clx:"THUMB_EMAIL",eml:"THUMB_EMAIL",email:"THUMB_EMAIL",bat:"THUMB_EXE",com:"THUMB_EXE",msi:"THUMB_EXE",sh:"THUMB_EXE",exe:"THUMB_EXE",exec:"THUMB_EXE",executable:"THUMB_EXE",pdf:"THUMB_PDF",m2ts:"THUMB_VIDEO",m4v:"THUMB_VIDEO",matroska:"THUMB_VIDEO",mk3d:"THUMB_VIDEO",mka:"THUMB_VIDEO",mks:"THUMB_VIDEO",mkv:"THUMB_VIDEO",mng:"THUMB_VIDEO",mp4v:"THUMB_VIDEO",mts:"THUMB_VIDEO",ogv:"THUMB_VIDEO",qt:"THUMB_VIDEO",ts:"THUMB_VIDEO",tsa:"THUMB_VIDEO",tsv:"THUMB_VIDEO",vob:"THUMB_VIDEO",wmx:"THUMB_VIDEO",flv:"THUMB_VIDEO",mpg:"THUMB_VIDEO","3gp":"THUMB_VIDEO",mov:"THUMB_VIDEO",asf:"THUMB_VIDEO",mp4:"THUMB_VIDEO",mpeg:"THUMB_VIDEO",avi:"THUMB_VIDEO",wmv:"THUMB_VIDEO",webm:"THUMB_VIDEO",video:"THUMB_VIDEO",docm:"THUMB_DOCUMENT",dot:"THUMB_DOCUMENT",dotx:"THUMB_DOCUMENT",odt:"THUMB_DOCUMENT",ott:"THUMB_DOCUMENT",pages:"THUMB_DOCUMENT",doc:"THUMB_DOCUMENT",docx:"THUMB_DOCUMENT",rtf:"THUMB_DOCUMENT",wps:"THUMB_DOCUMENT",wpd:"THUMB_DOCUMENT",document:"THUMB_DOCUMENT",csv:"THUMB_SPREADSHEET",numbers:"THUMB_SPREADSHEET",ods:"THUMB_SPREADSHEET",ots:"THUMB_SPREADSHEET",xls:"THUMB_SPREADSHEET",xlsx:"THUMB_SPREADSHEET",xlsb:"THUMB_SPREADSHEET",xlsm:"THUMB_SPREADSHEET",excel:"THUMB_SPREADSHEET",spreadsheet:"THUMB_SPREADSHEET",key:"THUMB_PRESENTATION",keynote:"THUMB_PRESENTATION",odp:"THUMB_PRESENTATION",otp:"THUMB_PRESENTATION",pot:"THUMB_PRESENTATION",potm:"THUMB_PRESENTATION",potx:"THUMB_PRESENTATION",ppsm:"THUMB_PRESENTATION",pptm:"THUMB_PRESENTATION",ppt:"THUMB_PRESENTATION",pptx:"THUMB_PRESENTATION",pps:"THUMB_PRESENTATION",ppsx:"THUMB_PRESENTATION",presentation:"THUMB_PRESENTATION","excel-online":"THUMB_EXCEL_ONLINE","powerpoint-online":"THUMB_POWERPOINT_ONLINE","word-online":"THUMB_WORD_ONLINE"},va=function(a){var b=a.iconType,d=ta.mx[ua[b]]||ta.mx[sa.BD.THUMB_UNKNOWN];return e().createElement(c.Icon,{icon:d,sizeX:5})},wa=wc(9775),xa=function(a){var b,c,d=a.x10,e=a.x8,f=a.x6,g=a.x5,h=a.x05,i=a.sizeBorderRadius,j=a.colorTransparent;return{container:{height:d.value,display:"flex",justifyContent:"center",alignItems:"center","&:hover $base":{background:j.hover.value},"&:active $base":{background:j.active.value}},base:{width:d.value,height:d.value,borderRadius:null!==(c=null===(b=i.compact)||void 0===b?void 0:b.value)&&void 0!==c?c:i.regular.value,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},ponyMode:{width:e.value,height:e.value,borderRadius:h.value},small:{width:f.value,height:f.value},iconContainer:{width:g.value,height:g.value,position:"relative"},active:{background:j.active.value,"&:hover":{background:j.active.value}}}},ya=(a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)},function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}),za=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Aa=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ya(b,a),b.prototype.render=function(){var a,b=this.props,d=b.classes,f=b.active,g=b.small,h=b.ponyMode;return e().createElement("div",{className:d.container},e().createElement("div",{className:ca()(d.base,(a={},a[d.active]=f,a[d.ponyMode]=h,a[d.small]=g,a)),"data-test-id":(0,wa.qa)("attachment-button")},e().createElement("span",{className:d.iconContainer},e().createElement(c.Icon,{icon:q.STATUS_ATTACH}))))},b=za([(0,c.withStyles)(xa)],b)}(e().PureComponent),Ba=wc(5779),Ca=function(a){return(0,Ba.getAttachmentIconByExt)(a)},Da=function(a){switch(a.iconName){case"ATTACH_PDF":return"#EF6162";case"ATTACH_SPREADSHEET":return"#50BB4C";default:return"#7A8595"}},Ea=function(a){var b=a.x8,c=a.x6,d=a.x1,e=a.colorBackgroundSecondary;return{base:{display:"flex",justifyContent:"center",alignItems:"center",width:b.value,height:b.value,borderRadius:d.value,backgroundColor:e.normal.value},ponyMode:{width:c.value,height:c.value}}},Fa=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ga=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Ha=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Fa(b,a),b.prototype.render=function(){var a,b=this.props,d=b.classes,f=b.ponyMode,g=b.iconName,h=ca()(d.base,((a={})[d.ponyMode]=f,a));return e().createElement("div",{className:h,style:{fill:Da(this.props)}},e().createElement(c.Icon,{icon:ta.U2[g]||ta.U2.ATTACH_UNKNOWN,testId:"file-icon:".concat(g)}))},b=Ga([(0,c.withStyles)(Ea)],b)}(e().PureComponent),Ia=function(a){var b=a.x05,c=a.x5;return{base:{paddingLeft:"40px",position:"relative"},clickable:{cursor:"pointer"},imageWrap:{padding:"4px",borderRadius:b.value},imageWrapClickable:{cursor:"pointer"},imageWrapHidden:{position:"absolute",opacity:0},fileIco:{position:"absolute",left:0,top:-6},listItem:{padding:"10px 16px 10px 52px"},listItemFileIco:{left:12,top:4},listItemPonyMode:{paddingTop:6,paddingBottom:6,paddingLeft:"48px"},noWrap:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},progressWrapper:{padding:20},text:{maxHeight:c.value}}},Ja=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ka=function(){return(Ka=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},La=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Ma=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={loaded:!1,src:void 0},b.overlayRender=function(a){var d,f=b.props,g=f.classes,h=f.onClick,i=f.qaEnabled,j=b.state.loaded,k=b.getActualSrc();return e().createElement("div",null,!j?e().createElement("div",{className:g.progressWrapper},e().createElement(c.Progress,{secondary:!0})):null,e().createElement("div",Ka({},i?{"data-test-id":"clip-in-list-success-overlay"}:{},{className:ca()(g.imageWrap,(d={},d[g.imageWrapClickable]=!!h,d[g.imageWrapHidden]=!j,d)),onClick:h}),e().createElement("img",{src:k,onLoad:function(){b.setState(Ka(Ka({},b.state),{loaded:!0}),function(){a()})},onError:function(){b.setState({src:null})}})))},b}return Ja(b,a),b.prototype.getItem=function(){var a,b,d,f=this.props,g=f.classes,h=f.extension,i=f.title,j=f.noWrap,k=f.listItem,l=f.onClick,m=f.ponyMode;return e().createElement("div",{className:ca()(g.base,(a={},a[g.listItem]=k,a[g.noWrap]=j,a[g.listItemPonyMode]=m,a[g.clickable]=!!l,a)),onClick:l},e().createElement("div",{className:ca()(g.fileIco,(b={},b[g.listItemFileIco]=k,b))},e().createElement(Ha,{iconName:Ca(h),ponyMode:m})),e().createElement("div",{className:ca()(g.text,(d={},d[g.noWrap]=j,d))},e().createElement(c.Text,{mode:m?"small":"base"},i)))},b.prototype.getActualSrc=function(){var a=this.props.src,b=this.state?this.state.src:void 0,c=a;if(void 0!==b)c=b;return c},b.prototype.render=function(){var a=this.props.overlayContainer;if(this.getActualSrc()&&!p.DISABLE_DOCS_PREVIEWS)return e().createElement(c.Tooltip,{delay:500,placement:"left",overlay:this.overlayRender,overlayContainer:a},this.getItem());else return this.getItem()},b=La([(0,c.withStyles)(Ia)],b)}(e().PureComponent),Na=function(a){var b=a.x4,c=a.x1,d=a.typeBorderButton,e=a.colorBackgroundContent,f=a.colorFieldBorderAlpha;return{base:{display:"flex",alignItems:"center",whiteSpace:"nowrap",borderRadius:c.value,backgroundColor:e.normal.value,border:"".concat("1px"," ").concat(d.value," ").concat(f.normal.value),padding:"0 ".concat(b.value),boxSizing:"border-box",height:28,"&:hover":{borderColor:f.hover.value}},large:{height:47}}},Oa=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Pa=function(){return(Pa=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Qa=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Ra=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Oa(b,a),b.prototype.render=function(){var a,b=this.props,d=b.classes,f=b.qaEnabled,g=b.count,h=b.large;if(!g)return null;var i=ca()(d.base,((a={})[d.large]=h,a));return e().createElement("div",Pa({className:i},f?{"data-test-id":"attachment-button"}:{}),e().createElement(c.Text,{bold:!0,mode:"small"},i18n("ещё {count}",{count:g})))},b=Qa([(0,c.withStyles)(Na)],b)}(e().PureComponent),Sa=function(a){return{base:{},item:{"&:hover":{background:a.colorTransparent.hover.value},maxWidth:"300px"},itemHoverless:{"&:hover":{background:"inherit"}},overlay:{padding:"8px 0"}}},Ta=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ua=function(){return(Ua=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Va=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Wa={search:"bottomRight",letter:"left"},Xa={search:200,letter:0},Ya=function(a){function b(b){var c=a.call(this,b)||this;return c.renderOverlay=function(a){a.closeOverlay;var b=c.props,d=b.classes,f=b.qaEnabled;return e().createElement("div",Ua({className:d.overlay},f?{"data-test-id":"attachment-dropdown-overlay"}:{}),c.getItems())},c.onChangeExpandState=c.onChangeExpandState.bind(c),c}return Ta(b,a),b.prototype.getItems=function(){var a=this.props,b=a.classes,c=a.items,d=a.ponyMode,f=a.qaEnabled;return c.map(function(a,c){var g,h=a.title,i=a.src,j=a.extension,k=a.onClick;return e().createElement("div",Ua({className:ca()(b.item,(g={},g[b.itemHoverless]=!k,g)),key:c},f?{"data-test-id":"overlay-item:".concat(c)}:{}),e().createElement(Ma,Ua({listItem:!0,noWrap:!0},{ponyMode:d,qaEnabled:f,onClick:k,src:i,title:h,extension:j})))})},b.prototype.onChangeExpandState=function(a){var b=this.props.onChange;b&&b(a)},b.prototype.getDropdownButton=function(){var a=this.props,b=a.mode,c=void 0===b?"letter":b,d=a.qaEnabled,f=a.ponyMode,g=a.open,h=a.items,i=a.buttonSize;switch(c){case"letter":return e().createElement(Aa,{active:g,ponyMode:f,small:"small"==i});case"search":return e().createElement(Ra,{qaEnabled:d,count:(h||[]).length,large:"large"===i})}},b.prototype.render=function(){var a=this.props,b=a.overlayContainer,d=a.open,f=a.mode;return e().createElement(c.Dropdown,{overlayContainer:b,overlay:this.renderOverlay,placement:Wa[f]||"left",onChangeExpandState:this.onChangeExpandState,pureOverlay:!0,open:d,reservePlacement:"search"===f?"topRight":void 0,minOverlayHeight:Xa[f]||0,autoOverflow:!0},this.getDropdownButton())},b=Va([(0,c.withStyles)(Sa)],b)}(e().PureComponent),Za=wc(9299),$a=wc.n(Za),_a=wc(6866),ab=wc.n(_a),bb=wc(8671),cb="PYWbz7iDRANq-rcj1HnGD",db="_1Fx4sel0_yQc_829Y-NC57",eb="_3VRa3Oke0jvi15ZZiAXsTI",fb="_3tFIEVfLI2js4Xt03prydF",gb="_2JRHs7IIUxr_vQQ6y-UYrH",hb="_1X2w25WlZYhC74I5Q5IB4I",ib="NdtqSOtLWhHc3hGqG5-oL",jb="_1u-Wwswc_xWFA0QXNNvySF",kb="lddh6oGGYau2ap2qfKJ0q",lb="QQBOLGk7zzSEd8HnB6WrE",mb="_3SrHpMNsn2QgsuRm822qgo",nb="_2Zu7wp58wMDPJnM_cDP_3l",ob="_2s3_4wFY391gFTwt29a0_g",pb="_2k5-U5g15ZVDMngyN7bQmH",qb={healthy:"CHECK_SHIELD",probablyHealthy:"CHECK_SHIELD",unchecked:"STATUS_WARNING_ROUND",danger:"STATUS_WARNING_ROUND"},rb=function(a){var b,d,f,g=a.safetyStatus,h=a.hasBackground,i=a.attachCount,j=a.mobile,k={healthy:{text:$a()(i,{one:j?i18n("Файл проверен"):i18n("Файл проверен антивирусом"),many:j?i18n("Файлы проверены"):i18n("Файлы проверены антивирусом")}),hint:$a()(i,{one:i18n("Вирусов в нём не нашли"),many:i18n("Вирусов в них не нашли")})},probablyHealthy:{text:$a()(i,{one:j?i18n("Файл безопасен"):i18n("Почта считает файл безопасным"),many:j?i18n("Файлы безопасны"):i18n("Почта считает файлы безопасными")}),hint:$a()(i,{one:null,many:null})},unchecked:{text:$a()(i,{one:j?i18n("Файл не проверен"):i18n("Файл не проверен антивирусом"),many:j?i18n("Файлы не проверены"):i18n("Файлы не проверены антивирусом")}),hint:$a()(i,{one:i18n("Не открывайте его, если не доверяете отправителю"),many:i18n("Не открывайте их, если не доверяете отправителю")})},danger:{text:i18n("Обнаружены вирусы"),hint:$a()(i,{one:i18n("Не открывайте файл, он может навредить"),many:i18n("Не открывайте файлы, они могут навредить")})}},l=qb[g],m=k[g],n=m.text,o=m.hint,q="healthy"===g,r="probablyHealthy"===g,s="danger"===g,t="unchecked"===g,u=ca()(ib,((b={})[jb]=q||r,b[kb]=t,b[lb]=s,b)),v=ca()(mb,((d={})[nb]=q||r,d[ob]=t,d[pb]=s,d)),w=ca()(db,((f={})[eb]=h,f[fb]=h&&(q||r),f[gb]=h&&t,f[hb]=h&&s,f));return e().createElement("div",{className:cb},e().createElement("div",{className:w},e().createElement("span",{className:u},e().createElement(bb.Z,{name:l,component:ab()})),p.SHOW_ATTACH_SAFETY_STATUS_TOOLTIP?e().createElement("span",{className:v},e().createElement(c.Tooltip,{overlay:e().createElement(c.Text,{mode:"small",text:o}),overlayContainer:document.body,showByClick:!0,testId:"attach-safety-status-tooltip"},n)):e().createElement("span",{className:v},n)))},sb=function(a){var b=a.attachIcon,d=a.size,f=void 0===d?23:d;return e().createElement(c.Icon,{icon:b,sizeX:f})},tb=c.TwoKitTheming.createUseStyles(function(a){return{spacer:{width:a.x2.value},controlsBarBottom:{display:"flex",width:"100%",justifyContent:"space-between"},controlsBarItem:{display:"flex",margin:a.x3.value,width:"calc(100% - 2*".concat(a.x3.value,")")}}}),ub=function(a){var b=a.iconDownload,d=a.iconUpload,f=a.downloadBtnTitle,g=a.downloadBtnTooltip,h=a.uploadBtnTitle,i=a.uploadBtnTooltip,j=a.link,k=a.onCloudUploadClick,l=a.onDownloadClick,m=a.isDownload,n=a.isCloudUpload,o=tb(a);return e().createElement("div",{className:o.controlsBarBottom,"data-test-id":"controlsBarBottom"},m&&e().createElement(c.Tooltip,{overlay:e().createElement(c.Text,{mode:"small",text:g}),overlayContainer:document.body},e().createElement("a",{className:o.controlsBarItem,onClick:l,"data-test-id":"download",href:j},e().createElement(c.Icon,{icon:b}),e().createElement("div",{className:o.spacer}),e().createElement(c.Text,{text:f,mode:"small"}))),n&&e().createElement(c.Tooltip,{overlay:e().createElement(c.Text,{mode:"small",text:i}),overlayContainer:document.body},e().createElement("div",{className:o.controlsBarItem,onClick:k,"data-test-id":"cloud"},e().createElement(c.Icon,{icon:d}),e().createElement("div",{className:o.spacer}),e().createElement(c.Text,{text:h,mode:"small"}))))},vb="_1cxy2LRKQ87SyaqdQ6reTe",wb="_1rxuLJo77v4lUrVe4mnNM6",xb="_5Fs81lZrvIDR55HR5JtzB",yb="_1d_4AzngkI4NdXO72TE-IY",zb="_1QDMIBW3LTw2-mmIP68Ub6",Ab=function(a){var b=a.attachName,d=a.icon,f=a.couldExpired,g=a.expiredText,h=a.onExpiredClick,i=ta.mx[sa.BD.LINK];return e().createElement("div",{className:vb,"data-test-id":"thumb-header"},d&&e().createElement("div",{className:xb},e().createElement(c.Icon,{icon:d,sizeX:5})),b&&e().createElement("div",{className:wb},e().createElement(c.Text,{mode:"small",text:b})),f&&e().createElement(c.Tooltip,{overlay:function(){return e().createElement("div",{className:yb,"data-test-id":"thumb-footer-link-overlay"},e().createElement(c.Text,{mode:"small",text:g}))},overlayContainer:document.body},e().createElement("div",{className:zb,"data-test-id":"link"},e().createElement(c.Icon,{icon:i,onClick:h}))))},Bb="_3JaY_XKz-_Ywfpcjy91efA",Cb="_2IOjOGA3e62io7V05XBC71",Db=function(){return e().createElement("div",{className:Bb,"data-test-id":"attach-warning-content"},e().createElement("div",{className:Cb},e().createElement(c.Text,{text:i18n("Файл заражен"),secondary:!0})))},Eb="Nz9IjvD763mPUnVv4IDIj",Fb="_2eoVLi9EUpT0iSnJNzqBm9",Gb=function(){var a=(0,c.fillIcon)(q.STATUS_ERROR,{fill:"white"});return e().useEffect(function(){i().send("attach_show_warn_overlay")},[]),e().createElement("div",{className:Eb,"data-test-id":"attach-warning-overlay"},e().createElement("div",{className:Fb},e().createElement(c.Avatar,{small:!0,warning:!0,icon:a})),e().createElement("div",null,e().createElement(c.Text,{mode:"h5",text:i18n("Файл заражен")}),e().createElement(c.Margin,{mobileX:1,desktopX:1}),e().createElement(c.Text,{text:i18n("Осторожно: Касперский нашел в этом файле вирус")})))},Hb=function(){return(Hb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ib=function(a){var b,d=a.title,f=a.preview,g=a.fullPreview,h=a.iconType,j=a.downloadBtnTitle,k=a.downloadBtnTooltip,l=a.uploadBtnTitle,m=a.uploadBtnTooltip,n=a.linkTitle,o=a.isLink,p=a.link,q=a.onDownloadClick,r=a.onCloudUploadClick,s=a.onOpenClick,t=a.testId,u=a.attachWarningTooltip,v=a.disableCloudUpload,w=c.TwoKitTheming.useTheme(),x=u&&(0,c.fillIcon)(ta.mx[sa.BD.WARNING],{fill:w.colorIconNegative.normal.value})||ta.mx[ua[h]]||ta.mx[sa.BD.THUMB_UNKNOWN],y=ta.mx[sa.BD.ACTIONS_DOWNLOAD_ALT],z=ta.mx[sa.BD.ACTIONS_TO_CLOUD],A=f&&!g||u,B=e().createElement(Ab,Hb({},!g&&{attachName:d},A&&{icon:x},{couldExpired:o,expiredText:n,onExpiredClick:s})),C=e().createElement(ub,{isDownload:!u,isCloudUpload:!v&&!u,iconDownload:y,iconUpload:z,downloadBtnTitle:j,downloadBtnTooltip:k,uploadBtnTitle:l,uploadBtnTooltip:m,link:p,onDownloadClick:q,onCloudUploadClick:r}),D=Hb(Hb({tooltip:function(){if(u)return e().createElement(Gb,null);else return d}(),testId:"thumb",footer:C},u&&{tooltipProps:{promo:!0,arrow:!0,arrowMode:"soft"},bgMode:"error",footerMode:"naked"}),{onClickOpen:s,header:B}),E=f?g?"previewFull":"preview":"noPreview",F=function(){if(u)return e().createElement(Db,null);if("noPreview"===E)return e().createElement(sb,{attachIcon:x});else return f};switch(e().useEffect(function(){i().send("attach_show_".concat(u?"warn_tltp":"health"))},[]),E){case"preview":b=e().createElement(c.Thumb,Hb({},D,{mode:"preview",content:F(),testId:t,onClickOpen:s}));break;case"previewFull":b=e().createElement(c.Thumb,Hb({},D,{mode:"previewFull",content:F(),testId:t,onClickOpen:s}));break;case"noPreview":b=e().createElement(c.Thumb,Hb({},D,{mode:"noPreview",content:F(),testId:t,onClickOpen:s}))}return e().createElement(e().Fragment,null,b)},Jb="pjQlFxOKi2oRlK2qST1m6",Kb="_3L1OP_26_tOJUigKZMCQzI",Lb="_3Jh8rpdc5u3Fj00ZL2E4R",Mb="_1WJxOkau14yQgz68dWAGWL",Nb=function(a){var b,c,d=a.text,f=a.isDefaultTheme,g=a.onClick,h=ca()(((b={})[Kb]=!0,b[Lb]=f,b)),i=ca()(((c={})[Mb]=!f,c[Jb]=!0,c));return e().createElement("button",{onClick:g,className:h},e().createElement("div",{className:i},d))},Ob=function(){return{popup:{textAlign:"left"},controls:{display:"flex"}}},Pb=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Qb=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Rb=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={show:!0},b.onClose=function(){b.setState({show:!1}),b.props.onClose()},b.onAttachClick=function(){var a=b.props.onAttachClick;b.onClose(),a()},b}return Pb(b,a),b.prototype.render=function(){var a=this,b=this.props.classes,d=this.state.show;return e().createElement(c.Popup,{show:d,onHide:this.onClose,closeByEsc:!0,width:"420px",testId:"file-limit-popup"},e().createElement(c.Panel,{popup:!0,onClose:this.onClose},e().createElement("div",{className:b.popup},e().createElement(c.Text,{mode:"h3"},i18n("Будут прикреплены 100 файлов")),e().createElement("div",null,e().createElement(c.Margin,{mobile:10,desktop:16}),e().createElement(c.Text,null,i18n("Вы можете присоединить к письму не более 100 файлов"))),e().createElement(c.Margin,{mobile:10,desktop:40}),e().createElement(c.Hr,{oversize:!0}),e().createElement(c.Margin,{mobile:10,desktop:20}),e().createElement(C.Z,null,function(d){var f=d.Button;return e().createElement("div",{className:b.controls},e().createElement(f,{onClick:a.onAttachClick,"data-test-id":"attach-button",size:"l"},i18n("Прикрепить")),e().createElement(c.Space,null),e().createElement(f,{mode:"secondary",appearance:"neutral",onClick:a.onClose,"data-test-id":"cancel-button",size:"l"},i18n("Отмена")))}))))},b=Qb([(0,c.withStyles)(Ob)],b)}(e().PureComponent),Sb=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Tb=function(){return(Tb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ub=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Sb(b,a),b.prototype.componentDidCatch=function(a,b){var c;(0,j.coreLoggerDispatchReactError)(a,Tb(Tb({},b),null!==(c=this.props.logData)&&void 0!==c?c:{}),{category:"rct-".concat(this.props.id),tag:j.Tag.Self})},b.prototype.render=function(){return this.props.children},b}(e().Component),Vb=wc(7984),Wb="_3oIyeg5-APZE-wMgE1Sa4R",Xb="_5aXw-8m9Z2YfntoapsIrl",Yb="yBGr5VSpZsrNAzlkZNINP",Zb="_1WFYMWbtt3C453rYcJ6cj",$b="_25HeWmeK-5bvP9wNFp7Xsx",_b=function(a){var b=a.children,d=a.onChangeExpandState,f=a.placement,g=a.reservePlacement,h=a.adDescription,i=a.overlayContainer,j=e().useMemo(function(){return(0,Vb.createAboutAdLink)(h)},[h]);return e().createElement("div",{className:Wb},e().createElement(c.Dropdown,{placement:null!=f?f:"bottom",reservePlacement:null!=g?g:"top",pureOverlay:!0,overlay:function(){return e().createElement("div",{className:Xb},e().createElement("div",{className:Yb},p.TRANSLATE_ABOUT_AD?i18n("Рекламная интеграция"):"Рекламная интеграция"),e().createElement("a",{className:Zb,href:j,target:"_blank",rel:"noopener noreferrer"},e().createElement("img",{className:$b,src:"https://img.imgsmail.ru/hb/e.mail.ru/static/icons/img/82/AB7DCF.svg",alt:""}),p.TRANSLATE_ABOUT_AD?i18n("О рекламодателе"):"О рекламодателе"))},overlayContainer:i,onChangeExpandState:d},b))},ac="_13OlX00wr6HZedRW0_4y5q",bc="_1U0AAuV1rA5qIf9yWHDLEe",cc="_1n83Qbln9HESp-GH8yTvnY",dc=function(a){switch(a){case"vertical":return ta.yk[sa.tW.NAVIGATION_MORE_VERTICAL];default:case"horizontal":return ta.yk[sa.tW.NAVIGATION_MORE]}},ec=function(a){var b,d=a.className,f=a.mode,g=a.pressed,h=a.onClick,i=a.contrast;return e().createElement("div",{className:ca()(ac,(b={},b[cc]=g,b[bc]=i,b[d]=!!d,b)),onClick:h},e().createElement(c.Icon,{icon:dc(f)}))},fc=function(a){var b,c=a.adDescription,d=a.onChangeExpandState,f=a.placement,g=a.reservePlacement,h=a.className,i=a.mode,j=a.overlayContainer,k=a.onClick,l=a.contrast,m=e().useState(!1),n=m[0],o=m[1];return e().useEffect(function(){null==d||d(n)},[d,n]),e().createElement(_b,{adDescription:c,onChangeExpandState:o,placement:f,reservePlacement:g,overlayContainer:j},e().createElement(ec,{mode:i,pressed:n,className:ca()((b={},b[h]=!!h,b)),onClick:k,contrast:l}))},gc="_1NwMwhTfjiaK5NkfLxVun0",hc="_24W00GUXAc1hiwoPHdD3UE",ic="_2x4zBiAo7Avv0IZuceXWWf",jc="_1q-jtefI3wS9HUis6j0FXl",kc="CqAGbQM2kVpRixOIkdj8D",lc="Q4Vjzfg5le4oTgqWpRLMx",mc="_2E1HVnCJ8JRhMo9qhBnxyQ",nc=function(){return(nc=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},oc=(0,Vb.isAdInfo)(p.KASPERSKY_ABOUT_AD_RAW)?p.KASPERSKY_ABOUT_AD_RAW:p.KASPERSKY_ABOUT_AD_DEFAULT,pc=function(a){return a?ta.yk[sa.tW.KASPERSKY_LOGO_ALTER_ENG]:ta.yk[sa.tW.KASPERSKY_LOGO_ALTER_RUS]},qc=function(a){var b=a.children,c=a.onLogoLinkClick;return e().createElement("a",{href:p.KASPERSKY_LOGO_HREF,target:"_blank",rel:"noopener noreferrer",onClick:c,className:ic},b)},rc=function(a){var b,d,f,g,h=a.isEngLogo,i=a.onLogoLinkClick,j=a.contrast,k=e().useState(!1),l=k[0],m=k[1];if(!p.KASPERSKY_LOGO_WITH_AD_DROPDOWN)return e().createElement(qc,{onLogoLinkClick:i},e().createElement(c.Icon,{icon:(g=h,g?ta.yk[sa.tW.KASPERSKY_LOGO_ENG]:ta.yk[sa.tW.KASPERSKY_LOGO_RUS])}));else return e().createElement("div",{className:ca()(gc,(b={},b[hc]=j,b))},e().createElement(qc,{onLogoLinkClick:i},e().createElement(c.Icon,{icon:pc(h)})),e().createElement("span",{className:jc},"•"),e().createElement("div",{className:kc},p.TRANSLATE_ABOUT_AD?i18n("реклама"):"реклама"),e().createElement(fc,{className:ca()(lc,(d={},d[mc]=!l,d)),adDescription:nc((f={},f[Vb.AdDescriptionKeys.Subject]=p.KASPERSKY_LOGO_HREF,f),oc),onChangeExpandState:m,contrast:j}))},sc=c.TwoKitTheming.createUseStyles(function(a){var b=a.x2,c=a.x4,d=a.x5,e=a.x6,f=a.x10,g=a.colorBackgroundSecondary;return{titleBlock:{paddingBottom:c.value},folderList:{height:"240px",background:g.normal.value,overflow:"auto",marginLeft:"-32px",marginRight:"-32px",padding:"".concat(b.value," 0")},folder:{display:"flex",alignItems:"center",height:f.value,borderRadius:b.value,paddingLeft:b.value,marginLeft:e.value,marginRight:e.value},notChosenFolder:{"&:hover":{background:g.hover.value}},chosenFolder:{background:g.active.value},folderIcon:{marginRight:b.value,marginTop:"3px","& svg":{fill:"#FFCA5A"}},folderName:{overflow:"hidden",textOverflow:"ellipsis"},buttonsBlock:{paddingTop:d.value}}}),tc=function(a){var b=a.tree,f=a.onSave,g=a.onClose,h=sc(a),i=(0,d.useState)(null),j=i[0],k=i[1],l=(0,d.useState)(!0),m=l[0],n=l[1],o=function(){f(b[j])};return e().createElement(c.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)",testId:"choose-save-folder-popup"},e().createElement(c.Panel,{popup:!0,closable:!0,onClose:g},e().createElement("div",{className:h.titleBlock},e().createElement(c.Text,{mode:"h3"},i18n("Сохранить в папку"))),e().createElement("div",{className:h.folderList},b.map(function(a,b){var d=b===j?h.chosenFolder:h.notChosenFolder,f=ca()(h.folder,d);return e().createElement("div",{key:b,className:f,onClick:function(){return function(a){k(a),n(!1)}(b)},"data-test-id":"folder-item-".concat(b)},e().createElement("div",{className:h.folderIcon},e().createElement(c.Icon,{icon:q.NAVIGATION_FOLDER})),e().createElement("div",{className:h.folderName},e().createElement(c.Text,null,a)))})),e().createElement("div",{className:h.buttonsBlock},e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement(b,{disabled:m,onClick:o,size:"l","data-test-id":"save-button"},i18n("Сохранить"))}))))},uc=wc(2152),vc=wc.n(uc),yc=wc(8066),zc=wc.n(yc),Ac=wc(8624),Bc=wc.n(Ac),Cc=wc(1733),Dc=c.TwoKitTheming.createUseStyles(function(a){var b=a.x3,c=a.x4,d=a.x5;return{titleBlock:{paddingBottom:c.value},spacer:{width:b.value},buttonsBlock:{paddingTop:d.value,display:"flex"},buttonsBlockReverse:{flexDirection:"row-reverse",justifyContent:"flex-end"}}});!function(a){a.spam="spam:force",a.undo="undo",a.resolve="layer:resolve",a.unsubscribe="unsubscribe",a.remove="remove"}(b||(b={}));var Ec={headerUnsubscribe:i18n("Это не только спам"),headerConfirm:i18n("Переместить в «Спам»?"),contentUnsubscribe:i18n("Здесь есть рассылка, на которую вы подписались.{br} Если вы её не читаете, отпишитесь.{br} Выделенные письма от этих отправителей попадут в{space}корзину.",{"unsafe-br":"<br/>","unsafe-space":"&nbsp;"}),contentConfirmSingle:i18n("Выделенное письмо будет перемещено в «Спам»"),contentConfirmPlural:i18n("Выделенные письма будут перемещены в «Спам»")},Fc=function(a){var b=[],c=[];return a.forEach(function(a){var d,e,f,g=null===(f=null===(e=null===(d=a.get("correspondents"))||void 0===d?void 0:d.from)||void 0===e?void 0:e[0])||void 0===f?void 0:f.email;if(!c.includes(g))c.push(g);b.push(a.get("last"))}),{senders:c,ids:b}},Gc=function(a){var f=Dc(a),g=a.onEvent,h=a.unsubscribeModels,i=a.models,j=a.type,k=a.actionType,l=(0,d.useState)(!0),m=l[0],n=l[1],o=(0,d.useState)(void 0),q=o[0],r=o[1],s=(0,d.useState)([]),t=s[0],u=s[1],v=function(){g({type:b.resolve,details:{close:!0}})},w=function(a,c){if(void 0===c)c=!0;if(null==a?void 0:a.length)g({type:b.spam,details:{model:a}});n(!1),c&&v()},x=(0,d.useCallback)(function(){var a=Fc(i).senders,b="confirm"===j?"layer-confirm-move-to-spam_spam-as-submit_click":"layer-confirm-move-to-spam_spam-as-cancel_click";vc()({type:b,dwh:{letters_length:i.length,senders_length:a.length,action_type:k}}),w(i)},[i]),y=function(){var a,c=!1,d=Fc(h).senders,e=Bc().add({text:(a=d.length,(0,Cc.getUnsubscribesText)(a)),actions:[{text:i18n("Отменить")}],qa:"notify-unsubscribe-from-spam-layer"});if(e)e.on("action",function(){c=!0,e.close()}),e.on("closed",function(){if(!c)return vc()({type:"unsubscribe_from_spam",dwh:{letters_length:t.length,senders_length:d.length,action_type:k}}),a=t,g({type:b.unsubscribe,details:{ids:a,silent:!0}}),void v();var a;vc()({type:"unsubscribe_from_spam_cancel",dwh:{letters_length:h.length,senders_length:d.length,action_type:k}}),function(){if(null==q?void 0:q.undo)return q.undo().then(function(){g({type:b.undo})})}().then(function(){return v()})})},z=(0,d.useCallback)(function(){var a=i.filter(function(a){return!h.includes(a)});w(a,!1);var c=Fc(h).senders;vc()({type:"layer-confirm-move-to-spam_unsubscribe_click",dwh:{spam_letters_length:a.length,senders_length:c.length,letters_length:h.length,action_type:k}}),function(a){var b=Fc(a).ids;u(b)}(h),g({type:b.remove,details:{model:h,actionCallback:r}}),n(!1)},[h,i]),A=(0,d.useCallback)(function(){vc()({type:"layer-confirm-move-to-spam_close",dwh:{type:j,action_type:k}}),v()},[]),B=(0,d.useCallback)(function(){vc()({type:"layer-confirm-move-to-spam_cancel_click",dwh:{letters_length:i.length,action_type:k}}),v()},[]);if((0,d.useEffect)(function(){if(q)y()},[q]),!m)return e().createElement(e().Fragment,null);else return e().createElement(c.Popup,{show:!0,testId:"confirm-move-to-spam"},e().createElement(c.Panel,{popup:!0,closable:!0,onClose:A,mobileCross:!0},e().createElement("div",{className:f.titleBlock},e().createElement(c.Text,{mode:"h3"},function(){if(h.length)return Ec.headerUnsubscribe;else return Ec.headerConfirm}())),e().createElement("div",null,e().createElement("span",{dangerouslySetInnerHTML:{__html:function(){if(h.length)return Ec.contentUnsubscribe;if(i.length>1||i[0]instanceof zc()&&i[0].get("length")>1)return Ec.contentConfirmPlural;else return Ec.contentConfirmSingle}()}})),"confirm"===j&&e().createElement(C.Z,null,function(a){var b,c=a.Button;return e().createElement("div",{className:ca()(f.buttonsBlock,(b={},b[f.buttonsBlockReverse]=p.BUTTON_MOVE_TO_SPAM_CANCEL_LEFT_POSITION,b))},e().createElement(c,{size:"l",mode:p.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"secondary":"primary",appearance:p.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"neutral":"accent","data-test-id":"submit",onClick:x},i18n("Переместить")),e().createElement("div",{className:f.spacer}),e().createElement(c,{size:"l",mode:p.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"primary":"secondary",appearance:p.BUTTON_MOVE_TO_SPAM_CANCEL_PRIMARY?"accent":"neutral","data-test-id":"cancel",onClick:B},i18n("Отменить")))}),"unsubscribe"===j&&e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement("div",{className:f.buttonsBlock},e().createElement(b,{size:"l","data-test-id":"submit",onClick:z},i18n("Отписаться")),e().createElement("div",{className:f.spacer}),e().createElement(b,{size:"l",mode:"secondary",appearance:"neutral","data-test-id":"cancel",onClick:x},i18n("В спам")))})))},Hc=c.TwoKitTheming.createUseStyles(function(a){var b=a.x3,c=a.x4,d=a.x5;return{titleBlock:{paddingBottom:c.value},spacer:{width:b.value},buttonsBlock:{paddingTop:d.value,display:"flex"}}}),Ic={fakeDoorTitle:i18n("Функция вот-вот появится"),fakeDoorMessage:i18n("Спасибо за ваш интерес! Мы обязательно сообщим, когда всё будет готово"),close:i18n("Понятно")},Jc=function(a){var b=a.onClose,d=Hc(a);return e().createElement(c.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)"},e().createElement(c.Panel,{popup:!0,closable:!0,onClose:b},e().createElement("div",{className:d.titleBlock},e().createElement(c.Text,{mode:"h3"},Ic.fakeDoorTitle)),e().createElement("div",null,e().createElement("span",null,Ic.fakeDoorMessage)),e().createElement("div",{className:d.buttonsBlock},e().createElement(c.Button,{primary:!0,testId:"submit",onClick:b},Ic.close))))},Kc=c.TwoKitTheming.createUseStyles(function(a){var b=a.x3,c=a.x4,d=a.x8;return{titleBlock:{paddingBottom:c.value},spacer:{width:b.value},buttonsBlock:{paddingTop:d.value,display:"flex"},imageContainer:{position:"absolute",bottom:0,right:0,height:"120px"},image:{height:"100%"},button:{zIndex:1}}}),Lc=function(a){var b=Kc(a),d=a.onClose,f=a.onSubmit,g=a.showImage,h=a.imageSrc,i=a.lockClose,j=a.hideCancel;return e().createElement(c.Popup,{show:!0,width:420,closeByBackdropClick:!i,closeByEsc:!i,testId:"promo-enabled-push",onHide:d,overflowVisible:!0},e().createElement(c.Panel,{popup:!i,closable:!i,onClose:d,closeByEsc:!i},e().createElement("div",{className:b.titleBlock},e().createElement(c.Text,{mode:"h3",text:i18n("Уведомления в браузере")})),e().createElement(c.Text,{text:i18n("Включите уведомления, чтобы не пропускать важные письма")}),e().createElement("div",{className:b.buttonsBlock},e().createElement("div",{className:b.button},e().createElement(c.Button,{primary:!0,testId:"submit",onClick:f},i18n("Включить"))),e().createElement("div",{className:b.spacer}),!(i||j)&&e().createElement("div",{className:b.button},e().createElement(c.Button,{testId:"cancel",onClick:d},i18n("Отмена")))),g&&e().createElement("div",{className:b.imageContainer,"data-test-id":(0,wa.qa)("promo-image")},e().createElement("img",{className:b.image,src:h}))))},Mc="_1pl7vWcbXz5W3zZPRB8QkV",Nc="_3jwEnb6b5yXYJQX3srMIQM",Oc=function(a){var b=(0,d.useState)([]),c=b[0],e=b[1],f=(0,d.useState)(!1),g=f[0],h=f[1],i=(0,d.useState)(!1),j=i[0],k=i[1];return(0,d.useEffect)(function(){a().then(function(a){h(!0),e(a.map(function(a){return a.data}))}).catch(function(){k(j)})},[]),[c,g,j]},Pc=function(){return e().createElement(e().Fragment,null,e().createElement(c.Margin,{desktopX:2,mobileX:1}),e().createElement("div",{className:Mc},e().createElement(c.Progress,{primary:!0})))},Qc=function(a){var b=a.text,d=a.testId,f=a.error;return e().createElement(e().Fragment,null,e().createElement(c.Margin,{desktopX:8,mobileX:8}),e().createElement("div",{className:Mc},e().createElement(c.Text,{text:b,testId:d,secondary:!0,error:f})),e().createElement(c.Margin,{desktopX:6,mobileX:6}))},Rc=function(a){var b=a.onChoose,f=a.onClose,g=a.fetchTemplates,h=a.appliedTemplate,i=(0,d.useState)(h),j=i[0],k=i[1],l=Oc(g),m=l[0],n=l[1],o=l[2],p=function(){var a=m.find(function(a){return a.id===j});a&&b(a),f()};return e().createElement(c.Popup,{width:window.innerWidth-16,show:!0,testId:"select-template-popup"},e().createElement(c.Panel,{popup:!0,header:i18n("Выбор шаблона"),closable:!0,controls:e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement("div",null,e().createElement(b,{"data-test-id":"submit",size:"l",onClick:p,disabled:!n||!j||o||0===m.length,stretched:!0},i18n("Выбрать")),e().createElement(c.Space,null),e().createElement(b,{"data-test-id":"cancel",size:"l",mode:"secondary",appearance:"neutral",disabled:!n,onClick:f,stretched:!0},i18n("Отменить")))}),onClose:f},!n&&!o&&e().createElement(Pc,null),o&&e().createElement(Qc,{text:i18n("Не удалось загрузить шаблоны"),error:!0}),n&&0===m.length&&e().createElement(Qc,{text:i18n("У вас отсутствуют сохраненные шаблоны"),testId:"no-templates"}),e().createElement("div",null,m.map(function(a){var b=a.id,d=a.value;return e().createElement("div",{key:b,className:Nc},e().createElement(c.Radio,{label:d,checked:j===b,name:b,value:b,onChange:function(){return k(b)},testId:"template:".concat(d)}),e().createElement(c.Margin,{desktopX:2,mobileX:2}))}))))},Sc=wc(9587),Tc=wc(8211),Uc=wc.n(Tc),Vc=wc(6534),Wc=wc(2312),Xc=wc(3798),Yc=wc(1820),Zc=wc(1013),$c=wc(6593),_c=wc(735),ad=wc.n(_c),bd=wc(9228),cd=wc.n(bd),dd=wc(1116),ed=wc.n(dd),fd=wc(2888),gd=wc.n(fd),hd=wc(4245),id=wc.n(hd),jd=wc(8595),kd=wc.n(jd),ld=wc(4191),md=wc.n(ld),nd=wc(8842),od=wc.n(nd),pd=wc(6281),qd=wc.n(pd),rd=wc(7608),sd=wc.n(rd),td=wc(5378),ud=wc.n(td),vd=wc(2233),wd=wc.n(vd),xd=wc(770),yd=wc.n(xd),zd=wc(5250),Ad=wc.n(zd),Bd=wc(6455),Cd=wc(2603),Dd=wc.n(Cd),Ed=wc(1237),Fd=wc.n(Ed),Gd=wc(6567),Hd=function(){return(Hd=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Id=new Gd.k("letter-body");function Jd(){var a=this,b=Hd(Hd({},this.props),this.state),c=!(!b["quotes-raw"]&&!b["quotes-formatted"].length),d=b["body-raw"],f=b["dark-mode"],g=b.message;return e().createElement("div",{"data-qa-id":(0,wa.qa)("letter-body"),ref:this.letterBodyRef,className:Id.root({mobile:b.mobile,"formatted-quotes":!b["quotes-mode-raw"]&&b["quotes-formatted"].length,"raw-quotes":b["quotes-mode-raw"]&&b["quotes-raw"],quotes:c,"dark-mode":f})},e().createElement("div",{"data-qa-id":(0,wa.qa)("body"),className:Id.elem("body",{"no-scroll":b["preview-mode"]})},e().createElement("div",{ref:"body",className:Id.elem("body-wrapper")},e().createElement("div",{tabIndex:-1,ref:"js-body",className:Id.elem("body-content")},!!d&&e().createElement(bb.Z,{ref:this.bodyParserRef,id:"body-parser",content:d,darkosha:this.getOrCreateDarkosha(),message:g,"dark-mode":f,remitEvents:{zoom:"letter:zoom"},broadcastEvent:(0,Wc.Yv)(this),component:Dd(),key:"html-parser"})))),!!c&&e().createElement(e().Fragment,null,!!b.collapsable&&e().createElement("div",{className:Id.elem("badge")},e().createElement(bb.Z,{badge:!0,secondary:!0,ico:"navigation:more","data-qa-id":(0,wa.qa)("blockquote-toggler"),centered:!0,remitEvents:{click:"blockquote:toggle"},broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})),!b.collapsable&&e().createElement("div",{"data-qa-id":(0,wa.qa)("blockquote-title"),className:Id.elem("title")},i18n("вся переписка")),e().createElement("div",{ref:"blockquotes","data-qa-id":(0,wa.qa)("blockquotes"),className:Id.elem("blockquotes")},!(b.collapsable&&this.isCollapsed())&&e().createElement(e().Fragment,null,!!b["quotes-mode-raw"]&&e().createElement("div",{"data-qa-id":(0,wa.qa)("raw"),className:Id.elem("blockquotes-raw")},e().createElement(bb.Z,{ref:this.quoteParserRef,id:"quote-parser",content:b["quotes-raw"],darkosha:this.getOrCreateDarkosha(),message:g,component:Dd(),key:"html-parser"})),!b["quotes-mode-raw"]&&b["quotes-formatted"].map(function(c,d){return e().createElement(bb.Z,{key:"letter-blockquote",index:d,blockquote:c,ponymode:b.ponymode,message:g,darkosha:a.getOrCreateDarkosha(),remitEvents:{"blockquote-zoom":"letter:zoom"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(a),component:Fd()})})))))}var Kd=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ld=function(){return(Ld=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Md=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(Bd.blockSpec.events),!0),Nd=function(a){function b(b){var c=a.call(this,b)||this;return c.letterBodyMounted=!1,c.events=Bd.blockSpec.events,c.asyncDidMountRender=Bd.blockSpec.asyncDidMountRender,c.onBlockquoteToggle=Bd.blockSpec.onBlockquoteToggle,c.onLetterZoom=Bd.blockSpec.onLetterZoom,c.handelDataAttributeClick=Bd.blockSpec.handelDataAttributeClick,c.handleClickAllowedAttr=Bd.blockSpec.handleClickAllowedAttr,c.handleClickRightFinePayment=Bd.blockSpec.handleClickRightFinePayment,c.handleClickFinePayment=Bd.blockSpec.handleClickFinePayment,c.handleClickToMyself=Bd.blockSpec.handleClickToMyself,c.handleClickMonetaLink=Bd.blockSpec.handleClickMonetaLink,c.handleClickMonetaPayment=Bd.blockSpec.handleClickMonetaPayment,c.getOrCreateDarkosha=Bd.blockSpec.getOrCreateDarkosha,c.applyDarkosha=Bd.blockSpec.applyDarkosha,c.renderBody=Bd.blockSpec.renderBody,c.format=Bd.blockSpec.format,c.formatNew=Bd.blockSpec.formatNew,c.formatFallback=Bd.blockSpec.formatFallback,c.rerenderParser=Bd.blockSpec.rerenderParser,c.isCollapsed=Bd.blockSpec.isCollapsed,c.triggerBlockquoteChange=Bd.blockSpec.triggerBlockquoteChange,c.highlightCurrentUserMention=Bd.blockSpec.highlightCurrentUserMention,c.render=Jd,c.letterBodyRef=e().createRef(),c.bodyParserRef=e().createRef(),c.quoteParserRef=e().createRef(),Md.forEach(function(a){c[a]=c[a].bind(c)}),c}return Kd(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.letterBodyRef.current},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"ids",{get:function(){var a={};if(this.bodyParserRef.current)a["body-parser"]=this.bodyParserRef.current.component;if(this.quoteParserRef.current)a["quote-parser"]=this.quoteParserRef.current.component;return a},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){this.letterBodyMounted=!0,Bd.blockSpec.didMount.bind(this)()},b.prototype.componentDidUpdate=function(a,b){var c=Ld(Ld({},this.props),this.state),d=Ld(Ld({},a),b);if(c.id!==d.id){var e=c.id,f=d.id;if(!e||!f||e===f)return;this.renderBody()}},b.prototype.componentWillUnmount=function(){this.letterBodyMounted=!1,Bd.blockSpec.didUnmount.bind(this)()},b.prototype.isMounted=function(){return this.letterBodyMounted},b}(e().Component),Od=(0,Wc.v$)("letter-body",Nd,{syncMediatorsOnRender:!1});Od.defaultProps=Bd.blockSpec.defaults;var Pd,Qd,Rd=Od,Sd=wc(3310),Td=wc(7920),Ud=wc.n(Td),Vd=wc(4149),Wd=wc.n(Vd),Xd=wc(6093),Yd=wc.n(Xd),Zd=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):(b=a.value,b instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},$d=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){return function(f){if(c)throw new TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&f[0]?d.return:f[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,f[1])).done)return e;if(d=0,e)f=[2&f[0],e.value];switch(f[0]){case 0:case 1:e=f;break;case 4:return g.label++,{value:f[1],done:!1};case 5:g.label++,d=f[1],f=[0];continue;case 7:f=g.ops.pop(),g.trys.pop();continue;default:if(!(e=g.trys,(e=e.length>0&&e[e.length-1])||6!==f[0]&&2!==f[0])){g=0;continue}if(3===f[0]&&(!e||f[1]>e[0]&&f[1]<e[3])){g.label=f[1];break}if(6===f[0]&&g.label<e[1]){g.label=e[1],e=f;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(f);break}if(e[2])g.ops.pop();g.trys.pop();continue}f=b.call(a,g)}catch(a){f=[6,a],d=0}finally{c=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,h])}}};!function(a){a.TaggedPersonal="tagged_personal",a.TaggedDocuments="tagged_documents",a.TaggedImportant="tagged_important",a.TaggedUrgent="tagged_urgent",a.TaggedNeedsReply="tagged_needs_reply"}(Qd||(Qd={}));var _d=((Pd={})[Qd.TaggedUrgent]=i18n("Срочно"),Pd[Qd.TaggedImportant]=i18n("Важно"),Pd[Qd.TaggedNeedsReply]=i18n("Ответить"),Pd[Qd.TaggedDocuments]=i18n("Документы"),Pd[Qd.TaggedPersonal]=i18n("Личное"),Pd),ae=(0,Sd.createGlobalAction)("colortags/change",function(a){return Zd(void 0,void 0,Promise,function(){var b,c,d,e,f;return $d(this,function(g){switch(g.label){case 0:if(b=a.model,c=a.tags,d=zc().getByMessageId(b.id),(e={})[b.id]=b.get("flags.tags"),d)e[d.id]=d.get("flags.tags");if(b instanceof zc())b.get("messages").forEach(function(a){a=Wd().all.get(a.id),e[a.id]=a.get("flags.tags")});if(b.set("flags.tags",c),d)d.set("flags.tags",function(a,b,c){var d={};return b.get("messages").forEach(function(b){var e=(b=Wd().all.get(b.id)).get("flags.tags");if(b.id===a.id)e=c;null==e||e.forEach(function(a){if(!d[a])d[a]=!0})}),Object.keys(d)}(b,d,c));if(b instanceof zc())b.get("messages").forEach(function(a){(a=Wd().all.get(a.id)).set("flags.tags",c)});return[4,Yd().call(b.changeColorTagsUrl,{ids:[b.get("id")],tags:c})];case 1:if(null==(f=g.sent())?void 0:f.error){if(b.set("flags.tags",e[b.id]),d)d.set("flags.tags",e[d.id]);if(b instanceof zc())b.get("messages").forEach(function(a){(a=Wd().all.get(a.id)).set("flags.tags",e[a.id])})}return[2,{updatedIds:f.body||[]}]}})})}),be=function(a,b){var c=a.get("flags.tags").filter(function(a){return a!==b});ae({model:a,tags:c})};ae.rejected.subscribe(function(a){var b=a.error;Ud().add("setColorTags failed",b),Bc().add({type:Bc().types.error,text:i18n("Что-то пошло не так"),qa:"on-delete-tag-notify"})});var ce=wc(6359),de=wc.n(ce),ee=function(a,b,c){var d=null===p.TAGS_COLORS||void 0===p.TAGS_COLORS?void 0:p.TAGS_COLORS[a],e={"--2kit-chip-height":c?"var(--vkui--x5)":"var(--vkui--x6)","--2kit-chip-background-color":d?"var(--vkui--color_tag_background_".concat(d,")"):"var(--vkui--color_background_secondary_alpha)","--2kit-chip-background-color--hover":d?"var(--vkui--color_tag_background_".concat(d,"--hover)"):"var(--vkui--color_background_secondary_alpha--hover)","--2kit-chip-background-color--active":d?"var(--vkui--color_tag_background_".concat(d,"--active)"):"var(--vkui--color_background_secondary_alpha--active)","--2kit-chip-icon-color":d?"var(--vkui--color_tag_text_".concat(d,")"):"var(--vkui--color_icon_primary)","--2kit-chip-icon-color--active":d?"var(--vkui--color_tag_text_".concat(d,"--active)"):"var(--vkui--color_icon_primary--active)","--2kit-text-color":d?"var(--vkui--color_tag_text_".concat(d,")"):"var(--vkui--color_text_secondary)"};if(b)e["--2kit-chip-text-padding"]="0 var(--vkui--x1) 0 var(--vkui--x2)";return e},fe=function(a){var b=a.tag,f=a.empty,g=a.compact,h=a.onCloseClick,i=a.onClick,j=b?_d[b]:i18n("Добавить метку"),k=b?"color-tag:".concat(b):"color-tag:add",l=(0,d.useCallback)(function(){return i(b)},[i,b]),m=(0,d.useCallback)(function(){return h(b)},[h,b]);return e().createElement("span",{style:ee(b,!!h,g)},e().createElement(c.Chip,{text:f?"":j,textProps:{mode:"small"},onClick:i?l:null,onCloseClick:h?m:null,testId:k}))},ge=wc(3825),he="_20AOs9Rzki2pykeqGTgJWi",ie="_1xMWOID8S2qMMRlJ35VpJ5",je="_2vjeQtsPLruSIi8mhWeCO5",ke=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))},le=function(a){var b,f=a.model,g=a.tags,h=a.xrayFrom,j=null===(b=null==f?void 0:f.getFolder())||void 0===b?void 0:b.id,k=de().getUiLayout().ponyMode,l=(0,d.useCallback)(function(a){if(null==g?void 0:g.includes(a))return i().send("click_delete_label",{dwh:{folder_id:Number(j),from:h,label_name:a,letter_id:f instanceof zc()?f.get("last"):null==f?void 0:f.id,mode:de().getType(),is_compact:k}}),be(f,a);else return i().send("click_add_label",{dwh:{folder_id:Number(j),from:h,label_name:a,letter_id:f instanceof zc()?f.get("last"):null==f?void 0:f.id,mode:de().getType(),is_compact:k}}),ae({model:f,tags:ke(ke([],null!=g?g:[],!0),[a],!1)})},[j,f,g,h]),m=Object.entries(_d).map(function(a){var b=a[0],d=a[1],f=null==g?void 0:g.includes(b);return e().createElement(ge.ZP,{key:b,mode:"nano",markable:!0,marked:f,onClick:function(){return l(b)},testId:"tags-picker-item:".concat(b,":").concat(f?"marked":"not_marked")},e().createElement("div",{className:he},e().createElement("div",{className:ie,style:{backgroundColor:"var(--vkui--color_tag_background_".concat(null===p.TAGS_COLORS||void 0===p.TAGS_COLORS?void 0:p.TAGS_COLORS[b],")")}}),e().createElement("div",{className:je},e().createElement(c.Text,{mode:k?"small":"base",text:d}))))});if(null==g?void 0:g.length)m.unshift(e().createElement(ge.ZP,{key:"no_tag",mode:"nano",markable:!0,onClick:function(){i().send("click_delete_all_label",{dwh:{labels:null==g?void 0:g.join(","),folder_id:Number(j),from:h,letter_id:f instanceof zc()?f.get("last"):null==f?void 0:f.id}}),ae({model:f,tags:[]})},testId:"tags-picker-item:no_tag"},e().createElement("div",{className:he},e().createElement(c.Icon,{icon:q.ACTIONS_CLOSE}),e().createElement("div",{className:je},e().createElement(c.Text,{mode:k?"small":"base"},i18n("Без меток"))))));return e().createElement("div",{"data-qa-id":(0,wa.qa)("tags-picker")},m)},me="Dij-kL-gfkN5i71rllDra",ne=function(a){var b=a.model,d=a.tags,f=function(a){var c;be(b,a);var d=null===(c=null==b?void 0:b.getFolder())||void 0===c?void 0:c.id;i().send("click_delete_label",{dwh:{folder_id:Number(d),from:"message",label_name:a,letter_id:null==b?void 0:b.id,mode:de().getType(),is_compact:de().getUiLayout().ponyMode}})},g=p.TAGS_ORDER.filter(function(a){return null==d?void 0:d.includes(a)}).map(function(a){return e().createElement(fe,{key:a,tag:a,onCloseClick:f})}).reverse(),h=(null==g?void 0:g.length)===(null===p.TAGS_ORDER||void 0===p.TAGS_ORDER?void 0:p.TAGS_ORDER.length);return e().createElement(e().Fragment,null,!!(null==g?void 0:g.length)&&e().createElement("div",{"data-qa-id":(0,wa.qa)("letter-tags"),className:me},g,!h&&e().createElement(c.Dropdown,{overlay:e().createElement(le,{model:b,tags:d,xrayFrom:"message_change_menu"}),pureOverlay:!0,placement:"bottomLeft",reservePlacement:"topLeft",overlayContainer:document.body},e().createElement(fe,{onClick:function(){var a,c=null===(a=null==b?void 0:b.getFolder())||void 0===a?void 0:a.id;i().send("click_on_add_label_button",{dwh:{folder_id:Number(c),from:"message_change_menu",letter_id:null==b?void 0:b.id,mode:de().getType(),is_compact:de().getUiLayout().ponyMode}})}}))))},oe=wc(8028),pe=function(){return(pe=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},qe=new Gd.k("marusia-rl-button");function re(){var a=pe(pe({},this.props),this.state);return e().createElement("div",{className:qe.root()},e().createElement("img",{src:this.getLogoSrc(),onClick:(0,Wc.CH)(this,{name:"marusia:rl:button:click",details:a.model}),className:qe.elem("img")}),e().createElement("div",{className:qe.elem("button")},e().createElement(bb.Z,{text:i18n("Прочитать письмо"),ico:"actions:play",icoSize:"xs",compact:!0,shadowless:!0,invert:!0,centered:!0,remitEvents:{click:"marusia:rl:button:click"},remitDetails:{model:a.model},broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})))}var se=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),te=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(oe.blockSpec.events),!0),ue=function(a){function b(b){var c=a.call(this,b)||this;return c.blockIsMounted=!1,c.rootClassName=oe.blockSpec.rootClassName,c.events=oe.blockSpec.events,c.onClick=oe.blockSpec.onClick,c.getLogoSrc=oe.blockSpec.getLogoSrc,c.radarSend=oe.blockSpec.radarSend,c.render=re,te.forEach(function(a){c[a]=c[a].bind(c)}),c}return se(b,a),b.prototype.componentDidMount=function(){this.blockIsMounted=!0,oe.blockSpec.didMount.bind(this)()},b.prototype.componentWillUnmount=function(){this.blockIsMounted=!1},b.prototype.isMounted=function(){return this.blockIsMounted},b}(e().Component),ve=(0,Wc.v$)("marusia-read-letter-button",ue,{syncMediatorsOnRender:!1}),we=wc(6465),xe=function(){return(xe=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ye=new Gd.k("notification-badge");function ze(){var a,b=xe(xe({},this.props),this.state);return e().createElement("div",{className:ye.root()},!!b.show&&e().createElement("div",{"data-qa-id":(0,wa.qa)("".concat(b["test-id"])),className:ye.elem("badge",(a={react:!0},a["color_".concat(b.colorMode)]=!!b.colorMode,a["size_".concat(b.size)]=!!b.size,a))}),this.props.children)}var Ae=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Be=function(){return(Be=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ce=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.getCssRule=we.blockSpec.getCssRule,b.setInlineStyles=we.blockSpec.setInlineStyles,b.render=ze,b}return Ae(b,a),b.prototype.componentDidUpdate=function(a,b){var c=Be(Be({},this.props),this.state),d=Be(Be({},a),b);if(c.ponymode!==d.ponymode)this.setInlineStyles();if(c.show!==d.show&&c.show)this.setInlineStyles()},b.prototype.didMount=function(){we.blockSpec.didMount.bind(this)()},b}(e().Component),De=(0,Wc.v$)("notification-badge",Ce,{syncMediatorsOnRender:!1});De.defaultProps=we.blockSpec.defaults;var Ee,Fe=De,Ge="_2oRHl88bWX55jteN4U-fwG",He=function(){return(He=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ie=new Gd.k("letter");function Je(a){var b=a["amp-error"];return e().createElement(e().Fragment,null,e().createElement("span",{"data-qa-id":(0,wa.qa)("amp-icon"),className:Ie.elem("amp-icon",{error:b}),title:i18n("При отображении динамического контента письма возникли ошибки")},e().createElement(bb.Z,{inlineRoot:!0,name:"status:breaking",size:"s",component:ab(),key:"ico"})))}function Ke(a,b,c,d){var f=this,g=a.ponymode,h=d?b.slice(0,d):b,i=a.model.getFolder();return e().createElement(e().Fragment,null,h.map(function(b,d){var j=b.email==a["current-user"].getEmail(),k=d+1===h.length;return e().createElement(bb.Z,{inlineRoot:!0,key:"letter-contact-".concat(d),useMediators:["contact-selection"],contact:b,dir:c,isCurrent:j,dangerous:"from"===c&&f.isProbablyPhishing(),"pony-mode":g,isLast:k,remitEvents:{click:{stop:!0,prevent:!0,name:"contact:click"}},remitDetails:b,broadcastEvent:(0,Wc.Yv)(f),component:sd(),className:Ge,folder:i})}))}function Le(a){var b=a.model;return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("unread"),className:Ie.elem("unread",{plain:!(b.is("flags.forward")||b.is("flags.reply"))})},e().createElement(bb.Z,{disabled:a["disable-edit"],name:"unread",compact:!a.compact,small:a.compact,forward:b.is("flags.forward"),reply:b.is("flags.reply"),state:b.is("flags.unread"),remitEvents:{click:{prevent:!0,name:"togglestatus:unread"}},remitDetails:{model:a.model,state:b.is("flags.unread")},broadcastEvent:(0,Wc.Yv)(this),component:wd(),key:"letter-status2"})))}function Me(a){return!a["preview-mode"]&&e().createElement("div",{className:Ie.elem("tags")},e().createElement(c.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:e().createElement(le,{model:a.model,tags:a.model.get("flags.tags"),xrayFrom:"message_icon_menu"})},e().createElement(bb.Z,{"radar-id":"add-tag",text:i18n("Добавить метку"),ico:"status:tag",secondary:!0,short:!0,centered:!0,touch:a.touch,"data-qa-id":"add-tag",component:"button2"})))}function Ne(a){return!a["preview-mode"]&&e().createElement("div",{"data-qa-id":(0,wa.qa)("dark-mode-toggle"),className:Ie.elem("dark-mode-toggle")},!a["preview-mode"]&&e().createElement(bb.Z,{name:"dark-mode",state:a["dark-mode-enabled"],remitEvents:{click:{prevent:!0,name:"dark-mode:toggle"}},broadcastEvent:(0,Wc.Yv)(this),component:wd(),key:"letter-status2"}))}function Oe(a){var b=a.model;return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("flag"),className:Ie.elem("flag")},!a["preview-mode"]&&e().createElement(bb.Z,{disabled:!this.isEnableMark(),name:"flagged",state:b.is("flags.flagged"),remitEvents:{click:{prevent:!0,name:"togglestatus:flagged"}},remitDetails:{model:a.model,state:b.is("flags.flagged")},broadcastEvent:(0,Wc.Yv)(this),component:wd(),key:"letter-status2"})))}function Pe(a){return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("calls:invite"),className:Ie.elem("flag",{},{addClass:[(0,Gd.d)("letter-head-calls-button")]})},!a["preview-mode"]&&e().createElement(bb.Z,{"radar-id":"head-call",title:i18n("Позвонить"),ico:"categories:camera",base:!0,secondary:!0,touch:a.touch,model:a.model,disabled:!this.isEnableCall(),centered:!0,remitEvents:{click:{prevent:!0,name:"calls:invite"}},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})))}function Qe(a){return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("print"),className:Ie.elem("flag")},!a["preview-mode"]&&e().createElement(bb.Z,{"radar-id":"head-print",title:i18n("Распечатать"),ico:"actions:print",base:!0,secondary:!0,touch:a.touch,model:a.model,centered:!0,remitEvents:{click:{prevent:!0,name:"print"}},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})))}function Re(a){return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("calendar:create"),className:Ie.elem("flag",{},{addClass:[(0,Gd.d)("letter-head-calendar-button")]})},!a["preview-mode"]&&e().createElement(bb.Z,{"radar-id":"head-calendar",title:i18n("Создать событие"),ico:"calendar-month",base:!0,secondary:!0,touch:a.touch,model:a.model,disabled:a["disable-edit"],centered:!0,remitEvents:{click:{prevent:!0,name:"calendar:create"}},remitDetails:{model:a.model,createContent:"web_email_letter_header"},broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})))}function Se(a){var b=a.model,c=b.get("correspondents.from.0");return e().createElement(e().Fragment,null,e().createElement("div",{className:Ie.elem("avatar-wrap")},!a.compact&&this.statusUnread(a),e().createElement("div",{"data-qa-id":(0,wa.qa)("avatar"),onClick:(0,Wc.CH)(this,{stop:!0,prevent:!0,name:"clickavatar",details:c}),className:Ie.elem("avatar")},e().createElement(Fe,{show:a.isOnline,colorMode:"success","test-id":a.isOnline&&"online-badge"},e().createElement(bb.Z,{size:a.compact?"m":"s",src:b.get("correspondents.from.0.avatars.default"),touch:a.touch,component:cd(),key:"avatar"}))),!!a.compact&&this.statusUnread(a)))}function Te(a){var b,c=a.model,d=c.getFolder(),f="",g="";if(c.isHigh())f="important";if(!a["disable-category"]&&c.get("transaction_category")&&!d.isSpam())f=c.get("transaction_category");if(a.showfolder)g=d.get("name");return e().createElement(e().Fragment,null,e().createElement("div",{className:Ie.elem("folder",(b={},b["".concat(!(!g&&!f))]=!0,b.react=!0,b))},e().createElement(bb.Z,{short:!g,name:f,text:g,size:"l",component:od(),key:"letter-category"})))}function Ue(a){var b=a.model;return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("date"),className:Ie.elem("date",{react:!0})},this.mods.getLocaleDateFull(b.get("date"))))}function Ve(a){var b=a.model,c=this.getMessageCorrespondents(),d=c.length>3?2:c.length,f=c.length-d,g=a.model.get("correspondents.bcc.length"),h=a.model.get("correspondents.cc.length");return e().createElement(e().Fragment,null,!a["details-expanded"]?e().createElement("div",{"data-qa-id":(0,wa.qa)("recipients:short"),className:Ie.elem("recipients",{short:!0})},e().createElement("span",{className:Ie.elem("recipient-type")},"".concat(i18n("Кому"),":")),this.correspondents(a,c,"to",d),!!(c.length>3)&&e().createElement("a",{"data-qa-id":(0,wa.qa)("recipients:short-expand"),onClick:(0,Wc.CH)(this,{prevent:!0,name:"details:expand"}),className:Ie.elem("recipients-short-expand")},"".concat(i18n("и ещё")," "),!!a.touch&&{moreCount:f},!a.touch&&this.mods.correspondentsCount(f))):e().createElement("div",{"data-qa-id":(0,wa.qa)("recipients:expanded"),className:Ie.elem("recipients",{expanded:!0})},e().createElement("div",{className:Ie.elem("header-details-recipient")},e().createElement("span",{className:Ie.elem("recipient-type")},"".concat(i18n("Кому"),":")),this.correspondents(a,b.get("correspondents.to"),"to"),!(h||g)&&e().createElement("a",{"data-qa-id":(0,wa.qa)("recipients:short-collapse"),onClick:(0,Wc.CH)(this,{prevent:!0,name:"details:collapse"}),className:Ie.elem("recipients-short-collapse")},i18n("Скрыть список"))),!!h&&e().createElement("div",{className:Ie.elem("header-details-recipient")},e().createElement("span",{className:Ie.elem("recipient-type")},"".concat(i18n("Копия"),":")),this.correspondents(a,b.get("correspondents.cc"),"cc"),!g&&e().createElement("a",{"data-qa-id":(0,wa.qa)("recipients:short-collapse"),onClick:(0,Wc.CH)(this,{prevent:!0,name:"details:collapse"}),className:Ie.elem("recipients-short-collapse")},i18n("Скрыть список"))),!!g&&e().createElement("div",{className:Ie.elem("header-details-recipient")},e().createElement("span",{className:Ie.elem("recipient-type")},"".concat(i18n("Скрытая"),":")),this.correspondents(a,b.get("correspondents.bcc"),"bcc"),e().createElement("a",{"data-qa-id":(0,wa.qa)("recipients:short-collapse"),onClick:(0,Wc.CH)(this,{prevent:!0,name:"details:collapse"}),className:Ie.elem("recipients-short-expand")},i18n("Скрыть список")))))}function We(a){var b=a.model,c=b.getFolder(),d=(0,Yc.hasLetterReplyAll)(b),f=a.folders;return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("more"),className:Ie.elem("more")},!a.readonly&&e().createElement(bb.Z,{text:i18n("Ещё"),ico:"more-hor",secondary:!0,"expand-left":!0,"disable-edit":a["disable-edit"],model:b,parentThread:a.parentThread,folders:f,folder:a.model.folder,read:b.is("flags.unread")?!0:null,unread:!b.is("flags.unread")?!0:null,flag:!b.is("flags.flagged")?!0:null,unflag:b.is("flags.flagged")?!0:null,archive:!c.isArchive(),spam:this._showSpam(),selectedLettersIds:[b.get("id")],unsubscribe:this._showUnsubscribeInMoreMenu(),unspam:c.isSpam(),"dark-mode":this.isDarkMode(),metathreads:a.metathreads,"create-event":this._showDropdownCalendarButton(),"invite-call":this._showDropdownCallButton(),"create-filter":this._showFilterButton(),"category-feedback":a["category-feedback"]&&!a.touch,translate:!a["disable-translate"],more:!0,remove:!0,move:!0,readletter:!0,print:!0,reply:d?"all":!0,"radar-id":"more",useMediators:["letters-selection","compose-manager","letters-actions","calls-manager","calendar-manager","settings-filters-manager","translator-manager","unsubscribe-actions"],component:id(),key:"dropdown-actions"})))}function Xe(a){var b=a.model,c=(0,Yc.hasLetterReplyAll)(b),d=b.get("id"),f=b.get("correspondents.from")[0].email;return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("unsubscribe"),className:Ie.elem("footer-button")},e().createElement(bb.Z,{useMediators:["unsubscribe-actions","themes-manager"],touch:a.touch,senderFrom:f,letterId:d,"position-right":!0,short:c,component:Zc.lazyUIUnsubscribe,key:"unsubscribe"})))}function Ye(a){var b=a.model;a.model.is("attaches.list.length")&&this.isEnableAttach();var c=b.get("drafts.replyall");return e().createElement("div",{className:Ie.elem("dropdown-overlay")},e().createElement(bb.Z,{text:i18n("Есть черновик, продолжить с ним"),remitEvents:{click:"letter:draft:replyall"},remitDetails:{model:a.model,draftId:c},broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0,touch:a.touch}),e().createElement(bb.Z,{text:i18n("Новое письмо"),remitEvents:{click:"compose:replyall"},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0,touch:a.touch}))}function Ze(a){var b=a.model;a.model.is("attaches.list.length")&&this.isEnableAttach();var c=b.get("drafts.reply");return e().createElement("div",{className:Ie.elem("dropdown-overlay")},e().createElement(bb.Z,{text:i18n("Есть черновик, продолжить с ним"),remitEvents:{click:"letter:draft:reply"},remitDetails:{model:a.model,draftId:c},broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0,touch:a.touch}),e().createElement(bb.Z,{text:i18n("Новое письмо"),remitEvents:{click:"compose:reply"},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0,touch:a.touch}))}function $e(a){var b=a.model.get("drafts.forward");return e().createElement("div",{className:Ie.elem("dropdown-overlay")},e().createElement(bb.Z,{text:i18n("Есть черновик, продолжить с ним"),remitEvents:{click:"letter:draft:forward"},remitDetails:{model:a.model,draftId:b},broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0,touch:a.touch}),e().createElement(bb.Z,{text:i18n("Новое письмо"),remitEvents:{click:"compose:forward"},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0,touch:a.touch}))}function _e(a){return e().createElement("div",{className:Ie.elem("dropdown-overlay")},e().createElement(bb.Z,{text:i18n("Позвонить сейчас"),ico:"categories:camera","data-qa-id":(0,wa.qa)("calls:call"),"radar-id":"footer-calls-groupcall",disabled:!this.isEnableCall(),title:!a["disable-calls-tip"]&&i18n("Если собеседники онлайн на сайте Mail.ru, они увидят вызов и смогут ответить сразу"),remitEvents:{click:"calls:groupcall"},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0}),e().createElement(bb.Z,{text:i18n("Отправить ссылку на звонок"),ico:"status:link","data-qa-id":(0,wa.qa)("calls:invite"),"radar-id":"footer-calls-invite",disabled:!this.isEnableCall(),title:!a["disable-calls-tip"]&&i18n("Собеседники получат ссылку для видеозвонка и присоединятся, когда перейдут по ней"),remitEvents:{click:"calls:invite"},remitDetails:a.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),base:!0,pure:!0}))}function af(){var a=this,b=He(He({},this.props),this.state),d=b.model,f=b.model.is("attaches.list.length")&&this.isEnableAttach(),g=(0,Yc.hasLetterReplyAll)(d),h=d.get("drafts.reply"),i=d.get("drafts.replyall"),j=d.get("drafts.forward"),k=b.ponymode,l=this.isAMPLetter(),m=b["amp-error"],n=this.getLetterMetaHeaderType(d),o=d.get("flags.maybe_phishing"),q=g&&b["sticky-reduce-reply"],r=b["marusia-portal-enabled"]&&this.isMarusiaReadLetterEnabled(),s=b["marusia-portal-enabled"]&&b["marusia-read-all-letters"],t=this.getMarusiaReadLetterRadarPrefix(),u=b.smart_replies&&this.isEnableReply();return e().createElement("div",{ref:this.letterRef,className:Ie.root({priority:!0,unread:!0,attach:!0,single:b.single,first:b.first,last:b.last,touch:b.touch,compact:b.compact,fluid:!b.compact,sticky:b.sticky,"native-sticky":b["native-sticky"],"hover-support":b["hover-support"],"expanded-next":b["expanded-next"],"light-mode":!this.isDarkMode()})},e().createElement("div",{"data-qa-id":(0,wa.qa)("head"),onClick:(0,Wc.CH)(this,"clickhead"),className:Ie.elem("head",{sticky:b["sticky-head"],"sticky-fade":b["sticky-head-fade"]})},e().createElement("div",{className:Ie.elem("header-row")},this.avatarWrap(b),e().createElement("div",{"data-qa-id":(0,wa.qa)("head:details"),className:Ie.elem("header-details")},e().createElement("div",{className:Ie.elem("author")},this.correspondents(b,d.get("correspondents.from"),"from"),!b.compact&&this.date(b),!b.compact&&this.folder(b),(l&&!b["preview-mode"]||m)&&!b.compact&&this.ampIcon(b)),this.getMessageCorrespondents().length&&this.recipients(b),b.compact&&this.folder(b),b.compact&&this.date(b),(l&&!b["preview-mode"]||m)&&b.compact&&this.ampIcon(b)),e().createElement("div",{"data-qa-id":(0,wa.qa)("controls"),className:Ie.elem("controls")},this.statusFlag(b),this.isDarkModePossible()&&this.darkModeToggle(b),!p.DISABLE_HEAD_PRINT&&this.showPrintButton(b),p.ENABLE_TAGS&&this.addTag(b),this.more(b)))),e().createElement("div",{className:Ie.elem("before-letter-body")},p.ENABLE_TAGS&&e().createElement(ne,{model:d,tags:d.get("flags.tags")}),n&&e().createElement("div",{className:Ie.elem("letter-meta-container",{phishing:o})},e().createElement(bb.Z,{type:n,model:d,useMediators:["letters-actions"],remitEvents:{"attaches-cloud-save":"attaches:cloud:all"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(this),component:ud(),key:"letter-meta"})),this.isEnableConfirmationReceipt()&&e().createElement("div",{className:Ie.elem("confirm-receipt")},e().createElement(bb.Z,{id:"confirm-receipt",model:d,remitEvents:{confirm:"confirmreceipt"},broadcastEvent:(0,Wc.Yv)(this),component:qd(),key:"letter-confirm-receipt"})),this.isTranslatorVisible()&&e().createElement("div",{className:Ie.elem("translator")},e().createElement(bb.Z,{id:"translator",error:b["is-translator-error"],"from-default-selected":b["translator-default-from"],loading:b["is-translator-loading"],ponymode:k,compact:b.compactTranslator,"to-default-selected":b["translator-default-to"],translated:this.isLetterTranslated(),remitEvents:{close:"translator:close:click",original:"translator:original:click",retry:"translator:retry:click",translate:"translator:translate:click"},broadcastEvent:(0,Wc.Yv)(this),component:Ad(),key:"translator"}))),!this.isTranslatorVisible()&&this.isTooltipVisible()&&e().createElement("div",{className:Ie.elem("tooltip")},!!this.isImagesHiddenTooltipVisible()&&e().createElement(bb.Z,{type:"images-hidden-tooltip",ponymode:k,"title-text":i18n("Мы скрыли изображения в письме, чтобы защитить аккаунт"),"action-text":i18n("Показать изображения"),remitEvents:{action:"letter-tooltip:show-images:click",close:"letter-tooltip:close"},broadcastEvent:(0,Wc.Yv)(this),component:yd(),key:"letter-tooltip"})),!!f&&e().createElement("div",{className:Ie.elem("attach-list",{react:!0})},e().createElement(bb.Z,{"letter-length":b.model.get("body.text").length,models:b.model.get("attaches.list"),"total-size":b.model.getAttachmentsTotalSize(),"download-link":this.getAttachmentsDowloadLink(),"preview-mode":b["preview-mode"],useMediators:["layout-manager"],"dark-mode":this.isDarkModePossible(),remitEvents:{"attach-list-expanded":"attaches:expanded","attach-list-collapsed":"attaches:collapsed","attach-list-cloud":"attaches:cloud:all","thumb-open":"attaches:open","thumb-cloud":"attaches:cloud:one","force-recalc":"letter-force-recalc"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(this),component:ad(),key:"attach-list"})),e().createElement("div",{"data-qa-id":(0,wa.qa)("body"),className:Ie.elem("body",{react:!0})},!(b["address-header-calendar"]&&d.getJsonLdEvent()||b["smart-card-ics"]&&(0,$c.getCalendarIcsEvent)(d))&&e().createElement(bb.Z,{key:"letter-calendar","dark-mode":this.isDarkMode(),calendars:d.getCalendarFromAttach(),component:md()}),l&&!b["preview-mode"]?e().createElement(bb.Z,{ref:this.letterBody,model:d,remitEvents:{error:"amp:error","force-recalc":"letter-force-recalc"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(this),component:kd(),key:"letter-body-amp"}):e().createElement(Rd,{ref:this.letterBody,key:"letter-body",id:this.getLetterBodyKey(),bodyHtml:this.getLetterBody(),"collapsed-default":b["quotes-collapsed-default"],ponymode:k,"dark-mode":this.isDarkMode(),message:d,"preview-mode":b["preview-mode"],useMediators:["layout-manager","features","flags"],remitEvents:{resize:"resize",blockquote:"blockquote",allowedattrclick:"letter:body:allowedattrclick","data-attr-click":"letter:body:data-attr:click","force-recalc":"letter-force-recalc",finepayment:"letter:body:finepayment",finepaymentright:"letter:body:finepaymentright",monetapayment:"letter:body:monetapayment",tomyselfclick:"letter:body:tomyself"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(this)})),!b.readonly&&this.isShowFooter()&&e().createElement("div",{"data-qa-id":(0,wa.qa)("footer"),className:Ie.elem("footer",{react:!0,sticky:b["sticky-footer"],"new-toolbar":p.NEW_TOOLBAR,"sticky-fade":b["sticky-footer-fade"]})},e().createElement("div",{className:Ie.elem("footer-background",{react:!0})},e().createElement("div",{className:Ie.elem("footer-buttons")},e().createElement("div",{className:Ie.elem("footer-left")},g&&e().createElement("div",{className:Ie.elem("footer-button")},i?e().createElement("div",{className:Ie.elem("button-dropdown")},e().createElement(c.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:this.itemsReplyAll(b)},e().createElement(bb.Z,{"radar-id":"replyall",text:i18n("Ответить всем"),ico:"reply-all",base:!0,pure:!0,touch:b.touch,disabled:!this.isEnableReply(),shortcut:"shift+r","title-shortcut":"Shift+R",component:ed()}))):e().createElement(bb.Z,{"radar-id":"replyall",text:i18n("Ответить всем"),ico:"reply-all",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableReply(),remitEvents:{click:"compose:replyall"},remitDetails:b.model,broadcastEvent:(0,Wc.Yv)(this),shortcut:"shift+r","title-shortcut":"Shift+R",component:ed(),key:"button2"})),e().createElement("div",{className:Ie.elem("footer-button")},h?e().createElement("div",{className:Ie.elem("button-dropdown")},e().createElement(c.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:this.itemsReply(b)},e().createElement(bb.Z,{"radar-id":"reply",text:i18n("Ответить"),ico:"reply",base:!0,pure:!0,touch:b.touch,disabled:!this.isEnableReply(),short:q,shortcut:"r","title-shortcut":"R",component:ed()}))):e().createElement(bb.Z,{"radar-id":"reply",text:i18n("Ответить"),ico:"reply",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableReply(),short:q,remitEvents:{click:"compose:reply"},remitDetails:b.model,broadcastEvent:(0,Wc.Yv)(this),shortcut:"r","title-shortcut":"R",component:ed(),key:"button2"})),e().createElement("div",{className:Ie.elem("footer-button")},j?e().createElement("div",{className:Ie.elem("button-dropdown")},e().createElement(c.Dropdown,{placement:"topLeft",pureOverlay:!0,overlay:this.itemsForward(b)},e().createElement(bb.Z,{"radar-id":"forward",text:i18n("Переслать"),ico:"forward",base:!0,pure:!0,touch:b.touch,disabled:!this.isEnableForward(),shortcut:"F","title-shortcut":"F",remitDetails:b.model,component:ed()}))):e().createElement(bb.Z,{"radar-id":"forward",text:i18n("Переслать"),ico:"forward",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableForward(),remitEvents:{click:"compose:forward"},remitDetails:b.model,broadcastEvent:(0,Wc.Yv)(this),shortcut:"F","title-shortcut":"F",component:ed(),key:"button2"}))),e().createElement("div",{className:Ie.elem("footer-right")},!(this._showUnsubscribeButton()||this.isDatesMetadataEnabled())&&e().createElement(e().Fragment,null,b["invite-call"]&&!b["disable-call"]&&!b["disable-footer-call"]&&this.canCallTo(b.model)&&e().createElement("div",{"data-qa-id":(0,wa.qa)("calls-dropdown"),className:Ie.elem("footer-button",{},{addClass:[(0,Gd.d)("footer-calls-dropdown")]})},e().createElement("div",{className:Ie.elem("button-dropdown")},e().createElement(c.Dropdown,{placement:"topRight",pureOverlay:!0,overlay:this.itemsInviteCall(b)},e().createElement(bb.Z,{"disable-expand-center":!0,"expand-left":!0,ico:"categories:camera",text:i18n("Позвонить"),title:i18n("Позвонить"),annotation:!b["disable-calls-tip"]&&i18n("Отправьте ссылку на звонок или позвоните сейчас — если ваши собеседники онлайн, они увидят вызов"),ponymode:b["pony-mode"],pure:!0,short:b["sticky-reduce-all-texts"],"radar-id":"footer-call-dropdown",disabled:!this.isEnableCall(),remitEvents:{"dropdown-change-state":"dropdown-change"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(this),component:ed()})))),b["invite-call"]&&!b["disable-call"]&&!b["disable-footer-call"]&&!this.canCallTo(b.model)&&e().createElement("div",{className:Ie.elem("footer-button",{},{addClass:[(0,Gd.d)("footer-calls-button")]})},e().createElement(bb.Z,{className:Ie.elem("calls-invite-button"),"data-qa-id":(0,wa.qa)("calls:invite"),"radar-id":"footer-call",text:!b["sticky-reduce-all-texts"]&&i18n("Позвонить"),title:i18n("Позвонить"),annotation:!b["disable-calls-tip"]&&i18n("Участники встречи получат ссылку для видеозвонка и присоединятся, когда перейдут по ней"),ico:"categories:camera",base:!0,pure:!0,touch:b.touch,model:b.model,disabled:!this.isEnableCall(),remitEvents:{click:"calls:invite"},remitDetails:b.model,broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})),!b["disable-create-event"]&&!b["disable-footer-calendar"]&&e().createElement("div",{className:Ie.elem("footer-button")},e().createElement(bb.Z,{model:b.model,"sticky-reduce-one-text":b["sticky-reduce-one-text"],useMediators:["calendar-manager"],component:gd(),key:"calendar-button"}))),!!this._showVkMessengerButton()&&e().createElement("div",{className:Ie.elem("vk-chat-button",{},{addClass:[(0,Gd.d)("toolbar-vk-chat")]})},e().createElement(bb.Z,{"data-qa-id":(0,wa.qa)("vk-messenger:open"),"radar-id":"footer-vk",text:!b["sticky-reduce-one-text"]&&this._getVkMessengerParams().text,title:this._getVkMessengerParams().text,ico:"social:vk",base:!0,pure:!0,touch:b.touch,model:b.model,centered:b["sticky-reduce-one-text"],remitEvents:{click:"vk-messenger:open"},remitDetails:this._getVkMessengerParams().href,broadcastEvent:(0,Wc.Yv)(this),component:ed(),key:"button2"})),!(!this._showUnsubscribeButton()||this.isDatesMetadataEnabled())&&this.unsubscribe(b),!!this.isDatesMetadataEnabled()&&!b["disable-create-event"]&&!b["disable-footer-calendar"]&&e().createElement("div",{className:Ie.elem("footer-button")},e().createElement(bb.Z,{model:b.model,"dates-metadata":b["dates-metadata"],"sticky-reduce-one-text":b["sticky-reduce-one-text"],useMediators:["calendar-manager"],component:gd(),key:"calendar-button"})))),(s||u)&&this.isShowSmartReplyAndMarusia()&&e().createElement("div",{className:Ie.elem("footer-controls")},(r||s)&&e().createElement("span",{className:Ie.elem("marusia-rl",{},{addClass:[(b.smart_replies_ready||s)&&"ready"]})},e().createElement(ve,{model:b.model,useMediators:["marusia-manager"],"radar-prefix":t})),!!u&&b.smart_replies.map(function(c,d){return e().createElement("span",{key:d,className:Ie.elem("smart-reply",{},{addClass:[b.smart_replies_ready&&"ready"]})},e().createElement(bb.Z,{text:c,compact:!0,shadowless:!0,invert:!0,"radar-id":"smart-reply{message.is('flags.smart_reply_stage') ? '_stage' : ''}",remitEvents:{click:"compose:smartreply"},remitDetails:{model:b.model,key:d},broadcastEvent:(0,Wc.Yv)(a),component:ed(),key:"button2"}))})))))}!function(a){a.mount="$mount",a.unmount="$destroyed",a.composeReply="compose:reply",a.composeReplyAll="compose:replyall",a.composeForward="compose:forward",a.composeSmartReply="compose:smartreply",a.toggleStatusUnread="togglestatus:unread",a.toggleStatusFlagged="togglestatus:flagged"}(Ee||(Ee={}));var bf=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cf=function(){return(cf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},df=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(Vc.blockSpec.events),!0),ef=function(a){function b(b){var c=a.call(this,b)||this;return c.ampIcon=Je,c.calendarCreate=Re,c.avatarWrap=Se,c.correspondents=Ke,c.darkModeToggle=Ne,c.date=Ue,c.folder=Te,c.inviteCall=Pe,c.itemsForward=$e,c.itemsInviteCall=_e,c.itemsReply=Ze,c.itemsReplyAll=Ye,c.more=We,c.recipients=Ve,c.statusFlag=Oe,c.statusUnread=Le,c.unsubscribe=Xe,c.showPrintButton=Qe,c.addTag=Me,c.reactComponent=!0,c.performanceTrace=Vc.blockSpec.performanceTrace,c.isolateEvents=Vc.blockSpec.isolateEvents,c.mods=Vc.blockSpec.mods,c.events=Vc.blockSpec.events,c.isFooterHiddenRadarSended=!1,c.isSmartReplyHiddenRadarSended=!1,c.radar=vc(),c.onAttachmentsCloud=Vc.blockSpec.onAttachmentsCloud,c.onAttachmentCloud=Vc.blockSpec.onAttachmentCloud,c.onAttachmentClick=Vc.blockSpec.onAttachmentClick,c.onContactShow=Vc.blockSpec.onContactShow,c.onToggleDetails=Vc.blockSpec.onToggleDetails,c.onAllowedAttrClick=Vc.blockSpec.onAllowedAttrClick,c.onLetterDataAttributeClick=Vc.blockSpec.onLetterDataAttributeClick,c.onFinePaymentClick=Vc.blockSpec.onFinePaymentClick,c.onFinePaymentRightClick=Vc.blockSpec.onFinePaymentRightClick,c.onMonetaPaymentClick=Vc.blockSpec.onMonetaPaymentClick,c.onToMyselfClick=Vc.blockSpec.onToMyselfClick,c.onLetterComposeFromDraft=Vc.blockSpec.onLetterComposeFromDraft,c.onTranslatorClose=Vc.blockSpec.onTranslatorClose,c.onTranslatorHide=Vc.blockSpec.onTranslatorHide,c.onTranslatorOriginal=Vc.blockSpec.onTranslatorOriginal,c.onTranslatorTranslate=Vc.blockSpec.onTranslatorTranslate,c.onTooltipShowImagesClick=Vc.blockSpec.onTooltipShowImagesClick,c.onTooltipClose=Vc.blockSpec.onTooltipClose,c.onAmpError=Vc.blockSpec.onAmpError,c.onDarkModeToggle=Vc.blockSpec.onDarkModeToggle,c.onCallTo=Vc.blockSpec.onCallTo,c.onVkMessengerOpen=Vc.blockSpec.onVkMessengerOpen,c.formFinePaymentUrl=Vc.blockSpec.formFinePaymentUrl,c.isLetterTranslated=Vc.blockSpec.isLetterTranslated,c.isTranslationLoading=Vc.blockSpec.isTranslationLoading,c.isTranslatorVisible=Vc.blockSpec.isTranslatorVisible,c.isTooltipVisible=Vc.blockSpec.isTooltipVisible,c.isImagesHiddenTooltipVisible=Vc.blockSpec.isImagesHiddenTooltipVisible,c.getAttachmentsDowloadLink=Vc.blockSpec.getAttachmentsDowloadLink,c.getOriginalEvent=Vc.blockSpec.getOriginalEvent,c.getLetterBody=Vc.blockSpec.getLetterBody,c.getLetterBodyKey=Vc.blockSpec.getLetterBodyKey,c.getLetterBodyTranslation=Vc.blockSpec.getLetterBodyTranslation,c.getMessageCorrespondents=Vc.blockSpec.getMessageCorrespondents,c.isLetterIdEq=Vc.blockSpec.isLetterIdEq,c.canCallTo=Vc.blockSpec.canCallTo,c.updateSticky=Vc.blockSpec.updateSticky,c.updateStickyStatus=Vc.blockSpec.updateStickyStatus,c.updateOnlineStatus=Vc.blockSpec.updateOnlineStatus,c.updateSenderLastSeen=Vc.blockSpec.updateSenderLastSeen,c.updateLastSeenUnsubscribe=Vc.blockSpec.updateLastSeenUnsubscribe,c._showFilterButton=Vc.blockSpec._showFilterButton,c._showSpam=Vc.blockSpec._showSpam,c._startStickyTracking=Vc.blockSpec._startStickyTracking,c._stopStickyTracking=Vc.blockSpec._stopStickyTracking,c._showDropdownCallButton=Vc.blockSpec._showDropdownCallButton,c._showHeadCallButton=Vc.blockSpec._showHeadCallButton,c._showDropdownCalendarButton=Vc.blockSpec._showDropdownCalendarButton,c._showHeadCalendarButton=Vc.blockSpec._showHeadCalendarButton,c._showUnsubscribeButton=Vc.blockSpec._showUnsubscribeButton,c._showUnsubscribeInMoreMenu=Vc.blockSpec._showUnsubscribeInMoreMenu,c._showVkMessengerButton=Vc.blockSpec._showVkMessengerButton,c._getVkMessengerParams=Vc.blockSpec._getVkMessengerParams,c._sendVkMessengerEvent=Vc.blockSpec._sendVkMessengerEvent,c._windowResizeListeners=Vc.blockSpec._windowResizeListeners,c.hasReplyAll=Vc.blockSpec.hasReplyAll,c.isAMPLetter=Vc.blockSpec.isAMPLetter,c.isAMPLetterWithoutTheme=Vc.blockSpec.isAMPLetterWithoutTheme,c.setCssSelectorThemeAMP=Vc.blockSpec.setCssSelectorThemeAMP,c.isDarkMode=Vc.blockSpec.isDarkMode,c.isDarkModePossible=Vc.blockSpec.isDarkModePossible,c.isProbablyPhishing=Vc.blockSpec.isProbablyPhishing,c.checkFolderGrant=Vc.blockSpec.checkFolderGrant,c.isEnableReply=Vc.blockSpec.isEnableReply,c.isEnableCall=Vc.blockSpec.isEnableCall,c.isEnableForward=Vc.blockSpec.isEnableForward,c.isEnableMark=Vc.blockSpec.isEnableMark,c.isEnableAttach=Vc.blockSpec.isEnableAttach,c.isDatesMetadataEnabled=Vc.blockSpec.isDatesMetadataEnabled,c.isEnableConfirmationReceipt=Vc.blockSpec.isEnableConfirmationReceipt,c.isSmartRepliesAvailable=Vc.blockSpec.isSmartRepliesAvailable,c.isMarusiaReadLetterEnabled=Vc.blockSpec.isMarusiaReadLetterEnabled,c.getMarusiaReadLetterRadarPrefix=Vc.blockSpec.getMarusiaReadLetterRadarPrefix,c.hasCloudStockAttach=Vc.blockSpec.hasCloudStockAttach,c.getLetterMetaHeaderType=Vc.blockSpec.getLetterMetaHeaderType,c.isShowSmartReplyAndMarusia=Vc.blockSpec.isShowSmartReplyAndMarusia,c.isShowFooter=Vc.blockSpec.isShowFooter,c.isShowFakeCreateTodo=Vc.blockSpec.isShowFakeCreateTodo,c.useNewToolbar=Vc.blockSpec.useNewToolbar,c.getAttachSafetyStatus=Vc.blockSpec.getAttachSafetyStatus,c.isAllExtensionsInWhiteList=Vc.blockSpec.isAllExtensionsInWhiteList,c.isEveryStrictlyUnsafe=Vc.blockSpec.isEveryStrictlyUnsafe,c.isAllScanResolutionsOf=Vc.blockSpec.isAllScanResolutionsOf,c.isAllTypesOf=Vc.blockSpec.isAllTypesOf,c.hasSmartCardIcsMeta=Vc.blockSpec.hasSmartCardIcsMeta,c.attrs=cf(cf({},c.props),c.state),c.render=af,c.letterRef=e().createRef(),c.letterBody=e().createRef(),c.checkIfShouldEnableDarkMode(),df.forEach(function(a){c[a]=c[a].bind(c)}),c}return bf(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.letterRef.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){Vc.blockSpec.didMount.bind(this)(),this.updateModel(cf(cf({},this.props),this.state)),this.updateStickyAttrs(cf(cf({},this.props),this.state),{}),this.updateStickyPositionAttrs(cf(cf({},this.props),this.state)),this.updateDatasetMetadataAttrs(cf(cf({},this.props),this.state))},b.prototype.componentDidUpdate=function(a,b){var c=cf(cf({},this.props),this.state),d=cf(cf({},a),b);if(c.model!==d.model)this.updateModel(c);if(c.sticky!==d.sticky)this.updateStickyAttrs(c,d);if(c["sticky-position"]!==d["sticky-position"])this.updateStickyPositionAttrs(c);if(c["dates-metadata"]!==d["dates-metadata"])this.updateDatasetMetadataAttrs(c)},b.prototype.componentWillUnmount=function(){Vc.blockSpec.didUnmount.bind(this)()},b.prototype.handleInnerEvent=function(a){var b=a.type;switch(b){case Ee.mount:return void vc()(["thread_letter","mount"],1,(0,Xc.getModelData)(this));case Ee.unmount:return void vc()(["thread_letter","unmount"],1,(0,Xc.getModelData)(this));case Ee.toggleStatusUnread:return void vc()(["thread_letter",(0,Xc.renameRadarOnStatusToggle)(this,"unread")]);case Ee.toggleStatusFlagged:return void vc()(["thread_letter",(0,Xc.renameRadarOnStatusToggle)(this,"flagged")]);case Ee.composeReply:case Ee.composeReplyAll:case Ee.composeForward:case Ee.composeSmartReply:vc()(["thread_letter",b],1,(0,Xc.getModelData)(this))}},b.prototype.checkIfShouldEnableDarkMode=function(){if(this.get("model").getCalendarFromAttach().length)this.setState({"dark-mode-enabled":!1})},b.prototype.get=function(a){return cf(cf({},this.props),this.state)[a]},b.prototype.updateModel=function(a){var b=this,c=a.model;if(window.setTimeout(function(){var a=c.get("attaches").list;vc()("letter_attaches",a.length);try{(0,Sc.sendSMIMEAttachmentsMetrics)(a)}catch(a){}},500),this.isSmartRepliesAvailable(c)){this.setState({smart_replies_ready:!!c.getSmartReply()});var d=c.is("flags.smart_reply_stage")?"_stage":"";vc()("smart_replies"+d+"_try-show"),c.fetchSmartReply().then(function(a){if(b.setState({smart_replies:a.get("replies")}),vc()("smart_replies"+d+"_show"),a.is("is_default"))vc()("smart_replies_default"+d+"_show");Uc().update()},function(){vc()("smart_replies"+d+"_show-fail")})}},b.prototype.updateStickyAttrs=function(a,b){var c=a.sticky||{},d=b.sticky||{};if(d.head!==c.head)this.updateSticky("head",c.top,c.headFade,!!c.maxWidth);if(d.footer!==c.footer)this.updateSticky("footer",c.bottom,c.footerFade,!!c.maxWidth)},b.prototype.updateStickyPositionAttrs=function(a){var b=a["sticky-position"],c=a.sticky;if(c)this.updateSticky("head",c.top,!1,!!b.maxWidth),this.updateSticky("footer",c.bottom,!1,!!b.maxWidth)},b.prototype.updateDatasetMetadataAttrs=function(a){var b=a["dates-metadata"];a.model.set("dates_metadata.priority_date",b)},b}(e().Component),ff=(0,Wc.v$)("letter",ef,{syncMediatorsOnRender:!1});ff.defaultProps=Vc.blockSpec.defaults;var gf,hf,jf,kf,lf,mf,nf,of,pf,qf,rf,sf,tf,uf=ff,vf=["remove","compose:reply","compose:replyall","compose:forward","remove","archive","spam","unspam","mark:allreaded","mark:readed","select:all","select:drop","select:drop","letter:prev","letter:next","letter:back","move:click","ctrl-click","ctrl-click","search","dropdown-change","compose:reply","compose:replyall","compose:forward","remove","archive","spam","click:unsubscribe","unspam","superspam","mark:readed","mark:unreaded","mark:flagged","mark:unflagged","calls:invite","calendar:create","spam","click:unsubscribe","print","settingsfilters:create","translator:show","forward","search:from","redirect","forward","headers","download","newtab","move","clear"].reduce(function(a,b){return a[b]=b,a},{}),wf=wc(2707),xf=function(a){var b=a.element,c=a.breakpoints,e=a.pureBreakpoints,f=a.initialState,g=(0,d.useState)(f),h=g[0],i=g[1];return(0,d.useLayoutEffect)(function(){if(b){var a="current"in b?b.current:b;if(a){var d=new wf.GetAdaptive({element:a,pureBreakpoints:e,breakpoints:c,onResize:i});return function(){return d.destroy()}}}},[c,b,e]),h},yf=wc(4312);!function(a){a.more="more",a.remove="remove",a.archive="archive",a.spam="spam",a.unsubscribe="unsubscribe",a.unspam="unspam",a.move="move",a.read="read",a.replyAll="reply-all",a.reply="reply",a.forward="forward"}(sf||(sf={})),function(a){a.ru="ru_RU",a.uk="uk_UA",a.be="be_BY",a.hy="hy_AM",a.kk="kk_KZ",a.uz="uz_UZ",a.mo="mo_MD",a.ro="ro_RO",a.en="en_US",a.es="es_ES"}(tf||(tf={}));var zf,Af=((gf={})[tf.ru]=((hf={})[sf.remove]=[60,52],hf[sf.archive]=[55,48],hf[sf.spam]=[38,33],hf[sf.unsubscribe]=[83,72],hf[sf.unspam]=[58,50],hf[sf.move]=[55,48],hf[sf.read]=[75,65],hf[sf.replyAll]=[105,91],hf[sf.reply]=[67,58],hf[sf.forward]=[75,65],hf),gf[tf.uk]=((jf={})[sf.remove]=[70,61],jf[sf.archive]=[66,57],jf[sf.spam]=[38,33],jf[sf.unsubscribe]=[87,76],jf[sf.unspam]=[58,50],jf[sf.move]=[55,48],jf[sf.read]=[76,66],jf[sf.replyAll]=[108,93],jf[sf.reply]=[74,64],jf[sf.forward]=[77,66],jf),gf[tf.be]=((kf={})[sf.remove]=[66,57],kf[sf.archive]=[49,43],kf[sf.spam]=[38,33],kf[sf.unsubscribe]=[72,63],kf[sf.unspam]=[58,50],kf[sf.move]=[53,46],kf[sf.read]=[78,68],kf[sf.replyAll]=[100,87],kf[sf.reply]=[68,59],kf[sf.forward]=[76,66],kf),gf[tf.hy]=((lf={})[sf.remove]=[39,34],lf[sf.archive]=[98,85],lf[sf.spam]=[83,72],lf[sf.unsubscribe]=[73,63],lf[sf.unspam]=[78,67],lf[sf.move]=[114,98],lf[sf.read]=[70,60],lf[sf.replyAll]=[50,44],lf[sf.reply]=[112,97],lf[sf.forward]=[79,69],lf),gf[tf.kk]=((mf={})[sf.remove]=[35,30],mf[sf.archive]=[74,64],mf[sf.spam]=[38,33],mf[sf.unsubscribe]=[69,60],mf[sf.unspam]=[76,66],mf[sf.move]=[106,92],mf[sf.read]=[27,23],mf[sf.replyAll]=[132,114],mf[sf.reply]=[84,73],mf[sf.forward]=[95,82],mf),gf[tf.uz]=((nf={})[sf.remove]=[58,50],nf[sf.archive]=[50,43],nf[sf.spam]=[39,34],nf[sf.unsubscribe]=[117,101],nf[sf.unspam]=[80,69],nf[sf.move]=[39,34],nf[sf.read]=[43,37],nf[sf.replyAll]=[156,135],nf[sf.reply]=[40,35],nf[sf.forward]=[101,87],nf),gf[tf.mo]=((of={})[sf.remove]=[52,45],of[sf.archive]=[58,50],of[sf.spam]=[39,34],of[sf.unsubscribe]=[82,71],of[sf.unspam]=[93,80],of[sf.move]=[54,47],of[sf.read]=[29,25],of[sf.replyAll]=[123,107],of[sf.reply]=[76,66],of[sf.forward]=[92,79],of),gf[tf.ro]=((pf={})[sf.remove]=[52,45],pf[sf.archive]=[58,50],pf[sf.spam]=[39,34],pf[sf.unsubscribe]=[82,71],pf[sf.unspam]=[93,80],pf[sf.move]=[54,47],pf[sf.read]=[29,25],pf[sf.replyAll]=[123,107],pf[sf.reply]=[76,66],pf[sf.forward]=[92,79],pf),gf[tf.en]=((qf={})[sf.remove]=[43,38],qf[sf.archive]=[50,43],qf[sf.spam]=[39,34],qf[sf.unsubscribe]=[83,72],qf[sf.unspam]=[64,56],qf[sf.move]=[53,46],qf[sf.read]=[36,31],qf[sf.replyAll]=[58,50],qf[sf.reply]=[38,33],qf[sf.forward]=[55,48],qf),gf[tf.es]=((rf={})[sf.remove]=[54,47],rf[sf.archive]=[88,76],rf[sf.spam]=[39,34],rf[sf.unsubscribe]=[93,81],rf[sf.unspam]=[80,69],rf[sf.move]=[79,69],rf[sf.read]=[30,26],rf[sf.replyAll]=[127,110],rf[sf.reply]=[73,64],rf[sf.forward]=[60,52],rf),gf),Bf=Af[o().get("LANG")]||Af[tf.ru],Cf=function(){return(Cf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Df=function(a,b){var c=b.ponyMode;return b.short||a===sf.more?c?28:36:Bf[a][+c]+48},Ef={order:Array.from(new Set(p.ORDER_BUTTONS.concat([sf.remove,sf.move,sf.spam,sf.unsubscribe,sf.unspam,sf.archive,sf.read,sf.more,sf.replyAll,sf.reply,sf.forward]))).slice(0,11)},Ff=function(a,b,c){return b.selectMode?function(a,b,c){var d=a.deselectAll,e=a.folder,f=b.selectedStats,g=b.isSpam,h=b.isDisableEdit,i=b.isUnspam,j=b.hasSuperSpam,k=b.readMode,l=b.selectMode,m=c.unsubscribeInsteadSpam,n=c.unsubscribeInMoreDropdown;return{if:k||l,read:f.unread>0,unread:f.read>0,flag:f.noflagged>0,unflag:f.flagged>0,print:1===f.all,archive:!!(null==e?void 0:e.isArchive())&&f.noarchive&&!p.ARCHIVE_DISABLED,spam:!p.FORBID_SPAM&&g&&!f.metathread,spamDisabled:h||d||f.metathread,spamAbovePrint:!p.FORBID_SPAM&&!f.metathread&&m,unsubscribeAbovePrint:n,unspam:i,superspam:j&&!f.metathread&&!d,forward:!f.metathread&&!d,"create-filter":!p.FORBID_FILTERS&&!f.metathread&&!d}}(a,b,c):b.readMode?function(a,b,c){var d=b.isNewsletter,e=b.isSpam,f=b.isDisableEdit,g=b.letter,h=b.hasSuperSpam,i=b.readMode,j=b.selectMode,k=c.unsubscribeInsteadSpam,l=c.unsubscribeInMoreDropdown;return{if:i||j,readletter:!0,print:!0,"invite-call":p.CALLS&&!p.CALLS_DISABLE_LETTER_CALL&&!(d&&p.CALLS_DISABLE_LETTER_CALL_NEWSLETTERS),"create-event":!(p.DISABLE_CREATE_EVENT||d&&p.DISABLE_LETTER_CALENDAR_NEWSLETTERS),"create-filter":!p.FORBID_FILTERS,translate:!p.DISABLE_TRANSLATE,"disable-edit":f,read:null==g?void 0:g.is("flags.unread"),unread:!(null==g?void 0:g.is("flags.unread")),flag:!(null==g?void 0:g.is("flags.flagged")),unflag:null==g?void 0:g.is("flags.flagged"),archive:!1,spam:!p.FORBID_SPAM&&!!k&&e,spamAbovePrint:!p.FORBID_SPAM&&k,unsubscribeAbovePrint:l,unspam:!1,superspam:h}}(0,b,c):{}},Gf=function(a,b,c){var d;if(void 0===c)c=function(a,b){if(void 0===b)b=(0,yf.isLettersFromTrustedMailer)(a);return{unsubscribeInMoreDropdown:b&&p.UNSUBSCRIBE_IN_MORE_DROPDOWN,unsubscribeInsteadSpam:b&&p.UNSUBSCRIBE_INSTEAD_SPAM}}(b);var e=a.folder,f=a.folders,g=b.selectMode,h=b.selectedStats,i=b.isDisableEdit,j=b.letter,k=b.isReplyAll,l=b.readMode,m=b.isRemoveVisible,n=b.isSpam,o=b.isUnspam,q=c.unsubscribeInsteadSpam;return(d={})[sf.archive]={if:!(null==e?void 0:e.isArchive())&&!p.ARCHIVE_DISABLED,disabled:i},d[sf.forward]={if:l,letter:j,disabled:i},d[sf.move]={if:!0,"radar-id":g?"selected":"letter-header",folders:f,disabled:i},d[sf.remove]={if:m,disabled:i},d[sf.read]={if:g&&h.unread>0,"radar-id":g?"selected":"letter-header"},d[sf.reply]={if:l,letter:j,short:k,disabled:i},d[sf.replyAll]={if:l&&k,letter:j,disabled:i},d[sf.spam]={if:!p.FORBID_SPAM&&n&&!q,disabled:i||g&&(a.deselectAll||h.metathread)},d[sf.unsubscribe]={if:q,letter:j,disabled:i||g&&(a.deselectAll||h.metathread)},d[sf.unspam]={if:o,disabled:i||g&&a.deselectAll},d[sf.more]=Ff(a,b,c),d},Hf=function(a,b){return b.order.filter(function(b){return!1!==a[b].if}).map(function(b){return{button:b,short:a[b].short}})},If=wc(9330),Jf=wc.n(If),Kf={display_mode:"gAcvN_c1t4iWLAJYQ1SlM",short_padding:"aTAS5KdpbXyncYpFeXSu-",middle_padding:"_2hm49I9FFgP8z8ZU7rWcrl",display_none:"_21PBNMJJQByYLRBKWFgTrK",not_single:"PYX2x2Y9DQJtpynuTDxr2",not_border:"_1MR0VsGEI_ZMntKazIIt57",next_prev:"_1Y3atN_TG7HeoIjcqPqcBu",read_letter:"_2NFZ6ld1bW3r51BcglLdff",back:"_3s9BW3cG2EDQ_ySBGAaZVY",hidden:"_3xeiH5OhjutFQPtKYKgyA7",space_after_more:"_1sghwH_uINT5R506Bp80xC",deselectButtonContainer:"_3vu8Kn6SYTyOTTkCOCBV-f"},Lf=function(){return(Lf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Mf=function(a){var b,c="back"===a.type||"backToParentFolder"===a.type||"deselect-back"===a.type,d=ca()(((b={})[Kf.deselectButtonContainer]="deselect"===a.type,b[Kf.space_after_more]=p.SPACE_AFTER_MORE&&"more"===a.type,b[Kf.back]=c,b[Kf.hidden]=a.hidden,b));return a.hidden&&!a.notDelete?null:e().createElement(bb.Z,Lf({},a,{className:d,useMediators:["letters-selection"],component:Jf()}))},Nf=function(){return(Nf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Of=function(a){var b=a.attrs,c=a.globals,d=a.selectedLettersInfo,f=a.globalEnv,g=a.displayMode,h=e().useState(null),i=h[0],j=h[1],k=function(a,b){var c=a.folder,d=a.folders,f=a.deselectAll,g=b.isRemoveVisible,h=b.isReplyAll,i=b.isNewsletter,j=b.letter,k=b.selectedStats,l=b.isSpam,m=b.isDisableEdit,n=b.isUnspam,o=b.hasSuperSpam,p=b.readMode,q=b.selectMode;return e().useMemo(function(){return Gf({folder:c,folders:d,deselectAll:f},{isRemoveVisible:g,isReplyAll:h,isNewsletter:i,letter:j,selectedStats:k,isSpam:l,isDisableEdit:m,isUnspam:n,hasSuperSpam:o,readMode:p,selectMode:q})},[f,c,d,o,m,i,g,h,l,n,j,p,q,k])}(b,c),l=c.ponyMode,m=c.letterId,n=c.store,o=c.isDisableEdit,p=e().useMemo(function(){var a=Hf(k,Ef),b=a.reduce(function(a,b){var c=b.button,d=b.short;return a+Df(c,{ponyMode:l,short:d})+1},36),c=[{minWidth:b,countShort:0}];return a.reduceRight(function(b,d,e){var f=d.button,g=d.short;if(!g)b+=36-Df(f,{ponyMode:l,short:g}),c.push({minWidth:b,countShort:a.length-e});return b},b),c.map(function(a){return function(b,c,d){return{props:b,conditions:c===d.length-1?null:function(e){return a(e,b,c,d)}}}}(function(a,b){return b.minWidth<=a.width}))},[k,l]),q=xf({element:i,breakpoints:p,pureBreakpoints:!0,initialState:function(){return p.at(-1).props}}),r=e().useMemo(function(){return function(a,b,c){return Hf(a,c).map(function(c,d,e){var f=c.button,g=c.short;return Cf(Cf({},a[f]),{type:f,short:g||e.length-d<=b.countShort})})}(k,q,Ef)},[q,k]);return e().createElement("div",{className:Kf.read_letter,ref:j},r.map(function(a){return e().createElement(Mf,Nf({},f,{key:a.type,"letter-id":m,selectedLettersIds:d.ids,selectedLettersSenders:d.senders,store:n,hidden:!g,"radar-id":null,disabled:o},a))}))},Pf=wc(1015),Qf=wc.n(Pf),Rf=wc(6792),Sf=function(){return(Sf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Tf=function(a){var b=(0,Rf.C)({name:"portal-menu",mediators:["compose-manager","filter-manager","layout-manager","letters-actions","letters-selection","pony-mode","progress-bar-manager","search-manager","themes-manager","translator-manager","user-info","folders-navigation"],forRadar:{radar:yf.radarPortalMenu,syntheticBlock:function(){return{is:Wc.zf}}}}),c=b[0],d=b[1],f=b[2],g=e().useCallback(function(a){return Object.entries(a).map(function(a){return[a[0],typeof a[1]]})},[]);e().useEffect(function(){if(!a.folder||!a.route)i().send("crossnav-upme-no-val-err",{rlog:"crossnav-upme-no-val-err",rlog_message:{props:g(a),state:g(a)}})},[a.folder,a.route]);var h=c.selected,j=function(a){var b=e().useRef(0);function c(){b.current++}return e().useEffect(function(){return a.forEach(function(a){return a.on("change",c)}),function(){a.forEach(function(a){return a.off("change",c)})}},[a]),b.current}(h),k=e().useMemo(function(){return Qf()(h)},[j,h]),l=e().useMemo(function(){return Sf(Sf(Sf({},a),c),{selectedStats:k})},[a,k,c]),m=e().useMemo(function(){return(0,yf.getGlobals)(l)},[l]),n=e().useMemo(function(){return(0,yf.getSelectedLettersIdsAndSenders)(m,{selected:h})},[m,h]);return{state:c,broadcast:d,selectedLettersInfo:n,attrs:l,props:a,globals:m,syntheticBlock:f}},Uf=function(){return(Uf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Vf="_2bU-4861SLM6KzZeT9w7Le",Wf="FClTaZ32w6rW2cRN9mlR5",Xf="jg3HafoGPtODOJmBVxXx4",Yf="_1xNRxLigVanrEcuqOjbGCY",Zf="_1Kh8Jyr2zWkZOjXpRNlJ3P",$f="aPIXZRdAwdr5Op9C00D-D",_f="_2NzA62gdKyyjboI7YXqOD0",ag="P0SlSCWwjvmid_61j5bvz",bg="_2Z8MjNFe2bbXM_8oNEkfNY",cg="_3Un83sJ9BmboNFib8JFCqm",dg="_3uUr9nxSskaU2eu7woDRQJ",eg=function(a){var b,c,d=a.darkMode,f=a.round,g=a.noAnimation,h=ca()($f,((b={})[cg]=f,b[dg]=f&&d,b[ag]=d,b)),i=ca()(_f,((c={})[bg]=d,c));return e().createElement("div",{style:a,className:h},!g&&e().createElement("div",{className:i}))},fg=function(a){var b,f,g=a.darkMode,h=a.animateContent,i=a.onMount;(0,d.useEffect)(function(){null==i||i()},[i]);var j=ca()(Vf,((b={})[Wf]=g,b)),k=ca()(((f={})[Xf]=h,f));return e().createElement(c.Responsive,{mode:"desktopS"},e().createElement("div",{className:j,"data-test-id":"letter-meta-skeleton"},e().createElement("div",{className:k},e().createElement("div",{className:Yf},e().createElement(eg,{darkMode:g,height:32,width:32,round:!0,noAnimation:!0}),e().createElement(eg,{darkMode:g,height:28,width:341})),e().createElement("div",{className:ca()(Yf,Zf)},e().createElement(eg,{darkMode:g,height:20,width:244})),e().createElement("div",{className:ca()(Yf,Zf)},e().createElement(eg,{darkMode:g,height:20,width:205})),e().createElement("div",{className:ca()(Yf,Zf)},e().createElement(eg,{darkMode:g,height:20,width:244})))))},gg=wc(7022),hg="_13g9TwPADGlVYjejUp8ylL",ig="_1ejZpbKssklxkVV-RWwRM8",jg="_1MOB49N0M6vLY2he1ovt8h",kg="_1sMVyod4jfYEzh0YFImyIu",lg="_3v8nLxqBPulORxXkBPr8b_",mg=function(a){var b,c;b=function(){var b,c,d,e,f,g;if(a){var h,j=(0,gg.getAppRouter)(),k={folder_id:+(null===(d=null===(c=null===(b=null==j?void 0:j.model)||void 0===b?void 0:b.folder)||void 0===c?void 0:c.attributes)||void 0===d?void 0:d.id),folder_name:null===(g=null===(f=null===(e=null==j?void 0:j.model)||void 0===e?void 0:e.folder)||void 0===f?void 0:f.attributes)||void 0===g?void 0:g.name};switch(a.type){case"latest":h=a.when;break;case"month":h="month",k.month="".concat(a.date.month+1),k.year="".concat(a.date.year);break;case"alpha_to":case"alpha_from":case"alpha_subj":h="alphabet",k.alphabet=a.alpha||"empty",k.sorting="alpha_subj"===a.type?"subject":"account";break;default:return}i().send("divider_".concat(h,"_show"),{dwh:k})}},c=[a],(0,d.useEffect)(b,c)},ng=function(a){var b,d=a.title,f=a.counter,g=a.ponyMode,h=a.compact,i=a.fit,j=a.meta,k=a.id;return mg(j),e().createElement("div",{className:ca()(hg,(b={},b[kg]=g,b[jg]=h,b[ig]=i,b)),"data-test-id":(0,wa.qa)("letters-".concat(k))},e().createElement(c.Text,{mode:"h6"},d),null!=f&&e().createElement("div",{className:lg},e().createElement(c.Text,{mode:"h6",secondary:!0},f)))},og=wc(1559),pg=wc(525),qg=wc(2685),rg=wc(2036),sg=wc(1434),tg=wc(7353),ug=wc(6820),vg=wc(9985),wg=wc(3277);!function(a){a.unread="togglestatus:unread",a.flagged="togglestatus:flagged",a.clickAvatar="clickavatar"}(zf||(zf={}));var xg=wc(5535),yg=wc(4284),zg=wc.n(yg),Ag=wc(3754),Bg=wc.n(Ag),Cg=wc(2471),Dg=wc.n(Cg),Eg=wc(6577),Fg=wc.n(Eg),Gg=wc(6827),Hg=wc.n(Gg),Ig=wc(5483),Jg=wc.n(Ig),Kg=wc(7641),Lg=wc.n(Kg),Mg=wc(604),Ng=wc.n(Mg),Og=wc(1730),Pg=wc.n(Og),Qg=wc(4517),Rg=wc.n(Qg),Sg=wc(5135),Tg=wc.n(Sg),Ug=wc(5872),Vg=wc.n(Ug),Wg="_2do3axVBzmQmuLd6aHClPf",Xg="_3QXWm7rXRd5ppI0PF8B93E",Yg="_3EcLHBwY49GuUe9wOSMue5",Zg="_2hM7sf2_hYDteiZvJFFREQ",$g="_38B_Uk9C1EWxdJmr0vqPHl",_g="MZcs_Gu85H-gL1D1YNWoT",ah="_1X113C2HkLhV0kuqb4PsO3",bh="_3zDpN_PKRNLeuyUuOBKZGw",ch="_1mTTNQURuNxepEsU4dTsSp",dh="_1d5Pelmzhos18mvmY3Zxzx",eh="_3VDEhLR_WceIP1LJeJMBZB",fh="_1fFXFBMlChQhwzfjYWLVfH",gh="_2wxDqGQ2HhUlUNSU0LWJQi",hh="_3-4EfCYsLtHNXpqNyRj7_j",ih="_1HjBUZXt6snvoOCVX7Ta_S",jh="_29sIqWb3n6OMDBPbatrA4Y",kh=function(a){var b=a.text,d=a.icon,f=a.iconElement,g=a.className,h=a.onClick,i=a.qaId;return e().createElement(C.Z,null,function(a){var j=a.Caption;return e().createElement("div",{className:ca()(g,eh),onMouseDown:function(a){a.preventDefault(),h(a)},"data-qa-id":(0,wa.qa)(i)},null!=f?f:e().createElement(c.Icon,{icon:d}),e().createElement(j,{level:"2",className:gh},b))})},lh=function(a){var b,c=a.model,f=a.common,g=(0,Rf.C)({name:"letter-swipe-actions",mediators:["letters-actions"]}),h=(g[0],g[1]),i=(0,d.useState)(c.is("flags.flagged"))[0],j=(0,d.useState)(c.is("flags.unread"))[0],k=(0,d.useState)(c.getFolder().isSpam())[0],l=(0,d.useCallback)(function(){Vg().open("move-to-folder",{letter:c},{dimmer:!0,mobile:!0,resolvable:!1})},[]),m=function(a){return function(){return h({type:a,details:{model:c}})}};return e().createElement("div",{className:ca()(Xg,(b={},b[$g]=f,b)),onClick:function(a){return a.preventDefault()}},e().createElement("div",{className:Wg},j?e().createElement(kh,{onClick:m("togglestatus:unread"),text:i18n("Прочитано"),iconElement:e().createElement("div",{className:ih}),qaId:"unread"}):e().createElement(kh,{onClick:m("togglestatus:unread"),text:i18n("Не прочитано"),iconElement:e().createElement("div",{className:ca()(ih,jh)}),qaId:"unread"}),i?e().createElement(kh,{onClick:m("togglestatus:flagged"),text:i18n("Снять флаг"),icon:q.ACTIONS_FAVORITE_ON,className:fh,qaId:"unflag"}):e().createElement(kh,{onClick:m("togglestatus:flagged"),text:i18n("Флаг"),icon:q.ACTIONS_FAVORITE_OFF,qaId:"flag"}),e().createElement(kh,{onClick:l,text:i18n("Перенести"),icon:q.ACTION_FOLDER_MOVE,qaId:"move"}),k?e().createElement(kh,{onClick:m("unspam"),text:i18n("Не спам"),icon:q.ACTIONS_LIKE,qaId:"unspam"}):e().createElement(kh,{onClick:m("spam"),text:i18n("Спам"),icon:q.ACTIONS_DISLIKE,qaId:"spam"})),e().createElement("div",{className:ca()(Wg,hh)},e().createElement(kh,{onClick:m("remove"),text:i18n("Удалить"),icon:q.ACTIONS_DELETE,className:fh,qaId:"remove"})))},mh=function(){return(mh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},nh=new Gd.k("swipeable"),oh=e().createContext(!1);function ph(){var a=mh(mh({},this.props),this.state);return e().createElement("div",{ref:this.swipeableRef,className:nh.root({react:!0,animated:a.animated,swiped:a.underlay})},!!a.underlay&&e().createElement(e().Fragment,null,e().createElement("div",{className:nh.elem("underlay"),ref:this.swipeUnderlayRef},a.swipeUnderlay),e().createElement("div",{className:nh.elem("underlay-right"),ref:this.swipeUnderlayRightRef},e().createElement(oh.Provider,{value:a.rightActive},a.swipeUnderlayRight))),e().createElement("div",{className:nh.elem("content-wrapper",{react:!0})},e().createElement("div",{ref:this.swipeableContentRef,className:nh.elem("content")},e().createElement("div",{className:nh.elem("header",{react:!0})},a.swipeHeader),e().createElement("div",{className:nh.elem("content-element",{react:!0})},a.swipeContent))))}var qh=function(){return(qh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},rh=function(a){var b,c=a.model,f=a.onFastAction,h=a.common,i=(0,g.useGlobalStateSelector)(s.getFastAction),j=(0,d.useContext)(oh),k=function(a,b,c){var f=(0,g.useGlobalStateSelector)(s.getFastAction),h=v().getSelectedModel().isDarkMode(),i=(0,d.useState)(b.is("flags.unread"))[0];return(0,d.useMemo)(function(){var b;if(f===t.LetterFastActionType.remove)return{className:_g,actionProps:{onClick:c,icon:a?q.STATUS_DONE:q.ACTIONS_DELETE,text:i18n("Удалить"),qaId:"remove"}};if(f===t.LetterFastActionType.archive)return{className:ah,actionProps:{onClick:c,icon:a?q.STATUS_DONE:q.ACTIONS_ARCHIVE,text:i18n("В архив"),qaId:"archive"}};if(f===t.LetterFastActionType.unread){var d=i?i18n("Прочитано"):i18n("Не прочитано");if(a)return{className:ch,actionProps:{onClick:c,text:d,icon:q.STATUS_DONE,qaId:"unread"}};else return{className:ch,actionProps:{onClick:c,text:d,iconElement:e().createElement("div",{className:i?ih:ca()(ih,jh)}),qaId:"unread"}}}return{className:ca()(bh,(b={},b[dh]=h,b)),actionProps:{onClick:c,icon:a?q.STATUS_DONE:q.NAVIGATION_SETTINGS,text:i18n("Настроить"),qaId:"settings"}}},[a,f,h,i,c])}(j,c,f),l=k.className,m=k.actionProps;return(0,d.useEffect)(function(){if(i===t.LetterFastActionType.settings)y()},[i]),(0,d.useEffect)(function(){var a;if(j)null===(a=navigator.vibrate)||void 0===a||a.call(navigator,10)},[j]),e().createElement("div",{className:ca()(Xg,(b={},b[$g]=h,b)),onClick:function(a){return a.preventDefault()}},e().createElement("div",{className:ca()(Yg,Zg,l)},e().createElement(kh,qh({},m))))},sh=wc(7386),th=wc.n(sh),uh=wc(8383),vh=wc.n(uh),wh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),xh=new Gd.k("ll-av"),yh=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return wh(b,a),b.prototype.renderAvatar=function(){var a,b,d,f=this.props,g=f.state,h=f.disabledHover,i=f.disabled,j=f.centered,k=f.isTouch,l=f.imgUrl,m=f.darkMode,n=f.verified,o=f.official,r=f.size;return e().createElement(e().Fragment,null,e().createElement("button",{"data-qa-id":(0,wa.qa)("selected:".concat(!!g)),className:xh.root((a={"is-active":g,"disable-hover":h,disabled:i,centered:j},a["size_".concat(r)]=!0,a)),onClick:(0,Wc.CH)(this,{stop:!0,name:"toggle"})},e().createElement("div",{className:xh.elem("container",{touch:k})},!k&&e().createElement("span",{className:xh.elem("checkbox")},e().createElement(bb.Z,{checked:g,component:vh()})),e().createElement("div",{className:xh.elem("img-container")},e().createElement("span",{className:xh.elem("img"),style:{backgroundImage:"url(".concat(l||p.DEFAULT_AVATAR_SRC,")")}}),n&&e().createElement("span",{className:xh.elem("reliable-icon",(b={},b["size_".concat(r)]=!0,b))},e().createElement(c.Icon,{icon:m?q.STATUS_RELIABLE_SENDER_DARK:q.STATUS_RELIABLE_SENDER_LIGHT,testId:"reliable-icon"})),o&&e().createElement("span",{className:xh.elem("official-icon",(d={},d["size_".concat(r)]=!0,d))},e().createElement(c.Icon,{icon:m?q.STATUS_OFFICIAL_SENDER_DARK:q.STATUS_OFFICIAL_SENDER_LIGHT,testId:"official-icon"}))))))},b.prototype.didMount=function(){th().findDOMNode(this).classList.add("stop-animate")},b.prototype.render=function(){return e().createElement("div",null,this.renderAvatar())},b}(e().PureComponent),zh=(0,Wc.v$)("list-letter-avatar",yh),Ah=wc(8796),Bh=function(){return(Bh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ch=new Gd.k("ll-crpt");function Dh(){var a=Bh(Bh({},this.props),this.state);return e().createElement("span",{title:a.title,"data-qa-id":(0,wa.qa)(a["qa-id"]),className:Ch.root({dangerous:a.dangerous}),"data-qa-state":(0,wa.qa)(a.dangerous?"dangerous":"")},(0,Ah.correspondent)(a.state))}var Eh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Fh=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.render=Dh,b}return Eh(b,a),b}(e().Component),Gh=new Gd.k("ll-fs"),Hh={lightning:{icon:q.STATUS_BREAKING,mod:"auto"},important:{icon:q.STATUS_ERROR,mod:"important"}};function Ih(){var a,b=this.props,d=b.state,f=b["disable-hover"],g=b.priority,h=b.important,i=b.hideInactive,j=!d&&(g||h),k=h?Hh.important:Hh.lightning,l=j||d;return e().createElement("button",{type:"button","data-qa-id":(0,wa.qa)("flagged:".concat(d)),title:this.getTitle(),disabled:f,onClick:(0,Wc.CH)(this,{stop:!0,name:"toggle"}),className:Gh.root({"is-active":d,"disabled-hover":f,new:!0,hidden:!l&&i})},j&&e().createElement("span",{"data-qa-id":(0,wa.qa)("priority:".concat(k.mod)),className:Gh.elem("priority",(a={},a[k.mod]=!0,a))},e().createElement(c.Icon,{icon:k.icon})),e().createElement("span",{className:Gh.elem("icon")},e().createElement(bb.Z,{component:ab(),name:d?"actions:favorite_on":"actions:favorite_off"})))}var Jh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Kh=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.render=Ih,b}return Jh(b,a),b.prototype.getTitle=function(){return this.props.state?i18n("Снять флажок"):i18n("Пометить флажком")},b}(e().Component),Lh=(0,Wc.v$)("list-letter-flag-status",Kh),Mh=wc(7996),Nh=wc.n(Mh),Oh="_2CLP5EDizFXFzke5NvcyKs",Ph="_1mPquQiMTAd3lfdW_MXt8e",Qh="bImaDXqmj5mh5ErK3gX3d",Rh="_2rgVbU6Vu_-2prCkAp6qQl",Sh="_3Tqi3OGe3Nrsykdxa0E5y-",Th="G5yeOQbBym7C0cp0xuzuR",Uh=function(a){var b,c,f=a.model,g=a.layoutMode,h=a.meta,i=a.mode,j=h||{},k=j.description,l=j.potentialAction,m=(0,d.useRef)(null),n=f.id;(0,d.useEffect)(function(){vc()({type:"show_go_to_action",rlog:"show_go_to_action-log",rlog_message:{senderEmail:f.get("correspondents.from.0.email"),letterId:n,description:k,buttonText:l.name},dwh:{letterId:n,mode:i}})},[n,i]),(0,d.useEffect)(function(){m.current&&Nh().getNodeInfo(m.current)},[]);var o=(0,d.useCallback)(function(a){if(a.target instanceof HTMLAnchorElement)a.preventDefault(),vc()({type:"click_go_to_action",rlog:"click_go_to_action-log",rlog_message:{senderEmail:f.get("correspondents.from.0.email"),letterId:n,description:k,buttonText:l.name},dwh:{letterId:n,mode:i}}),N()(a.target.href)},[n,i]),p=(0,d.useCallback)(function(a){if(function(a){return 0===a.button}(a))if(a.target)Nh().revertUrl(a.target)},[]),q=e().createElement("span",{className:ca()(Qh,Sh,(b={},b[Rh]="3pane"===g,b)),"data-test-id":(0,wa.qa)("description")},k),r=ca()(((c={})[Oh]=!0,c[Ph]="3pane"===g,c)),s=ca()(Th,Sh);return e().createElement("div",{className:r,"data-test-id":(0,wa.qa)("go-to-action")},"full"===i&&k&&q,l&&e().createElement("a",{ref:m,className:s,href:l.url,onClick:o,onMouseDown:p,"data-test-id":(0,wa.qa)("link")},l.name))},Vh="Q3j19R3rSmXoGe5COVsXj",Wh="_3IiDTCqKsEQVOKpAwhE1FW",Xh=function(a){var b;return e().createElement("div",{className:ca()(Vh,(b={},b[Wh]=a.unread,b)),"data-qa-id":(0,wa.qa)("list-letter-mention"),"data-qa-state":(0,wa.qa)(a.unread?"unread":"read")},e().createElement(c.Icon,{icon:q.STATUS_MENTION,sizeX:4}))},Yh=wc(2258),Zh=new Gd.k("ll-rs");function $h(){var a,b=this.props,c=this.getIconName();return e().createElement("span",{"data-qa-id":(0,wa.qa)("unread:".concat(b.state)),title:this.getTitle(),onClickCapture:(0,Wc.CH)(this,{stop:!0,name:"toggle"}),className:Zh.root((a={"is-active":b.state,"disabled-hover":b["disable-hover"],shift:b.shift},a["dotSize_".concat(b.dotSize)]=!0,a))},c&&e().createElement("span",{className:Zh.elem("ico")},e().createElement(bb.Z,{component:ab(),name:c})))}var _h=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ai=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.render=$h,b.getIconName=Yh.blockData.getIconName,b.getTitle=Yh.blockData.getTitle,b}return _h(b,a),b.defaultProps={dotSize:"small"},b}(e().Component),bi=(0,Wc.v$)("list-letter-read-status",ai),ci="s5n59zaNPp54dj77xFK2a",di="_1A2UxpwAMeuU4_yQMQ5Wop",ei="_1lm5U1dZ5cVA37X8RV1CuC",fi="_2uuSUYl5qUQDmbrOxOrH8",gi="_1MCWuJ4OOiOswf0JvFeDoj",hi=function(a){var b=a.model,d=a.tags,f=a.active,g=a.rightSideDropdown,h=a.compact,j=a.folder,k=function(){var a,b;if(!(null==d?void 0:d.length))return e().createElement("div",{className:ca()(fi,(a={},a[gi]=f,a))},e().createElement(fe,{compact:h}));var g=p.TAGS_ORDER.filter(function(a){return null==d?void 0:d.includes(a)}).map(function(a,b){var c,f=b===d.length-1&&!j,g=null===p.TAGS_COLORS||void 0===p.TAGS_COLORS?void 0:p.TAGS_COLORS[a];return e().createElement("div",{key:a,style:{"--octavius-list-letter-tags-indent":"".concat(10*b,"px"),"--2kit-chip-width":f?"auto":"30px","--2kit-chip-background-color":g?"var(--vkui--color_tag_background_".concat(g,")"):"var(--vkui--color_background_secondary_alpha)",backgroundColor:"var(--2kit-chip-background-color)"},className:ca()(di,(c={},c[ei]=f,c))},e().createElement(fe,{tag:a,empty:!f,compact:h}))});if(j)g.push(e().createElement("div",{key:"search_folder_name",style:{"--octavius-list-letter-tags-indent":"".concat(10*d.length,"px"),"--2kit-chip-width":"auto","--2kit-chip-height":h?"var(--vkui--x5)":"var(--vkui--x6)","--2kit-chip-background-color":"var(--vkui--color_background_secondary)","--2kit-chip-background-color--hover":"var(--2kit-chip-background-color)","--2kit-chip-background-color--active":"var(--2kit-chip-background-color)",backgroundColor:"var(--2kit-chip-background-color)"},className:ca()(di,(b={},b[ei]=!0,b))},e().createElement(c.Chip,{text:j,textProps:{mode:"small"},testId:"list-letter-tag-folder"})));return g};if(a.readonly)return e().createElement("div",{"data-qa-id":(0,wa.qa)("list-letter-tags"),className:ci},k());else return e().createElement(c.Dropdown,{overlay:e().createElement(le,{model:b,tags:d,xrayFrom:"message_list"}),pureOverlay:!0,placement:g?"bottomLeft":"bottomRight",reservePlacement:g?"topLeft":"topRight",overlayContainer:document.body,onClick:function(a){a.preventDefault()}},e().createElement("div",{"data-qa-id":(0,wa.qa)("list-letter-tags"),className:ci,onClick:function(a){var c;a.preventDefault();var d=null===(c=null==b?void 0:b.getFolder())||void 0===c?void 0:c.id;i().send("click_on_add_label_button",{dwh:{folder_id:Number(d),from:"message_change_menu",letter_id:null==b?void 0:b.get("last"),mode:de().getType(),is_compact:de().getUiLayout().ponyMode}})}},k()))},ii=wc(894),ji=wc.n(ii),ki=wc(2590),li=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),mi=function(){return(mi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},ni=ji().capabilities["touch-support"],oi=function(a){return a.SUPPORT_POINTER_EVENTS?"pointerdown":"touchstart"},pi=function(a){function b(b){var c=a.call(this,b)||this;return c.reactComponent=!0,c.swipeableMounted=!1,c.touchEventsReady=!1,c.swipeWidthLessElWidth=!1,c.elWidth=0,c.currentPos=ki.SwipeTarget.CENTER,c.watchSwipe=ki.blockSpec.watchSwipe,c.onOutsideClick=ki.blockSpec.onOutsideClick,c.activateTouchEvents=ki.blockSpec.activateTouchEvents,c.onSwipe=ki.blockSpec.onSwipe,c.onPanStart=ki.blockSpec.onPanStart,c.onPan=ki.blockSpec.onPan,c.onPanEnd=ki.blockSpec.onPanEnd,c.swipe=ki.blockSpec.swipe,c.moveContainerX=ki.blockSpec.moveContainerX,c.setContainerPos=ki.blockSpec.setContainerPos,c.getSwipeWidth=ki.blockSpec.getSwipeWidth,c.watchOutsideClick=ki.blockSpec.watchOutsideClick,c.addInsideTarget=ki.blockSpec.addInsideTarget,c.swipeWidthLessElWidthFunc=ki.blockSpec.swipeWidthLessElWidthFunc,c.reset=ki.blockSpec.reset,c.render=ph,c.attrs=mi(mi({},c.props),c.state),c.swipeableRef=e().createRef(),c.swipeableContentRef=e().createRef(),c.swipeUnderlayRef=e().createRef(),c.swipeUnderlayRightRef=e().createRef(),c.timeouts={},c}return li(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.swipeableRef.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){var a=this;if(this.swipeableMounted=!0,this._insiders=[],this._pos={x:0,y:0},this.addInsideTarget(this.el),ni)(0,Zc.lazyHammerJS)().then((0,Zc.uniqCallback)(this,function(b){if(a.swipeableMounted&&!p.DISABLE_LETTER_SWIPE)a.Hammer=b,a.handleTouchStart=function(){a.activateTouchEvents()},a.el.addEventListener(oi(b),a.handleTouchStart,!0)}))},b.prototype.componentDidUpdate=function(a,b){var c=this,d=mi(mi({},this.props),this.state);this.attrs=d;var e=mi(mi({},a),b);if(d.disabled!==e.disabled)this.touchEventsReady&&this.watchSwipe(!d.disabled);if(d.animated!==e.animated)if(clearTimeout(this.timeouts.animated),(0,Wc.CH)(this,{name:"animation-changed",details:{value:d.animated}}),d.animated)this.timeouts.animated=setTimeout(function(){return c.setState({animated:!1})},350);if(d.underlay!==e.underlay)(0,Wc.CH)(this,{name:"underlay-changed",details:{value:d.underlay}})},b.prototype.componentWillUnmount=function(){if(this.swipeableMounted=!1,ni&&this.Hammer&&this.el.removeEventListener(oi(this.Hammer),this.handleTouchStart,!0),Object.values(this.timeouts).forEach(function(a){window.clearTimeout(a)}),this.touchEventsReady)this.watchOutsideClick(!1),this.watchSwipe(!1),this._insiders=[]},b}(e().Component),qi=(0,Wc.v$)("swipeable",pi,{syncMediatorsOnRender:!1}),ri=function(){return(ri=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},si=new Gd.k("llct-t"),ti=function(a){var b=a.children,c=a.enabled,d=a.className;return c?e().createElement("div",{className:d},b):e().createElement(e().Fragment,null,b)};function ui(a){var b=a.model,c=a["pony-mode"];return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("unread"),className:si.elem("read-status",{react:!0})},e().createElement(bi,{state:b.is("flags.unread"),"is-forwarded":b.is("flags.forward"),"is-replied":b.is("flags.reply"),model:b,shift:c,remitEvents:{toggle:{prevent:!0,name:zf.unread}},remitDetails:{model:b},broadcastEvent:(0,Wc.Yv)(this)})),e().createElement("div",{"data-qa-id":(0,wa.qa)("avatar"),className:si.elem("avatar",{unread:b.is("flags.unread")})},e().createElement(zh,{state:a.selected,imgUrl:this.getImageSrc(),darkMode:this.props.darkMode,verified:a.isReliable,official:a.isOfficial,isTouch:!0,size:c?"common":"compact",remitEvents:{toggle:{prevent:!0,name:zf.clickAvatar}},broadcastEvent:(0,Wc.Yv)(this)})))}function vi(a,b,c){var d=p.ENABLE_TAGS&&!this.getCounter();return e().createElement("div",{className:si.elem("underlay-actions")},d&&p.ENABLE_ADD_TAGS_TOUCH&&e().createElement("div",{className:si.elem("tags")},e().createElement(hi,{model:c,tags:c.get("flags.tags"),rightSideDropdown:!0,compact:a&&!b,readonly:!d,active:!0})),e().createElement(lh,{model:c,common:!this.compact}))}function wi(a){return e().createElement("div",{className:si.elem("underlay-actions-right")},e().createElement(rh,{model:a,onFastAction:function(){return(0,xg.callFastAction)(a)},common:!this.compact}))}function xi(a){var b,c,d,f,g=a.model,h=a["pony-mode"],i=this.getSubject(),j=this.getGoToActionDisplayMode(),k="none"===j?this.getPaymentDieDisplayMode():"none",l=this.getUnsubscribeSender(),m="none"===j&&this.shouldShowUniversalPaymentDie(),n=(0,Yc.isListLetterActionButtonsEnabled)(g,a.search),o="full"===k?a["payment-die-with-indent"]:"",q=!!(null===(f=null==g?void 0:g.isSchedule)||void 0===f?void 0:f.call(g)),r=g.getFolder(),s=q?(0,qg.scheduleDate)(g.get("send_date")):r.get("name"),t=g.is("flags.attach"),u=g.is("flags.flagged"),v=p.ENABLE_TAGS&&!this.getCounter(),w=p.ENABLE_TAGS&&g.is("flags.tags")&&!!g.get("flags.tags").length,x=w&&!a.showfolder,y=l&&!m&&"none"===k,z=!("none"!==j||w&&!a.search||m||(a.search||y)&&h),A=h||n||w||p.ENABLE_TAGS,B=this.getCategory(),C=this.isImportant(),D=this.hasBadge()&&e().createElement("div",{"data-qa-id":(0,wa.qa)("letter:badge"),className:si.elem("badge")},e().createElement(bb.Z,{counter:this.getCounter(),compact:!0,unread:g.is("flags.unread"),component:Dg()})),E=this.getSnippetValue();return e().createElement("div",{className:si.elem("content",{unread:g.is("flags.unread"),react:!0})},e().createElement("div",{className:si.elem("row",{top:!0})},e().createElement("div",{className:si.elem("correspondent",{new:!0})},e().createElement(Fh,{"qa-id":(0,wa.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),e().createElement("div",{className:si.elem("secondary-data")},!!B&&e().createElement("div",{className:si.elem("panel-item",{category:!0})},e().createElement(bb.Z,{flat:!0,short:!0,name:B,size:"m",component:od()})),q&&e().createElement("div",{className:si.elem("panel-item")},e().createElement(bb.Z,{date:g.get("send_date"),component:Ng(),key:"list-letter-schedule-status"})),p.ENABLE_MENTIONS&&(g.is("flags.mention")||g.is("flags.mention_unread"))&&e().createElement("div",{className:si.elem("panel-item")},e().createElement(Xh,{unread:g.is("flags.mention_unread")})),t&&!a["disable-attach"]&&e().createElement("div",{className:si.elem("panel-item",{"attach-status":!0})},e().createElement(bb.Z,{component:Bg(),compact:!0,key:"list-letter-attach-status"})),e().createElement("div",{title:this.getDateTooltip(q),className:si.elem("date",{new:!0,react:!0})},(0,qg.letterDate)(g.get("date"),q)),e().createElement("div",{className:si.elem("flag",{new:!0,react:!0,nonActive:!u&&!C})},e().createElement(Lh,{hideInactive:!0,priority:a.priority,important:C,state:u,remitEvents:{toggle:{prevent:!0,name:zf.flagged}},remitDetails:{model:g},broadcastEvent:(0,Wc.Yv)(this)})))),e().createElement("div",{className:si.elem("row",{middle:!0,search:a.search,columns:A}),ref:this.contentRowRef},!A&&D,e().createElement(ti,{enabled:A,className:si.elem("main-content")},!a["disable-subject"]&&e().createElement("div",{"data-qa-id":(0,wa.qa)("subject"),title:this.getSubjectTooltip(),className:si.elem("subject")},e().createElement(bb.Z,{key:i,inlineRoot:!0,subject:i,color:a.search?g.meta("search_subject.color"):null,search:a.search,component:Rg()})),z&&e().createElement("div",{"data-qa-id":(0,wa.qa)("snippet"),className:si.elem("snippet",(b={search:a.search,overflow:y},b["hide-on-hover"]=v&&!a.search,b))},e().createElement(bb.Z,{key:E,inlineRoot:!0,value:E,color:a.search?g.meta("search_snippet.color"):null,search:a.search,component:Pg()})),e().createElement("div",{className:si.elem("content-buttons")},m&&e().createElement(bb.Z,{className:si.elem("content-button-wrapper"),fluid:!0,model:a.model,"layout-type":a["layout-mode"],"pony-mode":h,component:Lg(),"pud-fluid":!0}),"none"!==j&&e().createElement(Uh,{model:g,meta:this.goToActionMetadata,layoutMode:"3pane",mode:j}),y&&e().createElement(bb.Z,{className:si.elem("content-button-wrapper"),fluid:!0,"layout-mode":"3pane","pony-mode":h,unsubscribeSender:l,model:g,useMediators:["unsubscribe-actions","themes-manager"],component:Tg()}),x&&p.ENABLE_ADD_TAGS_TOUCH&&e().createElement("div",{className:si.elem("tags")},e().createElement(hi,{model:g,tags:g.get("flags.tags"),rightSideDropdown:!0,compact:h&&!a.search,readonly:!v})))),A&&D),k&&"none"!==k&&e().createElement("div",{className:si.elem("payment-die-container",{noindent:!1===o,"pony-mode":h,compact:"compact"===k,metathread:a["in-metathread"]})},"compact"===k&&e().createElement(bb.Z,{model:a.model,standalone:!0,"layout-mode":"3pane","pony-mode":h,component:Hg()}),"full"===k&&e().createElement(bb.Z,{model:a.model,"layout-mode":"3pane","icon-container-mode":!1===o?"wide":"narrow",component:Jg()})),a.showfolder&&!w&&e().createElement("div",{className:si.elem("folder",(c={},c["hide-on-hover"]=v&&!w,c))},e().createElement(bb.Z,{title:s,text:r.get("name"),"data-qa-id":(0,wa.qa)("folder"),component:Fg()})),a.showfolder&&e().createElement("div",{className:si.elem("folder-tags",(d={hidden:!w},d["show-on-hover"]=v&&!w,d))},e().createElement(hi,{model:g,tags:g.get("flags.tags"),folder:r.get("name"),rightSideDropdown:!0})))}function yi(){var a=ri(ri({},this.props),this.state),b=(0,s.getFastActionCurrent)(),c=a.model,d=a.indent,f=a["pony-mode"],g=this.getGoToActionDisplayMode(),h="none"===g?this.getPaymentDieDisplayMode():"none",i=this.getUnsubscribeSender(),j="none"===g&&this.shouldShowUniversalPaymentDie(),k=(0,Yc.isListLetterActionButtonsEnabled)(c,a.search),l="full"!==g&&(f||!j&&!(i&&!j&&"none"===h)&&k);return e().createElement("a",{style:a.style,"data-qa-id":(0,wa.qa)(this.rootQaId()),"data-qa-safe":(0,wa.qa)(String(a.isReliable)),"data-qa-official":(0,wa.qa)(String(a.isOfficial)),"data-qa-index":(0,wa.qa)(c.meta("_ui-index")),onClick:(0,Wc.CH)(this,"click"),onDragStart:(0,Wc.CH)(this,{prevent:!0,name:"unused"}),onContextMenu:(0,Wc.CH)(this,"contextmenu"),className:si.root({"enable-user-select":a["enable-user-select"],"pony-mode":f,"has-indent":d,active:a.selected||a.active,selected:a.selected,open:a.active,first:a.first,last:a.last,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected,new:!0,"new-selection":!0,reliable:a.isImportantReliable,official:a.isOfficialGreen,"small-snippet":l},{addClass:["js-letter-list-item"]}),href:a.href,tabIndex:-1,"data-id":c.get("id"),"data-draggable-id":c.get("id"),"data-uidl-id":c.get("last")},e().createElement("div",{className:si.elem("background",{active:a.selected||a.active,react:!0})}),e().createElement(qi,{swipeUnderlay:this.swipeUnderlay(a["pony-mode"],a.search,a.model),swipeUnderlayRight:this.swipeUnderlayRight(a.model),swipeContent:this.content(a),swipeHeader:this.header(a),canFullSwipe:b!==t.LetterFastActionType.unread,"max-offset":String(470),maxOffsetPartLeft:110,onRightAction:function(){return(0,xg.callFastAction)(a.model)},useMediators:["swipe-manager"]}),!a.hideDelimeter&&e().createElement(bb.Z,{compact:!0,full:a["full-delimiter"],ponymode:f,indent:a.indent,indentRight:!0,component:zg()}),e().createElement(bb.Z,{last:!0,compact:!0,ponymode:f,indent:a.indent,indentRight:!0,component:zg()}))}var zi=wc(8853),Ai=wc.n(zi),Bi=wc(9896),Ci=wc.n(Bi),Di=wc(1433),Ei=wc.n(Di),Fi=wc(5013),Gi=wc.n(Fi),Hi=wc(142),Ii="_37J-vCOZWtwN-4gYmCSm54",Ji="_24rgKrnXmhmqEzAGVG0a-D",Ki="_3FbQ1z6Mr3ycTGwulQfcaI",Li="_1jRagkd_B1UWNQ-Kp_4oIJ",Mi={approve:i18n("Одобрить"),block:i18n("Заблокировать")},Ni=function(a){var b,c=a.broadcastEvent,d=a.model,f=a.ponyMode,g=a.compact,h=e().useCallback(function(a){a.preventDefault(),c((0,Hi.BU)("move",{id:p.PARENTAL_CONTROL_APPROVE_FOLDER_ID,model:d},a)),i().send("ll_btn_approve")},[c,d]),j=e().useCallback(function(a){a.preventDefault(),c((0,Hi.BU)("move",{id:p.PARENTAL_CONTROL_DENY_FOLDER_ID,model:d},a)),i().send("ll_btn_block")},[c,d]),k=ca()(Ii,((b={})[Ki]=!!g,b[Ji]=!!f,b));return e().createElement("div",{className:k,"data-test-id":"ll-actions-wrap"},e().createElement(C.Z,null,function(a){var b=a.ConfigProvider,c=a.Button;return e().createElement(b,null,e().createElement(c,{size:"s",onClick:h,mode:"tertiary",className:Li,"data-test-id":"ll-action-approve"},Mi.approve),e().createElement(c,{size:"s",onClick:j,mode:"tertiary","data-test-id":"ll-action-block"},Mi.block))}))},Oi=new Gd.k("llc-t");function Pi(a){var b=a.model,c=a["pony-mode"];return e().createElement(e().Fragment,null,e().createElement("div",{"data-qa-id":(0,wa.qa)("unread"),className:Oi.elem("read-status",{"pony-mode":c,small:!0,react:!0})},e().createElement(bi,{state:b.is("flags.unread"),"is-forwarded":b.is("flags.forward"),"is-replied":b.is("flags.reply"),model:b,remitEvents:{toggle:{prevent:!0,name:zf.unread}},remitDetails:{model:b},broadcastEvent:(0,Wc.Yv)(this)})),e().createElement("div",{"data-qa-id":(0,wa.qa)("avatar"),className:Oi.elem("avatar",{"pony-mode":c,unread:b.is("flags.unread")})},e().createElement(zh,{state:a.selected,disabledHover:a["disable-avatar-hover"],disabled:a["disable-select"],centered:!0,isTouch:!0,imgUrl:this.getImageSrc(),verified:a.isReliable,official:a.isOfficial,darkMode:a.darkMode,size:"common",remitEvents:{toggle:{prevent:!0,name:zf.clickAvatar}},broadcastEvent:(0,Wc.Yv)(this)})))}function Qi(a){var b,c,d,f,g,h,i=a.model,j=this.getSubject(),k=this.getSnippetValue(),l=this.getGoToActionDisplayMode(),m="none"===l?this.getPaymentDieDisplayMode():"none",n=a["pony-mode"],o=this.getTransactionMetadata(),q="none"===l&&this.showOrder(a.model,o),r=this.getUnsubscribeSender(),s="none"===l&&this.shouldShowUniversalPaymentDie(),t=(0,Yc.isListLetterActionButtonsEnabled)(i,a.search),u=p.ENABLE_TAGS&&!this.getCounter(),v=p.ENABLE_TAGS&&i.is("flags.tags")&&!!i.get("flags.tags").length,w=!!(null===(c=null==i?void 0:i.isSchedule)||void 0===c?void 0:c.call(i)),x=this.letterDate(i.get("date"),w),y=i.getFolder(),z=this.getSearchAttaches(),A=this.getAllAttaches(),B=this.getAttachesModes(!1,A,z),C=null===(d=this.getAttaches(B,A,z))||void 0===d?void 0:d.attachesList,D=null===(f=this.getAttaches(B,A,z))||void 0===f?void 0:f.moreAttachesList,E=this.state.messagesAttaches,F=a["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===l,G=this.getAttachesModes(!1,E),H=this.getAttaches(G,E),I=this.getCategory();return e().createElement("div",{className:Oi.elem("main-content")},e().createElement("div",{className:Oi.elem("container",{react:!0})},e().createElement("div",{className:Oi.elem("content",{"pony-mode":n,react:!0})},e().createElement("div",{className:Oi.elem("item",{correspondent:!0,unread:i.is("flags.unread")})},e().createElement(Fh,{"qa-id":(0,wa.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),e().createElement("div",{"data-qa-id":(0,wa.qa)("flagged"),className:Oi.elem("item",{flag:!0})},e().createElement(Lh,{priority:a.priority,important:this.isImportant(),state:i.is("flags.flagged"),remitEvents:{toggle:{prevent:!0,name:zf.flagged}},remitDetails:{model:i},broadcastEvent:(0,Wc.Yv)(this)})),this.hasBadge()&&e().createElement("div",{"data-qa-id":(0,wa.qa)("letter:badge"),className:Oi.elem("item",{badge:!0})},e().createElement(bb.Z,{counter:this.getCounter(),unread:i.is("flags.unread"),component:Dg()})),e().createElement("div",{ref:this.subjectRef,className:Oi.elem("item",{title:!0})},!a["disable-subject"]&&e().createElement("span",{className:Oi.elem("subject",{unread:i.is("flags.unread")})},e().createElement(bb.Z,{key:j,inlineRoot:!0,subject:j,color:a.search?i.meta("search_subject.color"):null,search:a.search,component:Rg()})),e().createElement("span",{"data-qa-id":(0,wa.qa)("snippet"),className:Oi.elem("snippet")},e().createElement(bb.Z,{key:k,inlineRoot:!0,value:k,color:a.search?i.meta("search_snippet.color"):null,search:a.search,component:Pg()})),e().createElement("div",null)),v&&p.ENABLE_ADD_TAGS_TOUCH&&e().createElement("div",{className:Oi.elem("item",{tags:!0})},e().createElement(hi,{model:i,tags:i.get("flags.tags"),folder:a.showfolder&&y.get("name"),readonly:!u})),"compact"===m&&e().createElement("div",{className:Oi.elem("item")},e().createElement(bb.Z,{model:a.model,standalone:!0,"layout-mode":"2pane","pony-mode":a["pony-mode"],component:Hg()})),r&&e().createElement(bb.Z,{"layout-mode":"2pane","pony-mode":n,unsubscribeSender:r,model:i,useMediators:["unsubscribe-actions","themes-manager"],component:Tg()}),a.showfolder&&!v&&e().createElement("div",{className:Oi.elem("item",(b={folder:!0},b["hide-on-hover"]=u,b))},(null===(g=null==i?void 0:i.isSchedule)||void 0===g?void 0:g.call(i))?e().createElement(e().Fragment,null,e().createElement(bb.Z,{title:(0,qg.scheduleDate)(i.get("send_date")),text:y.get("name"),"data-qa-id":(0,wa.qa)("folder"),component:Fg()})):e().createElement(bb.Z,{title:y.get("name"),text:y.get("name"),"data-qa-id":(0,wa.qa)("folder"),component:Fg()})),e().createElement("div",{className:Oi.elem("secondary-data")},!!I&&e().createElement("div",{className:Oi.elem("item",{category:!0})},e().createElement(bb.Z,{flat:!0,short:!0,name:I,component:od()})),p.ENABLE_MENTIONS&&(i.is("flags.mention")||i.is("flags.mention_unread"))&&e().createElement("div",{className:Oi.elem("item",{mention:!0})},e().createElement(Xh,{unread:i.is("flags.mention_unread")})),!a["disable-attach"]&&i.is("flags.attach")&&e().createElement("div",{className:Oi.elem("item",{"attach-status":!0})},e().createElement(bb.Z,{component:Ai(),small:!0,model:a.model,useMediators:["attachments-manager","pony-mode"]})),!a.showfolder&&!!(null===(h=null==i?void 0:i.isSchedule)||void 0===h?void 0:h.call(i))&&e().createElement("div",{className:Oi.elem("item")},e().createElement(bb.Z,{date:i.get("send_date"),component:Ng()}))),e().createElement("div",{title:this.getDateTooltip(w),"data-qa-id":(0,wa.qa)("time:".concat(x)),className:Oi.elem("item",{date:!0})},x)),"full"===m&&e().createElement("div",{className:Oi.elem("payment-die-container")},e().createElement(bb.Z,{fluid:!0,model:a.model,"layout-mode":"2pane",component:Jg()})),C&&A&&e().createElement(bb.Z,{fluid:!0,model:a.model,"attaches-list":C,"more-attaches-list":D,"layout-mode":"2pane","all-count":A.length,vertical:B.vertical,"pony-mode":n,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,Wc.Yv)(this),component:Ei()}),F&&e().createElement(e().Fragment,null,E?e().createElement(bb.Z,{fluid:!0,key:"list-letter-preview-attaches",component:Ei(),model:a.model,"attaches-list":H.attachesList,"more-attaches-list":H.moreAttachesList,"layout-mode":"2pane","all-count":E.length,vertical:G.vertical,"pony-mode":n,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,Wc.Yv)(this)}):e().createElement(e().Fragment,null,e().createElement(bb.Z,{fluid:!0,key:"list-letter-preview-stub",attachesCount:i.get("attachments_count"),isCompact:!1,"pony-mode":n,component:Gi()}))),o&&q&&e().createElement(bb.Z,{fluid:!0,component:Ci(),useMediators:["orders-manager"],metadata:o,"pony-mode":n}),s&&e().createElement(bb.Z,{fluid:!0,component:Lg(),model:a.model,"layout-type":a["layout-mode"],"pony-mode":n}),"none"!==l&&e().createElement(Uh,{model:i,meta:this.goToActionMetadata,layoutMode:"2pane",mode:l}),t&&e().createElement(Ni,{model:i,ponyMode:n,broadcastEvent:(0,Wc.Yv)(this)})))}function Ri(){var a=this.props,b=(0,s.getFastActionCurrent)(),c=a.model,d=a.model,f=a["pony-mode"];return e().createElement("a",{style:a.style,"data-qa-id":(0,wa.qa)(this.rootQaId()),"data-qa-index":(0,wa.qa)(d.meta("_ui-index")),"data-qa-safe":(0,wa.qa)(String(a.isReliable)),"data-qa-official":(0,wa.qa)(String(a.isOfficial)),className:Oi.root({"enable-user-select":a["enable-user-select"],"pony-mode":f,"has-indent":a.indent,normal:!a.indent,active:a.selected,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected,first:a.first,last:a.last,new:!0,"new-selection":!0,reliable:a.isImportantReliable,official:a.isOfficialGreen},{addClass:["js-letter-list-item","js-tooltip-direction_letter-bottom"]}),onDragStart:(0,Wc.CH)(this,{name:"unused",prevent:!0}),onClick:(0,Wc.CH)(this,"click"),onContextMenu:(0,Wc.CH)(this,"contextmenu"),href:a.href?a.href:null,tabIndex:-1,"data-id":c.get("id"),"data-draggable-id":c.get("id"),"data-uidl-id":c.get("last")},e().createElement("div",{className:Oi.elem("background",{active:a.selected,react:!0})}),e().createElement(qi,{swipeUnderlay:this.swipeUnderlay(a["pony-mode"],a.search,a.model),swipeUnderlayRight:this.swipeUnderlayRight(a.model),swipeContent:this.content(a),swipeHeader:this.header(a),"max-offset":String(470),canFullSwipe:b!==t.LetterFastActionType.unread,maxOffsetPartLeft:110,onRightAction:function(){return(0,xg.callFastAction)(a.model)},useMediators:["swipe-manager"]}),a.fromThread||!a.hideDelimeter&&e().createElement(bb.Z,{component:zg(),full:a["full-delimiter"],ponymode:f,indent:a.indent,indentRight:!0}),e().createElement(bb.Z,{component:zg(),ponymode:f,indent:a.indent,indentRight:!0,last:!0}))}var Si=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ti=function(){return(Ti=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Ui=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.subjectRef=e().createRef(),c.compact=!1,c.content=Qi,c.swipeUnderlay=vi,c.header=Pi,c.swipeUnderlayRight=wi,c.getSubject=ug.getSubject,c.getImageSrc=ug.getImageSrc,c.isProbablyPhishing=ug.isProbablyPhishing,c.isCorrespondentDangerous=ug.isCorrespondentDangerous,c.getCorrespondent=ug.getCorrespondent,c.getCorrespondentTooltip=ug.getCorrespondentTooltip,c.getDateTooltip=ug.getDateTooltip,c.getCounter=ug.getCounter,c.getCategory=ug.getCategory,c.getAllAttaches=sg.getAllAttaches,c.getSearchAttaches=sg.getSearchAttaches,c.getAttaches=rg.getAttaches,c.getAttachesModes=tg.getAttachesModes,c.isImportant=ug.isImportant,c.getSnippetValue=ug.getSnippetValue,c.getPaymentDieDisplayMode=vg.getPaymentDieDisplayMode,c.getGoToActionDisplayMode=og.getGoToActionDisplayMode,c.shouldShowUniversalPaymentDie=vg.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=vg.shouldHideTransactionCategory,c.showOrder=wg.showOrder,c.getTransactionMetadata=wg.getTransactionMetadata,c.rootQaId=ug.rootQaId,c.letterDate=qg.letterDate,c.getUnsubscribeSender=ug.getUnsubscribeSender,c.handleIntersectViewport=ug.handleIntersectViewport,c.attrs=Ti(Ti({},c.props),c.state),c.render=Ri,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return Si(b,a),b.prototype.componentDidUpdate=function(){var a;(0,pg.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,pg.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case zf.flagged:return void vc()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case zf.unread:return void vc()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case zf.clickAvatar:vc()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===vg.getPaymentDieDisplayMode.call(this)},b.defaultProps={"layout-mode":"2pane"},b}(e().Component),Vi=(0,Wc.v$)("list-letter-common-touch",Ui),Wi=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Xi=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.contentRowRef=e().createRef(),c.compact=!0,c.content=xi,c.header=ui,c.swipeUnderlay=vi,c.swipeUnderlayRight=wi,c.getSubject=ug.getSubject,c.getImageSrc=ug.getImageSrc,c.isProbablyPhishing=ug.isProbablyPhishing,c.isCorrespondentDangerous=ug.isCorrespondentDangerous,c.getCorrespondent=ug.getCorrespondent,c.getCorrespondentTooltip=ug.getCorrespondentTooltip,c.getDateTooltip=ug.getDateTooltip,c.getSubjectTooltip=ug.getSubjectTooltip,c.getSnippetValue=ug.getSnippetValue,c.getCounter=ug.getCounter,c.getCategory=ug.getCategory,c.getAttaches=rg.getAttaches,c.getAttachesModes=tg.getAttachesModes,c.isImportant=ug.isImportant,c.getGoToActionDisplayMode=og.getGoToActionDisplayMode,c.getPaymentDieDisplayMode=vg.getPaymentDieDisplayMode,c.shouldShowUniversalPaymentDie=vg.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=vg.shouldHideTransactionCategory,c.getUnsubscribeSender=ug.getUnsubscribeSender,c.handleIntersectViewport=ug.handleIntersectViewport,c.rootQaId=ug.rootQaId,c.letterDate=qg.letterDate,c.render=yi,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return Wi(b,a),b.prototype.componentDidUpdate=function(){var a;(0,pg.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,pg.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case zf.flagged:return void vc()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case zf.unread:return void vc()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case zf.clickAvatar:vc()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===vg.getPaymentDieDisplayMode.call(this)},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAvatarIndent=function(){if(this.props["pony-mode"])if(this.props.indent)return"left";else return"right";return!1},b.defaultProps={"layout-mode":"3pane"},b}(e().Component),Yi=(0,Wc.v$)("list-letter-compact-touch",Xi,{syncMediatorsOnRender:!1}),Zi=wc(3910),$i=wc(4821),_i=wc(34),aj=function(){return(aj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},bj=function(a,b,c){return"3pane"===c?b:a};function cj(a){return a.width+24<=4*this.props}var dj,ej,fj,gj=[{props:_i.columnSidebarM,conditions:cj},{props:_i.columnSidebarXl,conditions:cj},{props:1/0}],hj=wc(3898),ij=wc.n(hj),jj=wc(935),kj=wc.n(jj),lj=wc(2269),mj=function(a){return{wrapper:{position:"relative",padding:"18px 16px 16px",margin:"0px 16px 16px 0px"},wrapperShort:{width:"268px",height:"184px",boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.08)",borderRadius:"12px"},wrapperBackground:{backgroundColor:"var(--vkui--color_background_secondary, #3A3A3B)"},itemWrapper:{display:"flex"},itemWrapperDisabled:{opacity:"0.5"},infoWrapper:{display:"flex",flexDirection:"column",flex:"auto"},metathreadInfo:{marginTop:"14px",marginBottom:"9px"},loaderWrapper:{position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"calc(100% - 16px)"},social:{fill:"var(--vkui--octavius_color_icon_social)"},newsLetters:{fill:"var(--vkui--octavius_color_icon_mailings)"},toMyself:{fill:"var(--vkui--octavius_color_icon_to_myself)"},news:{fill:"var(--vkui--octavius_color_icon_news)"},official:{fill:"var(--vkui--octavius_color_icon_official)"},school:{fill:"var(--vkui--octavius_color_icon_school)"},games:{fill:"var(--vkui--octavius_color_icon_games)"},receipts:{fill:"var(--vkui--octavius_color_icon_receipts)"},headerWrapper:{display:"flex",justifyContent:"space-between",marginBottom:a.x05.value},folderWrapper:{display:"flex",alignItems:"flex-end"},iconWrapper:{display:"flex",alignSelf:"center",marginRight:"12px"},iconOff:{fill:"var(--vkui--color_icon_secondary, #A5A7AD)"}}},nj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oj=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},pj=function(a){function b(b,c){var d=a.call(this,b,c)||this;d.element=null,d.handleSubSettingChange=function(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var e=a.onChange(b[0]);if(e)d.setState({settingsInProgress:!0}),e.catch(function(){}).then(function(){d.setState({settingsInProgress:!1})})}};var e=b.metathreadSettings.state;return d.state={settingsInProgress:!1,metathreadState:e},d}return nj(b,a),b.prototype.setFolderInProgress=function(a,b){this.setState({settingsInProgress:b})},b.prototype.getMetathreadsData=function(){return[{type:"inbox",folderId:ij().INBOX},{type:"toMyself",folderId:ij().TOMYSELF},{type:"newsLetters",folderId:ij().NEWSLETTERS},{type:"social",folderId:ij().SOCIAL},{type:"news",folderId:ij().NEWS},{type:"official",folderId:ij().OFFICIAL},{type:"receipts",folderId:ij().RECEIPTS},{type:"school",folderId:ij().SCHOOL},{type:"games",folderId:ij().GAMES}]},b.prototype.onSettingsEdit=function(a,b){var c,d=this,e=this.props.onSettingsEdit;this.setState({settingsInProgress:!0}),e((c={},c[a]=b,c)).then(function(){i().send("tggl_metahread_sttng_".concat(a,"_").concat(b));var c=d.getMetathreadsData().find(function(b){return b.folderId===a}).type;if(i().send("metathread_select",{dwh:{category:a,name:c,state:b}}),b===kj().METATHREADS_STATES.OFF&&p.METATHREADS_FORCED_EXP){var e=d.getMetathreadsData().find(function(b){return b.folderId===a}).type,f=p.METATHREADS_FORCED_EXP.split("|")[0];i().send("metathreads-forced-exp-off",{dwh:{group:f,folder:e}})}if(b===kj().METATHREADS_STATES.ON&&p.METATHREADS_FORCED_EXP){e=d.getMetathreadsData().find(function(b){return b.folderId===a}).type,f=p.METATHREADS_FORCED_EXP.split("|")[0];i().send("metathreads-forced-exp-on",{dwh:{group:f,folder:e}})}}).finally(function(){return d.setState({settingsInProgress:!1,metathreadState:b})})},b.prototype.onMetathreadToggle=function(a,b){var c=a?kj().METATHREADS_STATES.ON:kj().METATHREADS_STATES.OFF;this.onSettingsEdit(b,c)},b.prototype.onHideMetathreadOnLetterList=function(a,b){var c=a?kj().METATHREADS_STATES.HIDDEN:kj().METATHREADS_STATES.ON;this.onSettingsEdit(b,c)},b.prototype.renderHideMetathreadOnLetterList=function(){var a=this,b=this.state.metathreadState,d=this.props.metathreadSettings.folderId,f=(0,lj.getMetathreadSettingsFromState)(b),g=f.isOn,h=f.isHiddenOnLetterList;return void 0!==b?e().createElement(e().Fragment,null,e().createElement(c.Margin,{desktopX:1,mobileX:1}),e().createElement(c.Checkbox,{label:e().createElement(c.Text,{mode:"small",secondary:!0,text:i18n("Показывать только в списке папок")}),checked:h,onChange:function(b){return a.onHideMetathreadOnLetterList(b,d)},testId:"metathread-hidden",disabled:!g})):null},b.prototype.renderSubSettings=function(){var a=this,b=this.props.metathreadSettings.subSettings,d=this.state.metathreadState,f=(0,lj.getMetathreadSettingsFromState)(d).isOn;if(!b||!b.length)return null;else return e().createElement(e().Fragment,null,b.filter(Boolean).map(function(b,g){return e().createElement(e().Fragment,null,e().createElement(c.Margin,{key:"margin_".concat(g),desktopX:1,mobileX:1}),e().createElement(c.Checkbox,{key:"input_".concat(g),label:e().createElement(c.Text,{mode:"small",secondary:!0,text:b.text}),checked:b.value,onChange:a.handleSubSettingChange(b),testId:b.testId,disabled:!f&&void 0!==d}))}))},b.prototype.render=function(){var a,b,d,f=this,g=this.props,h=g.metathreadSettings,i=h.type,j=h.title,k=h.folderId,l=h.text,m=h.icon,n=g.classes,o=g.layerMode,q=g.ponymode,r=g.darkMode,s=this.state,t=s.metathreadState,u=s.settingsInProgress,v=(0,lj.getMetathreadSettingsFromState)(t),w=v.isOn,x=v.isHiddenOnLetterList,y=k===ij().INBOX?!1:!w,z=ca()(((a={})[n.wrapper]=!0,a[n.wrapperShort]=!o,a[n.wrapperBackground]=r,a)),A=ca()(((b={})[n.itemWrapper]=!0,b[n.itemWrapperDisabled]=u,b)),B=ca()(((d={})[n.iconWrapper]=!0,d[n[i]]=!0,d[n.iconOff]=!p.ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM&&y,d));return e().createElement("div",{className:z,"data-test-id":"metathread-setting-".concat(i),"data-qa-state":"".concat(w?"on":"off",":").concat(x?"hidden":"shown")},e().createElement("div",{className:A},e().createElement("div",{className:n.infoWrapper},e().createElement("div",{className:n.headerWrapper},e().createElement("div",{className:n.folderWrapper},ta.yk[m]&&e().createElement(e().Fragment,null,e().createElement("div",{className:B},e().createElement(c.Icon,{icon:ta.yk[m],testId:"metathread-icon"}))),e().createElement(c.Text,{text:j,secondary:!p.ACCENT_DISABLED_METATHREAD_SETTINGS_ITEM&&y,bold:!0,testId:"metathread-title",mode:q?"small":"base"})),void 0!==t&&e().createElement(c.Switch,{compact:!0,checked:w,onChange:function(a){return f.onMetathreadToggle(a,k)},testId:"metathread-switch"})),l&&e().createElement("div",{className:n.metathreadInfo},e().createElement(c.Margin,{desktopX:.5,mobileX:.5}),e().createElement(c.Text,{text:l,mode:"small",secondary:!0,testId:"metathread-info"})),this.renderHideMetathreadOnLetterList(),this.renderSubSettings(),e().createElement(c.Margin,{mobileX:q?3:6,desktopX:q?3:6}))),u&&e().createElement("div",{className:n.loaderWrapper},e().createElement(c.Progress,{size:16,primary:!0,testId:"metathread-loader"})))},b=oj([(0,c.withStyles)(mj)],b)}(e().Component),qj=pj,rj=function(){return{wrapper:{position:"relative",margin:"0px 16px 16px 0px"},wrapperLoading:{display:"flex"},wrapperNotLoading:{cursor:"pointer"},wrapperShort:{width:"300px",height:"216px",boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.08)",borderRadius:"12px",overflow:"hidden"},wrapperEmpty:{width:"268px",padding:"18px 16px 0",height:"200px",overflow:"hidden","&:hover":{boxShadow:"0px 4px 24px rgba(18, 31, 52, 0.12)"}},wrapperBackground:{backgroundColor:"var(--vkui--color_background_secondary, #3A3A3B)"},infoWrapperNotEmpty:{"&:hover $divider":{borderBottomColor:"var(--vkui--color_background_modal)"}},infoWrapper:{display:"flex",flexDirection:"column",flex:"auto",height:"100%"},metathreadInfo:{marginTop:"4px"},titleWrapper:{display:"flex",justifyContent:"space-between",width:"100%",boxSizing:"border-box",color:"var(--vkui--color_text_primary, #333333)",fill:"var(--vkui--color_text_primary, #333333)","&:hover":{color:"inherit"}},titleWrapperNotEmpty:{padding:"16px",height:"100%",alignItems:"center","&:hover":{background:"var(--vkui--color_transparent--hover)"}},imgClass:{width:"100%",height:"100%",objectFit:"contain"},divider:{width:"calc(100% - 32px)",margin:"0 16px",borderBottom:"1px solid var(--vkui--color_separator_primary_alpha)"},loader:{margin:"auto"}}},sj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),tj=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},uj=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return sj(b,a),b.prototype.onFiltersClick=function(){i().send("metathreads_filters-shortcut_link_click")},b.prototype.onOpenFilterClick=function(){i().send("metathreads_filters-shortcut_add_click"),this.props.onCreateFilter()},b.prototype.render=function(){var a,b=this,d=this.props,f=d.classes,g=d.layerMode,h=d.ponymode,i=d.darkMode,j=d.filtersCount,k=d.filtersCountLoading,l=!j&&!k,m=ca()(((a={})[f.wrapper]=!0,a[f.wrapperShort]=!g,a[f.wrapperBackground]=i,a[f.wrapperEmpty]=l,a[f.wrapperLoading]=k,a[f.wrapperNotLoading]=!k,a)),n=ca()([f.titleWrapper,f.titleWrapperNotEmpty]),o=ca()([f.infoWrapper,f.infoWrapperNotEmpty]),r="".concat(p.PACKAGES_URL,"/static.promo/octavius/metathread/filters/net_with_letter_").concat(i?"dark":"light",".png");return e().createElement("div",{className:m,"data-test-id":"metathread-filters-all"},k?e().createElement("div",{className:f.loader},e().createElement(c.Progress,{secondary:!0})):l?e().createElement("div",{className:f.infoWrapper,onClick:function(){return b.onOpenFilterClick()},"data-test-id":(0,wa.qa)("metathread-filters-add")},e().createElement("div",{className:f.titleWrapper},e().createElement(c.Text,{text:i18n("Добавить фильтр"),bold:!0,testId:"metathread-add-title",mode:h?"small":"base"}),e().createElement(c.Icon,{icon:q.ACTIONS_ADD_BIG})),e().createElement("img",{src:r,className:f.imgClass})):e().createElement("div",{className:o},e().createElement("a",{href:p.FILTERS_URL,target:"_blank",className:n,onClick:this.onFiltersClick,rel:"noreferrer","data-test-id":(0,wa.qa)("metathread-filters-link")},e().createElement("div",null,e().createElement(c.Text,{text:i18n("Посмотреть все фильтры"),bold:!0,testId:"metathread-filters-title",mode:h?"small":"base"}),e().createElement("div",{className:f.metathreadInfo},e().createElement(c.Text,{text:i18n.plural(j,[i18n("{filtersCount} фильтров создано",{filtersCount:j}),i18n("{filtersCount} фильтр создан",{filtersCount:j}),i18n("{filtersCount} фильтра создано",{filtersCount:j})]),mode:"small",secondary:!0,testId:"metathread-filters-info"}))),e().createElement(c.Icon,{icon:q.NAVIGATION_ARROW_LIST_NEXT})),e().createElement("div",{className:f.divider}),e().createElement("div",{className:n,onClick:function(){return b.onOpenFilterClick()},"data-test-id":(0,wa.qa)("metathread-filters-add")},e().createElement(c.Text,{text:i18n("Добавить фильтр"),bold:!0,testId:"metathread-add-title",mode:h?"small":"base"}),e().createElement(c.Icon,{icon:q.ACTIONS_ADD_BIG}))))},b=tj([(0,c.withStyles)(rj)],b)}(e().Component),vj=uj,wj=c.TwoKitTheming.createUseStyles(function(){return{header:{paddingRight:38},metathreadsData:{display:"flex",flexDirection:"row",flexWrap:"wrap"},description:{maxWidth:600}}}),xj=function(a){var b=a.metathreadsData,f=a.onClose,g=a.onSettingsEdit,h=a.onHelpClick,i=a.onCreateFilter,j=a.updateFilters,k=a.filtersCount,l=a.filtersCountLoading,m=a.layer,n=a.ponymode,o=a.darkMode;(0,d.useEffect)(function(){if(p.ENABLE_METATHREAD_FILTERS_SHORTCUT)j()},[]);var q=wj(a),r=b.filter(function(a){return!a.isHidden});r.sort(function(a,b){return a.sortOrder-b.sortOrder});var s=function(){return e().createElement(e().Fragment,null,!m&&e().createElement(c.Margin,{desktopX:n?5:6.5,mobileX:n?5:6.5}),e().createElement(c.Text,{mode:n?"small":"base",text:i18n("Умная сортировка автоматически распределяет по папкам некоторые категории писем. Можно группировать рассылки, письма себе, уведомления от соцсетей, новости и другие категории."),testId:"metathreads-subtitle"}),m?e().createElement(e().Fragment,null," ",e().createElement(c.Link,{small:n,onClick:function(){return h()},testId:"metathreads-help-link"},i18n("Всё об умной сортировке"))):e().createElement(e().Fragment,null,e().createElement("br",null),e().createElement(c.Link,{small:n,onClick:function(){return h()},testId:"metathreads-help-link"},i18n("Всё об умной сортировке"))),e().createElement(c.Margin,{desktopX:n?3:5,mobileX:n?3:5}))},t=function(){return e().createElement(e().Fragment,null,r.map(function(a){return e().createElement(qj,{key:a.folderId,metathreadSettings:a,onSettingsEdit:g,layerMode:m,ponymode:n,darkMode:o})}))};return e().createElement(e().Fragment,null,m?e().createElement(c.Popup,{show:!0,width:"var(--vkui--size_popup_small--regular)",testId:"metathread-settings-popup"},e().createElement(c.Panel,{popup:!0,onClose:f,mobileCross:!0},e().createElement("div",null,e().createElement(e().Fragment,null,e().createElement(c.Text,{mode:"h1",bold:!0,text:i18n("Умная сортировка"),testId:"metathreads-title"}),e().createElement(c.Margin,{desktopX:n?3:5,mobileX:n?3:5})),s(),t()))):e().createElement("div",{className:q.header},e().createElement("div",{className:q.description},s()),e().createElement("div",{className:q.metathreadsData},t(),p.ENABLE_METATHREAD_FILTERS_SHORTCUT&&e().createElement(vj,{layerMode:m,ponymode:n,darkMode:o,onCreateFilter:i,filtersCount:k,filtersCountLoading:l}))))},yj=wc(769),zj=wc.n(yj),Aj=c.TwoKitTheming.createUseStyles(function(a){var b=a.sizeBasePadding,c=a.x12,d=a.sizeIllustrationL;return{layout:{display:"flex",flexDirection:"column",alignItems:"center",height:"100vh",padding:b.auto.value,boxSizing:"border-box"},content:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},image:{paddingLeft:c.value,paddingRight:c.value,boxSizing:"border-box",maxWidth:"100vw",maxHeight:d.auto.value}}}),Bj=function(a){var b=Aj(a),d=a.errorText,f=a.actionText,g=a.onActionClick;return e().createElement("div",{className:b.layout},e().createElement("div",{className:b.content},e().createElement("img",{className:b.image,src:"".concat(zj().urls.hbPackagesUrl,"/static/vk-mini-app/images/unknown-error.png"),srcSet:"".concat(zj().urls.hbPackagesUrl,"/static/vk-mini-app/images/unknown-error@2x.png 2x"),alt:""}),e().createElement(c.Space,null),e().createElement(c.Text,{mode:"h1",text:d})),e().createElement(c.Button,{primary:!0,fluid:!0,text:f,onClick:g}))},Cj=function(a){var b;return e().createElement(c.Icon,{icon:ta._i[null!==(b=null==a?void 0:a.emptyStateType)&&void 0!==b?b:sa.OX.EMPTY_FOLDER]})},Dj={title:i18n("Вы уверены, что хотите {br}отменить загрузку файла?",{"unsafe-br":"<br/>"}),textCompose:i18n("Загрузка файла отменится и вы не сможете отправить его по почте."),textDnd:i18n("Загрузка файла отменится и вы не сможете сохранить его в Облако."),button:i18n("Загрузить с Облаком"),closeButton:i18n("Отменить загрузку")},Ej=function(a){var b=(0,d.useState)(!0),f=b[0],g=b[1],h=function(){a.onClose(),g(!1)},i=function(){a.onSubmit(),g(!1)},j=(p.LAYER_IFRAME_PARAMS.cloud_tariff||{}).width,k=void 0===j?491:j,l=a.from,m=null;if("dnd"===l)m=Dj.textDnd;if("compose"===l)m=Dj.textCompose;return e().createElement(c.Popup,{show:f,onHide:h,width:"".concat(k,"px"),testId:"oversize-attach-cancel-popup",closeByEsc:!1},e().createElement(c.Panel,{popup:!0,onClose:h,header:e().createElement(c.Text,{mode:"h1"},e().createElement("span",{dangerouslySetInnerHTML:{__html:Dj.title}})),content:e().createElement(e().Fragment,null,e().createElement(c.Margin,{desktopX:1,mobileX:1}),e().createElement(c.Text,null,m)),controls:e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement(e().Fragment,null,e().createElement(b,{size:"l",onClick:i,"data-test-id":"submit-button"},Dj.button),e().createElement(c.Space,null),e().createElement(b,{size:"l",mode:"secondary",appearance:"neutral",onClick:h,"data-test-id":"close-button"},Dj.closeButton))})}))},Fj=function(a){var b=a.colorIconSecondary,c=a.colorBackgroundAccentAlternative;return{base:{display:"inline-block","& svg":{width:"16px",height:"16px",fill:b.normal.value}},disabled:{pointerEvents:"none"},container:{whiteSpace:"nowrap"},selected:{"& svg":{fill:c.normal.value}},ico:{cursor:"pointer","& svg":{width:20,height:20}}}},Gj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Hj=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Ij=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.onMouseDown=function(a){a.preventDefault()},b}return Gj(b,a),b.prototype.render=function(){var a=this.props,b=a.icon,d=a.text,f=a.classes,g=a.selected,h=a.onClick,i=a.disabled;return e().createElement("div",{className:ca()(f.base,g&&f.selected)},e().createElement(c.Tooltip,{placement:"top",overlay:e().createElement("div",{className:f.container},e().createElement(c.Text,null,d))},e().createElement("div",{className:ca()(f.ico,i&&f.disabled),onClick:h,onMouseDown:this.onMouseDown},e().createElement(c.Icon,{icon:b}))))},b=Hj([(0,c.withStyles)(Fj)],b)}(e().PureComponent),Jj=Ij,Kj=function(){return{base:{}}},Lj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Mj=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Nj=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Lj(b,a),b.prototype.render=function(){var a=this.props,b=a.selected,c=a.onClick,d=a.disabled;return e().createElement(Jj,{icon:q.STATUS_WARNING_ROUND,text:i18n("Важное"),selected:b,onClick:c,disabled:d})},b=Mj([(0,c.withStyles)(Kj)],b)}(e().PureComponent),Oj=Nj,Pj="_3Ryo8YfRYbW1DDQPAQGRzX",Qj="_3B87h5P5qaEzs4B-2LUf93",Rj="_1Sisr-tGB-UGZRVggYsBzB",Sj=function(){return(Sj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Tj=(0,Vb.isAdInfo)(p.PROMT_ABOUT_AD_RAW)?p.PROMT_ABOUT_AD_RAW:p.PROMT_ABOUT_AD_DEFAULT,Uj=function(a){var b,c=a.children;return e().createElement("div",{className:Pj},c,e().createElement("span",{className:Qj},"•"),e().createElement("div",{className:Rj},p.TRANSLATE_ABOUT_AD?i18n("реклама"):"реклама"),e().createElement(fc,{adDescription:Sj((b={},b[Vb.AdDescriptionKeys.Subject]=p.PROMT_LOGO_HREF,b),Tj),placement:"topRight",reservePlacement:"bottomRight"}))},Vj="_3md5s6vZdEy2J2jPt9bmli",Wj="_2S5z2vgnamhQiI_bV20p_p",Xj=function(){return(Xj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Yj=(0,Vb.isAdInfo)(p.PROMT_ABOUT_AD_RAW)?p.PROMT_ABOUT_AD_RAW:p.PROMT_ABOUT_AD_DEFAULT,Zj=function(a){var b,d=e().useRef(),f=e().useCallback(function(a){a.preventDefault()},[]),g=p.PROMT_LOGO_WITH_AD_DROPDOWN?"div":e().Fragment;return e().createElement(g,Xj({},p.PROMT_LOGO_WITH_AD_DROPDOWN&&"div"===g&&{ref:d,className:Vj}),e().createElement(c.Tooltip,{testId:"promt-tooltip",delayBeforeAnimation:2e3,arrow:!0,arrowMode:"soft",placement:p.PROMT_LOGO_WITH_AD_DROPDOWN?"topRight":"top",overlay:e().createElement("div",{className:"promt_tooltip_content"},i18n("Переведено с помощью"),e().createElement("div",{className:"icon"},e().createElement(c.Icon,{icon:q.STATIC_PROMT_WITH_LOGO}))),overlayContainer:document.querySelector('[data-container-id="tooltip-container"]'),paddingsMode:"none"},e().createElement("a",{href:p.PROMT_LOGO_HREF,target:"_blank",rel:"noreferrer",className:"tooltip_icon"},p.PROMT_LOGO_WITH_AD_DROPDOWN?e().createElement(e().Fragment,null,e().createElement("div",{className:Wj},e().createElement(c.Icon,{icon:q.STATIC_PROMT}),e().createElement("div",null,p.TRANSLATE_ABOUT_AD?i18n("реклама"):"реклама")),e().createElement(fc,{adDescription:Xj((b={},b[Vb.AdDescriptionKeys.Subject]=p.PROMT_LOGO_HREF,b),Yj),mode:"vertical",overlayContainer:d.current,onClick:f,placement:"bottomRight",reservePlacement:"topRight"})):e().createElement(c.Icon,{icon:q.STATIC_PROMT}))))},$j=function(){return{base:{"& svg":{width:"20px",height:"20px"}}}},_j=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ak=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},bk=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return _j(b,a),b.prototype.render=function(){var a=this.props,b=a.classes,c=a.selected,d=a.onClick,f=a.disabled;return e().createElement("div",{className:b.base},e().createElement(Jj,{icon:q.WYSIWYG_MAIL_READ,text:i18n("С уведомлением"),selected:c,onClick:d,disabled:f}))},b=ak([(0,c.withStyles)($j)],b)}(e().PureComponent),ck=bk,dk=function(a){var b=a.colorIconSecondary,c=a.colorBackgroundAccentAlternative,d=a.colorBackgroundSecondary,e=a.colorTextPrimary;return{base:{display:"inline-block","& svg":{width:"20px",height:"20px",fill:b.normal.value}},container:{padding:"4px",whiteSpace:"nowrap",display:"flex",flexDirection:"column",alignItems:"center"},selected:{"& svg":{fill:c.normal.value}},ico:{cursor:"pointer"},disabled:{pointerEvents:"none"},items:{paddingTop:"4px"},item:{"&:hover":{backgroundColor:d.hover.value},"& a":{color:e.normal.value},"& a:hover":{color:e.normal.value},cursor:"pointer",borderRadius:"2px",padding:"2px 10px",display:"inline-block"},itemSelecteded:{backgroundColor:d.active.value,fontWeight:"bold","& a":{textDecoration:"none"},"&:hover":{backgroundColor:d.active.value}}}},ek=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fk=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},gk=function(a){return i18n.plural(a,[i18n("{count} часов",{count:a}),i18n("{count} час",{count:a}),i18n("{count} часа",{count:a})])},hk=function(a){return i18n.plural(a,[i18n("{count} дней",{count:a}),i18n("{count} день",{count:a}),i18n("{count} дня",{count:a})])},ik=[{time:3600,label:gk(1)},{time:7200,label:gk(2)},{time:86400,label:hk(1)},{time:172800,label:hk(2)},{time:432e3,label:hk(5)}],jk=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.onMouseDown=function(a){a.preventDefault()},b}return ek(b,a),b.prototype.getOptions=function(){var a=this,b=this.props,d=b.selected,f=b.timeSelected,g=b.classes,h=b.onChange;return ik.map(function(b,i){return e().createElement("div",{key:i,className:ca()(g.item,d&&f===b.time?g.itemSelecteded:""),onClick:h&&h.bind(a,b.time)},e().createElement(c.Link,{secondary:!0},b.label))})},b.prototype.render=function(){var a=this.props,b=a.classes,d=a.selected,f=a.onClick,g=a.disabled;return e().createElement("div",{className:ca()(b.base,d&&b.selected)},e().createElement(c.Tooltip,{delay:2e3,placement:"topRight",overlay:e().createElement("div",{className:b.container},e().createElement("div",null,e().createElement(c.Text,null,i18n("Напомнить, если нет ответа через"))),e().createElement("div",{className:b.items},this.getOptions()))},e().createElement("div",{className:ca()(b.ico,g&&b.disabled),onClick:f&&f.bind(this,ik[0].time),onMouseDown:this.onMouseDown},e().createElement(c.Icon,{icon:q.NAVIGATION_NOTIFICATION}))))},b=fk([(0,c.withStyles)(dk)],b)}(e().PureComponent),kk=c.TwoKitTheming.createUseStyles(function(a){var b=a.x1,c=a.colorTextSecondary,d=a.colorTextPrimary;return{base:{color:c.normal.value,wordBreak:"break-all","&:hover":{color:d.normal.value}},dropdown:{},dropdownRow:{"&:not(:last-child)":{paddingBottom:b.value}},noWrap:{whiteSpace:"nowrap"}}}),lk=function(a){return a.map(function(a){var b=a.name,c=a.email;return b?"".concat(c," (").concat(b,")"):c}).join(", ")},mk=function(a){var b=a.resendFrom,f=a.resendTo,g=a.resendDate,h=a.receivedDate,j=a.qaEnabled,k=(0,d.useState)(!1),l=k[0],m=k[1],n=kk(a),o=lk(f),p=lk(b),q=(0,d.useCallback)(function(a){return j?a:void 0},[j]);(0,d.useEffect)(function(){i().send("resend_show")},[]);var r=(0,d.useCallback)(function(a){if(a)i().send("resend_open");else if(l)i().send("resend_close");if(a&&o.length>875)i().send("resend_overflow");m(a)},[o.length,p.length,l]),s=e().createElement("div",{className:n.dropdown,"data-test-id":q("resend-overlay")},e().createElement("div",{className:n.dropdownRow},e().createElement(c.Text,{secondary:!0},i18n("Переадресовано для:"))," ",e().createElement(c.Text,{testId:q("resend-to")},o)),e().createElement("div",{className:n.dropdownRow},e().createElement(c.Text,{secondary:!0},i18n("Переадресовано от:"))," ",e().createElement(c.Text,{testId:q("resend-from")},p)),g&&e().createElement("div",{className:ca()(n.dropdownRow,n.noWrap)},e().createElement(c.Text,{secondary:!0},i18n("Письмо получено:"))," ",e().createElement(c.Text,{testId:q("resend-date")},g)),e().createElement("div",{className:ca()(n.dropdownRow,n.noWrap)},e().createElement(c.Text,{secondary:!0},i18n("Перенаправлено вам:"))," ",e().createElement(c.Text,{testId:q("received-date")},h)));return e().createElement(c.Dropdown,{placement:"bottomLeft",overlay:s,testId:q("resend-dropdown"),onChangeExpandState:r},e().createElement("div",{className:n.base,"data-test-id":q("resend-dropdown-title")},e().createElement(c.Text,null,i18n("Переадресовано от:"))," ",e().createElement(c.Text,{testId:q("resend-from")},p)))},nk=wc(4898),ok=wc.n(nk),pk=wc(8078),qk={sameDay:"[".concat(pk.TRANSLATE_STRINGS_TO_MOMENT.today,"]"),nextDay:"[".concat(pk.TRANSLATE_STRINGS_TO_MOMENT.tomorrow,"]"),lastDay:"[".concat(pk.TRANSLATE_STRINGS_TO_MOMENT.yesterday,"]"),nextWeek:"Do MMMM",lastWeek:"Do MMMM",sameElse:"DD.MM.YYYY"},rk=function(){var a={},b=i18n("в");for(var c in qk)a[c]="".concat(qk[c]," [").concat(b,"] HH:mm");return a}(),sk=function(a){var b=a.colorIconSecondary,c=a.colorBackgroundAccentAlternative;return{base:{position:"relative",display:"inline-block"},container:{whiteSpace:"nowrap"},disabled:{pointerEvents:"none"},ico:{cursor:"pointer","& > svg":{width:"20px",height:"20px",fill:b.normal.value}},selected:{"& > svg":{fill:c.normal.value}}}},tk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),uk=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},vk=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.onMouseDown=function(a){a.preventDefault()},b}return tk(b,a),b.prototype.getDateData=function(a,b){var c=[],d=String(a.getHours()),e=String(a.getMinutes()),f=new Date,g=0;if(a.toDateString()===f.toDateString())g=b.getHours();for(var h=g;h<24;h++)c.push({label:(h<10?"0":"")+String(h),value:String(h)});var i=[];for(h=0;h<60;h++)i.push({label:(h<10?"0":"")+String(h),value:String(h)});return{hoursList:c,hoursSelected:d,minutesList:i,minutesSelected:e}},b.prototype.onHourChange=function(a){var b=this.props.onChange;this._currentDate.setHours(+a),b&&b(this._currentDate)},b.prototype.onMinuteChange=function(a){var b=this.props.onChange;this._currentDate.setMinutes(+a),b&&b(this._currentDate)},b.prototype.render=function(){var a=this,b=this.props,d=b.selected,f=b.onClick,g=b.classes,h=b.onChange,i=b.date,j=b.disabled,k=b.datePickerPosition,l=ok()().endOf("hour").add(1).toDate(),m=ok()().add(2,"years").toDate();if(i<l)this._currentDate=l;else this._currentDate=i;var n=this.getDateData(this._currentDate,l),o=n.hoursList,r=n.hoursSelected,s=n.minutesList,t=n.minutesSelected;return e().createElement(c.Responsive,{mode:p.TOUCH_MODE?"auto":"desktopS"},e().createElement("div",{className:ca()(g.base,d&&g.selected)},e().createElement(c.Tooltip,{delay:2e3,placement:"topRight",overlay:e().createElement("div",{className:g.container},e().createElement(c.Text,null,"".concat(i18n("Отправить письмо")," ")),e().createElement(c.Dropdown,{placement:k,overlay:function(b){var d=b.closeOverlay;return e().createElement(c.DatePicker,{onChange:function(b){a.setState({date:b}),d(),a._currentDate=b,h&&h(b)},value:a._currentDate,min:l,max:m})}},e().createElement(c.Link,{inherit:!0},ok()(this._currentDate).calendar(null,qk))),e().createElement(c.Text,null," ".concat(i18n("в")," ")),e().createElement(c.Select,{link:!0,inline:!0,menuForceTop:!0,value:r,options:o,onChange:this.onHourChange.bind(this),menuMaxHeight:280}),e().createElement(c.Text,null,":"),e().createElement(c.Select,{inline:!0,link:!0,menuForceTop:!0,value:t,options:s,onChange:this.onMinuteChange.bind(this),menuMaxHeight:280}))},e().createElement("div",{className:ca()(g.ico,d&&g.selected,j&&g.disabled),onClick:function(){f&&f(a._currentDate)},onMouseDown:this.onMouseDown},e().createElement(c.Icon,{icon:q.STATUS_TIME})))))},b=uk([(0,c.withStyles)(sk)],b)}(e().PureComponent),wk=wc(5822),xk=wc(3054),yk=wc.n(xk),zk="_2RmxAnLvfdCONYhg4uASIf",Ak="_2PA5M7Vw6eLWI_Xh1G00HN",Bk="_2iFfScYRkHGPXQXvhEXbxg",Ck="pkNVAYT5C1iX5E_P-x9h",Dk="NJc1CT41GjaL5VUtO8oa3",Ek="qi2vTYbjfjF14skBLdynk",Fk="_3pugQ5TZxOSiRThKhkpekw",Gk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Hk=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={checked:b.props.currentLang,submitSeen:!1},b.saveBtnRef=e().createRef(),b.handleSaveBtnClick=function(){var a=b.props.currentLang,c=b.state.checked;if(a!==c)yk().user.save("lang",c).then(function(){i().send("settings_save_lang_".concat(c)),window.location.reload()}).catch(function(){i().send("settings_save_lang_error")})},b}return Gk(b,a),b.prototype.onRadioBtnClick=function(a){var b,c=this.props.onChangeLang,d=this.state,e=d.checked,f=d.submitSeen;if(a.key!==e){if(c)c(a.key);if(i().send("settings_change_lang_".concat(a.key)),!(f||(g=this.saveBtnRef.current,(null==g?void 0:g.getBoundingClientRect().top)<window.innerHeight)))null===(b=this.saveBtnRef.current)||void 0===b||b.scrollIntoView();var g;this.setState({checked:a.key,submitSeen:!0})}},b.prototype.getRadioButtons=function(a){var b=this,d=this.props,f=d.currentLang,g=d.ponymode,h=this.state.checked;return a.map(function(a){var d=a.index,i=a.key,j=a.label,k=a.src;return e().createElement("div",{key:d,className:Ak,onClick:b.onRadioBtnClick.bind(b,a)},e().createElement("div",{className:Ek},e().createElement(c.Radio,{name:"languageRadioBtn",defaultChecked:f===i,checked:h===i,testId:"checkbox-".concat(i)})),e().createElement("div",{className:Dk,style:{backgroundImage:'url("'.concat(k,'")')}}),e().createElement(c.Text,{mode:g?"small":"base"},j))})},b.prototype.render=function(){var a,b=this,d=this.props,f=d.popupMode,g=d.ponymode;return e().createElement("div",{className:ca()(zk,(a={},a[Fk]=g,a))},!f&&e().createElement(e().Fragment,null,e().createElement(c.Text,{mode:g?"small":"base"},i18n("Изменить язык")),e().createElement(c.Margin,{mobileX:g?3:5,desktopX:g?3:5})),e().createElement("div",{className:Bk},e().createElement("div",{className:Ck},this.getRadioButtons(wk.LANG_ARRAY.slice(0,5))),e().createElement("div",{className:Ck},this.getRadioButtons(wk.LANG_ARRAY.slice(5)))),!f&&e().createElement(e().Fragment,null,e().createElement(c.Margin,{mobile:20,desktop:20}),e().createElement("div",{ref:this.saveBtnRef},e().createElement(C.Z,null,function(a){var c=a.Button;return e().createElement(c,{"data-test-id":"submit",size:g?"s":"l",onClick:b.handleSaveBtnClick},i18n("Выбрать язык"))}))))},b}(e().PureComponent),Ik="UOE6ZRrdb74X1p7Gn_lk1",Jk="_2bMJjQJo5utYBohRBlhp_Y",Kk="_3QhY7rD751V5oaYRdM24Gl",Lk="_3wC60ea0eKog6ki9pgrN4B",Mk="_2GhbOPn2umkPNc35cdxPNC",Nk="_2s0cTl-Fcc_Vtw6Gqp1Ddz",Ok="_1Yi2RdCEMBz2NyVikkbFKG",Pk="_2dz7Z8pS3GOn5KR_9P5ufj",Qk="_1DujtHljY-JCgExJgtHQNV",Rk="_3A_T3g8ADdTEC0Pxn2BvpU",Sk=C.j.Button,Tk=i18n("Отписаться от{nbsp}рассылок",{"unsafe-nbsp":" "}),Uk=function(a){var b,d,f,g=a.ponyMode,h=a.showTitle,j=a.shortOpenedSidebar,k=a.mobile,n=(0,Rf.C)({name:"sidebar-unsubscribe-button",mediators:["mobile-sidebar-manager","vk-overlay"]}),o=(n[0],n[1]),p=e().useCallback(function(){o(new Event("mobilesidebar:close")),(0,l.pushModal)(m.ModalPages.cleanmaster),i().send("open-clenmaster-modal")},[o]);return e().createElement("div",{className:ca()(Ik,(b={},b[Jk]=j&&!g&&h,b))},e().createElement(c.Tooltip,{placement:"right",overlay:e().createElement("div",{className:Pk},e().createElement(c.Text,{mode:"small"},Tk)),onlyDesktop:!0},e().createElement(Sk,{onClick:p,mode:"tertiary",size:g?"s":"l",hasHover:!1,hasActive:!1,before:e().createElement("div",{className:ca()(Kk,(d={},d[Lk]=h&&!g&&!k,d[Nk]=h&&g&&!k,d[Ok]=k,d[Mk]=j&&!g&&h,d))},e().createElement(c.Icon,{icon:q.STATUS_BLOCK,upsidedown:!0})),stretched:!0,align:"left"},h&&e().createElement("div",{className:ca()(Qk,(f={},f[Rk]=j&&!g,f))},Tk))))},Vk=wc(6473),Wk=wc(242),Xk=wc(6201),Yk=wc.n(Xk),Zk=wc(3040),$k=wc.n(Zk),_k="_1D9hSrDIA9z3kWjTZSYaTB",al="c7lIeZjcScbF8teC-Ggf_",bl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cl=function(){return(cl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},dl=function(a){var b,c=null===(b=a.contacts)||void 0===b?void 0:b.length;return c&&i18n.plural(c,[i18n("{count} контактов",{count:c}),i18n("{count} контакт",{count:c}),i18n("{count} контакта",{count:c})])},el=function(a){return a?(0,Wk.checkTextValidity)(a).valid:!1},fl=function(a){function b(b){var c=a.call(this,b)||this;return c.suggests=new Vk.Suggests({jssdkMethodContactSuggest:Yk(),avatarMapper:function(a){return $k()({email:a.email,name:a.display_name,size:45})},labelSuggestIcon:q.NAVIGATION_USERS,limit:10,onStateChange:function(a){return c.setState(a)},mapLabelOptionToDescription:dl}),c.state=c.suggests.state,c.onSelect=c.onSelect.bind(c),c.onInputChange=c.onInputChange.bind(c),c.onDeselect=c.onDeselect.bind(c),c.onEmailSelect=c.onEmailSelect.bind(c),c.onPaste=c.onPaste.bind(c),c}return bl(b,a),b.prototype.componentDidMount=function(){i().send("l_redirect_form_show")},b.prototype.componentWillUnmount=function(){this.suggests.clearMemCache()},b.prototype.getAddresses=function(){return this.state.selected.map(function(a){return a.email})},b.prototype.getAddressesCount=function(){return this.suggests.state.selected.length},b.prototype.changeValidity=function(a,b){this.suggests.changeValidity(this.state.selected.find(function(b){return b.email===a}),b)},b.prototype.selectCorrespondentsFromString=function(a){var b=this;if(void 0===a)a=this.state.searchValue;(0,Wk.getCorrespondentsFromString)(a).forEach(function(a){var c=(0,Wk.checkTextValidity)(a.email),d=c.str,e=c.valid;b.suggests.selectEmail({email:d,isEmailValid:e,name:a.name||d})})},b.prototype.onInputChange=function(a){var b=(0,Wk.checkTextValidity)(a).valid,c=a;if(a.endsWith(" ")&&b)c="",this.selectCorrespondentsFromString(a),i().send("l_redirect_form_email-select");this.suggests.changeSearchValue(c),this.props.onChange()},b.prototype.onSelect=function(a){this.suggests.select(cl(cl({},a),{invalid:!el(a.email),contacts:a.contacts.map(function(a){return cl(cl({},a),{invalid:!el(a.email)})})})),this.props.onChange(),i().send("l_redirect_form_select")},b.prototype.onDeselect=function(a){this.suggests.deselect(a),this.props.onChange(),i().send("l_redirect_form_deselect")},b.prototype.onEmailSelect=function(a){if(0===this.suggests.state.options.length)this.selectCorrespondentsFromString(a),this.props.onChange(),i().send("l_redirect_form_email-select")},b.prototype.onPaste=function(a){a.preventDefault();var b=a.clipboardData.getData("text");this.selectCorrespondentsFromString(b),this.props.onChange(),i().send("l_redirect_form_paste")},b.prototype.render=function(){return e().createElement("div",{"data-test-id":"input-container",className:al},e().createElement("div",{className:_k},e().createElement(c.FormField,{label:i18n("Кому"),errorMessage:this.props.error,errorMessageTestId:this.props.errorId},e().createElement(c.Hr,{mobileVisible:!0,oversize:!1,mode:this.props.error?"error":"normal"}),e().createElement(c.ContactsAutoComplete,{selected:this.state.selected,options:this.state.options,value:this.state.searchValue,highlightWords:this.state.searchWords,autoFocus:this.props.autoFocus,onChange:this.onInputChange,onPaste:this.onPaste,onDelete:this.onDeselect,onEmailSelect:this.onEmailSelect,onSelect:this.onSelect,dropdownOverlayContainer:document.body,placeholder:0===this.state.selected.length?i18n("Начните вводить имя адресата"):"",testIds:{chipPrefix:"autocomplete-chip-",dropdown:"autocomplete-dropdown",dropdownItemPrefix:"autocomplete-dropdownItem-",input:"autocomplete-input"},hideDropdownOnSelect:!0,checkEmailValidityOnEnter:!1,focusOnInputAfterDelete:!1}),e().createElement(c.Hr,{mobileVisible:!0,oversize:!1,mode:this.props.error?"error":"normal"}))))},b}(e().PureComponent),gl="unsubscribe_action",hl="unsubscribe_read_action",il="unsubscribe_remove_action",jl=function(){return(jl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},kl=function(a){var b=a.x2,d=a.x4,e=a.x5,f=a.x12,g=a.fontFootnote,h=a.fontText;return{base:jl(jl({width:"328px",minWidth:"328px",margin:d.value},(0,c.getValuesStyles)(h.compact)),{whiteSpace:"normal"}),header:{display:"flex",flexDirection:"row",justifyContent:"space-between"},title:{display:"block",marginBottom:d.value},ico:{width:e.value,height:e.value,cursor:"pointer"},radio:{display:"block",margin:"0 ".concat(f.value," ").concat(d.value," 0"),"& > p":jl(jl({},(0,c.getValuesStyles)(g.compact)),{marginLeft:"26px"})},radioGroup:{paddingBottom:b.value},progressWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},progressText:{marginLeft:"7px"}}},ll=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ml=function(){return(ml=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},nl=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},ol=[{key:0,action:il,label:i18n("Отписаться и удалить все письма"),footNote:i18n("Это не затронет письма с особыми отметками, например, учётные записи или заказы"),buttonText:i18n("Отписаться и удалить"),checked:!0,testId:"unsub-delete"},{key:1,action:hl,label:i18n("Отписаться и отметить все письма прочитанными"),buttonText:i18n("Отписаться и пометить прочитанными"),testId:"unsub-read"},{key:2,action:gl,label:i18n("Отписаться от адресата"),buttonText:i18n("Отписаться"),testId:"unsub"}],pl=i18n("Отписываем от рассылки..."),ql=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.state={buttonText:ol[0].buttonText,currentAction:ol[0].action},b.onRadioBtnClick=function(a,c){if(c)b.setState({buttonText:a.buttonText,currentAction:a.action})},b.onSubmit=function(){b.setState({buttonText:pl},function(){return b.props.onButtonClick(b.state.currentAction)})},b.onClose=function(){b.props.onClose()},b}return ll(b,a),b.prototype.getRadioButton=function(a){var b=this,d=this.props,f=d.classes,g=d.inProgress,h=d.qaEnabled;return a.map(function(a){var d=a.key,i=a.label,j=a.footNote,k=a.checked,l=a.testId;return e().createElement("div",ml({key:d,className:f.radio},h?{"data-test-id":"unsubscribe-radio-".concat(l)}:{}),e().createElement(c.Radio,{label:i,defaultChecked:k,name:"unsubscribeRadioBtn",onChange:b.onRadioBtnClick.bind(b,a),disabled:g}),e().createElement(c.Text,{block:!0,secondary:!0},j))})},b.prototype.getButtonComponent=function(){var a=this,b=this.state.buttonText,c=this.props,d=c.inProgress,f=c.classes;return e().createElement(C.Z,null,function(c){var g=c.Button,h=c.Spinner;return e().createElement(g,{type:"submit",onClick:a.onSubmit,disabled:d,size:"l",mode:"secondary",appearance:"neutral"},d?e().createElement("div",{className:f.progressWrapper},e().createElement(h,{size:"small"}),e().createElement("div",{className:f.progressText},b)):b)})},b.prototype.getTitle=function(){var a=this.props.lettersCount;if(a)return i18n.plural(a,[i18n("У вас {lettersCount} писем от адресата",{lettersCount:a}),i18n("У вас {lettersCount} письмо от адресата",{lettersCount:a}),i18n("У вас {lettersCount} письма от адресата",{lettersCount:a})]);else return i18n("Больше не получать таких писем от")},b.prototype.getSenders=function(){var a=this.props.senderName;if(Array.isArray(a)){return Array.from(new Set(a)).map(function(a){return e().createElement(c.Text,{block:!0,bold:!0,key:a},a)})}return e().createElement(c.Text,{block:!0,bold:!0},a)},b.prototype.render=function(){var a=this.props,b=a.classes,d=a.qaEnabled;return e().createElement("div",{className:b.base},e().createElement("div",{className:b.header},e().createElement("div",{className:b.title},e().createElement(c.Text,{block:!0},this.getTitle()),this.getSenders()),e().createElement("div",ml({className:b.ico,onClick:this.onClose},d?{"data-test-id":"unsubscribe-close"}:{}),e().createElement(c.Icon,{icon:q.ACTIONS_CLOSE}))),e().createElement("div",{className:b.radioGroup},this.getRadioButton(ol)),e().createElement("span",ml({},d?{"data-test-id":"unsubscribe-submit"}:{}),this.getButtonComponent()))},b=nl([c.withResponsive,(0,c.withStyles)(kl)],b)}(e().PureComponent),rl=function(){var a=(0,d.useRef)(null),b=(0,d.useRef)(!1),c=(0,Rf.C)({name:"vk-messenger-provider",mediators:["layout-manager","themes-manager"]})[0];return(0,d.useEffect)(function(){if((d=c).hasOwnProperty("offset")&&d.hasOwnProperty("darkMode")){var d;if(!b.current)b.current=!0,Promise.resolve().then(wc.t.bind(wc,5246,23)).then(function(b){var d,e;a.current=b.vkMessengerLoader,null===(d=a.current)||void 0===d||d.setThemeMode(c.darkMode),null===(e=a.current)||void 0===e||e.setOffset(c.offset),a.current.restoreOnReload()})}},[c.darkMode,c.offset]),(0,d.useEffect)(function(){var b;null===(b=a.current)||void 0===b||b.setThemeMode(c.darkMode)},[c.darkMode]),(0,d.useEffect)(function(){var b;null===(b=a.current)||void 0===b||b.setOffset(c.offset)},[c.offset]),null},sl=wc(7511),tl=wc(8521),ul=wc(6366),vl="_2OcADvRuKwnEeGQk1gBfLL",wl="_6bPGl7j3_N65cKhVRUDtJ",xl=function(){return(xl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},yl=i18n("Что делать с письмом, когда вы проводите по нему слева направо?"),zl=function(a){var b=(0,s.getFastActionReal)(),c=(0,d.useState)(b===t.LetterFastActionType.settings?t.LetterFastActionType.unread:b),f=c[0],g=c[1],h=(0,ul.useModalRootContext)().updateModalHeight,i=(0,d.useMemo)(function(){return{img:x(f),imgHidpi:x(f,!0)}},[f]);(0,d.useEffect)(function(){w.forEach(function(a){return y(a)})},[]);var j=(0,d.useCallback)(function(a){g(a.currentTarget.value)},[]),k=(0,d.useCallback)(function(){(0,xg.setFastAction)(f),(0,l.popModal)()},[f]);return e().createElement(C.Z,null,function(b){var c=b.ModalPage,d=b.RadioGroup,g=b.Radio,l=b.Button,m=b.Group,n=b.Title,o=b.Text,p=b.Div,q=b.Spacing;return e().createElement(c,xl({},a),e().createElement("img",{src:i.img,srcSet:"".concat(i.imgHidpi," 2x"),className:vl,onLoad:h}),e().createElement(m,{className:wl},e().createElement(p,null,e().createElement(n,null,i18n("Выберите действие")),e().createElement(q,{size:12}),e().createElement(o,null,yl)),e().createElement(p,null,e().createElement(d,null,e().createElement(g,{checked:f===t.LetterFastActionType.archive,value:t.LetterFastActionType.archive,onChange:j},i18n("Отправлять в архив")),e().createElement(g,{checked:f===t.LetterFastActionType.unread,value:t.LetterFastActionType.unread,onChange:j},i18n("Отмечать прочитанным")),e().createElement(g,{checked:f===t.LetterFastActionType.remove,value:t.LetterFastActionType.remove,onChange:j},i18n("Удалять")))),e().createElement(p,null,e().createElement(l,{stretched:!0,size:"l",onClick:k},i18n("Сохранить")))))})},Al=wc(9559),Bl=wc.n(Al),Cl=wc(9604),Dl=wc.n(Cl),El=function(a,b,c){!function(a,b,c,e){var f=(0,d.useRef)(c);f.current=c,(0,d.useEffect)(function(){if(a&&a.addEventListener){var c=function(a){return f.current(a)};return a.addEventListener(b,c,e),function(){a.removeEventListener(b,c,e)}}},[b,a,e])}(window,"click",function(d){if(a){var e;if(!Array.isArray(a))e=[a];else e=a;if(e.every(function(a){return a.current&&!a.current.contains(d.target)})){if(c)d.stopPropagation(),d.stopImmediatePropagation(),d.preventDefault();b(d)}}},{capture:!0})},Fl=function(){var a=(0,d.useState)(void 0),b=a[0],c=a[1],e=(0,d.useRef)(),f=(0,d.useRef)(),g=(0,d.useCallback)(function(a){e.current=document.querySelector('[data-folder-link-id="'.concat(a.attributes.id,'"]')),c(a)},[]),h=(0,d.useCallback)(function(){c(void 0)},[]);return El(f,function(a){if(b)a.stopPropagation(),c(void 0)},!0),{actionsRef:f,letterRef:e,onPress:g,onActionsClick:h,popoverModel:b}},Gl="_2MKo-BN7iw_iLXBkXYtDNR",Hl=function(){return(Hl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Il=function(a){var b=(0,g.useGlobalStateSelector)(k.getCurrentAccount),c=Fl(),d=c.onPress,f=c.onActionsClick,h=c.popoverModel,i=c.letterRef,j=c.actionsRef;return e().createElement(C.Z,null,function(c){var g,k,l,m=c.ModalPage,n=c.Headline,o=c.Div,q=c.unstable_Popper;return e().createElement(m,Hl({},a,{header:e().createElement(B,{onClick:a.onClose})}),e().createElement(o,null,e().createElement(n,{weight:"1",className:Gl},null==b?void 0:b.email)),!!h&&e().createElement(q,{getRef:j,forcePortal:!0,targetRef:i,onClick:f},e().createElement(bb.Z,{component:Bl(),model:h})),!!a.data&&e().createElement(bb.Z,{component:Dl(),useMediator:["letters-actions","folders-actions","user-info","letters-loader","pony-mode","folders-navigation"],onFolderClick:a.onClose,active:null===(g=a.data)||void 0===g?void 0:g.folderActive,models:null===(k=a.data)||void 0===k?void 0:k.models,router:null===(l=a.data)||void 0===l?void 0:l.router,sidebar:!0,"with-clear":!0,"show-unsubscribe-button":p.SHOW_SIDEBAR_UNSUBSCRIBE_BUTTON_MOBILE,onPress:d,"without-press-context-menu":!0,touch:!0}))})},Jl=function(){return(Jl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Kl=function(a){var b=(0,Rf.C)({name:"mobile-folders-settings-modal",mediators:["folders-actions"]}),f=(b[0],b[1]),g=Fl(),h=g.onPress,i=g.onActionsClick,j=g.popoverModel,k=g.letterRef,l=g.actionsRef,m=(0,d.useCallback)(function(){f({type:"add",details:{model:{params:{isSidebar:!0}}}})},[]);return e().createElement(C.Z,null,function(b){var d=b.ModalPage,f=b.ModalPageHeader,g=b.PanelHeaderBack,n=b.PanelHeaderButton,o=b.unstable_Popper,r=b.Headline,s=b.Div;return e().createElement(d,Jl({},a,{header:e().createElement(f,{before:e().createElement(g,{onClick:a.onClose}),after:e().createElement(n,{onClick:m,primary:!0},p.IS_IOS?i18n("Добавить"):e().createElement(c.Icon,{icon:q.UNION_ADD_OUTLINE_28}))},i18n("Папки"))}),e().createElement(s,null,e().createElement(r,{level:"2",className:Gl},i18n("Коснитесь папки для редактирования"))),!!j&&e().createElement(o,{getRef:l,forcePortal:!0,targetRef:k,onClick:i},e().createElement(bb.Z,{component:Bl(),model:j})),!!a.data&&e().createElement(bb.Z,{component:Dl(),useMediator:["letters-actions","folders-actions","user-info","letters-loader","pony-mode","folders-navigation"],models:a.data.models,router:a.data.router,sidebar:!0,onPress:h,onFolderClick:h,"without-press-context-menu":!0,"counters-off":!0,touch:!0,"read-only":!0,"hide-add-folder":!0}))})},Ll=wc(1349),Ml=wc.n(Ll),Nl=wc(4707),Ol=wc.n(Nl),Pl="_2uqdjvSFv7cHce9SPj0I7-",Ql="_3WuqRCVixmmFEnJF0wGK5p",Rl="_13gG6nrNmY4lHT3E-EILBL",Sl="_33XbOvfjRmoSVb6Qt-DIuy",Tl="_2G6WBaqPBUMFji5qlaCPsX",Ul=function(){return(Ul=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Vl=C.j.ModalPage,Wl=C.j.Button,Xl=function(){},Yl=function(a){var b=a.text,c=a.qa;Bc().add({text:b,qa:c,duration:p.SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION,inline:!1})},Zl=function(a){var b=a.text,c=a.qa;Bc().error({text:b,qa:c,duration:p.SETTINGS_DOCK_CLEANMASTER_NOTIFY_DURATION,inline:!1})},$l=function(a){var b=a.onPopupShow,c=void 0===b?Xl:b,e=a.compact,f=void 0===e?!1:e,g=d.useRef();return d.useEffect(function(){window.require(["cleanmaster"],function(a){var b=a.default(g.current,{features:Ml(),septima:!1,app:!1,touch:!1,octavius:!0,headerMode:"hidden",isDockSettings:!0,compact:f,onModalVisibilityChange:function(a){c(a)}}),d={"@stat/radar":function(a){var b=a.name,c=a.params,d=a.dwh,e=void 0===d?{}:d;i().send(b,{i:c,v:1,dwh:Ul({},e)})},"@search/open":function(a){var b=a.from,c=a.onlyNewsletters;N()(Ol()(Ml().getAsString("searchUrl","/search"),{q_from:b,q_newsletters_exclude_transactions:c}))},"@notify/success":Yl,"@notify/info":Yl,"@notify/error":Zl};Object.keys(d).forEach(function(a){b.on(a,d[a])}),b.create()})},[]),d.createElement("div",{ref:g,className:Pl})},_l=function(a){var b;return d.createElement(Vl,Ul({},a,{hideCloseButton:!0}),d.createElement("div",{"data-test-id":"cleanmaster-modal",className:ca()(Ql,(b={},b[Sl]=a.mobile,b))},d.createElement("div",{className:Tl,"data-test-id":"cross"},d.createElement(c.Tooltip,{placement:"bottomRight",overlay:d.createElement(c.Text,{mode:"small"},i18n("Закрыть")),onlyDesktop:!0},d.createElement(Wl,{"data-test-id":"cross",mode:"tertiary",size:"l",before:d.createElement("div",{style:{display:"flex"}},d.createElement(c.Icon,{icon:q.ACTIONS_CLOSE_BIG})),onClick:a.onClose}))),d.createElement(c.Text,{mode:"h3",text:i18n("Отписаться от рассылок")}),d.createElement("div",{className:Rl},d.createElement($l,null))))},am=$l,bm=function(){return(bm=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},cm="_1CmMArJgps9vtBvocm1bc0",dm=C.j.SplitLayout,em=function(){var a=(0,g.useGlobalState)(sl.VKOverlayState)[0],b=a.snackbar,c=a.popout,d=function(){var a=(0,g.useGlobalState)(sl.VKOverlayState)[0],b=a.modalData,c=a.modalHistory,d=(0,g.useGlobalStateSelector)(tl.getModalActual),f=(0,Rf.C)({name:"vkui-overlay-modals",mediators:["layout-manager"]})[0].mobile,h=function(a){return{id:a,dynamicContentHeight:!0,onClose:l.popModalHistory,onClosed:function(){if(!c.includes(a))(0,l.popModalDataById)(a)},data:b[a]}};return e().createElement(C.Z,null,function(a){var b=a.ModalRoot;return e().createElement(b,{activeModal:d,onClose:l.popModal},e().createElement(aa,bm({},h(m.ModalPages.account))),e().createElement(zl,bm({},h(m.ModalPages.letterFastActionSettings))),e().createElement(Il,bm({},h(m.ModalPages.folders))),e().createElement(Kl,bm({},h(m.ModalPages.foldersSettings))),e().createElement(_l,bm({},h(m.ModalPages.cleanmaster),{size:"l",mobile:f})))})}();return e().createElement("div",{className:cm},e().createElement(dm,{popout:c,modal:d}),b)},fm="_3WUN2v5JZWC8qq7MjJWQ-x",gm="_2e15S0-qIlEqKmW5_oaQMa",hm="_29m8FeNwZx_V-0UfFmonv0",im="PGq1t3Gmk8fYUgOx5F9Kg",jm="_1fSw2zKY3t56fnlL27DS3s",km="_2ElecynG1ZCBLnwT74Nnah",lm="_3oF1BVpAI582FhP0zuL9OX",mm="_1nJssa_iP3RPmap2PwIlh6",nm=p.DEFAULT_AVATAR_SRC+"&width=52&height=52&email="+(null===(dj=o().get("initialUser"))||void 0===dj?void 0:dj.email)+"&name="+(null===(fj=null===(ej=o().get("initialUser"))||void 0===ej?void 0:ej.name)||void 0===fj?void 0:fj.first),om=function(a){var b=a.folderActive,f=a.models,g=a.router,h=(0,Rf.C)({name:"webview-mobile-footer",mediators:["compose-manager","mobile-sidebar-manager"]}),j=(h[0],h[1]);(0,d.useEffect)(function(){(0,l.updateModalData)({ids:[m.ModalPages.account,m.ModalPages.folders,m.ModalPages.foldersSettings],data:{folderActive:b,models:f,router:g}})},[b,f,g]);var k=(0,d.useCallback)(function(){(0,l.pushModal)({id:m.ModalPages.account,data:{folderActive:b,models:f,router:g}}),i().send("mobile-account-dock_open")},[b,f,g]),n=(0,d.useCallback)(function(){if(p.USE_NEW_MOBILE_FOLDERS_MODAL)(0,l.pushModal)({id:m.ModalPages.folders,data:{folderActive:b,models:f,router:g}});else j(new Event("mobilesidebar:open"))},[j,b,f,g]),o=(0,d.useCallback)(function(){j(new Event("compose:new"))},[j]);return(0,d.useEffect)(function(){return document.documentElement.style.setProperty("--vkui--octavius_size_portal-footer_height--regular","48px"),function(){return document.documentElement.style.setProperty("--vkui--octavius_size_portal-footer_height--regular","0px")}},[]),e().createElement("div",{className:fm,"data-qa-id":(0,wa.qa)("webview-mobile-footer")},e().createElement("div",{className:gm},e().createElement("div",{className:hm,"data-qa-id":(0,wa.qa)("open-sidebar"),onClick:n},e().createElement("div",{className:jm},e().createElement(c.Icon,{icon:q.NAVIGATION_MENU})),e().createElement("span",{className:im},i18n("Папка"))),e().createElement("div",{className:lm,"data-qa-id":(0,wa.qa)("open-compose"),onClick:o},e().createElement("div",{className:mm},e().createElement(c.Icon,{icon:q.UNION_ADD_24}))),e().createElement("div",{className:hm,"data-qa-id":(0,wa.qa)("open-account"),onClick:k},e().createElement("img",{alt:"avatar",src:nm,className:km}),e().createElement("span",{className:im},i18n("Аккаунт")))))},pm=wc(1936),qm=wc.n(pm),rm=wc(1146),sm=wc(6561),tm=wc(4169),um=wc(2475),vm=wc(9714),wm=wc.n(vm),xm={border:"_2IRpRccFCfe36ihBTjV1pj",open:"A7oaoZsaW4Ml9vya9dgyt",openerWrapper:"wQFurHTKB81kQgnN-ihyM",opener:"svANd540n043bB5YxteNg",tooltip:"SWo-nlMY709XRe2NeuOEu",list:"NPjmvNXLPZaAN18IQ-FFf",hidden:"_22KK-B2H4WzS9bjAa-gOrr",arrowMoveLeft:"_1eU6iUwcmUHIRm8Mq8d5b9",changeWidth:"_2z6saM85M55dfdQsST3XVt"},ym=function(){var a=(0,d.useRef)(null);return(0,d.useEffect)(function(){if(a.current){var b=qm().get("octavius-productivity-widget-reminder");if(!(b.state||b.getCount().show>=p.COUNT_REPLAY_ANIMATION)){var c=p.TIMEOUT_FIRST_ANIMATION;if(b.getCount().show>0){var d=1e3*b.getTime(),e=(new Date).getTime();c=d+p.TIMEOUT_NEXT_ANIMATION-e}var f,g=(f=c,(0,um.setImmortalTimeout)(function(){if(!wm().isComposeActive())a.current.classList.add(xm.arrowMoveLeft),qm().get("octavius-productivity-widget-reminder").save({time:!0,hit:!0}),(0,sm.K9)()},f));return function(){g()}}}}),{playAnimationRef:a}},zm=wc(5010),Am=wc(7806),Bm=wc(5837),Cm=wc(1286),Dm=wc.n(Cm),Em=function(a){var b,c,e,f,g=a.widgetType,h=a.widgetIsOpen,i=a.broadcast,j=(0,zm.l)(g),k=j[0],l=j[1],m=(0,zm.l)(h),n=m[0],o=m[1],p=(b=function(){if(k!==g||n!==h)i((0,Hi.BU)(rm.WIDGET_COLUMN_SET_WIDGET,{value:{widget:k,open:n}}))},c=200,f=(0,Am.D)(b),(0,Bm.G)(function(){return(0,Cm.debounce)(f,c,e)}).current);(0,d.useEffect)(function(){l(g),o(h)},[g,h,l,o]);var q=(0,Am.D)(function(a){if(k!==a)p(),l(a)}),r=(0,Am.D)(function(a){if(n!==a)p(),o(a)});return{widget:k,setWidget:q,open:n,setOpen:r}},Fm=wc(6389),Gm=C.j.Text,Hm=function(){return(0,sm.lP)("arrow")},Im=function(a){var b,f=a.onClick,g=a.open,h=ym().playAnimationRef;return(0,d.useEffect)(function(){if(!g)(0,sm.Jk)("arrow");return function(){!function(a){a.current.classList.remove(xm.arrowMoveLeft)}(h)}},[g]),e().createElement("div",{className:ca()(xm.openerWrapper,(0,Gd.d)("widget-column"),(b={},b[xm.hidden]=g,b)),onClick:f,onMouseOver:Hm},e().createElement("div",{className:xm.opener,ref:h},e().createElement(c.Icon,{icon:ta.yk[sa.tW.NAVIGATION_ARROW_LIST_PREVIOUS]})),e().createElement("div",{className:xm.tooltip},e().createElement(Gm,{width:3},i18n("Показать панель инструментов"))))},Jm={position:"sidebar"},Km=wc(7050),Lm=wc.n(Km),Mm="_3jPEmD1Z8udC_cjjX9EKVE",Nm="_2wSQYRNu6bHO7yiuXBJBeD",Om="B2sZCwno_KqnL5KGK-Omq",Pm="_2FIN-YZDQLsv6h0kzQ6nK1",Qm="_1K3DIcVIz3SR0Uvej6ppka",Rm="_3GvTN9SIpXghthZn4cxRt3",Sm=i18n("Спасибо за ваш интерес! Мы обязательно сообщим, когда всё будет готово"),Tm=i18n("Функция вот-вот появится"),Um=i18n("Создать задачу"),Vm=function(a){var b,f=a.compact,g=a.onClick,h=a.ponyMode,i=(0,d.useState)(!1),j=i[0],k=i[1];return e().createElement(c.Tooltip,{promo:!0,placement:f?"topRight":"top",visible:j,onClose:function(){k(!1)},overlay:e().createElement("div",{className:Qm},e().createElement("div",{className:Rm},e().createElement(c.Text,{mode:"h5"},Tm)),e().createElement(c.Text,null,Sm))},e().createElement("button",{className:ca()(Mm,(b={},b[Nm]=h,b[Om]=j,b)),onClick:function(){k(!0),null==g||g()}},e().createElement(c.Icon,{icon:q.STATUS_DONE_ROUND}),e().createElement("span",{className:Pm},Um)))},Wm=function(a){var b=a.compact,c=a.letterId,f=a.ponyMode;return(0,d.useEffect)(function(){i().send("show_task_from_letter_fake",{dwh:{letter_id:c}})},[]),e().createElement(Vm,{compact:b,ponyMode:f,onClick:function(){i().send("create_task_from_letter_fake",{dwh:{letter_id:c}}),Lm().set("create_todo_fake_button_shown","true")}})},Xm=wc(4002),Ym=wc(198),Zm=wc(4439),$m=wc(7830),_m=wc(1802),an=wc.n(_m),bn=wc(7632),cn=wc(7094),dn=wc(1314),en=wc(6732),fn=wc(7494),gn=wc.n(fn),hn=wc(3481),jn=wc(9573),kn=wc.n(jn),ln=wc(3634),mn=wc(5572),nn=wc(3738),on=wc.n(nn);function pn(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function qn(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function rn(a,b,c){if(b)qn(a.prototype,b);if(c)qn(a,c);return Object.defineProperty(a,"prototype",{writable:!1}),a}function sn(a){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function tn(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function un(a,b){if(b&&("object"===sn(b)||"function"==typeof b))return b;else if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return tn(a)}function vn(a){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function wn(a,b){return(wn=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function xn(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");if(a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b)wn(a,b)}function yn(a,b,c){if(b in a)Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0});else a[b]=c;return a}function zn(a,b){var c;if(void 0!==b)c=b;else if("undefined"!=typeof window)c=window;else if("undefined"!=typeof self)c=self;else c=wc.g;var d=void 0!==c.document&&c.document.attachEvent;if(!d){var e=function(){var a=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||function(a){return c.setTimeout(a,20)};return function(b){return a(b)}}(),f=function(){var a=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.clearTimeout;return function(b){return a(b)}}(),g=function(a){var b=a.__resizeTriggers__,c=b.firstElementChild,d=b.lastElementChild,e=c.firstElementChild;d.scrollLeft=d.scrollWidth,d.scrollTop=d.scrollHeight,e.style.width=c.offsetWidth+1+"px",e.style.height=c.offsetHeight+1+"px",c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight},h=function(a){if(!(a.target.className&&"function"==typeof a.target.className.indexOf&&a.target.className.indexOf("contract-trigger")<0&&a.target.className.indexOf("expand-trigger")<0)){var b=this;if(g(this),this.__resizeRAF__)f(this.__resizeRAF__);this.__resizeRAF__=e(function(){if(function(a){return a.offsetWidth!=a.__resizeLast__.width||a.offsetHeight!=a.__resizeLast__.height}(b))b.__resizeLast__.width=b.offsetWidth,b.__resizeLast__.height=b.offsetHeight,b.__resizeListeners__.forEach(function(c){c.call(b,a)})})}},i=!1,j="",k="animationstart",l="Webkit Moz O ms".split(" "),m="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),n=c.document.createElement("fakeelement");if(void 0!==n.style.animationName)i=!0;if(!1===i)for(var o=0;o<l.length;o++)if(void 0!==n.style[l[o]+"AnimationName"]){j="-"+l[o].toLowerCase()+"-",k=m[o],i=!0;break}var p="resizeanim",q="@"+j+"keyframes "+p+" { from { opacity: 0; } to { opacity: 0; } } ",r=j+"animation: 1ms "+p+"; "}return{addResizeListener:function(b,e){if(d)b.attachEvent("onresize",e);else{if(!b.__resizeTriggers__){var f=b.ownerDocument,i=c.getComputedStyle(b);if(i&&"static"==i.position)b.style.position="relative";if(function(b){if(!b.getElementById("detectElementResize")){var c=(q?q:"")+".resize-triggers { "+(r?r:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',d=b.head||b.getElementsByTagName("head")[0],e=b.createElement("style");if(e.id="detectElementResize",e.type="text/css",null!=a)e.setAttribute("nonce",a);if(e.styleSheet)e.styleSheet.cssText=c;else e.appendChild(b.createTextNode(c));d.appendChild(e)}}(f),b.__resizeLast__={},b.__resizeListeners__=[],(b.__resizeTriggers__=f.createElement("div")).className="resize-triggers",b.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',b.appendChild(b.__resizeTriggers__),g(b),b.addEventListener("scroll",h,!0),k)b.__resizeTriggers__.__animationListener__=function(a){if(a.animationName==p)g(b)},b.__resizeTriggers__.addEventListener(k,b.__resizeTriggers__.__animationListener__)}b.__resizeListeners__.push(e)}},removeResizeListener:function(a,b){if(d)a.detachEvent("onresize",b);else if(a.__resizeListeners__.splice(a.__resizeListeners__.indexOf(b),1),!a.__resizeListeners__.length){if(a.removeEventListener("scroll",h,!0),a.__resizeTriggers__.__animationListener__)a.__resizeTriggers__.removeEventListener(k,a.__resizeTriggers__.__animationListener__),a.__resizeTriggers__.__animationListener__=null;try{a.__resizeTriggers__=!a.removeChild(a.__resizeTriggers__)}catch(a){}}}}}var An,Bn;wc(5099);function Cn(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function Dn(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};if(b%2)Cn(c,!0).forEach(function(b){yn(a,b,c[b])});else if(Object.getOwnPropertyDescriptors)Object.defineProperties(a,Object.getOwnPropertyDescriptors(c));else Cn(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var En=(Bn=An=function(a){function b(){var a,c;pn(this,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return yn(tn(c=un(this,(a=vn(b)).call.apply(a,[this].concat(e)))),"state",{height:c.props.defaultHeight||0,width:c.props.defaultWidth||0}),yn(tn(c),"_parentNode",void 0),yn(tn(c),"_autoSizer",void 0),yn(tn(c),"_window",void 0),yn(tn(c),"_detectElementResize",void 0),yn(tn(c),"_onResize",function(){var a=c.props,b=a.disableHeight,d=a.disableWidth,e=a.onResize;if(c._parentNode){var f=c._parentNode.offsetHeight||0,g=c._parentNode.offsetWidth||0,h=(c._window||window).getComputedStyle(c._parentNode)||{},i=parseInt(h.paddingLeft,10)||0,j=parseInt(h.paddingRight,10)||0,k=parseInt(h.paddingTop,10)||0,l=parseInt(h.paddingBottom,10)||0,m=f-k-l,n=g-i-j;if(!b&&c.state.height!==m||!d&&c.state.width!==n)c.setState({height:f-k-l,width:g-i-j}),e({height:f,width:g})}}),yn(tn(c),"_setRef",function(a){c._autoSizer=a}),c}return xn(b,a),rn(b,[{key:"componentDidMount",value:function(){var a=this.props.nonce;if(this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement)this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=zn(a,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize()}},{key:"componentWillUnmount",value:function(){if(this._detectElementResize&&this._parentNode)this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var a=this.props,b=a.children,c=a.className,e=a.disableHeight,f=a.disableWidth,g=a.style,h=this.state,i=h.height,j=h.width,k={overflow:"visible"},l={};if(!e)k.height=0,l.height=i;if(!f)k.width=0,l.width=j;return d.createElement("div",{className:c,ref:this._setRef,style:Dn({},k,{},g)},b(l))}}]),b}(d.Component),yn(An,"propTypes",1?null:0),Bn);yn(En,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var Fn,Gn,Hn=(Gn=Fn=function(a){function b(){var a,c;pn(this,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return yn(tn(c=un(this,(a=vn(b)).call.apply(a,[this].concat(e)))),"_child",void 0),yn(tn(c),"_measure",function(){var a=c.props,b=a.cache,d=a.columnIndex,e=void 0===d?0:d,f=a.parent,g=a.rowIndex,h=void 0===g?c.props.index||0:g,i=c._getCellMeasurements(),j=i.height,k=i.width;if(j!==b.getHeight(h,e)||k!==b.getWidth(h,e))if(b.set(h,e,k,j),f&&"function"==typeof f.recomputeGridSize)f.recomputeGridSize({columnIndex:e,rowIndex:h})}),yn(tn(c),"_registerChild",function(a){if(a&&!(a instanceof Element))console.warn("CellMeasurer registerChild expects to be passed Element or null");if(c._child=a,a)c._maybeMeasureCell()}),c}return xn(b,a),rn(b,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var a=this.props.children;return"function"==typeof a?a({measure:this._measure,registerChild:this._registerChild}):a}},{key:"_getCellMeasurements",value:function(){var a=this.props.cache,b=this._child||(0,sh.findDOMNode)(this);if(b&&b.ownerDocument&&b.ownerDocument.defaultView&&b instanceof b.ownerDocument.defaultView.HTMLElement){var c=b.style.width,d=b.style.height;if(!a.hasFixedWidth())b.style.width="auto";if(!a.hasFixedHeight())b.style.height="auto";var e=Math.ceil(b.offsetHeight),f=Math.ceil(b.offsetWidth);if(c)b.style.width=c;if(d)b.style.height=d;return{height:e,width:f}}else return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var a=this.props,b=a.cache,c=a.columnIndex,d=void 0===c?0:c,e=a.parent,f=a.rowIndex,g=void 0===f?this.props.index||0:f;if(!b.has(g,d)){var h=this._getCellMeasurements(),i=h.height,j=h.width;if(b.set(g,d,j,i),e&&"function"==typeof e.invalidateCellSizeAfterRender)e.invalidateCellSizeAfterRender({columnIndex:d,rowIndex:g})}}}]),b}(d.PureComponent),yn(Fn,"propTypes",1?null:0),Gn);if(yn(Hn,"__internalCellMeasurerFlag",!1),0);var In=function(){function a(){var b=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pn(this,a),yn(this,"_cellHeightCache",{}),yn(this,"_cellWidthCache",{}),yn(this,"_columnWidthCache",{}),yn(this,"_rowHeightCache",{}),yn(this,"_defaultHeight",void 0),yn(this,"_defaultWidth",void 0),yn(this,"_minHeight",void 0),yn(this,"_minWidth",void 0),yn(this,"_keyMapper",void 0),yn(this,"_hasFixedHeight",void 0),yn(this,"_hasFixedWidth",void 0),yn(this,"_columnCount",0),yn(this,"_rowCount",0),yn(this,"columnWidth",function(a){var c=a.index,d=b._keyMapper(0,c);return void 0!==b._columnWidthCache[d]?b._columnWidthCache[d]:b._defaultWidth}),yn(this,"rowHeight",function(a){var c=a.index,d=b._keyMapper(c,0);return void 0!==b._rowHeightCache[d]?b._rowHeightCache[d]:b._defaultHeight});var d=c.defaultHeight,e=c.defaultWidth,f=c.fixedHeight,g=c.fixedWidth,h=c.keyMapper,i=c.minHeight,j=c.minWidth;if(this._hasFixedHeight=!0===f,this._hasFixedWidth=!0===g,this._minHeight=i||0,this._minWidth=j||0,this._keyMapper=h||Jn,this._defaultHeight=Math.max(this._minHeight,"number"==typeof d?d:30),this._defaultWidth=Math.max(this._minWidth,"number"==typeof e?e:100),0);}return rn(a,[{key:"clear",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._keyMapper(a,b);delete this._cellHeightCache[c],delete this._cellWidthCache[c],this._updateCachedColumnAndRowSizes(a,b)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;else{var c=this._keyMapper(a,b);return void 0!==this._cellHeightCache[c]?Math.max(this._minHeight,this._cellHeightCache[c]):this._defaultHeight}}},{key:"getWidth",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;else{var c=this._keyMapper(a,b);return void 0!==this._cellWidthCache[c]?Math.max(this._minWidth,this._cellWidthCache[c]):this._defaultWidth}}},{key:"has",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=this._keyMapper(a,b);return void 0!==this._cellHeightCache[c]}},{key:"set",value:function(a,b,c,d){var e=this._keyMapper(a,b);if(b>=this._columnCount)this._columnCount=b+1;if(a>=this._rowCount)this._rowCount=a+1;this._cellHeightCache[e]=d,this._cellWidthCache[e]=c,this._updateCachedColumnAndRowSizes(a,b)}},{key:"_updateCachedColumnAndRowSizes",value:function(a,b){if(!this._hasFixedWidth){for(var c=0,d=0;d<this._rowCount;d++)c=Math.max(c,this.getWidth(d,b));var e=this._keyMapper(0,b);this._columnWidthCache[e]=c}if(!this._hasFixedHeight){for(var f=0,g=0;g<this._columnCount;g++)f=Math.max(f,this.getHeight(a,g));var h=this._keyMapper(a,0);this._rowHeightCache[h]=f}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),a}();function Jn(a,b){return"".concat(a,"-").concat(b)}function Kn(){return(Kn=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d))a[d]=c[d]}return a}).apply(this,arguments)}function Ln(a){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function Mn(a){var b,c,d="";if("string"==typeof a||"number"==typeof a)d+=a;else if("object"===Ln(a))if(Array.isArray(a)){for(b=0;b<a.length;b++)if(a[b])if(c=Mn(a[b]))d&&(d+=" "),d+=c}else for(b in a)if(a[b])d&&(d+=" "),d+=b;return d}function Nn(){for(var a,b,c=0,d="";c<arguments.length;)if(a=arguments[c++])if(b=Mn(a))d&&(d+=" "),d+=b;return d}function On(a){var b=a.cellCount,c=a.cellSize,d=a.computeMetadataCallback,e=a.computeMetadataCallbackProps,f=a.nextCellsCount,g=a.nextCellSize,h=a.nextScrollToIndex,i=a.scrollToIndex,j=a.updateScrollOffsetForScrollToIndex;if(b!==f||("number"==typeof c||"number"==typeof g)&&c!==g)if(d(e),i>=0&&i===h)j()}function Pn(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)if(c=f[d],!(b.indexOf(c)>=0))e[c]=a[c];return e}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)if(c=f[d],!(b.indexOf(c)>=0))if(Object.prototype.propertyIsEnumerable.call(a,c))e[c]=a[c]}return e}var Qn=function(){function a(b){var c=b.cellCount,d=b.cellSizeGetter,e=b.estimatedCellSize;pn(this,a),yn(this,"_cellSizeAndPositionData",{}),yn(this,"_lastMeasuredIndex",-1),yn(this,"_lastBatchedIndex",-1),yn(this,"_cellCount",void 0),yn(this,"_cellSizeGetter",void 0),yn(this,"_estimatedCellSize",void 0),this._cellSizeGetter=d,this._cellCount=c,this._estimatedCellSize=e}return rn(a,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(a){var b=a.cellCount,c=a.estimatedCellSize,d=a.cellSizeGetter;this._cellCount=b,this._estimatedCellSize=c,this._cellSizeGetter=d}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(a){if(a<0||a>=this._cellCount)throw Error("Requested index ".concat(a," is outside of range 0..").concat(this._cellCount));if(a>this._lastMeasuredIndex)for(var b=this.getSizeAndPositionOfLastMeasuredCell(),c=b.offset+b.size,d=this._lastMeasuredIndex+1;d<=a;d++){var e=this._cellSizeGetter({index:d});if(void 0===e||isNaN(e))throw Error("Invalid size returned for cell ".concat(d," of value ").concat(e));else if(null===e)this._cellSizeAndPositionData[d]={offset:c,size:0},this._lastBatchedIndex=a;else this._cellSizeAndPositionData[d]={offset:c,size:e},c+=e,this._lastMeasuredIndex=a}return this._cellSizeAndPositionData[a]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var a=this.getSizeAndPositionOfLastMeasuredCell();return a.offset+a.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(a){var b=a.align,c=void 0===b?"auto":b,d=a.containerSize,e=a.currentOffset,f=a.targetIndex;if(d<=0)return 0;var g,h=this.getSizeAndPositionOfCell(f),i=h.offset,j=i-d+h.size;switch(c){case"start":g=i;break;case"end":g=j;break;case"center":g=i-(d-h.size)/2;break;default:g=Math.max(j,Math.min(i,e))}var k=this.getTotalSize();return Math.max(0,Math.min(k-d,g))}},{key:"getVisibleCellRange",value:function(a){var b=a.containerSize,c=a.offset;if(0===this.getTotalSize())return{};var d=c+b,e=this._findNearestCell(c),f=this.getSizeAndPositionOfCell(e);c=f.offset+f.size;for(var g=e;c<d&&g<this._cellCount-1;)g++,c+=this.getSizeAndPositionOfCell(g).size;return{start:e,stop:g}}},{key:"resetCell",value:function(a){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,a-1)}},{key:"_binarySearch",value:function(a,b,c){for(;b<=a;){var d=b+Math.floor((a-b)/2),e=this.getSizeAndPositionOfCell(d).offset;if(e===c)return d;else if(e<c)b=d+1;else if(e>c)a=d-1}if(b>0)return b-1;else return 0}},{key:"_exponentialSearch",value:function(a,b){for(var c=1;a<this._cellCount&&this.getSizeAndPositionOfCell(a).offset<b;)a+=c,c*=2;return this._binarySearch(Math.min(a,this._cellCount-1),Math.floor(a/2),b)}},{key:"_findNearestCell",value:function(a){if(isNaN(a))throw Error("Invalid offset ".concat(a," specified"));a=Math.max(0,a);var b=this.getSizeAndPositionOfLastMeasuredCell(),c=Math.max(0,this._lastMeasuredIndex);if(b.offset>=a)return this._binarySearch(c,0,a);else return this._exponentialSearch(c,a)}}]),a}(),Rn=function(){if("undefined"!=typeof window)if(window.chrome)return 16777100;return 15e5},Sn=function(){function a(b){var c=b.maxScrollSize,d=void 0===c?Rn():c,e=Pn(b,["maxScrollSize"]);pn(this,a),yn(this,"_cellSizeAndPositionManager",void 0),yn(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Qn(e),this._maxScrollSize=d}return rn(a,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(a){this._cellSizeAndPositionManager.configure(a)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize(),f=this._getOffsetPercentage({containerSize:b,offset:c,totalSize:e});return Math.round(f*(e-d))}},{key:"getSizeAndPositionOfCell",value:function(a){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(a)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(a){var b=a.align,c=void 0===b?"auto":b,d=a.containerSize,e=a.currentOffset,f=a.targetIndex;e=this._safeOffsetToOffset({containerSize:d,offset:e});var g=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:c,containerSize:d,currentOffset:e,targetIndex:f});return this._offsetToSafeOffset({containerSize:d,offset:g})}},{key:"getVisibleCellRange",value:function(a){var b=a.containerSize,c=a.offset;return c=this._safeOffsetToOffset({containerSize:b,offset:c}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:b,offset:c})}},{key:"resetCell",value:function(a){this._cellSizeAndPositionManager.resetCell(a)}},{key:"_getOffsetPercentage",value:function(a){var b=a.containerSize,c=a.offset,d=a.totalSize;return d<=b?0:c/(d-b)}},{key:"_offsetToSafeOffset",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize();if(d===e)return c;else{var f=this._getOffsetPercentage({containerSize:b,offset:c,totalSize:d});return Math.round(f*(e-b))}}},{key:"_safeOffsetToOffset",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize();if(d===e)return c;else{var f=this._getOffsetPercentage({containerSize:b,offset:c,totalSize:e});return Math.round(f*(d-b))}}}]),a}();function Tn(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0,b={};return function(c){var d=c.callback,e=c.indices,f=Object.keys(e),g=!a||f.every(function(a){var b=e[a];return Array.isArray(b)?b.length>0:b>=0}),h=f.length!==Object.keys(b).length||f.some(function(a){var c=b[a],d=e[a];return Array.isArray(d)?c.join(",")!==d.join(","):c!==d});if(b=e,g&&h)d(e)}}function Un(a){var b=a.cellCount,c=a.overscanCellsCount,d=a.scrollDirection,e=a.startIndex,f=a.stopIndex;if(1===d)return{overscanStartIndex:Math.max(0,e),overscanStopIndex:Math.min(b-1,f+c)};else return{overscanStartIndex:Math.max(0,e-c),overscanStopIndex:Math.min(b-1,f)}}function Vn(a){var b=a.cellSize,c=a.cellSizeAndPositionManager,d=a.previousCellsCount,e=a.previousCellSize,f=a.previousScrollToAlignment,g=a.previousScrollToIndex,h=a.previousSize,i=a.scrollOffset,j=a.scrollToAlignment,k=a.scrollToIndex,l=a.size,m=a.sizeJustIncreasedFromZero,n=a.updateScrollIndexCallback,o=c.getCellCount(),p=k>=0&&k<o;if(p&&(l!==h||m||!e||"number"==typeof b&&b!==e||j!==f||k!==g))n(k);else if(!p&&o>0&&(l<h||o<d))if(i>c.getTotalSize()-l)n(o-1)}var Wn,Xn,Yn=!("undefined"==typeof window||!window.document||!window.document.createElement);function Zn(){var a=this.constructor.getDerivedStateFromProps(this.props,this.state);if(null!=a)this.setState(a)}function $n(a){this.setState(function(b){var c=this.constructor.getDerivedStateFromProps(a,b);return null!=c?c:null}.bind(this))}function _n(a,b){try{var c=this.props,d=this.state;this.props=a,this.state=b,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(c,d)}finally{this.props=c,this.state=d}}if(Zn.__suppressDeprecationWarning=!0,$n.__suppressDeprecationWarning=!0,_n.__suppressDeprecationWarning=!0,"undefined"!=typeof window)Xn=window;else if("undefined"!=typeof self)Xn=self;else Xn={};var ao,bo,co=Xn.requestAnimationFrame||Xn.webkitRequestAnimationFrame||Xn.mozRequestAnimationFrame||Xn.oRequestAnimationFrame||Xn.msRequestAnimationFrame||function(a){return Xn.setTimeout(a,1e3/60)},eo=Xn.cancelAnimationFrame||Xn.webkitCancelAnimationFrame||Xn.mozCancelAnimationFrame||Xn.oCancelAnimationFrame||Xn.msCancelAnimationFrame||function(a){Xn.clearTimeout(a)},fo=co,go=eo,ho=function(a){return go(a.id)};function io(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function jo(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};if(b%2)io(c,!0).forEach(function(b){yn(a,b,c[b])});else if(Object.getOwnPropertyDescriptors)Object.defineProperties(a,Object.getOwnPropertyDescriptors(c));else io(c).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var ko="observed",lo="requested",mo=(bo=ao=function(a){function b(a){var c;pn(this,b),yn(tn(c=un(this,vn(b).call(this,a))),"_onGridRenderedMemoizer",Tn()),yn(tn(c),"_onScrollMemoizer",Tn(!1)),yn(tn(c),"_deferredInvalidateColumnIndex",null),yn(tn(c),"_deferredInvalidateRowIndex",null),yn(tn(c),"_recomputeScrollLeftFlag",!1),yn(tn(c),"_recomputeScrollTopFlag",!1),yn(tn(c),"_horizontalScrollBarSize",0),yn(tn(c),"_verticalScrollBarSize",0),yn(tn(c),"_scrollbarPresenceChanged",!1),yn(tn(c),"_scrollingContainer",void 0),yn(tn(c),"_childrenToDisplay",void 0),yn(tn(c),"_columnStartIndex",void 0),yn(tn(c),"_columnStopIndex",void 0),yn(tn(c),"_rowStartIndex",void 0),yn(tn(c),"_rowStopIndex",void 0),yn(tn(c),"_renderedColumnStartIndex",0),yn(tn(c),"_renderedColumnStopIndex",0),yn(tn(c),"_renderedRowStartIndex",0),yn(tn(c),"_renderedRowStopIndex",0),yn(tn(c),"_initialScrollTop",void 0),yn(tn(c),"_initialScrollLeft",void 0),yn(tn(c),"_disablePointerEventsTimeoutId",void 0),yn(tn(c),"_styleCache",{}),yn(tn(c),"_cellCache",{}),yn(tn(c),"_debounceScrollEndedCallback",function(){c._disablePointerEventsTimeoutId=null,c.setState({isScrolling:!1,needToResetStyleCache:!1})}),yn(tn(c),"_invokeOnGridRenderedHelper",function(){var a=c.props.onSectionRendered;c._onGridRenderedMemoizer({callback:a,indices:{columnOverscanStartIndex:c._columnStartIndex,columnOverscanStopIndex:c._columnStopIndex,columnStartIndex:c._renderedColumnStartIndex,columnStopIndex:c._renderedColumnStopIndex,rowOverscanStartIndex:c._rowStartIndex,rowOverscanStopIndex:c._rowStopIndex,rowStartIndex:c._renderedRowStartIndex,rowStopIndex:c._renderedRowStopIndex}})}),yn(tn(c),"_setScrollingContainerRef",function(a){c._scrollingContainer=a}),yn(tn(c),"_onScroll",function(a){if(a.target===c._scrollingContainer)c.handleScrollEvent(a.target)});var d=new Sn({cellCount:a.columnCount,cellSizeGetter:function(c){return b._wrapSizeGetter(a.columnWidth)(c)},estimatedCellSize:b._getEstimatedColumnSize(a)}),e=new Sn({cellCount:a.rowCount,cellSizeGetter:function(c){return b._wrapSizeGetter(a.rowHeight)(c)},estimatedCellSize:b._getEstimatedRowSize(a)});if(c.state={instanceProps:{columnSizeAndPositionManager:d,rowSizeAndPositionManager:e,prevColumnWidth:a.columnWidth,prevRowHeight:a.rowHeight,prevColumnCount:a.columnCount,prevRowCount:a.rowCount,prevIsScrolling:!0===a.isScrolling,prevScrollToColumn:a.scrollToColumn,prevScrollToRow:a.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},a.scrollToRow>0)c._initialScrollTop=c._getCalculatedScrollTop(a,c.state);if(a.scrollToColumn>0)c._initialScrollLeft=c._getCalculatedScrollLeft(a,c.state);return c}return xn(b,a),rn(b,[{key:"getOffsetForCell",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.alignment,c=void 0===b?this.props.scrollToAlignment:b,d=a.columnIndex,e=void 0===d?this.props.scrollToColumn:d,f=a.rowIndex,g=void 0===f?this.props.scrollToRow:f,h=jo({},this.props,{scrollToAlignment:c,scrollToColumn:e,scrollToRow:g});return{scrollLeft:this._getCalculatedScrollLeft(h),scrollTop:this._getCalculatedScrollTop(h)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(a){var b=a.scrollLeft,c=void 0===b?0:b,d=a.scrollTop,e=void 0===d?0:d;if(!(e<0)){this._debounceScrollEnded();var f=this.props,g=f.autoHeight,h=f.autoWidth,i=f.height,j=f.width,k=this.state.instanceProps,l=k.scrollbarSize,m=k.rowSizeAndPositionManager.getTotalSize(),n=k.columnSizeAndPositionManager.getTotalSize(),o=Math.min(Math.max(0,n-j+l),c),p=Math.min(Math.max(0,m-i+l),e);if(this.state.scrollLeft!==o||this.state.scrollTop!==p){var q={isScrolling:!0,scrollDirectionHorizontal:o!==this.state.scrollLeft?o>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:p!==this.state.scrollTop?p>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:ko};if(!g)q.scrollTop=p;if(!h)q.scrollLeft=o;q.needToResetStyleCache=!1,this.setState(q)}this._invokeOnScrollMemoizer({scrollLeft:o,scrollTop:p,totalColumnsWidth:n,totalRowsHeight:m})}}},{key:"invalidateCellSizeAfterRender",value:function(a){var b=a.columnIndex,c=a.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,b):b,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,c):c}},{key:"measureAllCells",value:function(){var a=this.props,b=a.columnCount,c=a.rowCount,d=this.state.instanceProps;d.columnSizeAndPositionManager.getSizeAndPositionOfCell(b-1),d.rowSizeAndPositionManager.getSizeAndPositionOfCell(c-1)}},{key:"recomputeGridSize",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.columnIndex,c=void 0===b?0:b,d=a.rowIndex,e=void 0===d?0:d,f=this.props,g=f.scrollToColumn,h=f.scrollToRow,i=this.state.instanceProps;i.columnSizeAndPositionManager.resetCell(c),i.rowSizeAndPositionManager.resetCell(e),this._recomputeScrollLeftFlag=g>=0&&(1===this.state.scrollDirectionHorizontal?c<=g:c>=g),this._recomputeScrollTopFlag=h>=0&&(1===this.state.scrollDirectionVertical?e<=h:e>=h),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(a){var b=a.columnIndex,c=a.rowIndex,d=this.props.columnCount,e=this.props;if(d>1&&void 0!==b)this._updateScrollLeftForScrollToColumn(jo({},e,{scrollToColumn:b}));if(void 0!==c)this._updateScrollTopForScrollToRow(jo({},e,{scrollToRow:c}))}},{key:"componentDidMount",value:function(){var a=this.props,c=a.getScrollbarSize,d=a.height,e=a.scrollLeft,f=a.scrollToColumn,g=a.scrollTop,h=a.scrollToRow,i=a.width,j=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),!j.scrollbarSizeMeasured)this.setState(function(a){var b=jo({},a,{needToResetStyleCache:!1});return b.instanceProps.scrollbarSize=c(),b.instanceProps.scrollbarSizeMeasured=!0,b});if("number"==typeof e&&e>=0||"number"==typeof g&&g>=0){var k=b._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:e,scrollTop:g});if(k)k.needToResetStyleCache=!1,this.setState(k)}if(this._scrollingContainer){if(this._scrollingContainer.scrollLeft!==this.state.scrollLeft)this._scrollingContainer.scrollLeft=this.state.scrollLeft;if(this._scrollingContainer.scrollTop!==this.state.scrollTop)this._scrollingContainer.scrollTop=this.state.scrollTop}var l=d>0&&i>0;if(f>=0&&l)this._updateScrollLeftForScrollToColumn();if(h>=0&&l)this._updateScrollTopForScrollToRow();this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:e||0,scrollTop:g||0,totalColumnsWidth:j.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:j.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(a,b){var c=this,d=this.props,e=d.autoHeight,f=d.autoWidth,g=d.columnCount,h=d.height,i=d.rowCount,j=d.scrollToAlignment,k=d.scrollToColumn,l=d.scrollToRow,m=d.width,n=this.state,o=n.scrollLeft,p=n.scrollPositionChangeReason,q=n.scrollTop,r=n.instanceProps;this._handleInvalidatedGridSize();var s=g>0&&0===a.columnCount||i>0&&0===a.rowCount;if(p===lo){if(!f&&o>=0&&(o!==this._scrollingContainer.scrollLeft||s))this._scrollingContainer.scrollLeft=o;if(!e&&q>=0&&(q!==this._scrollingContainer.scrollTop||s))this._scrollingContainer.scrollTop=q}var t=(0===a.width||0===a.height)&&h>0&&m>0;if(this._recomputeScrollLeftFlag)this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props);else Vn({cellSizeAndPositionManager:r.columnSizeAndPositionManager,previousCellsCount:a.columnCount,previousCellSize:a.columnWidth,previousScrollToAlignment:a.scrollToAlignment,previousScrollToIndex:a.scrollToColumn,previousSize:a.width,scrollOffset:o,scrollToAlignment:j,scrollToIndex:k,size:m,sizeJustIncreasedFromZero:t,updateScrollIndexCallback:function(){return c._updateScrollLeftForScrollToColumn(c.props)}});if(this._recomputeScrollTopFlag)this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props);else Vn({cellSizeAndPositionManager:r.rowSizeAndPositionManager,previousCellsCount:a.rowCount,previousCellSize:a.rowHeight,previousScrollToAlignment:a.scrollToAlignment,previousScrollToIndex:a.scrollToRow,previousSize:a.height,scrollOffset:q,scrollToAlignment:j,scrollToIndex:l,size:h,sizeJustIncreasedFromZero:t,updateScrollIndexCallback:function(){return c._updateScrollTopForScrollToRow(c.props)}});if(this._invokeOnGridRenderedHelper(),o!==b.scrollLeft||q!==b.scrollTop){var u=r.rowSizeAndPositionManager.getTotalSize(),v=r.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:o,scrollTop:q,totalColumnsWidth:v,totalRowsHeight:u})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){if(this._disablePointerEventsTimeoutId)ho(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var a=this.props,b=a.autoContainerWidth,c=a.autoHeight,e=a.autoWidth,f=a.className,g=a.containerProps,h=a.containerRole,i=a.containerStyle,j=a.height,k=a.id,l=a.noContentRenderer,m=a.role,n=a.style,o=a.tabIndex,p=a.width,q=this.state,r=q.instanceProps,s=q.needToResetStyleCache,t=this._isScrolling(),u={boxSizing:"border-box",direction:"ltr",height:c?"auto":j,position:"relative",width:e?"auto":p,WebkitOverflowScrolling:"touch",willChange:"transform"};if(s)this._styleCache={};if(!this.state.isScrolling)this._resetStyleCache();this._calculateChildrenToRender(this.props,this.state);var v=r.columnSizeAndPositionManager.getTotalSize(),w=r.rowSizeAndPositionManager.getTotalSize(),x=w>j?r.scrollbarSize:0,y=v>p?r.scrollbarSize:0;if(y!==this._horizontalScrollBarSize||x!==this._verticalScrollBarSize)this._horizontalScrollBarSize=y,this._verticalScrollBarSize=x,this._scrollbarPresenceChanged=!0;u.overflowX=v+x<=p?"hidden":"auto",u.overflowY=w+y<=j?"hidden":"auto";var z=this._childrenToDisplay,A=0===z.length&&j>0&&p>0;return d.createElement("div",Kn({ref:this._setScrollingContainerRef},g,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Nn("ReactVirtualized__Grid",f),id:k,onScroll:this._onScroll,role:m,style:jo({},u,{},n),tabIndex:o}),z.length>0&&d.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:h,style:jo({width:b?"auto":v,height:w,maxWidth:v,maxHeight:w,overflow:"hidden",pointerEvents:t?"none":"",position:"relative"},i)},z),A&&l())}},{key:"_calculateChildrenToRender",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,c=a.cellRenderer,d=a.cellRangeRenderer,e=a.columnCount,f=a.deferredMeasurementCache,g=a.height,h=a.overscanColumnCount,i=a.overscanIndicesGetter,j=a.overscanRowCount,k=a.rowCount,l=a.width,m=a.isScrollingOptOut,n=b.scrollDirectionHorizontal,o=b.scrollDirectionVertical,p=b.instanceProps,q=this._initialScrollTop>0?this._initialScrollTop:b.scrollTop,r=this._initialScrollLeft>0?this._initialScrollLeft:b.scrollLeft,s=this._isScrolling(a,b);if(this._childrenToDisplay=[],g>0&&l>0){var t=p.columnSizeAndPositionManager.getVisibleCellRange({containerSize:l,offset:r}),u=p.rowSizeAndPositionManager.getVisibleCellRange({containerSize:g,offset:q}),v=p.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:l,offset:r}),w=p.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:g,offset:q});this._renderedColumnStartIndex=t.start,this._renderedColumnStopIndex=t.stop,this._renderedRowStartIndex=u.start,this._renderedRowStopIndex=u.stop;var x=i({direction:"horizontal",cellCount:e,overscanCellsCount:h,scrollDirection:n,startIndex:"number"==typeof t.start?t.start:0,stopIndex:"number"==typeof t.stop?t.stop:-1}),y=i({direction:"vertical",cellCount:k,overscanCellsCount:j,scrollDirection:o,startIndex:"number"==typeof u.start?u.start:0,stopIndex:"number"==typeof u.stop?u.stop:-1}),z=x.overscanStartIndex,A=x.overscanStopIndex,B=y.overscanStartIndex,C=y.overscanStopIndex;if(f){if(!f.hasFixedHeight())for(var D=B;D<=C;D++)if(!f.has(D,0)){z=0,A=e-1;break}if(!f.hasFixedWidth())for(var E=z;E<=A;E++)if(!f.has(0,E)){B=0,C=k-1;break}}this._childrenToDisplay=d({cellCache:this._cellCache,cellRenderer:c,columnSizeAndPositionManager:p.columnSizeAndPositionManager,columnStartIndex:z,columnStopIndex:A,deferredMeasurementCache:f,horizontalOffsetAdjustment:v,isScrolling:s,isScrollingOptOut:m,parent:this,rowSizeAndPositionManager:p.rowSizeAndPositionManager,rowStartIndex:B,rowStopIndex:C,scrollLeft:r,scrollTop:q,styleCache:this._styleCache,verticalOffsetAdjustment:w,visibleColumnIndices:t,visibleRowIndices:u}),this._columnStartIndex=z,this._columnStopIndex=A,this._rowStartIndex=B,this._rowStopIndex=C}}},{key:"_debounceScrollEnded",value:function(){var a=this.props.scrollingResetTimeInterval;if(this._disablePointerEventsTimeoutId)ho(this._disablePointerEventsTimeoutId);this._disablePointerEventsTimeoutId=function(a,b){var c;Promise.resolve().then(function(){c=Date.now()});var d={id:fo(function e(){if(Date.now()-c>=b)a.call();else d.id=fo(e)})};return d}(this._debounceScrollEndedCallback,a)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var a=this._deferredInvalidateColumnIndex,b=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:a,rowIndex:b})}}},{key:"_invokeOnScrollMemoizer",value:function(a){var b=this,c=a.scrollLeft,d=a.scrollTop,e=a.totalColumnsWidth,f=a.totalRowsHeight;this._onScrollMemoizer({callback:function(a){var c=a.scrollLeft,d=a.scrollTop,g=b.props,h=g.height;(0,g.onScroll)({clientHeight:h,clientWidth:g.width,scrollHeight:f,scrollLeft:c,scrollTop:d,scrollWidth:e})},indices:{scrollLeft:c,scrollTop:d}})}},{key:"_isScrolling",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(a,"isScrolling")?Boolean(a.isScrolling):Boolean(b.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var a=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,a({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(a){var c=a.scrollLeft,d=a.scrollTop,e=b._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:c,scrollTop:d});if(e)e.needToResetStyleCache=!1,this.setState(e)}},{key:"_getCalculatedScrollLeft",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return b._getCalculatedScrollLeft(a,c)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,d=b._getScrollLeftForScrollToColumnStateUpdate(a,c);if(d)d.needToResetStyleCache=!1,this.setState(d)}},{key:"_getCalculatedScrollTop",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return b._getCalculatedScrollTop(a,c)}},{key:"_resetStyleCache",value:function(){var a=this._styleCache,b=this._cellCache,c=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var d=this._rowStartIndex;d<=this._rowStopIndex;d++)for(var e=this._columnStartIndex;e<=this._columnStopIndex;e++){var f="".concat(d,"-").concat(e);if(this._styleCache[f]=a[f],c)this._cellCache[f]=b[f]}}},{key:"_updateScrollTopForScrollToRow",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,d=b._getScrollTopForScrollToRowStateUpdate(a,c);if(d)d.needToResetStyleCache=!1,this.setState(d)}}],[{key:"getDerivedStateFromProps",value:function(a,c){var d={};if(0===a.columnCount&&0!==c.scrollLeft||0===a.rowCount&&0!==c.scrollTop)d.scrollLeft=0,d.scrollTop=0;else if(a.scrollLeft!==c.scrollLeft&&a.scrollToColumn<0||a.scrollTop!==c.scrollTop&&a.scrollToRow<0)Object.assign(d,b._getScrollToPositionStateUpdate({prevState:c,scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}));var e,f,g=c.instanceProps;if(d.needToResetStyleCache=!1,a.columnWidth!==g.prevColumnWidth||a.rowHeight!==g.prevRowHeight)d.needToResetStyleCache=!0;if(g.columnSizeAndPositionManager.configure({cellCount:a.columnCount,estimatedCellSize:b._getEstimatedColumnSize(a),cellSizeGetter:b._wrapSizeGetter(a.columnWidth)}),g.rowSizeAndPositionManager.configure({cellCount:a.rowCount,estimatedCellSize:b._getEstimatedRowSize(a),cellSizeGetter:b._wrapSizeGetter(a.rowHeight)}),0===g.prevColumnCount||0===g.prevRowCount)g.prevColumnCount=0,g.prevRowCount=0;if(a.autoHeight&&!1===a.isScrolling&&!0===g.prevIsScrolling)Object.assign(d,{isScrolling:!1});if(On({cellCount:g.prevColumnCount,cellSize:"number"==typeof g.prevColumnWidth?g.prevColumnWidth:null,computeMetadataCallback:function(){return g.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:a,nextCellsCount:a.columnCount,nextCellSize:"number"==typeof a.columnWidth?a.columnWidth:null,nextScrollToIndex:a.scrollToColumn,scrollToIndex:g.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){e=b._getScrollLeftForScrollToColumnStateUpdate(a,c)}}),On({cellCount:g.prevRowCount,cellSize:"number"==typeof g.prevRowHeight?g.prevRowHeight:null,computeMetadataCallback:function(){return g.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:a,nextCellsCount:a.rowCount,nextCellSize:"number"==typeof a.rowHeight?a.rowHeight:null,nextScrollToIndex:a.scrollToRow,scrollToIndex:g.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){f=b._getScrollTopForScrollToRowStateUpdate(a,c)}}),g.prevColumnCount=a.columnCount,g.prevColumnWidth=a.columnWidth,g.prevIsScrolling=!0===a.isScrolling,g.prevRowCount=a.rowCount,g.prevRowHeight=a.rowHeight,g.prevScrollToColumn=a.scrollToColumn,g.prevScrollToRow=a.scrollToRow,g.scrollbarSize=a.getScrollbarSize(),void 0===g.scrollbarSize)g.scrollbarSizeMeasured=!1,g.scrollbarSize=0;else g.scrollbarSizeMeasured=!0;return d.instanceProps=g,jo({},d,{},e,{},f)}},{key:"_getEstimatedColumnSize",value:function(a){return"number"==typeof a.columnWidth?a.columnWidth:a.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(a){return"number"==typeof a.rowHeight?a.rowHeight:a.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(a){var b=a.prevState,c=a.scrollLeft,d=a.scrollTop,e={scrollPositionChangeReason:lo};if("number"==typeof c&&c>=0)e.scrollDirectionHorizontal=c>b.scrollLeft?1:-1,e.scrollLeft=c;if("number"==typeof d&&d>=0)e.scrollDirectionVertical=d>b.scrollTop?1:-1,e.scrollTop=d;if("number"==typeof c&&c>=0&&c!==b.scrollLeft||"number"==typeof d&&d>=0&&d!==b.scrollTop)return e;else return{}}},{key:"_wrapSizeGetter",value:function(a){return"function"==typeof a?a:function(){return a}}},{key:"_getCalculatedScrollLeft",value:function(a,b){var c=a.columnCount,d=a.height,e=a.scrollToAlignment,f=a.scrollToColumn,g=a.width,h=b.scrollLeft,i=b.instanceProps;if(c>0){var j=c-1,k=f<0?j:Math.min(j,f),l=i.rowSizeAndPositionManager.getTotalSize(),m=i.scrollbarSizeMeasured&&l>d?i.scrollbarSize:0;return i.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:g-m,currentOffset:h,targetIndex:k})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(a,c){var d=c.scrollLeft,e=b._getCalculatedScrollLeft(a,c);if("number"==typeof e&&e>=0&&d!==e)return b._getScrollToPositionStateUpdate({prevState:c,scrollLeft:e,scrollTop:-1});else return{}}},{key:"_getCalculatedScrollTop",value:function(a,b){var c=a.height,d=a.rowCount,e=a.scrollToAlignment,f=a.scrollToRow,g=a.width,h=b.scrollTop,i=b.instanceProps;if(d>0){var j=d-1,k=f<0?j:Math.min(j,f),l=i.columnSizeAndPositionManager.getTotalSize(),m=i.scrollbarSizeMeasured&&l>g?i.scrollbarSize:0;return i.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:c-m,currentOffset:h,targetIndex:k})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(a,c){var d=c.scrollTop,e=b._getCalculatedScrollTop(a,c);if("number"==typeof e&&e>=0&&d!==e)return b._getScrollToPositionStateUpdate({prevState:c,scrollLeft:-1,scrollTop:e});else return{}}}]),b}(d.PureComponent),yn(ao,"propTypes",1?null:0),bo);yn(mo,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(a){for(var b=a.cellCache,c=a.cellRenderer,d=a.columnSizeAndPositionManager,e=a.columnStartIndex,f=a.columnStopIndex,g=a.deferredMeasurementCache,h=a.horizontalOffsetAdjustment,i=a.isScrolling,j=a.isScrollingOptOut,k=a.parent,l=a.rowSizeAndPositionManager,m=a.rowStartIndex,n=a.rowStopIndex,o=a.styleCache,p=a.verticalOffsetAdjustment,q=a.visibleColumnIndices,r=a.visibleRowIndices,s=[],t=d.areOffsetsAdjusted()||l.areOffsetsAdjusted(),u=!i&&!t,v=m;v<=n;v++)for(var w=l.getSizeAndPositionOfCell(v),x=e;x<=f;x++){var y=d.getSizeAndPositionOfCell(x),z=x>=q.start&&x<=q.stop&&v>=r.start&&v<=r.stop,A="".concat(v,"-").concat(x),B=void 0;if(u&&o[A])B=o[A];else if(g&&!g.has(v,x))B={height:"auto",left:0,position:"absolute",top:0,width:"auto"};else B={height:w.size,left:y.offset+h,position:"absolute",top:w.offset+p,width:y.size},o[A]=B;var C={columnIndex:x,isScrolling:i,isVisible:z,key:A,parent:k,rowIndex:v,style:B},D=void 0;if((j||i)&&!h&&!p){if(!b[A])b[A]=c(C);D=b[A]}else D=c(C);if(null!=D&&!1!==D){if(0);s.push(D)}}return s},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:function(a){if(!Wn&&0!==Wn||a)if(Yn){var b=document.createElement("div");b.style.position="absolute",b.style.top="-9999px",b.style.width="50px",b.style.height="50px",b.style.overflow="scroll",document.body.appendChild(b),Wn=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return Wn},noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Un,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),function(a){var b=a.prototype;if(!b||!b.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof a.getDerivedStateFromProps&&"function"!=typeof b.getSnapshotBeforeUpdate)return a;var c=null,d=null,e=null;if("function"==typeof b.componentWillMount)c="componentWillMount";else if("function"==typeof b.UNSAFE_componentWillMount)c="UNSAFE_componentWillMount";if("function"==typeof b.componentWillReceiveProps)d="componentWillReceiveProps";else if("function"==typeof b.UNSAFE_componentWillReceiveProps)d="UNSAFE_componentWillReceiveProps";if("function"==typeof b.componentWillUpdate)e="componentWillUpdate";else if("function"==typeof b.UNSAFE_componentWillUpdate)e="UNSAFE_componentWillUpdate";if(null!==c||null!==d||null!==e){var f=a.displayName||a.name,g="function"==typeof a.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+f+" uses "+g+" but also contains the following legacy lifecycles:"+(null!==c?"\n  "+c:"")+(null!==d?"\n  "+d:"")+(null!==e?"\n  "+e:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof a.getDerivedStateFromProps)b.componentWillMount=Zn,b.componentWillReceiveProps=$n;if("function"==typeof b.getSnapshotBeforeUpdate){if("function"!=typeof b.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");b.componentWillUpdate=_n;var h=b.componentDidUpdate;b.componentDidUpdate=function(a,b,c){var d=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:c;h.call(this,a,b,d)}}}(mo);var no=mo;function oo(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=new Array(b);c<b;c++)d[c]=a[c];return d}function po(a){return function(a){if(Array.isArray(a))return oo(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,b){if(a){if("string"==typeof a)return oo(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return oo(a,b);else return}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qo=function(a){function b(a,c){var d;return pn(this,b),(d=un(this,vn(b).call(this,a,c)))._loadMoreRowsMemoizer=Tn(),d._onRowsRendered=d._onRowsRendered.bind(tn(d)),d._registerChild=d._registerChild.bind(tn(d)),d}return xn(b,a),rn(b,[{key:"resetLoadMoreRowsCache",value:function(a){if(this._loadMoreRowsMemoizer=Tn(),a)this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(a){var b=this,c=this.props.loadMoreRows;a.forEach(function(a){var d=c(a);if(d)d.then(function(){if(c={lastRenderedStartIndex:b._lastRenderedStartIndex,lastRenderedStopIndex:b._lastRenderedStopIndex,startIndex:a.startIndex,stopIndex:a.stopIndex},d=c.lastRenderedStartIndex,e=c.lastRenderedStopIndex,f=c.startIndex,g=c.stopIndex,!(f>e||g<d))if(b._registeredChild)!function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c="function"==typeof a.recomputeGridSize?a.recomputeGridSize:a.recomputeRowHeights;if(c)c.call(a,b);else a.forceUpdate()}(b._registeredChild,b._lastRenderedStartIndex);var c,d,e,f,g})})}},{key:"_onRowsRendered",value:function(a){var b=a.startIndex,c=a.stopIndex;this._lastRenderedStartIndex=b,this._lastRenderedStopIndex=c,this._doStuff(b,c)}},{key:"_doStuff",value:function(a,b){var c,d=this,e=this.props,f=e.isRowLoaded,g=e.minimumBatchSize,h=e.rowCount,i=e.threshold,j=function(a){for(var b=a.isRowLoaded,c=a.minimumBatchSize,d=a.rowCount,e=a.startIndex,f=a.stopIndex,g=[],h=null,i=null,j=e;j<=f;j++){if(!b({index:j})){if(i=j,null===h)h=j}else if(null!==i)g.push({startIndex:h,stopIndex:i}),h=i=null}if(null!==i){for(var k=Math.min(Math.max(i,h+c-1),d-1),l=i+1;l<=k&&!b({index:l});l++)i=l;g.push({startIndex:h,stopIndex:i})}if(g.length)for(var m=g[0];m.stopIndex-m.startIndex+1<c&&m.startIndex>0;){var n=m.startIndex-1;if(!b({index:n}))m.startIndex=n;else break}return g}({isRowLoaded:f,minimumBatchSize:g,rowCount:h,startIndex:Math.max(0,a-i),stopIndex:Math.min(h-1,b+i)}),k=(c=[]).concat.apply(c,po(j.map(function(a){return[a.startIndex,a.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){d._loadUnloadedRanges(j)},indices:{squashedUnloadedRanges:k}})}},{key:"_registerChild",value:function(a){this._registeredChild=a}}]),b}(d.PureComponent);yn(qo,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),qo.propTypes=0?0:{};var ro,so,to=(so=ro=function(a){function b(){var a,c;pn(this,b);for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return yn(tn(c=un(this,(a=vn(b)).call.apply(a,[this].concat(e)))),"Grid",void 0),yn(tn(c),"_cellRenderer",function(a){var b=a.parent,d=a.rowIndex,e=a.style,f=a.isScrolling,g=a.isVisible,h=a.key,i=c.props.rowRenderer,j=Object.getOwnPropertyDescriptor(e,"width");if(j&&j.writable)e.width="100%";return i({index:d,style:e,isScrolling:f,isVisible:g,key:h,parent:b})}),yn(tn(c),"_setRef",function(a){c.Grid=a}),yn(tn(c),"_onScroll",function(a){var b=a.clientHeight,d=a.scrollHeight,e=a.scrollTop;(0,c.props.onScroll)({clientHeight:b,scrollHeight:d,scrollTop:e})}),yn(tn(c),"_onSectionRendered",function(a){var b=a.rowOverscanStartIndex,d=a.rowOverscanStopIndex,e=a.rowStartIndex,f=a.rowStopIndex;(0,c.props.onRowsRendered)({overscanStartIndex:b,overscanStopIndex:d,startIndex:e,stopIndex:f})}),c}return xn(b,a),rn(b,[{key:"forceUpdateGrid",value:function(){if(this.Grid)this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(a){var b=a.alignment,c=a.index;if(this.Grid){return this.Grid.getOffsetForCell({alignment:b,rowIndex:c,columnIndex:0}).scrollTop}return 0}},{key:"invalidateCellSizeAfterRender",value:function(a){var b=a.columnIndex,c=a.rowIndex;if(this.Grid)this.Grid.invalidateCellSizeAfterRender({rowIndex:c,columnIndex:b})}},{key:"measureAllRows",value:function(){if(this.Grid)this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.columnIndex,c=void 0===b?0:b,d=a.rowIndex,e=void 0===d?0:d;if(this.Grid)this.Grid.recomputeGridSize({rowIndex:e,columnIndex:c})}},{key:"recomputeRowHeights",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.Grid)this.Grid.recomputeGridSize({rowIndex:a,columnIndex:0})}},{key:"scrollToPosition",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.Grid)this.Grid.scrollToPosition({scrollTop:a})}},{key:"scrollToRow",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.Grid)this.Grid.scrollToCell({columnIndex:0,rowIndex:a})}},{key:"render",value:function(){var a=this.props,b=a.className,c=a.noRowsRenderer,e=a.scrollToIndex,f=a.width,g=Nn("ReactVirtualized__List",b);return d.createElement(no,Kn({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:g,columnWidth:f,columnCount:1,noContentRenderer:c,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:e}))}}]),b}(d.PureComponent),yn(ro,"propTypes",1?null:0),so);yn(to,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:function(a){var b=a.cellCount,c=a.overscanCellsCount,d=a.scrollDirection,e=a.startIndex,f=a.stopIndex;if(c=Math.max(1,c),1===d)return{overscanStartIndex:Math.max(0,e-1),overscanStopIndex:Math.min(b-1,f+c)};else return{overscanStartIndex:Math.max(0,e-c),overscanStopIndex:Math.min(b-1,f+1)}},overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var uo=wc(7678),vo=wc.n(uo),wo=wc(5456),xo=wc.n(wo),yo=wc(3178),zo=wc.n(yo),Ao=wc(6766),Bo=wc.n(Ao),Co=wc(9497),Do=wc.n(Co),Eo=wc(8441),Fo=wc.n(Eo),Go=wc(348),Ho=wc.n(Go),Io=wc(5207),Jo=wc.n(Io),Ko=wc(7770),Lo=wc.n(Ko),Mo=wc(973),No=wc.n(Mo),Oo=wc(7863),Po=wc.n(Oo),Qo=wc(748),Ro=wc.n(Qo),So=wc(7611),To=wc.n(So),Uo=wc(1191),Vo=wc(1985),Wo=wc(2412),Xo=wc.n(Wo),Yo=wc(8784),Zo=wc.n(Yo),$o=wc(9479),_o=wc.n($o),ap=wc(2935),bp=wc.n(ap),cp="RcMJ2Ku1Fn6QvZ_hqCqYJ",dp="_3CaVnu2f4Ntn0YKNJkkez9",ep="_2_un6hk2ZlJprvfQvv1OxO",fp="_3KSrwNLJMsSQ37E-IwFN9b",gp="_1IUOCaIAziLcNcNYncCjgE",hp="_2zo7abr4OSAGoVeg4-CBEw",ip="_3VJVaUl2-0PbpLHD7eT6Hi",jp="_1ZHW7Gf6NbNygzrBiuw2ju",kp="_3lm7_vrVeBpNmmFHyphXn0",lp="_293CEmNgOZrtjKj2HJtFpr",mp="calendar",np="task",op="note",pp=function(a){a.stopPropagation(),a.preventDefault()},qp=function(a){var b,f=a.fdIsShown,g=(0,d.useRef)(null),h=(0,d.useState)(!1),j=h[0],k=h[1],l=function(){k(!1)},m=function(a){k(!0),(0,Vo.setIsShownFakeDoor)(!0),i().send("click_productivity_button",{dwh:{type:a}})};if(El(g,l),f&&!j)return null;return e().createElement("div",{className:j?dp:cp,onClick:pp,onMouseDown:pp},e().createElement("div",{className:ca()(ep,(b={},b[fp]=j,b))},e().createElement("div",{className:gp,"data-title":i18n("Создать событие"),onClick:function(){return m(mp)}},e().createElement(c.Icon,{icon:Xo()})),e().createElement("div",{className:gp,"data-title":i18n("Создать задачу"),onClick:function(){return m(np)}},e().createElement(c.Icon,{icon:_o()})),e().createElement("div",{className:lp},e().createElement(c.Tooltip,{visible:j,placement:"bottomRight",arrowMode:"soft",arrow:!0,overlayContainer:document.body,showByClick:!0,overlay:function(){return e().createElement("div",{className:hp,ref:g},e().createElement("div",{className:kp,onClick:l},e().createElement(c.Icon,{icon:Zo()})),e().createElement("div",{className:ip},"Пока не работает"),e().createElement("div",{className:jp},"Создать событие, задачу или заметку сейчас нельзя. Мы проверяем, интересно ли это пользователям."))}})),e().createElement("div",{className:gp,"data-title":i18n("Создать заметку"),onClick:function(){return m(op)}},e().createElement(c.Icon,{icon:bp()}))))},rp=new Gd.k("llc");function sp(){var a,b,c,d,f,g,h=this.props,i=h.model,j=h.model,k=this.getSubject(),l=this.getSnippetValue(),m=this.getGoToActionDisplayMode(),n="none"===m?this.getPaymentDieDisplayMode():"none",o=h["pony-mode"],q=this.getTransactionMetadata(),r="none"===m&&this.showOrder(h.model,q),s=this.getUnsubscribeSender(),t="none"===m&&this.shouldShowUniversalPaymentDie(),u=(0,Yc.isListLetterActionButtonsEnabled)(i,h.search),v=p.ENABLE_TAGS&&!this.getCounter(),w=p.ENABLE_TAGS&&i.is("flags.tags")&&!!i.get("flags.tags").length,x=!!(null===(b=null==i?void 0:i.isSchedule)||void 0===b?void 0:b.call(i)),y=this.letterDate(i.get("date"),x),z=i.getFolder(),A=this.getSearchAttaches(),B=this.getAllAttaches(),C=this.getAttachesModes(!1,B,A),D=null===(c=this.getAttaches(C,B,A))||void 0===c?void 0:c.attachesList,E=null===(d=this.getAttaches(C,B,A))||void 0===d?void 0:d.moreAttachesList,F=this.state.messagesAttaches,G=h["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===m,H=this.getAttachesModes(!1,F),I=this.getAttaches(H,F),J=this.getCategory(),K=this.state.fdIsShown;return e().createElement("a",{style:h.style,"data-qa-id":(0,wa.qa)(this.rootQaId()),"data-qa-index":(0,wa.qa)(j.meta("_ui-index")),"data-qa-safe":(0,wa.qa)(String(h.isReliable)),"data-qa-official":(0,wa.qa)(String(h.isOfficial)),className:rp.root({"enable-user-select":h["enable-user-select"],"pony-mode":o,"has-indent":h.indent,normal:!h.indent,active:h.selected,firstSelected:h.isFirstSelected,lastSelected:h.isLastSelected,first:h.first,last:h.last,new:!0,"new-selection":!0,reliable:h.isImportantReliable,official:h.isOfficialGreen},{addClass:["js-letter-list-item","js-tooltip-direction_letter-bottom"]}),onDragStart:(0,Wc.CH)(this,{name:"unused",prevent:!0}),onClick:(0,Wc.CH)(this,"click"),onContextMenu:(0,Wc.CH)(this,"contextmenu"),href:h.href?h.href:null,tabIndex:-1,"data-id":i.get("id"),"data-draggable-id":i.get("id"),"data-uidl-id":i.get("last")},e().createElement("div",{className:rp.elem("background",{active:h.selected})}),e().createElement("div",{"data-qa-id":(0,wa.qa)("unread"),className:rp.elem("read-status",{"pony-mode":o,small:!0})},e().createElement(bi,{state:i.is("flags.unread"),"is-forwarded":i.is("flags.forward"),"is-replied":i.is("flags.reply"),model:i,remitEvents:{toggle:{prevent:!0,name:zf.unread}},remitDetails:{model:i},broadcastEvent:(0,Wc.Yv)(this)})),e().createElement("div",{"data-qa-id":(0,wa.qa)("avatar"),className:rp.elem("avatar",{"pony-mode":o,unread:i.is("flags.unread")})},e().createElement(zh,{state:h.selected,disabledHover:h["disable-avatar-hover"],disabled:h["disable-select"],centered:!0,imgUrl:this.getImageSrc(),verified:h.isReliable,official:h.isOfficial,darkMode:h.darkMode,size:"common",remitEvents:{toggle:{prevent:!0,name:zf.clickAvatar}},broadcastEvent:(0,Wc.Yv)(this)})),e().createElement("div",{className:rp.elem("container")},e().createElement("div",{className:rp.elem("content",{"pony-mode":o})},e().createElement("div",{className:rp.elem("item",{correspondent:!0,unread:i.is("flags.unread")})},e().createElement(Fh,{"qa-id":(0,wa.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),e().createElement("div",{"data-qa-id":(0,wa.qa)("flagged"),className:rp.elem("item",{flag:!0})},e().createElement(Lh,{priority:h.priority,important:this.isImportant(),state:i.is("flags.flagged"),remitEvents:{toggle:{prevent:!0,name:zf.flagged}},remitDetails:{model:i},broadcastEvent:(0,Wc.Yv)(this)})),this.hasBadge()&&e().createElement("div",{"data-qa-id":(0,wa.qa)("letter:badge"),className:rp.elem("item",{badge:!0})},e().createElement(bb.Z,{counter:this.getCounter(),unread:i.is("flags.unread"),component:Dg()})),e().createElement("div",{ref:this.subjectRef,className:rp.elem("item",{title:!0})},!h["disable-subject"]&&e().createElement("span",{className:rp.elem("subject",{unread:i.is("flags.unread")})},e().createElement(bb.Z,{key:k,inlineRoot:!0,subject:k,color:h.search?i.meta("search_subject.color"):null,search:h.search,component:Rg()})),e().createElement("span",{"data-qa-id":(0,wa.qa)("snippet"),className:rp.elem("snippet")},e().createElement(bb.Z,{key:l,inlineRoot:!0,value:l,color:h.search?i.meta("search_snippet.color"):null,search:h.search,component:Pg()})),e().createElement("div",null)),(v||w)&&e().createElement("div",{className:rp.elem("item",{tags:!0})},e().createElement(hi,{model:i,tags:i.get("flags.tags"),folder:h.showfolder&&z.get("name"),readonly:!v})),"compact"===n&&e().createElement("div",{className:rp.elem("item")},e().createElement(bb.Z,{model:h.model,standalone:!0,"layout-mode":"2pane","pony-mode":h["pony-mode"],component:Hg()})),s&&e().createElement(bb.Z,{"layout-mode":"2pane","pony-mode":o,unsubscribeSender:s,model:i,useMediators:["unsubscribe-actions","themes-manager"],component:Tg()}),h.showfolder&&!w&&e().createElement("div",{className:rp.elem("item",(a={folder:!0},a["hide-on-hover"]=v,a))},(null===(f=null==i?void 0:i.isSchedule)||void 0===f?void 0:f.call(i))?e().createElement(e().Fragment,null,e().createElement(bb.Z,{title:(0,qg.scheduleDate)(i.get("send_date")),text:z.get("name"),"data-qa-id":(0,wa.qa)("folder"),component:Fg()})):e().createElement(bb.Z,{title:z.get("name"),text:z.get("name"),"data-qa-id":(0,wa.qa)("folder"),component:Fg()})),e().createElement("div",{className:rp.elem("secondary-data")},p.SHOW_FD_CALENDAR_EXP_LETTER_LIST&&!i.is("flags.attach")&&!p.ENABLE_TAGS&&e().createElement(qp,{fdIsShown:K}),!!J&&e().createElement("div",{className:rp.elem("item",{category:!0})},e().createElement(bb.Z,{flat:!0,short:!0,name:J,component:od()})),p.ENABLE_MENTIONS&&(i.is("flags.mention")||i.is("flags.mention_unread"))&&e().createElement("div",{className:rp.elem("item",{mention:!0})},e().createElement(Xh,{unread:i.is("flags.mention_unread")})),!h["disable-attach"]&&i.is("flags.attach")&&e().createElement("div",{className:rp.elem("item",{"attach-status":!0})},e().createElement(bb.Z,{component:Ai(),small:!0,model:h.model,useMediators:["attachments-manager","pony-mode"]})),!h.showfolder&&!!(null===(g=null==i?void 0:i.isSchedule)||void 0===g?void 0:g.call(i))&&e().createElement("div",{className:rp.elem("item")},e().createElement(bb.Z,{date:i.get("send_date"),component:Ng()}))),e().createElement("div",{title:this.getDateTooltip(x),"data-qa-id":(0,wa.qa)("time:".concat(y)),className:rp.elem("item",{date:!0})},y)),"full"===n&&e().createElement("div",{className:rp.elem("payment-die-container")},e().createElement(bb.Z,{fluid:!0,model:h.model,"layout-mode":"2pane",component:Jg()})),D&&B&&e().createElement(bb.Z,{fluid:!0,model:h.model,"attaches-list":D,"more-attaches-list":E,"layout-mode":"2pane","all-count":B.length,vertical:C.vertical,"pony-mode":o,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,Wc.Yv)(this),component:Ei()}),G&&e().createElement(e().Fragment,null,F?e().createElement(bb.Z,{fluid:!0,key:"list-letter-preview-attaches",component:Ei(),model:h.model,"attaches-list":I.attachesList,"more-attaches-list":I.moreAttachesList,"layout-mode":"2pane","all-count":F.length,vertical:H.vertical,"pony-mode":o,remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,Wc.Yv)(this)}):e().createElement(e().Fragment,null,e().createElement(bb.Z,{fluid:!0,key:"list-letter-preview-stub",attachesCount:i.get("attachments_count"),isCompact:!1,"pony-mode":o,component:Gi()}))),q&&r&&e().createElement(bb.Z,{fluid:!0,component:Ci(),useMediators:["orders-manager"],metadata:q,"pony-mode":o}),t&&e().createElement(bb.Z,{fluid:!0,component:Lg(),model:h.model,"layout-type":h["layout-mode"],"pony-mode":o}),"none"!==m&&e().createElement(Uh,{model:i,meta:this.goToActionMetadata,layoutMode:"2pane",mode:m}),u&&e().createElement(Ni,{model:i,ponyMode:o,broadcastEvent:(0,Wc.Yv)(this)})),h.fromThread||!h.hideDelimeter&&e().createElement(bb.Z,{component:zg(),full:h["full-delimiter"],ponymode:o,indent:h.indent,indentRight:!0}),e().createElement(bb.Z,{component:zg(),ponymode:o,indent:h.indent,indentRight:!0,last:!0}))}var tp=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),up=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.subjectRef=e().createRef(),c.getSubject=ug.getSubject,c.getImageSrc=ug.getImageSrc,c.isProbablyPhishing=ug.isProbablyPhishing,c.isCorrespondentDangerous=ug.isCorrespondentDangerous,c.getCorrespondent=ug.getCorrespondent,c.getCorrespondentTooltip=ug.getCorrespondentTooltip,c.getDateTooltip=ug.getDateTooltip,c.getCounter=ug.getCounter,c.getCategory=ug.getCategory,c.getAllAttaches=sg.getAllAttaches,c.getSearchAttaches=sg.getSearchAttaches,c.getAttaches=rg.getAttaches,c.getAttachesModes=tg.getAttachesModes,c.isImportant=ug.isImportant,c.getSnippetValue=ug.getSnippetValue,c.getPaymentDieDisplayMode=vg.getPaymentDieDisplayMode,c.getGoToActionDisplayMode=og.getGoToActionDisplayMode,c.shouldShowUniversalPaymentDie=vg.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=vg.shouldHideTransactionCategory,c.showOrder=wg.showOrder,c.getTransactionMetadata=wg.getTransactionMetadata,c.rootQaId=ug.rootQaId,c.letterDate=qg.letterDate,c.getUnsubscribeSender=ug.getUnsubscribeSender,c.handleIntersectViewport=ug.handleIntersectViewport,c.render=sp,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c.state={fdIsShown:Uo.fakeDoorUserState.get().isShown},c}return tp(b,a),b.prototype.componentDidMount=function(){var a=this;this.unsubscribe=Uo.fakeDoorUserState.subscribe(function(b){var c=b.isShown;a.setState({fdIsShown:c})})},b.prototype.componentDidUpdate=function(){var a;(0,pg.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.componentWillUnmount=function(){this.unsubscribe()},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,pg.emojiFallback)(null===(a=this.subjectRef)||void 0===a?void 0:a.current,"r-ll-cmn")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case zf.flagged:return void vc()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case zf.unread:return void vc()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case zf.clickAvatar:vc()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===vg.getPaymentDieDisplayMode.call(this)},b.defaultProps={"layout-mode":"2pane"},b}(e().Component),vp=(0,Wc.v$)("list-letter-common",up),wp=function(){return(wp=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},xp=new Gd.k("llct"),yp=function(a){var b=a.children,c=a.enabled,d=a.className;return c?e().createElement("div",{className:d},b):e().createElement(e().Fragment,null,b)};function zp(){var a,b,c,d,f=wp(wp({},this.props),this.state),g=f.model,h=f.indent,i=f["pony-mode"],j=f.messagesAttaches,k=this.getSubject(),l=this.getGoToActionDisplayMode(),m="none"===l?this.getPaymentDieDisplayMode():"none",n=this.getUnsubscribeSender(),o="none"===l&&this.shouldShowUniversalPaymentDie(),q=this.getAttachesModes(!0,j),r=this.getAttaches(q,j),s=(0,Yc.isListLetterActionButtonsEnabled)(g,f.search),t=!!(null===(d=null==g?void 0:g.isSchedule)||void 0===d?void 0:d.call(g)),u=g.getFolder(),v=t?(0,qg.scheduleDate)(g.get("send_date")):u.get("name"),w=g.is("flags.attach"),x=g.is("flags.flagged"),y=p.ENABLE_TAGS&&!this.getCounter(),z=p.ENABLE_TAGS&&g.is("flags.tags")&&!!g.get("flags.tags").length,A=(y||z)&&!f.showfolder,B=n&&!o&&"none"===m,C=f["show-attaches"]&&this.getAttachesPreviewCondition()&&"none"===l;f["show-attaches"]&&this.getAttachesPreviewCondition();var D=!("none"!==l||z&&!f.search||o||(f.search||B)&&i),E="full"===m?f["payment-die-with-indent"]:"",F=i||s||z||p.ENABLE_TAGS,G="full"!==l&&(i||!o&&!B&&s),H=this.getCategory(),I=this.hasBadge()&&e().createElement("div",{"data-qa-id":(0,wa.qa)("letter:badge"),className:xp.elem("badge")},e().createElement(bb.Z,{counter:this.getCounter(),compact:!0,unread:g.is("flags.unread"),component:Dg()})),J=this.getSnippetValue();return e().createElement("a",{style:f.style,"data-qa-id":(0,wa.qa)(this.rootQaId()),"data-qa-safe":(0,wa.qa)(String(f.isReliable)),"data-qa-official":(0,wa.qa)(String(f.isOfficial)),"data-qa-index":(0,wa.qa)(g.meta("_ui-index")),onClick:(0,Wc.CH)(this,"click"),onDragStart:(0,Wc.CH)(this,{prevent:!0,name:"unused"}),onContextMenu:(0,Wc.CH)(this,"contextmenu"),className:xp.root({"enable-user-select":f["enable-user-select"],"pony-mode":i,"has-indent":h,active:f.selected||f.active,selected:f.selected,open:f.active,first:f.first,last:f.last,firstSelected:f.isFirstSelected,lastSelected:f.isLastSelected,new:!0,"new-selection":!0,reliable:f.isImportantReliable,official:f.isOfficialGreen,"small-snippet":G},{addClass:["js-letter-list-item"]}),href:f.href,tabIndex:-1,"data-id":g.get("id"),"data-draggable-id":g.get("id"),"data-uidl-id":g.get("last")},e().createElement("div",{className:xp.elem("container",{"pony-mode":i,"small-snippet-container":G})},e().createElement("div",{className:xp.elem("background",{active:f.selected||f.active})}),e().createElement("div",{className:xp.elem("header")},e().createElement("div",{"data-qa-id":(0,wa.qa)("unread"),className:xp.elem("read-status")},e().createElement(bi,{state:g.is("flags.unread"),"is-forwarded":g.is("flags.forward"),"is-replied":g.is("flags.reply"),model:g,shift:i,remitEvents:{toggle:{prevent:!0,name:zf.unread}},remitDetails:{model:g},broadcastEvent:(0,Wc.Yv)(this)})),e().createElement("div",{"data-qa-id":(0,wa.qa)("avatar"),className:xp.elem("avatar",{unread:g.is("flags.unread")})},e().createElement(zh,{state:f.selected,imgUrl:this.getImageSrc(),darkMode:this.props.darkMode,verified:f.isReliable,official:f.isOfficial,size:i?"common":"compact",remitEvents:{toggle:{prevent:!0,name:zf.clickAvatar}},broadcastEvent:(0,Wc.Yv)(this)}))),e().createElement("div",{className:xp.elem("content",{unread:g.is("flags.unread")})},e().createElement("div",{className:xp.elem("row",{top:!0})},e().createElement("div",{className:xp.elem("correspondent",{new:!0})},e().createElement(Fh,{"qa-id":(0,wa.qa)("correspondent"),state:this.getCorrespondent(),title:this.getCorrespondentTooltip(),dangerous:this.isCorrespondentDangerous()})),e().createElement("div",{className:xp.elem("secondary-data")},!!H&&e().createElement("div",{className:xp.elem("panel-item",{category:!0})},e().createElement(bb.Z,{flat:!0,short:!0,name:H,size:"m",component:od()})),t&&e().createElement("div",{className:xp.elem("panel-item")},e().createElement(bb.Z,{date:g.get("send_date"),component:Ng(),key:"list-letter-schedule-status"})),p.ENABLE_MENTIONS&&(g.is("flags.mention")||g.is("flags.mention_unread"))&&e().createElement("div",{className:xp.elem("panel-item")},e().createElement(Xh,{unread:g.is("flags.mention_unread")})),w&&!f["disable-attach"]&&e().createElement("div",{className:xp.elem("panel-item",{"attach-status":!0})},e().createElement(bb.Z,{component:Bg(),compact:!0,key:"list-letter-attach-status"})),e().createElement("div",{title:this.getDateTooltip(t),className:xp.elem("date",{new:!0})},(0,qg.letterDate)(g.get("date"),t)),e().createElement("div",{className:xp.elem("flag",{new:!0})},e().createElement(Lh,{hideInactive:!0,priority:f.priority,important:this.isImportant(),state:x,remitEvents:{toggle:{prevent:!0,name:zf.flagged}},remitDetails:{model:g},broadcastEvent:(0,Wc.Yv)(this)})))),e().createElement("div",{className:xp.elem("row",{middle:!0,search:f.search,columns:F}),ref:this.contentRowRef},!F&&I,e().createElement(yp,{enabled:F,className:xp.elem("main-content")},!f["disable-subject"]&&e().createElement("div",{"data-qa-id":(0,wa.qa)("subject"),title:this.getSubjectTooltip(),className:xp.elem("subject")},e().createElement(bb.Z,{key:k,inlineRoot:!0,subject:k,color:f.search?g.meta("search_subject.color"):null,search:f.search,component:Rg()})),D&&e().createElement("div",{"data-qa-id":(0,wa.qa)("snippet"),className:xp.elem("snippet",(a={search:f.search,overflow:B},a["hide-on-hover"]=y&&!f.search,a))},e().createElement(bb.Z,{key:J,inlineRoot:!0,value:J,color:f.search?g.meta("search_snippet.color"):null,search:f.search,component:Pg()})),e().createElement("div",{className:xp.elem("content-buttons")},o&&e().createElement(bb.Z,{className:xp.elem("content-button-wrapper"),fluid:!0,model:f.model,"layout-type":f["layout-mode"],"pony-mode":i,component:Lg(),"pud-fluid":!0}),"none"!==l&&e().createElement("div",{className:xp.elem("content-button-wrapper",{fluid:!0})},e().createElement(Uh,{model:g,meta:this.goToActionMetadata,layoutMode:"3pane",mode:l})),B&&e().createElement(bb.Z,{className:xp.elem("content-button-wrapper"),fluid:!0,"layout-mode":"3pane","pony-mode":i,unsubscribeSender:n,model:g,useMediators:["unsubscribe-actions","themes-manager"],component:Tg()}),A&&e().createElement("div",{className:xp.elem("tags")},e().createElement(hi,{model:g,tags:g.get("flags.tags"),rightSideDropdown:!0,compact:i&&!f.search,readonly:!y})))),F&&I),f.showfolder&&!z&&e().createElement("div",{className:xp.elem("folder",(b={},b["hide-on-hover"]=y&&!z,b))},e().createElement(bb.Z,{title:v,text:u.get("name"),"data-qa-id":(0,wa.qa)("folder"),component:Fg()})),f.showfolder&&e().createElement("div",{className:xp.elem("folder-tags",(c={hidden:!z},c["show-on-hover"]=y&&!z,c))},e().createElement(hi,{model:g,tags:g.get("flags.tags"),folder:u.get("name"),rightSideDropdown:!0})))),m&&"none"!==m&&e().createElement("div",{className:xp.elem("payment-die-container",{noindent:!1===E,"pony-mode":i,compact:"compact"===m,metathread:f["in-metathread"]})},"compact"===m&&e().createElement(bb.Z,{model:f.model,standalone:!0,"layout-mode":"3pane","pony-mode":i,component:Hg()}),"full"===m&&e().createElement(bb.Z,{model:f.model,"layout-mode":"3pane","icon-container-mode":!1===E?"wide":"narrow",component:Jg()})),C&&e().createElement(e().Fragment,null,j?e().createElement(bb.Z,{fluid:!0,model:f.model,"attaches-list":r.attachesList,"more-attaches-list":r.moreAttachesList,"layout-mode":"3pane","all-count":j.length,vertical:q.vertical,"pony-mode":i,metathread:f["in-metathread"],remitEvents:{attach:"previewattach",more:"previewattach",moreinvalid:"openletter"},broadcastEvent:(0,Wc.Yv)(this),key:"list-letter-preview-attaches",component:Ei()}):e().createElement(e().Fragment,null,e().createElement(bb.Z,{fluid:!0,attachesCount:g.get("attachments_count"),isCompact:!0,"pony-mode":i,metathread:f["in-metathread"],key:"list-letter-preview-stub",component:Gi()}))),s&&e().createElement(Ni,{compact:!0,model:g,ponyMode:i,broadcastEvent:(0,Wc.Yv)(this)}),!f.hideDelimeter&&e().createElement(bb.Z,{compact:!0,full:f["full-delimiter"],ponymode:i,indent:f.indent,indentRight:!0,component:zg()}),e().createElement(bb.Z,{last:!0,compact:!0,ponymode:i,indent:f.indent,indentRight:!0,component:zg()}))}var Ap=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Bp=function(a){function b(b){var c=a.call(this,b)||this;return c.state={},c.contentRowRef=e().createRef(),c.getSubject=ug.getSubject,c.getImageSrc=ug.getImageSrc,c.isProbablyPhishing=ug.isProbablyPhishing,c.isCorrespondentDangerous=ug.isCorrespondentDangerous,c.getCorrespondent=ug.getCorrespondent,c.getCorrespondentTooltip=ug.getCorrespondentTooltip,c.getDateTooltip=ug.getDateTooltip,c.getSubjectTooltip=ug.getSubjectTooltip,c.getSnippetValue=ug.getSnippetValue,c.getCounter=ug.getCounter,c.getCategory=ug.getCategory,c.getAttaches=rg.getAttaches,c.getAttachesModes=tg.getAttachesModes,c.isImportant=ug.isImportant,c.getGoToActionDisplayMode=og.getGoToActionDisplayMode,c.getPaymentDieDisplayMode=vg.getPaymentDieDisplayMode,c.shouldShowUniversalPaymentDie=vg.shouldShowUniversalPaymentDie,c.shouldHideTransactionCategory=vg.shouldHideTransactionCategory,c.getUnsubscribeSender=ug.getUnsubscribeSender,c.handleIntersectViewport=ug.handleIntersectViewport,c.rootQaId=ug.rootQaId,c.letterDate=qg.letterDate,c.render=zp,c.meta=b.model.getPaymentMeta(),c.goToActionMetadata=b.model.getGoToActionMeta(),c}return Ap(b,a),b.prototype.componentDidUpdate=function(){var a;(0,pg.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.didMount=function(){var a;this.handleIntersectViewport(),(0,pg.emojiFallback)(null===(a=this.contentRowRef)||void 0===a?void 0:a.current,"r-ll-cmp")},b.prototype.handleInnerEvent=function(a){var b=this.props.model;switch(a.type){case zf.flagged:return void vc()(["letters_letter-item","toggle_flagged_".concat(!b.get("flags.flagged"))]);case zf.unread:return void vc()(["letters_letter-item","toggle_unread_".concat(!b.get("flags.unread"))]);case zf.clickAvatar:vc()(["letters_letter-item",this.props.selected?"deselect":"select"])}},b.prototype.getAttachesPreviewCondition=function(){return!(this.state.fetchAttaches&&!this.state.messagesAttaches)&&"none"===vg.getPaymentDieDisplayMode.call(this)},b.prototype.hasBadge=function(){return!this.props["disable-subject"]&&!!this.getCounter()},b.prototype.getAvatarIndent=function(){if(this.props["pony-mode"])if(this.props.indent)return"left";else return"right";return!1},b.defaultProps={"layout-mode":"3pane"},b}(e().Component),Cp=(0,Wc.v$)("list-letter-compact",Bp,{syncMediatorsOnRender:!1}),Dp=wc(3316),Ep=wc(3248),Fp=wc.n(Ep),Gp=wc(9834),Hp=wc.n(Gp),Ip=wc(7400),Jp=wc.n(Ip);function Kp(a){var b=this.props,c=b.model,d=b.ponymode,f=b.first,g=b.last,h=b.compact,i=b.selected,j=b.router,k=c.isExpanded(),l=this.state["short-dropdown"],m=this.state["short-text"];switch(!0){case!h:return e().createElement(bb.Z,{expanded:k,first:f,last:g,model:c,"pony-mode":d,selected:i,isFirstSelected:b.isFirstSelected,isLastSelected:b.isLastSelected,"has-selected":b["has-selected"],"short-text":m,sticky:a,touch:b.touch,newSelection:b.newSelection,smallUnreadBtn:!0,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself",disable:"click:disable"},broadcastEvent:(0,Wc.Yv)(this),remitDetails:c,component:Fp(),router:j,redirectUrl:p.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-common"});case h&&k:return e().createElement(bb.Z,{first:f,last:g,model:c,"pony-mode":d,selected:i,isFirstSelected:b.isFirstSelected,isLastSelected:b.isLastSelected,"has-selected":b["has-selected"],"short-dropdown":l,sticky:a,touch:b.touch,newSelection:b.newSelection,smallUnreadBtn:!0,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself",disable:"click:disable"},broadcastEvent:(0,Wc.Yv)(this),remitDetails:c,component:Jp(),router:j,redirectUrl:p.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-compact-expanded"});default:return e().createElement(bb.Z,{first:f,last:g,model:c,"pony-mode":d,selected:i,isFirstSelected:b.isFirstSelected,isLastSelected:b.isLastSelected,"short-dropdown":l,newSelection:b.newSelection,smallUnreadBtn:!0,touch:b.touch,useMediators:["letters-actions","folders-actions","folders-navigation"],remitEvents:{click:"click:metathread-item",contextmenu:"rightclick",avatar:"click:metathreadavatar",link:"click:metathread-link",cleanmaster:"click:cleanmaster",scrollintoself:"scrollintoself"},broadcastEvent:(0,Wc.Yv)(this),remitDetails:c,component:Hp(),router:j,redirectUrl:p.METATHREAD_REDIRECT&&this.getUrl(),key:"metathread-head-compact"})}}var Lp=new Gd.k("metathread");function Mp(){var a=this.props,b=a.model,c=a.ponymode,d=a.first,f=a.last,g=a.compact,h=a.selected,i=a.disableSpacer,j=b.isExpanded(),k=this.isStickyEnabled()&&j&&a.sticky;return e().createElement("div",{style:a.style,className:Lp.root({first:d,last:f,expanded:j,collapsed:!j,sticky:k,"first-sticky":d&&k,active:h,"new-selection":a.newSelection,firstSelected:a.isFirstSelected,lastSelected:a.isLastSelected}),onContextMenu:(0,Wc.CH)(this,"contextmenu")},!d&&!i&&e().createElement("div",{className:Lp.elem("spacer")}),e().createElement("div",{className:Lp.elem("contain"),ref:this.containRef},this.renderMetathreadBlock(k),!a.hideDelimeter&&e().createElement(bb.Z,{full:j,compact:g,ponymode:c,"data-qa-id":(0,wa.qa)("qqq1"),indentRight:a.newSelection,component:zg()}),!a.newSelection&&e().createElement(bb.Z,{last:!0,compact:g,ponymode:c,"data-qa-id":(0,wa.qa)("qqq2"),indentRight:a.newSelection,component:zg()})))}var Np,Op=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Pp=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.containRef=e().createRef(),b.events={"click:metathread-item":"onMetathreadItemClick",scrollintoself:"scrollIntoSelf"},b.state={},b.getUrl=Dp.block.getUrl.bind(b),b.onMetathreadItemClickRedirect=Dp.block.onMetathreadItemClickRedirect.bind(b),b.onMetathreadItemClick=Dp.block.onMetathreadItemClick.bind(b),b.scrollIntoSelf=Dp.block.scrollIntoSelf.bind(b),b.isStickyEnabled=Dp.block.isStickyEnabled,b.renderMetathreadBlock=Kp,b.render=Mp,b}return Op(b,a),b.prototype.componentDidMount=function(){var a;(0,pg.emojiFallback)(null===(a=this.containRef)||void 0===a?void 0:a.current,"r-mtr")},b.prototype.componentDidUpdate=function(){var a;(0,pg.emojiFallback)(null===(a=this.containRef)||void 0===a?void 0:a.current,"r-mtr")},b}(e().Component),Qp=(0,Wc.v$)("metathread",Pp),Rp=!(!window.performance||"function"!=typeof performance.now||"function"!=typeof requestAnimationFrame),Sp=function(a,b,c){if(void 0===c)c={measureFps:!0,silent:!1};var d=this;this.component=a,this.name=b,this.options=c,this.mounted=function(){(0,Wc.pd)(d.component).broadcast("scrollable:mount",{scrollableElement:d.component.getScrollableEl(),name:d.name})},this.unmounted=function(){(0,Wc.pd)(d.component).broadcast("scrollable:unmount",{scrollableElement:d.component.getScrollableEl(),name:d.name}),delete d.component,window.clearTimeout(d._scrollingPid)},this.handleScroll=function(){if(!d.options.silent)(0,Wc.pd)(d.component).broadcast("scroll:change");if(Rp&&d.options.measureFps){if(!d._scrollingPid)d._scrollingFrames=0,d._scrollingStartTs=performance.now(),requestAnimationFrame(d.handleAnimationFrame);window.clearTimeout(d._scrollingPid),d._scrollingPid=window.setTimeout(d.handleScrollEnd,200)}},this.handleScrollEnd=function(){delete d._scrollingPid;var a=(performance.now()-d._scrollingStartTs)/1e3,b=Math.round(d._scrollingFrames/a);if(vc()({type:"fps_scroll_".concat(d.name),value:b,intervals:[["new",b]]}),p.IS_DEBUG)console.log("FPS",d.name,b);(0,Wc.pd)(d.component).broadcast("scroll:end")},this.handleAnimationFrame=function(){if(d._scrollingPid)d._scrollingFrames++,requestAnimationFrame(d.handleAnimationFrame)}},Tp="_1m5uryaWr_PmTQwTKgydf_",Up="_29RYYLK9KxqKFihwIfEQr_",Vp="_3Sjr0E9K1fxOKRTJZ7iy6-",Wp="JCa22DvD8NGFYyrDy_3k0",Xp="_22oo5Jw76aH7Lp2x0dkTaj",Yp="VYmG5ahAslUPGaE0E2k2X",Zp="_2DJwXZy25x4HEF_r6bIjiG",$p="_1qD1jUuUWka8LTJXa3_2qk",_p=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),aq=function(){return(aq=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},bq=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(mn.blockDescription.events),!0),cq=Ud().getScope("dataset-letters");!function(a){a.heightChange="height:change",a.heightChangeClearCache="height:change:clear",a.heightChangeImmediate="height:change:immediate"}(Np||(Np={}));var dq=new Gd.k("dataset-letters"),eq=function(a){var b=a.enabled,c=a.children;if(!b)return e().createElement(e().Fragment,null,c);else return e().createElement("div",{className:Wp},c)},fq=function(a){var b,c=a.ponyMode,d=a.compact,f=a.withScrollbar,g=a.overEmpty,h=a.folder,j=a.parentFolder,k=a.broadcastEvent;return e().useEffect(function(){i().send("back-to-parent-show",{dwh:{pos:"letters",folder:h.id,parentFolder:j.id}})},[h.id,j.id]),e().createElement("span",{className:ca()(Vp,(b={},b[$p]=c,b[Zp]=d,b[Xp]=f,b[Yp]=g,b))},e().createElement(bb.Z,{component:ed(),remitEvents:{click:{name:"back:to:parent:folder"}},remitDetails:{pos:"letters"},broadcastEvent:k,text:j.get("name"),title:j.get("name"),annotation:j.get("name"),ico:"arrow-back","data-qa-id":"letter_back_to_parent_folder",compact:c,pure:!0,"ico-text-top":!0,size:"m",nowrap:!0,useMediator:["folders-navigation"]}))},gq=function(a){function b(b){var c,d=a.call(this,b)||this;if(d.state={name:"dataset-letters",darkMode:!1,withScrollbar:!1},d.list=e().createRef(),d.lastScrollTop=0,d.wasSmokescreenEnabled=!1,d.mountScrollPassed=!1,d.rootRef=e().createRef(),d.getScrollableEl=function(){return th().findDOMNode(d).querySelector(".ReactVirtualized__List")},d.scrollable=new Sp(d,"dataset-letters"),d.events=aq(aq({},mn.blockDescription.events),((c={})[Np.heightChange]="updateHeights",c[Np.heightChangeClearCache]="updateHeightsWithClear",c[Np.heightChangeImmediate]="onRecalculateFromItem",c)),d._modelHeights={},d.detectScrollbar=Dm().debounce(function(){var a=d.props.showBackToParentFolder;if(p.METATHREAD_BACK_TO_INBOX&&p.BACK_TO_PARENT_AT_LETTERS&&a){var b=d.rootRef.current;if(b){var c=b.querySelector((0,jn.selector)(".ReactVirtualized__Grid")),e=b.querySelector((0,jn.selector)(".ReactVirtualized__Grid__innerScrollContainer"));if(c&&e){var f=window.getComputedStyle(c).width,g=window.getComputedStyle(e).width;if(f.endsWith("px")&&g.endsWith("px")){var h=+f.slice(0,f.length-2)-+g.slice(0,g.length-2)>6;if(d.state.withScrollbar!==h)d.setState({withScrollbar:h})}}}}},100,d),d.getEl=function(){return th().findDOMNode(d)},d.updateHeightsWithClear=function(a){d.updateHeights(a,!0)},d.overscanIndicesGetter=function(a){var b,c=Un(a);if(c.overscanStartIndex>0){for(var e=c.overscanStartIndex-1;e>0&&(null===(b=d.props.models[e])||void 0===b?void 0:b.is("datasetModel"));e--);c.overscanStartIndex=e}return c},d.updateHeights=function(a,b){var c,e;if(void 0===b)b=!1;var f=a.details.index;if("number"==typeof f){if(null===(c=d.list.current)||void 0===c||c.invalidateCellSizeAfterRender({columnIndex:0,rowIndex:f}),b)d.cache.clear(f,0),null===(e=d.list.current)||void 0===e||e.recomputeRowHeights(f)}else(0,j.coreLoggerDispatchSelfError)("rlist-update",new Error("index should be a number"))},d.onRecalculateFromItem=function(a){var b=a.details.index;if("number"==typeof b)d.recalculateItemsFromIndex(b);else(0,j.coreLoggerDispatchSelfError)("rlist-update",new Error("index should be a number"))},d.onAvatarClick=mn.blockDescription.onAvatarClick,d.preloadThreads=mn.blockDescription.preloadThreads,d.openDraft=mn.blockDescription.openDraft,d.isLetterSelected=mn.blockDescription.isLetterSelected,d.isEnableAttach=mn.blockDescription.isEnableAttach,d.getMainField=mn.blockDescription.getMainField,d.isSearch=mn.blockDescription.isSearch,d.shouldShowLetterPreview=mn.blockDescription.shouldShowLetterPreview,d.getLetterHref=mn.blockDescription.getLetterHref,d.isPriorityMessage=mn.blockDescription.isPriorityMessage,d.onPrepareDragElement=mn.blockDescription.onPrepareDragElement,d.onRightClick=mn.blockDescription.onRightClick,d.onLetterClick=mn.blockDescription.onLetterClick,d.onPreviewAttachClick=mn.blockDescription.onPreviewAttachClick,d.setDetailsForRightClick=mn.blockDescription.setDetailsForRightClick,d.goToLetter=mn.blockDescription.goToLetter,d.isTouchDevice=mn.blockDescription.isTouchDevice,d.isModelExpandedMetathread=mn.blockDescription.isModelExpandedMetathread,d.getItemHeight=mn.blockDescription.getItemHeight,d.isLetterActive=mn.blockDescription.isLetterActive,d.onPaginatorUp=mn.blockDescription.onPaginatorUp,d.letterMediators=["letters-actions","letter-attaches-preview","layout-manager","unsubscribe-actions"],d.remitEvents={clickavatar:"click:avatar",click:"click:letter",contextmenu:"rightclick",previewattach:"click:previewattach"},d.getKey=function(a){var b,c=d.props.models[a];if(!c)return(0,j.coreLoggerDispatchSelfError)("rlist",new Error("no model for index")),"invalid";var e=c.id;if(null===(b=c.isInMetathread)||void 0===b?void 0:b.call(c))return"".concat(c.get("folder"),":").concat(e);if(gn().isSpinner(c))return"".concat(c.is("visible"),":").concat(e);else return e},d.hasAdsBefore=function(a){for(var b=d.props.models,c=0;c<a;c+=1)if(b[c].is($m.advModelLabel))return!0;return!1},d.getRowHeight=function(a){var b=a.index,c=d.props,e=c.models,f=c.compact,g=c["pony-mode"],h=e[b];if(h.is(bn.dividerModelLabel)){var i=8,j=0;if(0===h.get("idx")&&!d.hasAdsBefore(b))i=0;if(!f&&!g)j=32;else if(!f&&g)j=30;else if(f&&!g)j=28;else j=26;return j+i}if(gn().isSpinner(h)){var k=0;if(h.is("visible"))k=(0,Xm.getGenericItemHeight)(f,g);return d.cache.set(b,0,0,k),k}if((null==h?void 0:h.is("datasetModel"))||(null==h?void 0:h.is(dn.searchActionLetterLabel)))return d.cache.rowHeight({index:b});var l=d.getItemHeight(h);return d.cache.set(b,0,0,l),l},d.onScroll=function(a){if(d.lastScrollTop=a.scrollTop,d.mountScrollPassed)Ai().resetAttachmentDropdown(),d.props.onScroll(a),d.scrollable.handleScroll();else d.mountScrollPassed=!0},d.renderRow=function(a){var b=d.props.models,c=a.index,f=d.getPrevModel(b,c),g=d.getNextModel(b,c),h=b[a.index],i=(null==f?void 0:f.is("flags.bimi_important_msg"))&&p.SHOW_RELIABLE_ON_LETTER_LIST&&!p.DISABLE_GREEN_RELIABLE_ON_LETTER_LIST,j=(null==f?void 0:f.is("flags.official"))&&p.SHOW_OFFICIAL_ON_LETTER_LIST&&!p.DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST,k=!1,l=!1,m=(0,Yc.checkOfficialGreen)(h),n=(0,Yc.checkOfficial)(h);if(!m&&!n)k=(0,Yc.checkReliable)(h),l=(0,Yc.checkImportantReliable)(h);var o,q=0===c||(null==f?void 0:f.is(cn.promoBlockLabel))||(null==f?void 0:f.is(en.specProjectLetterLabel))||(null==f?void 0:f.is($m.advModelLabel))||(null==f?void 0:f.is(hn.tipLetterLabel))||(null==f?void 0:f.is(bn.dividerModelLabel))||(null==f?void 0:f.is(dn.searchActionLetterLabel)),r={index:c,search:d.isSearch(),touch:d.isTouchDevice(),isFirst:q,hideDelimeter:q||i||j||l||m||p.HIDE_DELIMITER,isLast:!1,isReliable:k,isImportantReliable:l,isOfficialGreen:m,isOfficial:n,isPrevItemExpandedMetathread:null==f?void 0:f.is("metathreadFooter"),isNextItemExpandedMetathread:d.isModelExpandedMetathread(g),isNextSelected:g&&d.isLetterSelected(g),isPrevSelected:f&&d.isLetterSelected(f)},s={useMediators:d.letterMediators,remitDetails:{model:h,index:a.index},broadcastEvent:(0,Wc.Yv)(d),style:a.style},t=function(a,b,c,d,f,g){var h,i,j;switch(!0){case a.is("heightCompensation"):return{component:Bo()};case a.is("skeletonLetter"):return{component:Fo()};case a.is(bn.dividerModelLabel):return{component:on(),title:a.get("title"),counter:a.get("counter"),compact:b.compact,ponyMode:b["pony-mode"],fit:g(),meta:a.get("meta"),id:a.get("id"),useMediators:[]};case a.is("promoBlockLetter"):return{component:Ro(),useMediators:["layout-manager","advert-manager"],remitEvents:{"promoblockletter:render":Np.heightChangeClearCache}};case a.is("welcomeBlockLetter"):return{component:Lo(),model:a,useMediators:["layout-manager","user-info","welcome-block-manager"]};case a.is("discountsBlockLetter"):return{component:vo(),discounts:b.router.model.discounts,"3pane":b.compact,search:f.search,threadsEnabled:c.threadsEnabled,router:b.router,folder:b.folder,useMediators:["layout-manager"]};case a.is("specProjectLetter"):return{skipWrapper:!1,el:e().createElement(bb.Z,aq({},d,{style:null,cacheKey:a.id,component:To(),compact:b.compact,"no-delimeter":!0,uid:a.id,remitEvents:{"specline:render":Np.heightChangeClearCache},useMediators:["letter-list-adv-optimizer","advert-manager"]}))};case a.is("advModel"):return{skipWrapper:!1,el:e().createElement(bb.Z,{cacheKey:a.id,component:xo(),rounded:!0,router:b.router,compact:b.compact,folder:b.folder.id,ponymode:b["pony-mode"],metathreadLastToggle:a.get("metathreadLastToggle"),uid:a.id,indent:a.is("inMetathread"),position:a.get("position"),index:a.get("index"),"no-delimeter":!0,"full-delimiter":f.isPrevItemExpandedMetathread,useMediators:["letter-list-adv-optimizer","advert-manager"]})};case a.is("baitLetter"):return{component:zo()};case a.is("spinnerLetter"):return{model:a,component:Ho(),compact:b.compact,ponymode:b["pony-mode"],useMediators:["letters-loader"],remitEvents:{"state:toggle":Np.heightChangeImmediate}};case a.is("searchActionLetter"):return{component:Do(),model:a,compact:b.compact,href:c["search-in-excluded-folders-url"],useMediators:["search-manager"]};case a.is("tipLetter")&&(null===(h=ij().get(a.get("folder")))||void 0===h?void 0:h.isTrashLike()):return{component:Jo(),rounded:!0,borderless:!0,isNextSelected:f.isNextSelected,compact:b.compact,ponymode:b["pony-mode"],folder:b.folder,type:"trash:cleanup",useMediators:["folders-actions"]};case a.is("tipLetter")&&(null===(i=ij().get(a.get("folder")))||void 0===i?void 0:i.isSpam()):return{component:Jo(),rounded:!0,borderless:!0,isNextSelected:f.isNextSelected,compact:b.compact,ponymode:b["pony-mode"],folder:b.folder,type:"spam:cleanup",useMediators:["folders-actions"]};case a.is("flags.metathread"):var k=c.selected[a.id];return{skipWrapper:!0,el:e().createElement(Qp,aq({},d,{model:a,compact:b.compact,ponymode:b["pony-mode"],first:f.isFirst,last:f.isLast,touch:f.touch,selected:k,hideDelimeter:f.hideDelimeter,isLastSelected:k&&!f.isNextSelected,isFirstSelected:k&&!f.isPrevSelected,sticky:!1,"full-delimiter":f.isPrevItemExpandedMetathread,"has-selected":null===(j=c.metathreadsWithSelected)||void 0===j?void 0:j[a.id],newSelection:!0,disableSpacer:!0,remitEvents:{"expand:toggle":Np.heightChange,contextmenu:"rightclick","click:metathreadavatar":"click:metathreadavatar","click-metathread-link":"click:metathread-link",scrollintoself:"scrollintoself"},useMediators:["metathreads-manager","letters-selection","layout-manager","folders-navigation"],router:b.router}))};case a.is("metathreadFooter"):return{component:No(),model:a,compact:b.compact,ponymode:b["pony-mode"],router:b.router,"hide-footer-spacer":f.isNextItemExpandedMetathread,useMediators:["layout-manager"]}}}(h,d.props,d.state,s,r,function(){return h.is(bn.dividerModelLabel)&&0===h.get("idx")&&!d.hasAdsBefore(c)}),u=d.getKey(c);if(t&&"component"in t)return e().createElement(Ub,{id:"ltr-spec",key:u,logData:{key:u}},e().createElement(Hn,{cache:d.cache,parent:a.parent,rowIndex:a.index,width:d._mostRecentWidth},e().createElement("div",{style:a.style,"data-debug-key":(0,wa.qa)(u)},e().createElement(bb.Z,aq({key:t.component},s,t,{style:null})))));else if(t){var v=t;return o=v.skipWrapper?v.el:e().createElement("div",{style:a.style,"data-debug-key":(0,wa.qa)(u)},v.el),e().createElement(Ub,{id:"ltr-spec",key:u,logData:{key:u}},e().createElement(Hn,{cache:d.cache,parent:a.parent,rowIndex:a.index,width:d._mostRecentWidth},o))}var w=d.getLetterType();switch(w){case"list-letter-compact":return e().createElement(Ub,{id:"ltr-cmp",key:u,logData:{key:u}},e().createElement(Cp,aq({style:a.style,remitEvents:d.remitEvents},s,d.letterProps(b,c,r),d.letterPropsByType(w,h))));case"list-letter-common-touch":return e().createElement(Ub,{id:"llc-t",key:u,logData:{key:u}},e().createElement(Vi,aq({style:a.style,remitEvents:d.remitEvents},s,d.letterProps(b,c,r),d.letterPropsByType(w,h))));case"list-letter-compact-touch":return e().createElement(Ub,{id:"llct-t",key:u,logData:{key:u}},e().createElement(Yi,aq({style:a.style,remitEvents:d.remitEvents},s,d.letterProps(b,c,r),d.letterPropsByType(w,h))));case"list-letter-common":default:return e().createElement(Ub,{id:"ltr-cmn",key:u,logData:{key:u}},e().createElement(vp,aq({style:a.style,remitEvents:d.remitEvents},s,d.letterProps(b,c,r),d.letterPropsByType(w,h))))}},d.renderNoLetters=function(a){var b=a.needShowBackToParentFolder,c=a.parentFolder,f=d.props,g=f.folder,h=f.router,i=f["letter-not-found"],j=f.search,k=f["search-letter"],l="empty-folder";switch(!0){case j&&!k:l="no-search";break;case i:l="no-letter"}return e().createElement("div",{className:ca()(Tp,dq.root({empty:!0})),"data-qa-id":(0,wa.qa)("dataset-letters")},e().createElement("div",{className:ca()(Tp,kn().lookup("dataset__items"))},b&&p.BACK_TO_PARENT_AT_EMPTY_LETTERS&&e().createElement(fq,{broadcastEvent:(0,Wc.Yv)(d),folder:g,parentFolder:c,ponyMode:d.props["pony-mode"],compact:d.props.compact,overEmpty:!0}),e().createElement(bb.Z,{component:Po(),"full-height":!0,type:l,folder:g,router:h,useMediators:["layout-manager","folders-navigation","filter-manager","settings-filters-manager","compose-manager","search-manager","themes-manager","pony-mode"],className:kn().lookup("dataset-letters__empty")})))},d.cache=new In({fixedWidth:!0,keyMapper:d.getKey}),bq.forEach(function(a){d[a]=d[a].bind(d)}),p.IS_DEBUG)window.DatasetLetters=d;return d}return _p(b,a),b.prototype.componentDidMount=function(){var a=["scrollable-manager","advert-manager","letter-list-adv-optimizer"];(0,Wc.Nh)("scrollable",this,a),(0,Wc.Ce)(this,a),this.preloadThreads(),this.scrollable.mounted(),this.detectScrollbar();var b=this.props.folder;if(null==b?void 0:b.isMetathread())i().send("metathread_view",{dwh:{category:b.id,name:b.get("name")}});(0,Zm.afterMountCallback)("letters"),(0,Ym.checkAdvertVisibility)()},b.prototype.UNSAFE_componentWillUpdate=function(a){if(a.folder!==this.props.folder||a["pony-mode"]!==this.props["pony-mode"]||a.compact!==this.props.compact)bb.Z.clearCache("letter-list-item-adv"),bb.Z.clearCache("spec-project-letter")},b.prototype.componentDidUpdate=function(a){var b;if(a.folder!==this.props.folder){this.preloadThreads();var c=this.props.folder;if(null==c?void 0:c.isMetathread())i().send("metathread_view",{dwh:{category:c.id,name:c.get("name")}})}if(a["pony-mode"]===this.props["pony-mode"]){if(a.models!==this.props.models)null===(b=this.list.current)||void 0===b||b.recomputeRowHeights();if(kn().isEnabled()&&!this.wasSmokescreenEnabled)this.wasSmokescreenEnabled=!0,this.recomputeHeightsWithClear();this.detectScrollbar()}else this.recomputeHeightsWithClear()},b.prototype.componentWillUnmount=function(){this.scrollable.unmounted()},b.prototype.isMounted=function(){return!0},b.prototype.recalculateItemsFromIndex=function(a){var b;null===(b=this.list.current)||void 0===b||b.recomputeRowHeights(a)},b.prototype.onScrollIntoModelByIndex=function(){},b.prototype.onPaginatorNavigate=function(){},b.prototype.scrollToTop=function(){this.list.current.scrollToPosition(0)},b.prototype.letterPropsByType=function(a,b){var c,d=null===(c=b.isInMetathread)||void 0===c?void 0:c.call(b);switch(a){case"list-letter-compact":return{active:this.isLetterActive(b),"pony-mode":this.props["pony-mode"]||d}}},b.prototype.getModelWithSkip=function(a,b,c){var d=c?1:-1,e=a[b+d];if(e&&!an().isBait(e))return e;else return a[b+2*d]},b.prototype.getPrevModel=function(a,b){return this.getModelWithSkip(a,b,!1)},b.prototype.getNextModel=function(a,b){return this.getModelWithSkip(a,b,!0)},b.prototype.letterProps=function(a,b,c){var d,e=this.getPrevModel(a,b),f=this.getNextModel(a,b),g=a[b],h=a.length,i=null===(d=g.isInMetathread)||void 0===d?void 0:d.call(g),j=null==e?void 0:e.is("metathreadFooter"),k=this.isLetterSelected(g);return{model:g,last:b===h-1||b===h-2&&(null==f?void 0:f.is("spinnerLetter")),first:c.isFirst,hideDelimeter:c.hideDelimeter,isReliable:c.isReliable,isImportantReliable:c.isImportantReliable,isOfficialGreen:c.isOfficialGreen,isOfficial:c.isOfficial,router:this.props.router,"pony-mode":this.props["pony-mode"],darkMode:this.state.darkMode,"disable-attach":!this.isEnableAttach(),"main-field":this.getMainField(g),"show-attaches":this.shouldShowLetterPreview(g),selected:k,isLastSelected:k&&(!f||!this.isLetterSelected(f)),isFirstSelected:k&&(!e||!this.isLetterSelected(e)),folder:this.props.folder,search:this.isSearch(),showfolder:this.isSearch(),indent:i,priority:this.isPriorityMessage(g),"in-metathread":i,"full-delimiter":j,href:this.getLetterHref(g,this.props.folder),qaIndex:g.meta("_ui-index")}},b.prototype.recomputeHeightsWithClear=function(){var a;this.cache.clearAll(),null===(a=this.list.current)||void 0===a||a.recomputeRowHeights()},b.prototype.checkIfNeedsRecompute=function(a){var b=a.width;if(null!==this._mostRecentWidth&&this._mostRecentWidth!==b)this.recomputeHeightsWithClear();this._mostRecentWidth=b},b.prototype.scrollTo=function(a,b){var c;cq.add("scrollTo",{_posX:a}),null===(c=this.list.current)||void 0===c||c.scrollToPosition(b)},b.prototype.reset=function(){this.scrollTo(0,0)},b.prototype.getScrollPos=function(){return{x:0,y:this.lastScrollTop}},b.prototype.getLetterType=function(){var a=this.props.compact;switch(!0){case this.isTouchDevice()&&a:return"list-letter-compact-touch";case this.isTouchDevice():return"list-letter-common-touch";case a:return"list-letter-compact";default:return"list-letter-common"}},b.prototype.onRowsRendered=function(a){this._lastRenderedRows=a;var b=this.props.models.slice(a.startIndex,a.stopIndex);(0,ln.sendAttachesRadar)(b)},b.prototype.renderList=function(a){var b=this,c=a.needShowBackToParentFolder,d=a.parentFolder,f=this.props,g=f.models,h=f.onScrollToBottom,i=f.folder,j=aq({},this.state),k=this.state.withScrollbar;return e().createElement("div",{className:ca()(Tp,dq.root({new:!0,withToolbar:c})),"data-qa-id":(0,wa.qa)("dataset-letters"),ref:this.rootRef},c&&e().createElement(fq,{broadcastEvent:(0,Wc.Yv)(this),folder:i,parentFolder:d,ponyMode:this.props["pony-mode"],compact:this.props.compact,withScrollbar:k}),e().createElement(eq,{enabled:c},e().createElement(qo,{isRowLoaded:function(a){var b=a.index;return!!g[b]},loadMoreRows:function(a){return h(a),Promise.resolve()},rowCount:1/0},function(a){var c=a.onRowsRendered;return e().createElement(En,null,function(a){var d=a.width,f=a.height;return b.checkIfNeedsRecompute({width:d}),e().createElement(to,aq({className:ca()(kn().lookup("dataset__items"),kn().lookup("scrollable_styled"),kn().lookup("scrollable_content"),Up),overscanIndicesGetter:b.overscanIndicesGetter,deferredMeasurementCache:b.cache},j,{onRowsRendered:function(a){c(a),b.onRowsRendered(a)},onScroll:b.onScroll,ref:b.list,width:d,height:f,rowHeight:b.getRowHeight,rowCount:g.length,rowRenderer:b.renderRow}))})})))},b.prototype.render=function(){var a=this.props,b=a.folder,c=a.folders,d=a.showBackToParentFolder,e=null==c?void 0:c.find(function(a){return a.id===(null==b?void 0:b.get("parent"))}),f=!!(p.METATHREAD_BACK_TO_INBOX&&p.BACK_TO_PARENT_AT_LETTERS&&d&&e);if(!this.props.models.length||this.props["letter-not-found"])return this.renderNoLetters({needShowBackToParentFolder:f,parentFolder:e});else return this.renderList({needShowBackToParentFolder:f,parentFolder:e})},b}(e().Component),hq=(0,Wc.v$)("dataset-letters",gq),iq=wc(717),jq=wc(5920),kq=wc(7115),lq=wc(1627),mq=wc(2256),nq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),oq=function(a){function b(b){var c=a.call(this,b)||this;return c.handleSuggestClick=c.handleSuggestClick.bind(c),c}return nq(b,a),b.prototype.blur=function(){var a,b;null===(b=(a=this.props).onBlur)||void 0===b||b.call(a)},b.prototype.handleAppendSuggest=function(a,b,c,d){var e=this.props,f=e.search,g=e.onSuggestSelect,h=c?"_".concat(c):"";if(i().send("".concat(b).concat(h),{t_feature:"operand_select"}),(0,kq.findOperand)(f.smartInput,b,c))f.removeOperand(b,c);else if(b===jq.SearchOperandType.CATEGORY&&f.query.transaction_category)f.updateOperand(b,f.query.transaction_category,c,d);else f.applyOperand(b,c,d);if(!(b===jq.SearchOperandType.DATE||b===jq.SearchOperandType.FOLDER))null==g||g()},b.prototype.handleSuggestClick=function(a,b){var c,d,e=this.props.search;if(b.addressee){var f=b.addressee,g=e.query,h=void 0;if(void 0!==g.query)h=g.query,e.removeOperand(sa.tW.QUERY,sa.tW.QUERY);if(void 0!==g.subject)h=g.subject,e.removeOperand(sa.tW.QUERY,sa.tW.SUBJECT);if(void 0!==(null===(c=g.correspondents)||void 0===c?void 0:c.to))h=g.correspondents.to,e.removeOperand(sa.tW.QUERY,sa.tW.TO);if(void 0!==(null===(d=g.correspondents)||void 0===d?void 0:d.from))h=g.correspondents.from,e.removeOperand(sa.tW.QUERY,sa.tW.FROM);e.applyOperand(sa.tW.QUERY,f,h||""),i().send("".concat(sa.tW.QUERY,"_").concat(f,"}"),{t_feature:"operand_select"})}else if(void 0!==b.folder)if(e.query.folder===b.folder)e.removeOperand(jq.SearchOperandType.FOLDER);else if(void 0!==e.query.folder)e.updateOperand(jq.SearchOperandType.FOLDER,void 0,void 0,b.folder);else e.applyOperand(jq.SearchOperandType.FOLDER,void 0,b.folder)},b.prototype.handlePageClick=function(){},b.prototype.render=function(){var a=this.props.search;return e().createElement(lq.Z,{mobileView:lq.f.Filters,search:a,onSuggestClick:this.handleSuggestClick,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,wa.U)()})},b}(mq.Z),pq="_17XzAbEZiUUoTm-P4fLgHx",qq="_3u3rD2hBpqQcsqvZvbm9jc",rq="_39LNx7UF6dCON4-x9cJsHt",sq="sGiygJdoYoEUL1uRF8WdG",tq="_2qJMu-IAUDqlnuq2WbkZ-I",uq="_1BSPA6S1GesUW0M02d3gzw",vq="_1AulVtyP2EhrjSbQx1fJIO",wq="EbkIV0tIJ8o8Vgczbrjh-",xq="_2lNpZh5bHJxy8DAPv5XieW",yq="_3CsuB8lwSJrFzLSjgrIi7m",zq="_3NIQwXOwCgc4mdnqe6m9PC",Aq=function(a){var b=a.searched;return e().createElement(C.Z,null,function(a){var d=a.Badge;return e().createElement("span",{className:vq},b&&e().createElement(d,{className:wq,mode:"prominent"}),e().createElement(c.Icon,{icon:q.UNION_DROPDOWN_16}))})},Bq=function(a,b,f){var g=function(a){return(0,d.useMemo)(function(){var b,c,d=a.query;if(void 0!==d.subject)return i18n("Тема");if(void 0!==(null===(b=d.correspondents)||void 0===b?void 0:b.to))return i18n("Кому");if(void 0!==(null===(c=d.correspondents)||void 0===c?void 0:c.from))return i18n("От");else return i18n("Везде")},[a.query])}(a);return(0,d.useMemo)(function(){var d,h=function(c){if(b&&a.displayedFilter===c)f(void 0);else f(c);a.setDisplayedFilters(c)},i=[{after:e().createElement(c.Icon,{icon:q.UNION_DROPDOWN_16}),type:jq.SearchOperandType.ADDRESSEE,title:g,onClick:function(){return h(jq.SearchOperandType.ADDRESSEE)}},{after:e().createElement(Aq,{searched:!!a.query.flags}),type:jq.SearchOperandType.FILTER,title:i18n("Фильтр"),onClick:function(){return h(jq.SearchOperandType.FILTER)}}];if(a.hiddenSuggestMap[jq.SearchOperandType.FOLDER]&&(null===(d=a.folders)||void 0===d?void 0:d.length)>1||void 0!==a.query.folder)i.push({after:e().createElement(Aq,{searched:void 0!==a.query.folder}),type:jq.SearchOperandType.FOLDER,title:i18n("Папка"),onClick:function(){return h(jq.SearchOperandType.FOLDER)}});if(!p.SEARCH_HIDE_CATEGORIES)i.push({after:e().createElement(Aq,{searched:!!a.query.transaction_category}),type:jq.SearchOperandType.CATEGORY,title:i18n("Категория"),onClick:function(){return h(jq.SearchOperandType.CATEGORY)}});return i},[g,a.query.folder,a.query.transaction_category,a.query.flags,a.displayedFilter,a.hiddenSuggestMap,a.folders,b])},Cq=function(a){var b=a.search,c=a.activeFilter,f=a.setActiveFilter,g=e().useRef(null),h=e().useRef(null),i=Bq(b,c,f);return(0,d.useEffect)(function(){return function(){b.setDisplayedFilters()}},[]),El(c===jq.SearchOperandType.FILTER?[g,h]:h,function(){if(c)f(void 0)}),e().createElement("div",null,e().createElement(C.Z,null,function(a){var d=a.Group,f=a.HorizontalScroll,j=a.Tabs,k=a.TabsItem,l=a.FixedLayout;return e().createElement(d,{className:xq},e().createElement("div",{ref:h},e().createElement(j,{mode:"secondary","data-qa-id":(0,wa.qa)("mobile-search-tabs")},e().createElement(f,null,i.map(function(a){return e().createElement(k,{key:a.type,"data-qa-id":(0,wa.qa)("mobile-search-tab_"+a.type),after:a.after,onClick:a.onClick,selected:!0},a.title)})))),e().createElement(l,{className:yq},c&&e().createElement("div",{className:zq,ref:g},e().createElement(oq,{active:!0,search:b}))))}))},Dq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Eq=function(a){function b(b){var c=a.call(this,b)||this;return c.state={searchValue:null},c.onChange=c.onChange.bind(c),c.onClear=c.onClear.bind(c),c.onCancel=c.onCancel.bind(c),c.onKeyDown=c.onKeyDown.bind(c),c.state.searchValue=c.props.search.value||null,c}return Dq(b,a),b.prototype.setQueryValue=function(a){var b,c,d=this.props.search.query;this.setState({searchValue:a});var e=sa.tW.QUERY;if(void 0!==d.query)e=sa.tW.QUERY,this.props.search.removeOperand(sa.tW.QUERY,sa.tW.QUERY);if(void 0!==d.subject)e=sa.tW.SUBJECT,this.props.search.removeOperand(sa.tW.QUERY,sa.tW.SUBJECT);if(void 0!==(null===(b=d.correspondents)||void 0===b?void 0:b.to))e=sa.tW.TO,this.props.search.removeOperand(sa.tW.QUERY,sa.tW.TO);if(void 0!==(null===(c=d.correspondents)||void 0===c?void 0:c.from))e=sa.tW.FROM,this.props.search.removeOperand(sa.tW.QUERY,sa.tW.FROM);this.props.search.applyOperand(sa.tW.QUERY,e,a),this.props.search.setValue(a),this.fetchSearchModel(a)},b.prototype.onChange=function(a){var b=a.target.value;if(this.setState({searchValue:b}),this.props.search.setValue(b),!b)this.props.search.clear();this.fetchSearchModel(b)},b.prototype.onClear=function(){this.setState({searchValue:""}),this.props.search.clear()},b.prototype.onCancel=function(){var a,b;null===(b=(a=this.props).onCancel)||void 0===b||b.call(a)},b.prototype.handlePageClick=function(){},Object.defineProperty(b.prototype,"calcValue",{get:function(){var a,b,c=this.props.search.query;return this.state.searchValue||this.props.search.value||c.query||c.subject||(null===(a=c.correspondents)||void 0===a?void 0:a.to)||(null===(b=c.correspondents)||void 0===b?void 0:b.from)||""},enumerable:!1,configurable:!0}),b.prototype.onKeyDown=function(a){var b,c;if(a.keyCode===mq.t)i().send("search",{t_feature:"operand_select"}),null===(c=(b=this.props).onEnter)||void 0===c||c.call(b),this.blur(),this.setQueryValue(a.target.value)},b.prototype.render=function(){var a=this;return e().createElement(C.Z,null,function(b){var d=b.Input,f=b.IconButton,g=b.AdaptivityProvider,h=b.SizeType;return e().createElement("div",{className:pq},e().createElement(f,{onClick:a.onCancel,className:sq},e().createElement(c.Icon,{icon:q.NAVIGATION_ARROW_LIST_PREVIOUS})),e().createElement(g,{sizeY:h.COMPACT},e().createElement(d,{className:qq,type:"search",placeholder:i18n("Поиск"),before:e().createElement("span",{className:rq},e().createElement(c.Icon,{icon:q.NAVIGATION_SEARCH_S})),after:a.calcValue&&e().createElement(f,{hoverMode:"opacity",onClick:a.onClear,className:rq},e().createElement(c.Icon,{icon:q.ACTIONS_CLOSE})),value:a.calcValue,onChange:a.onChange,onKeyDown:a.onKeyDown,autoFocus:!0,onFocus:a.props.onFocus})))})},b}(mq.Z),Fq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Gq=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return Fq(b,a),b.prototype.blur=function(){var a,b;null===(b=(a=this.props).onBlur)||void 0===b||b.call(a)},b.prototype.handlePageClick=function(a){var b,c=this.props,d=c.active,e=c.searchRoot;if(d){var f=th().findDOMNode(null==e?void 0:e.current);if(f!==a.target&&!(null===(b=null==f?void 0:f.contains)||void 0===b?void 0:b.call(f,a.target))&&document.body.contains(a.target))this.blur()}},b.prototype.render=function(){var a=this.props.search;return e().createElement(lq.Z,{mobileView:lq.f.Suggest,search:a,onAppendSuggest:this.handleAppendSuggest,onAppendSuggestQuery:this.handleAppendSuggestQuery,onAppendSuggestOperand:this.handleAppendSuggestOperand,onItemsCounted:this.handleSuggestItemsCounted,qaEnabled:(0,wa.U)()})},b}(mq.Z),Hq=function(){document.documentElement.style.setProperty("--vkui--octavius_size_portal-menu_height--regular",p.DISABLE_FOOTER_APP_TOOLBAR?"148px":"112px")},Iq=function(a){var b,c=a.search,f=a.setSearchMode,g=a.searchMode,h=(0,Rf.C)({name:"search-mobile-panel",mediators:["search-manager","letters-selection"]}),i=h[0],j=i.active,k=i.searching,l=i.selectMode,m=h[1],n=(0,d.useState)(),o=n[0],q=n[1],r=(0,d.useRef)(document.documentElement.style.getPropertyValue("--vkui--octavius_size_portal-menu_height--regular")),s=(0,d.useRef)(null),t=(0,d.useState)(!1),u=t[0],v=t[1],w=(0,d.useState)(0),x=w[0],y=w[1],z=(0,d.useCallback)(function(){document.documentElement.style.setProperty("--vkui--octavius_size_portal-menu_height--regular",r.current)},[]);(0,d.useEffect)(function(){if(j)m(new Event("searchpanel:focus")),null==f||f(!0),Hq();return function(){z()}},[]),(0,d.useEffect)(function(){if(g&&!j)m(new Event("searchpanel:focus")),Hq()},[g,m]);var A=(0,d.useCallback)(function(){if(v(!1),!k)null==f||f(!1),z(),m(new Event("searchpanel:blur"))},[k,m,f]);(0,d.useEffect)(function(){if(k)null==f||f(!0),Hq();else A()},[k,f]);var B=(0,d.useCallback)(function(){m(new Event("searchpanel:blur")),m(new Event("back")),z(),null==f||f(!1)},[f,m]),C=(0,d.useCallback)(function(){v(!0)},[]),D=(0,d.useCallback)(function(){v(!1)},[]),E=(0,d.useCallback)(function(){y(x+1)},[x]);if(!c||!j)return null;else return e().createElement("div",{ref:s},!!c&&j&&e().createElement(iq.Z,null,!l&&e().createElement(Eq,{active:j,search:c,onCancel:B,onFocus:C,onEnter:D,key:x}),e().createElement(Cq,{search:c,activeFilter:o,setActiveFilter:q}),u&&!o&&e().createElement("div",{className:ca()(tq,(b={},b[uq]=p.DISABLE_FOOTER_APP_TOOLBAR,b))},e().createElement(Gq,{searchRoot:s,active:j,search:c,onBlur:A,onSuggestSelect:E}))))},Jq=wc(8866),Kq=wc(9842),Lq=wc(5264),Mq=wc(5125),Nq=wc.n(Mq),Oq=wc(5012),Pq=wc(6968),Qq={container:"_1lwCBvq0cmXim-ZbQkhI4Z"},Rq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),Sq=function(){return(Sq=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Tq=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)if(e=a[h])g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g;return f>3&&g&&Object.defineProperty(b,c,g),g},Uq=[Kq.OperandFilterTypes.UNREAD,Kq.OperandFilterTypes.FLAGGED,Kq.OperandFilterTypes.ATTACH];function Vq(a,b){if(!a||!b)return!1;else return Nq().fromRPCInterval(a).equalsEpsilon(Nq().fromRPCInterval(b))}var Wq=function(a){function b(b){var c=a.call(this,b)||this;return c.handleAppendSuggest=c.handleAppendSuggest.bind(c),c.handleAllFoldersClick=c.handleAllFoldersClick.bind(c),c.handleAllDatesClick=c.handleAllDatesClick.bind(c),c.handleDataPickerClick=c.handleDataPickerClick.bind(c),c}return Rq(b,a),b.prototype.handleAppendSuggest=function(a,b,c,d,e){var f=this.props.search,g=f.query,h=g.correspondents,j=g.folder,k=g.query,l=g.transaction_category,m=g.interval,n=c?"_".concat(c):"";if(i().send("".concat(b).concat(n,"_s"),{t_feature:"operand_select"}),!e){if(!e){if(b===jq.SearchOperandType.CATEGORY&&l)return void f.updateOperand(b,l,c);if(b===jq.SearchOperandType.FOLDER&&j>=0&&j!==f.currentMailbox.id)return void f.updateOperand(b,void 0,void 0,d);if(b===jq.SearchOperandType.DATE&&m)return void f.updateOperand(b,void 0,void 0,d);if(b===jq.SearchOperandType.QUERY){var o=h.to?"to":"from";if(k&&"query"===c)return f.updateOperand(b,jq.SearchOperandType.QUERY,c,d+" "+k),void f.removeOperand(b,o);else return void f.updateOperand(b,o,c)}f.applyOperand(b,c,d)}}else if(b===jq.SearchOperandType.FILTER||b===jq.SearchOperandType.CATEGORY)f.removeOperand(b,c)},b.prototype.handleAllFoldersClick=function(){this.props.search.removeOperand(jq.SearchOperandType.FOLDER)},b.prototype.handleAllDatesClick=function(){this.props.search.removeOperand(jq.SearchOperandType.DATE)},b.prototype.handleDataPickerClick=function(a){var b=this.props,c=b.search,d=b.onSearchPanelFocus;a.stopPropagation(),c.setOperandActive(jq.SearchOperandType.DATE,void 0,{date:Date.now(),lapse:0}),d&&d()},b.prototype.renderElement=function(a){var b=this.props,c=b.search,d=b.shortcut,f=b.qaEnabled,g=b.ponyMode,h=b.nanoMode,i=(a.key||0===a.key)&&a.key.toString(),j=g&&h?"nano":g?"compact":"normal";return e().createElement(Oq.Z,Sq({listType:ge.EA.NAVIGATION,search:c,short:d,mode:j},a,{testId:f&&(a.testId||i),forceFilter:!0}))},b.prototype.renderMailboxes=function(){var a=this,b=this.props.search;if(1===b.allMailboxes.length)return null;var c=b.countedMailboxes,d=b.currentMailbox;return e().createElement(e().Fragment,null,c.map(function(b,c){var f=e().createElement(Pq.Z,null,b.email),g=d.id===b.id,h=g,i=Sq(Sq({},b),{tooltip:f,boldText:h});return a.renderElement({key:c,testId:"".concat(jq.SearchOperandType.MAILBOX,":").concat(b.email),mailboxSuggest:i,selected:g,onAppendSuggest:a.handleAppendSuggest})}))},b.prototype.renderContacts=function(){var a=this.props,b=a.search,c=a.shortcut,d=b.query.correspondents;if(d&&!c){var f=d.to,g=d.from;if(!f||!g){var h=f||g;return e().createElement(e().Fragment,null,b.allMailboxes.length>1&&this.renderElement({hr:!0}),this.renderElement({contactSuggest:{email:h,avatarSize:16},onAppendSuggest:this.handleAppendSuggest,selected:!!f,text:"".concat(i18n("Кому"),": "),title:"".concat(i18n("Кому"),": ")+h}),this.renderElement({contactSuggest:{email:h,avatarSize:16},onAppendSuggest:this.handleAppendSuggest,selected:!!g,text:"".concat(i18n("От кого"),": "),title:"".concat(i18n("От кого"),": ")+h}),this.renderElement({onAppendSuggest:this.handleAppendSuggest,text:i18n("Вся переписка"),wordSuggest:{word:h}}))}}},b.prototype.renderFilters=function(){var a=this,b=this.props.search.query.flags,c=void 0===b?{}:b;return e().createElement(e().Fragment,null,this.renderElement({hr:!0}),Uq.map(function(b){return a.renderElement({key:b,onAppendSuggest:a.handleAppendSuggest,selected:c[b],type:b})}))},b.prototype.renderCategories=function(){var a=this;if(!p.SEARCH_HIDE_CATEGORIES){var b=this.props,c=b.search,d=b.categories,f=c.query.transaction_category,g=void 0===f?"":f;return e().createElement(e().Fragment,null,this.renderElement({hr:!0}),d.map(function(b){if(b===Kq.CategoryTypes.DOCUMENT_SCANS)return a.renderElement({key:Kq.CategoryTypes.DOCUMENT_SCANS,onAppendSuggest:a.handleAppendSuggest,selected:b===g,type:Kq.CategoryTypes.DOCUMENT_SCANS,testId:"category:".concat(Kq.CategoryTypes.DOCUMENT_SCANS)});else return a.renderElement({key:b,onAppendSuggest:a.handleAppendSuggest,selected:b===g,type:b,testId:"category:".concat(b)})}))}},b.prototype.renderFolders=function(){var a=this,b=this.props,c=b.search,d=b.shortcut,f=c.folders,g=c.currentMailbox,h=f.filter(function(a){return a.found&&a.folderModel}),i=c.query.folder,j=void 0===i?void 0:String(i);if(!d)if(h.length&&(1!==h.length||void 0!==j&&h[0].id!==j||h[0].isShareTake)){var k=!j&&"0"!==j||j===g.id;return e().createElement(e().Fragment,null,this.renderElement({hr:!0}),this.renderElement({key:"top",onMouseDown:this.handleAllFoldersClick,selected:k,text:i18n("Все папки")}),h.map(function(b){return a.renderElement({folderSuggest:b,key:b.idNumber,onAppendSuggest:a.handleAppendSuggest,selected:j===b.id})}))}},b.prototype.renderDates=function(){var a=this,b=this.props,c=b.search,d=b.shortcut,f=c.response.dates,g=c.query.interval,h=f.all;if(d)return e().createElement(e().Fragment,null,this.renderElement({hr:!0}),this.renderElement({key:"data-picker",iconName:sa.tW.CALENDAR,onMouseDown:function(){},onClick:this.handleDataPickerClick,selected:!1,text:i18n("Указать дату")}));if(!(f.all.length<=1))return e().createElement(iq.Z,{ponyMode:this.props.ponyMode,nanoMode:this.props.nanoMode},this.renderElement({hr:!0}),this.renderElement({key:"top-top",onClick:this.handleAllDatesClick,selected:!g,text:i18n("За всё время")}),h.map(function(b){return a.renderElement({dateSuggest:b,key:b.type+":"+b.from,onAppendSuggest:a.handleAppendSuggest,selected:Vq(b,g)})}))},b.prototype.renderColorTags=function(){var a=this;if(p.ENABLE_COLOR_TAGS_SEARCH){var b=this.props,c=b.search,d=b.colorTags,f=c.query.transaction_category,g=void 0===f?"":f;return e().createElement(e().Fragment,null,this.renderElement({hr:!0}),d.map(function(b){return a.renderElement({key:b,onAppendSuggest:a.handleAppendSuggest,selected:b===g,type:b,testId:"color-tag:".concat(b)})}))}},b.prototype.render=function(){var a,b=this.props,c=b.ponyMode,d=b.nanoMode,f=b.shortcut,g=b.qaEnabled,h=ca()(((a={})[Qq.container]=!0,a[Qq.shortcut]=f,a));return e().createElement(iq.Z,{ponyMode:c,nanoMode:d},e().createElement("div",Sq({className:h},g?{"data-test-id":"categories"}:{}),this.renderMailboxes(),this.renderContacts(),this.renderFilters(),this.renderColorTags(),this.renderCategories(),this.renderFolders(),this.renderDates()))},b=Tq([Lq.observer],b)}(e().Component),Xq=wc(8269),Yq=wc.n(Xq),Zq=function(){i().send("settings_cleanmailbox_ready")},$q=function(a){var b=a.text;if(i().send("settings_cleanmailbox_error"),!b)return Bc().error({unique:!0});Bc().error({text:b})},_q=function(a){var b=a.darkMode,c=a.ponymode,f=a.onPopupShow,g=a.isFullheight,h=(0,d.useState)(null),i=h[0],j=h[1];(0,d.useEffect)(function(){window.require(["settings.cleanmailbox.page"],function(a){j(a)})},[j]);if(!i)return null;else return e().createElement(i,{onContentReady:Zq,onError:$q,onSecureFolder:function(a){var b=a.folder;return f(!0),Yq()(b).finally(function(){f(!1)})},darkMode:b,ponymode:c,isFullheight:g})},ar=function(a){var b=a.activeItemIndex,c=a.setActiveItemIndex,e=a.startSection,f=a.availableNavigationItems;(0,d.useEffect)(function(){if(e){var a=(d=e,f.findIndex(function(a){return a.id===d}));if(i().send("settings-dock_sidebar_itemIndex_".concat(e)),b===a)return;if(f[a].handle)return f[a].handle(),void c(a);c(a)}var d},[e])},br="_1AXeFOZ6FZljClOyAmifSq",cr="hy6wRqVbNmT8XkrDfKsMW",dr="_1YkJIthKTnGWtAuG8-a_-V",er="VU2Vk_VHHt6WvmcSzjCW3",fr="Gz5GjPuUWCsNUwx2wOggE",gr="bJCxAsQ0eXX6wx01CQ7ux",hr=function(a){var b=a.model,c=a.selectedId,d=a.onEvent,f=b.id,g=b.colorized,h=b.preview,j=b.title,k=g?{backgroundColor:g}:{backgroundImage:"url(".concat(h,")")};return e().createElement("div",{className:ca()(br,g&&gr),key:b.id},e().createElement("div",{className:ca()(cr,f===c&&fr),onClick:function(){var a=new Event("theme:select");a.details={model:b},d(a),i().send("themes_select_".concat(b.id))},"data-test-id":"themes-item-"+b.id,style:k},e().createElement("div",{className:dr}),e().createElement("span",{className:er},j)))},ir={colorized:"_1eNsQPD4WYb6ZmExbjsyce"},jr=function(a){var b=a.onEvent,c=a.themes,d=c.main,f=c.colorized,g=c.selected,h=null==g?void 0:g.id,i=function(a){return a.map(function(a){return e().createElement(hr,{model:a,selectedId:h,onEvent:b,key:a.id})})};return e().createElement(e().Fragment,null,e().createElement("div",{className:ir.colorized,"data-test-id":"themes-container-colorized"},i(f)),e().createElement("div",{className:ir.main,"data-test-id":"themes-container-main"},i(d)))},kr="_3bobCcH2i6CjXBdV6jLbeC",lr="_39cAq2mMwfkX5RH_UKKkws",mr="_2x_046fMPXhKznJisMRJb8",nr="_2jv2OImEVD-elNS7Sa7nh",or="_1fiT1m_S8jkHsPAapA5uSb",pr="_1Lod0h7ryPD83RuYmN-ING",qr="_3vEv928jeaEvb_gp1LHqxr",rr="_3WC4Upnrun59Z_LKACM-a0",sr={header:i18n("Настройки внешнего вида вашей почты и темы оформления"),threePane:i18n("Список писем с колонкой письма"),ponymode:i18n("Компактный вид почты"),shortcuts:i18n("Свернуть список папок"),threads:i18n("Группировать письма одной темы"),todo:i18n("Список задач"),letterListDividers:i18n("Показывать разделители списка")},tr=function(){},ur=function(a){i().send("settings-dock_apprnce_tggl_".concat(a))},vr=function(a){var b,d=a.onEvent,f=a.support3pane,g=a.layoutType,h=a.canTogglePonymode,i=a.ponymode,j=a.canToggleShortcuts,k=a.manualShortcuts,l=a.threads,m=a.themes,n=a.canToggleTodo,o=a.todo,p=a.lettersDividersEnabled,q=a.canToggleLettersDividers,r="3pane"===g;return e().createElement("div",{className:ca()(kr,(b={},b[rr]=i,b))},e().createElement("div",{className:lr},e().createElement(c.Text,{mode:i?"small":"base"},sr.header),e().createElement(c.Margin,{desktopX:i?3:5,mobileX:i?3:5})),e().createElement("div",{className:mr},f&&e().createElement("div",{onClick:function(){d(new Event("layout:toggle")),ur("layout")},className:nr},e().createElement("div",{className:or},e().createElement(c.Switch,{checked:r,onChange:tr,compact:!0,testId:r?"3pane-enabled":"3pane-disabled"})),e().createElement(c.Space,{inline:!0,large:!0}),e().createElement("div",{className:pr},e().createElement(c.Text,{mode:i?"small":"base"},sr.threePane))),h&&e().createElement("div",{onClick:function(){d(new Event("ponymode:toggle")),ur("ponymode")},className:nr},e().createElement("div",{className:or},e().createElement(c.Switch,{checked:i,onChange:tr,compact:!0,testId:i?"ponymode-enabled":"ponymode-disabled"})),e().createElement(c.Space,{inline:!0,large:!0}),e().createElement("div",{className:pr},e().createElement(c.Text,{mode:i?"small":"base"},sr.ponymode))),j&&e().createElement("div",{onClick:function(){d(new Event("shortcuts:toggle")),ur("shortcuts")},className:nr},e().createElement("div",{className:or},e().createElement(c.Switch,{checked:k,onChange:tr,compact:!0,testId:k?"shortcuts-enabled":"shortcuts-disabled"})),e().createElement(c.Space,{inline:!0,large:!0}),e().createElement("div",{className:pr},e().createElement(c.Text,{mode:i?"small":"base"},sr.shortcuts))),e().createElement("div",{onClick:function(){d(new Event("threads:toggle")),ur("threads")},className:nr},e().createElement("div",{className:or},e().createElement(c.Switch,{checked:l,onChange:tr,compact:!0,testId:l?"threads-enabled":"threads-disabled"})),e().createElement(c.Space,{inline:!0,large:!0}),e().createElement("div",{className:pr},e().createElement(c.Text,{mode:i?"small":"base"},sr.threads))),q&&e().createElement("div",{onClick:function(){d(new Event("lettersdividers:toggle")),ur("lettersdividers")},className:nr},e().createElement("div",{className:or},e().createElement(c.Switch,{checked:p,onChange:tr,compact:!0,testId:p?"latters-list-dividers-enabled":"latters-list-dividers-disabled"})),e().createElement(c.Space,{inline:!0,large:!0}),e().createElement("div",{className:pr},e().createElement(c.Text,{mode:i?"small":"base"},sr.letterListDividers))),n&&e().createElement("div",{onClick:function(){d(new Event(rm.TODO_TOGGLE)),ur("todo")},className:nr},e().createElement("div",{className:or},e().createElement(c.Switch,{checked:o,onChange:tr,compact:!0,testId:o?"todo-enabled":"todo-disabled"})),e().createElement(c.Space,{inline:!0,large:!0}),e().createElement("div",{className:pr},e().createElement(c.Text,{mode:i?"small":"base"},sr.todo)))),e().createElement("div",{className:qr},e().createElement(jr,{themes:m,onEvent:d})))},wr=wc(4198),xr=wc.n(wr),yr=wc(7047),zr=wc.n(yr),Ar={page:"_3yWjF-Af5XijT3-K4LlCUx",page_compact:"_3pwC2gcuhQKHxvvv2R49kR",prompt:"_3jb9hdaq_FemxP4g-zNZ1W",prompt_compact:"_2AcKxOEPr5zm826ii940bO",page_fullScreen:"_1G1N5xyOzosxFqjzmHCquL"};function Br(){switch(Ml().getAsString("browser-settings-promo-type")){case"mailto":return"mailto";default:case"push":return"push"}}function Cr(){var a,b;null===(a=qm().get("octavius-letterblock-browser-settings"))||void 0===a||a.save({state:!0}),null===(b=qm().get("octavius-notify-browser-settings"))||void 0===b||b.save({state:!0})}var Dr,Er=function(a){var b=a.compact,f=a.darkMode,g=a.isFullScreen,h=(0,d.useState)(null),i=h[0],j=h[1],k=(0,d.useCallback)(function(a){Bc().add(a)},[]),l=(0,d.useCallback)(function(){if("push"===Br())Cr()},[]),m=(0,d.useCallback)(function(){var a;if("mailto"===Br())Cr();null===(a=qm().get("from-mailto-handler-count"))||void 0===a||a.save({state:!0})},[]);if((0,d.useEffect)(function(){zr()("settings.general.page/browser-settings").then(function(a){return j(function(){return a})})},[]),!i)return null;else return e().createElement(c.Responsive,{mode:"desktopS"},e().createElement(i,{activeEmail:xr().getUser().attributes.email,onEvent:k,onMailToToggle:m,onPushToggle:l,ponymode:b,isDarkMode:f,className:[Ar.page,b&&Ar.page_compact,g&&Ar.page_fullScreen].filter(Boolean).join(" "),promptClassName:[Ar.prompt,b&&Ar.prompt_compact].filter(Boolean).join(" ")}))},Fr="_2NRfgzOvCQj8dfoA841zPJ",Gr="_33Wbz9kDCBjFoklUxhiy_r",Hr="_29vsrPctlrfHWseJn5DkZw",Ir="_1WZP8Y3Lv-7VdI23A7HwtP",Jr=function(a){var b=a.text,d=a.isExternalLink,f=a.flag,g=a.hasPulsar;return e().createElement("span",{className:Fr},e().createElement("span",{className:Gr},b),f&&e().createElement("span",{className:Hr,style:{backgroundImage:'url("'.concat(f,'")')}}),d&&e().createElement(e().Fragment,null,e().createElement(c.Space,{small:!0,responsive:"desktopS"}),e().createElement(c.Space,{small:!0,responsive:"desktopS"}),e().createElement(c.Icon,{icon:q.NAVIGATION_ARROW_NEXT_S})),g&&e().createElement("div",{className:Ir},e().createElement(c.Pulsar,{fixed:!0,sizeX:6})))},Kr="_3Cn-EmstXVr9LMQLvXQi3",Lr="_1gWJhJFtkaru-QhzvkexcZ",Mr="DQ3TUvpE-8DYg0TVU-KL8",Nr="_1D_8UpQJRYEyyXCR_YRnpR",Or="_1gFBwYzu2iOBwpzNaoe91M",Pr="_2Hah1-jSTlP39ja1gvmk5N";!function(a){a.Appearance="appearance",a.Metathreads="metathreads",a.Cleanmaster="cleanmaster",a.Cleanmailbox="cleanmailbox",a.BrowserSettings="browsersettings",a.Help="help",a.Security="security",a.Log="log",a.Lang="lang",a.More="more",a.HelpVK="support_vk",a.SecurityCheckup="securitycheckup"}(Dr||(Dr={}));var Qr,Rr=function(){return(Rr=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},Sr="calc(100% - var(--vkui--octavius_size_headline_height--regular))",Tr=qm().get("security-checkup-link"),Ur=function(a){if(!a)return{collapsed:"50%",expanded:Sr}},Vr=function(a){var b=a.show,f=a.startSection,g=a.darkMode,h=a.ponymode,j=a.applicationElement,k=a.userLang,l=a.disableExpand,m=a.disableAutoExpand,n=a.startFullscreen,o=a.thirtyFiftyMode,r=a.metathreadsData,s=a.onMetathreadsSettingsEdit,t=a.onMetathreadsHelpClick,u=a.onEvent,v=a.metathreadsFiltersCount,w=a.metathreadsFiltersCountLoading,x=(0,d.useRef)(null),y=(0,d.useState)(0),z=y[0],A=y[1],B=(0,d.useState)(n),D=B[0],E=B[1],F=(0,d.useState)(!1),G=F[0],H=F[1],I=(0,d.useState)(!1),J=I[0],K=I[1],L=(0,d.useState)(!0),M=L[0],O=L[1],P=(0,d.useCallback)(function(a){if(b)if(A(0),E(n),H(!1),K(!1),u(new Event("settings:close")),x.current)i().send("settings-dock_close_".concat(a))},[b,A,E,n,H,K,x,u]),Q=(0,d.useCallback)(function(){P("outside")},[P]),R=(0,d.useCallback)(function(){P("esc")},[P]),S=(0,d.useCallback)(function(){P("cross")},[P]),T=function(){i().send("settings_dock_".concat(D?"collapse":"expand")),E(!D),H(!1),K(!0)},U=e().useCallback(function(){P("support_vk"),u(new Event("support_vk:click"))},[P,u]),V=[{id:Dr.Appearance,testId:Dr.Appearance,text:e().createElement(Jr,{text:p.SETTINGS_DOCK_APPEARANCE_TITLE?i18n("Оформление"):i18n("Внешний вид")})},{id:Dr.SecurityCheckup,testId:Dr.SecurityCheckup,text:e().createElement(Jr,{text:i18n("Проверка безопасности"),hasPulsar:!Tr.state}),isHidden:!p.SHOW_SECURITY_CHECKUP_LINK_IN_SETTINGS,href:p.SECURITY_CHECKUP_URL,handle:function(){if(!1===Tr.state)Tr.save({state:!0})}},{id:Dr.Metathreads,testId:Dr.Metathreads,text:e().createElement(Jr,{text:i18n("Умная сортировка")}),isHidden:p.HIDE_METATHREADS},{id:Dr.Cleanmaster,testId:Dr.Cleanmaster,text:e().createElement(Jr,{text:p.SETTINGS_DOCK_CLEANMASTER_USE_UNSUBSCRIBE_TITLE?i18n("Отписаться от рассылок"):i18n("Управление рассылками"),isExternalLink:p.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED}),href:p.SETTINGS_DOCK_CLEANMASTER_INLINE_DISABLED?p.CLEANMASTER_URL:null,isHidden:p.SETTINGS_DROPDOWN_HIDE_CLEANMASTER},{id:Dr.Cleanmailbox,testId:Dr.Cleanmailbox,text:e().createElement(Jr,{text:p.SETTINGS_DOCK_CLEANMAILBOX_TITLE?i18n("Разобрать непрочитанные"):i18n("Разобрать почту")}),isHidden:p.SETTINGS_DOCK_HIDE_CLEANMAILBOX},{id:Dr.BrowserSettings,testId:Dr.BrowserSettings,text:e().createElement(Jr,{text:p.SETTINGS_DOCK_BROWSER_SETTINGS_TITLE?i18n("Почта в браузере"):i18n("Работа в браузере")}),isHidden:!p.SETTINGS_DOCK_BROWSERSETTINGS_ENABLED},{id:Dr.Help,testId:Dr.Help,text:e().createElement(Jr,{text:i18n("Помощь"),isExternalLink:!0}),href:p.HELP_URL,isHidden:p.SETTINGS_DROPDOWN_HIDE_HELP},{id:Dr.HelpVK,testId:Dr.HelpVK,text:e().createElement(Jr,{text:i18n("Чат с поддержкой VK"),isExternalLink:!0}),handle:U,isHidden:!p.SHOW_VK_HELP},{id:Dr.Security,testId:Dr.Security,text:e().createElement(Jr,{text:i18n("Безопасность"),isExternalLink:!0}),href:p.SECURITY_URL,isHidden:p.SETTINGS_DROPDOWN_HIDE_SECURITY},{id:Dr.Log,testId:Dr.Log,text:e().createElement(Jr,{text:i18n("Отправить логи")}),isHidden:!p.ENABLE_LOGGING,handle:function(){u(new Event("logs:click"))}},{id:Dr.Lang,testId:Dr.Lang,text:e().createElement(Jr,{text:"".concat(i18n("Язык:")," ").concat(wk.LANG_MAP[k].label),flag:wk.LANG_MAP[k].src})},{id:Dr.More,testId:Dr.More,text:e().createElement(Jr,{text:i18n("Все настройки"),isExternalLink:!0}),href:p.SETTINGS_URL,isHidden:p.SETTINGS_DROPDOWN_HIDE_SETTINGS}].filter(function(a){return!a.isHidden});c.hooks.useOnESC({onEsc:R});var W=function(a){O(!a)};ar({activeItemIndex:z,setActiveItemIndex:A,startSection:f,availableNavigationItems:V}),(0,d.useEffect)(function(){if(b)if(i().send("settings-dock_sidebar_show_".concat(V[z].id)),x.current)x.current.scrollTop=0},[b,z]),(0,d.useEffect)(function(){null==j||j.classList.toggle("g-app-scaled",b),document.body.classList.toggle(Kr,b)},[b,j]),(0,d.useEffect)(function(){if(b&&!m&&!J&&V[z].id!==Dr.Appearance)H(!0);else H(!1)},[b,z,m]);var X=function(a,b,d){var e=a.thirtyFiftyMode;if(b)return Sr;if(e||d)return c.DOCK_HEIGHT_MODES.AUTO_EXPAND;else return"50%"}(a,D,G);return e().createElement(c.Dock,{show:b,closeByBackdropClick:M,scaleElement:j,onHide:Q,testId:"settings-dock",height:X,autoExpandHeights:Ur(o),onExpand:function(){if(i().send("settings_dock_auto-expand"),G)E(!0),K(!0)}},e().createElement("div",{className:Lr,"data-test-id":D?"dock-expanded":"dock-collapsed"},e().createElement(C.Z,null,function(a){var b=a.Button;return e().createElement("div",{className:Mr},!l&&e().createElement(e().Fragment,null,e().createElement(c.Tooltip,{overlay:e().createElement(c.Text,null,D?i18n("Свернуть"):i18n("Развернуть"))},e().createElement(b,{"data-test-id":D?"collapse":"expand",mode:"tertiary",size:h?"s":"l",before:e().createElement("div",{style:{display:"flex"}},e().createElement(c.Icon,{icon:D?q.NAVIGATION_ZOOM_OUT_OVERLAY:q.NAVIGATION_ZOOM_OVERLAY})),onClick:T})),e().createElement(c.Space,{responsive:"desktopS",small:!0}),e().createElement(c.Space,{responsive:"desktopS",small:!0})),e().createElement(c.Tooltip,{placement:"bottomRight",overlay:e().createElement(c.Text,null,i18n("Закрыть"))},e().createElement(b,{"data-test-id":"cross",mode:"tertiary",size:h?"s":"l",before:e().createElement("div",{style:{display:"flex"}},e().createElement(c.Icon,{icon:q.ACTIONS_CLOSE_BIG})),onClick:S})))}),e().createElement("div",{className:Nr},e().createElement("div",{className:Pr},e().createElement(c.NavigationMenu,{activeItem:z,items:V,onClick:function(a,b){if(i().send("settings-dock_sidebar_click_".concat(V[a].id)),V[a].href)b.preventDefault(),N()(V[a].href);if(V[a].handle)b.preventDefault(),V[a].handle();if(!V[a].href&&!V[a].handle)A(a)},size:h?"compact":"normal",noBorder:!0})),e().createElement("div",{className:ca()(Or),ref:x,"data-test-id":"".concat(V[z].id,"-page")},V[z].id===Dr.Appearance&&e().createElement(vr,Rr({},a)),V[z].id===Dr.Cleanmaster&&e().createElement(am,{onPopupShow:W,compact:h}),V[z].id===Dr.BrowserSettings&&e().createElement(Er,{compact:h,darkMode:g,isFullScreen:D}),V[z].id===Dr.Cleanmailbox&&e().createElement(_q,{darkMode:g,ponymode:h,onPopupShow:W,isFullheight:D}),V[z].id===Dr.Metathreads&&e().createElement(xj,{key:r.length,metathreadsData:r,onSettingsEdit:s,onHelpClick:t,onCreateFilter:function(){P("add-filter"),u(new Event("metathreads:filters:create"))},updateFilters:function(){u(new Event("metathreads:filters:update"))},filtersCount:v,filtersCountLoading:w,ponymode:h,darkMode:g}),V[z].id===Dr.Lang&&e().createElement(Hk,{currentLang:k,darkMode:g,ponymode:h})))))},Wr=wc(7596),Xr=wc(7771),Yr=wc.n(Xr),Zr=wc(3805),$r=wc.n(Zr),_r=wc(5510),as=wc.n(_r),bs=wc(6146),cs=wc.n(bs),ds=function(){return(ds=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},es=new Gd.k("thread"),fs=new Gd.k("delimeter");function gs(){var a,b,c=this,d=ds(ds({},this.props),this.state),f=d.model,g=f.get("subject")||i18n("<Без темы>"),h=d.folders,i=null===(b=null===(a=d.route)||void 0===a?void 0:a.params)||void 0===b?void 0:b.part,j=d.ponymode,k=f.get("transaction_metadata"),l=this.actualLettersEnabled(),m=f.get("messages.0.headers.X-Mailru-Bimi-Organization"),n=this.getResendData(),o=1==d.model.get("length"),q=this._formDatesMetadata(),r=f.get("transaction_category"),s=this.isHideCategory(f);return e().createElement("div",{ref:this.threadRef,"data-qa-id":(0,wa.qa)("thread"),"data-transaction-category":d.model.get("transaction_category"),className:es.root({preview:d["preview-mode"],fluid:!d.compact,compact:d.compact,rounded:d.rounded,touch:d.touch,"no-divider":d.noDivider,compressed:d.ponymode})},e().createElement("div",{className:es.elem("header",{"pony-mode":d.ponymode})},!d["preview-mode"]&&e().createElement(e().Fragment,null,e().createElement("div",{className:es.elem("meta-header")},function(){if(c.parentalControlDieEnabled())return e().createElement(bb.Z,{type:"parent-filter",model:f,useMediators:["letters-actions","themes-manager"],component:ud(),key:"letter-meta"});if(c.getMessageFolder().isSpam()&&f.get("messages.0.flags.blacklist_spam"))return e().createElement(bb.Z,{type:"spam-blacklist",model:f,useMediators:["letters-actions","themes-manager"],component:ud(),key:"letter-meta"});if(f.meta("unread-on-open")&&c.isShowPromoPush())return e().createElement(bb.Z,{type:"promo-push-header",model:f,useMediators:["letters-actions","themes-manager"],component:"letter-meta",key:"letter-meta"});if(f.meta("unread-on-open")&&l&&d.actualReasonFeedback&&f.get("actual_reason"))return e().createElement(bb.Z,{type:"actual-reason-feedback",model:f,useMediators:["letters-actions","themes-manager"],component:ud(),key:"letter-meta"});if(d.showOfficialSender&&c.isOfficialSender(f))return e().createElement(bb.Z,{type:"official-sender",model:f,sender:m,useMediators:["themes-manager"],"data-qa-id":"official-sender-promo",component:ud(),key:"letter-meta"});if(c.isShowPlateMailingSubscribe())return e().createElement(bb.Z,{type:"newsletter-mailing-subscribe",model:f,useMediators:["letters-actions","themes-manager"],component:ud(),key:"letter-meta"});if(c.isShowCategoryFeedbackPlate()&&f.meta("unread-on-open"))return e().createElement(bb.Z,{type:"category-feedback",model:f,useMediators:["themes-manager"],component:ud(),onShowCategoryFeedbackPlate:c.onShowCategoryFeedbackPlate.bind(c),key:"letter-meta"});if(d.showReliableSender&&c.isReliableSender(f))return e().createElement(bb.Z,{type:"reliable-sender",model:f,sender:m,useMediators:["themes-manager"],"data-qa-id":"reliable-sender-promo",component:ud(),key:"letter-meta"});if(c.isFakeDoorFmail18333Visible(f))return e().createElement(bb.Z,{type:"fake-door-header-fmail-18333",model:f,component:ud(),key:"letter-meta"});else return}()),e().createElement(bb.Z,{model:f,senderEmail:this.getSenderEmail(f),receivers:this.getReceivers(f),"dark-mode":d["dark-mode"],component:cs(),key:"promo-domain-die"})),e().createElement("div",{className:es.elem("subject-line")},e().createElement("h2",{key:"thread-subject",className:es.elem("subject",{"pony-mode":d.ponymode}),"data-qa-id":"subject"},g),!(d["disable-category"]||f.getFolder().isSpam())&&function(){if(d["category-feedback"]&&!f.getFolder().isShareTake())if(c.hasCategory(f)&&!s)return e().createElement("div",{className:es.elem("category")},e().createElement(bb.Z,{model:f,useMediators:["settings-manager","themes-manager"],component:Yr(),key:"category-feedback"}));else return;if(r&&!s)return e().createElement("div",{className:es.elem("category")},e().createElement(bb.Z,{name:r,short:d.touch,component:od(),key:"letter-category"}))}()),!d.isResendDropdownDisabled&&n&&e().createElement(mk,{"class-name":"thread__resend-dropdown",resendFrom:n.from,resendTo:n.to,resendDate:n.date,receivedDate:n.receivedDate,darkMode:d["dark-mode"],qaEnabled:(0,wa.U)()}),e().createElement("div",{className:es.elem("letter-meta")},this.needLetterMeta()&&e().createElement(bb.Z,{model:f,metadata:k,ponymode:d.ponymode,calendar:this.getFirstCalendarAttach(),useMediators:["themes-manager","layout-manager","letters-selection"],remitEvents:{render:"letter-meta:render",letterclick:"letter-meta:letterclick"},broadcastEvent:(0,Wc.Yv)(this),component:ud(),needLetterMetaSkeleton:this.needLetterMetaSkeleton(),key:"letter-meta"}))),!!d.hasDraft&&e().createElement("div",{className:es.elem("letter",{first:!0,expanded:!0})},d.draft?e().createElement(bb.Z,{model:d.draft,touch:d.touch,disabled:!0,draft:!0,"disable-select":!0,"disable-subject":!0,"disable-category":!0,compressed:j,remitEvents:{click:"draft:open"},broadcastEvent:(0,Wc.Yv)(this),component:$r(),key:"letter-list-item"}):e().createElement(bb.Z,{touch:d.touch,compressed:j,component:as(),key:"letter-list-item-placeholder"})),d.model.get("messages").map(function(a,b){var f=0==b,g=d.model.get("length")==b+1,l=!d.model.canUnfoldMessage(a),m=c.isPrevCollapsed(b),n=c.isNextCollapsed(b),r=c.isSticky(a.id),s=!c.isCollapsed(a.id),t=0!==b?d.model.get("messages")[b-1]:null,u=t&&(null==t?void 0:t.is("flags.bimi_important_msg"))&&p.SHOW_RELIABLE_ON_LETTER_LIST&&!p.DISABLE_GREEN_RELIABLE_ON_LETTER_LIST,v=t&&(null==t?void 0:t.is("flags.official"))&&p.SHOW_OFFICIAL_ON_LETTER_LIST&&!p.DISABLE_GREEN_OFFICIAL_ON_LETTER_LIST,w=!1,x=!1,y=(0,Yc.checkOfficialGreen)(a),z=(0,Yc.checkOfficial)(a);if(!y&&!z)w=(0,Yc.checkReliable)(a),x=(0,Yc.checkImportantReliable)(a);var A=f||u||v||x||y;if(!d["preview-mode"]||!c.isCollapsed(a.id))return e().createElement("div",{key:a.id,"data-id":a.id,"data-qa-id":(0,wa.qa)("thread-letter:".concat(b+1)),"data-qa-state":(0,wa.qa)("open:".concat(!c.isCollapsed(a.id))),className:es.elem("letter",{expanded:s,"expanded-next":!n,"expanded-prev":!f&&!m,collapsed:c.isCollapsed(a.id)&&!d["preview-mode"],"collapsed-next":n,first:f,last:g,single:o,react:!0})},!c.isCollapsed(a.id)&&e().createElement(uf,{route:d.route,router:d.router,model:a,parentThread:d.model,folders:h,autoread:a.isDataFully()&&!d["preview-mode"],"allow-collapse":d.model.get("length")>1&&!d["preview-mode"],readonly:d["preview-mode"],single:o,"collapsed-default":l,first:f,last:g,touch:d.touch,sticky:c.isStickyEnabled()&&r&&d.sticky,showfolder:d.model.get("folder")!=a.get("folder"),"quotes-collapsed-default":!g,"disable-category":!0,"disable-edit":i,compactTranslator:d.compact,ponymode:j,"dark-mode":d["dark-mode"],"expanded-next":!n,"preview-mode":d["preview-mode"],"dates-metadata":q,"transaction-metadata":k,useMediators:["user-info","layout-manager","settings-filters-manager","attachments-manager","calendar-manager","translator-manager","addressbook-manager","share-folders-manager","settings-manager","calls-manager","marusia-manager","thread-scroller","letters-actions","compose-manager"],remitEvents:{clickhead:"letter:close","attaches:expanded":"letter:expand:attaches","attaches:collapsed":"letter:collapsed:attaches",resize:"letter:resize","letter-force-recalc":"force:recalc","translator:scrollto":"translator:scrollto"},updateRemitEventsName:!0,broadcastEvent:(0,Wc.Yv)(c),remitDetails:a,key:"letter"}),!(!c.isCollapsed(a.id)||d["preview-mode"])&&e().createElement("div",{onClick:(0,Wc.CH)(c,{name:"letter:open",details:a})},d.touch?e().createElement(Vi,{"in-thread":!0,"disable-subject":!0,"disable-select":!0,"disable-avatar-hover":!0,"enable-user-select":!0,key:"list-letter-common",first:f||!m,hideDelimeter:A,isImportantReliable:x,isReliable:w,isOfficial:z,isOfficialGreen:y,last:g||!n,"pony-mode":j,model:a,"main-field":"from",showfolder:d.model.get("folder")!=a.get("folder"),welter:!1,useMediators:["letters-actions","layout-manager"],"layout-mode":"2pane",remitEvents:{contextmenu:"letter:rightclick"},broadcastEvent:(0,Wc.Yv)(c),remitDetails:a,fromThread:!0}):e().createElement(vp,{"in-thread":!0,"disable-subject":!0,"disable-select":!0,"disable-avatar-hover":!0,"enable-user-select":!0,key:"list-letter-common",first:f||!m,hideDelimeter:A,isImportantReliable:x,isReliable:w,isOfficial:z,isOfficialGreen:y,last:g||!n,"pony-mode":j,model:a,"main-field":"from",showfolder:d.model.get("folder")!=a.get("folder"),welter:!1,useMediators:["letters-actions","layout-manager"],"layout-mode":"2pane",remitEvents:{contextmenu:"letter:rightclick"},broadcastEvent:(0,Wc.Yv)(c),remitDetails:a,fromThread:!0})),!d["preview-mode"]&&e().createElement("div",{className:fs.root({full:s||!m})}));else return null}),e().createElement("div",{className:es.elem("rounding-footer")}),d.kaspersky&&!d["preview-mode"]?e().createElement("div",{className:es.elem("footer")},e().createElement("div",{className:es.elem("kaspersky")},e().createElement(rc,{isEngLogo:this.isEngKasperskyLogo(),onLogoLinkClick:(0,Wc.CH)(this,{stop:!0,name:"click-kaspersky"}),contrast:!(d.isDarkDefaultMode||d.isLightDefaultMode)}))):e().createElement("div",{className:es.elem("footer",{empty:!0})}))}!function(a){a.mount="$mount",a.unmount="$destroyed",a.clickKaspersky="clickkaspersky"}(Qr||(Qr={}));var hs=function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c))a[c]=b[c]})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),is=function(){return(is=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])if(Object.prototype.hasOwnProperty.call(b,e))a[e]=b[e];return a}).apply(this,arguments)},js=function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)if(d||!(e in b)){if(!d)d=Array.prototype.slice.call(b,0,e);d[e]=b[e]}return a.concat(d||Array.prototype.slice.call(b))}([],Object.values(Wr.blockSpec.events),!0),ks=function(a){function b(b){var c=a.call(this,b)||this;if(c.thredMounted=!1,c.events=Wr.blockSpec.events,c.isCollapsed=Wr.blockSpec.isCollapsed,c.onDraftOpen=Wr.blockSpec.onDraftOpen,c.onLetterOpen=Wr.blockSpec.onLetterOpen,c.onLetterClose=Wr.blockSpec.onLetterClose,c.onRightClick=Wr.blockSpec.onRightClick,c.onLetterMetaRender=Wr.blockSpec.onLetterMetaRender,c.onLetterMetaClick=Wr.blockSpec.onLetterMetaClick,c.onTranslatorScrollTo=Wr.blockSpec.onTranslatorScrollTo,c.bindThread=Wr.blockSpec.bindThread,c.getSenderEmail=Wr.blockSpec.getSenderEmail,c.getReceivers=Wr.blockSpec.getReceivers,c.unbindThread=Wr.blockSpec.unbindThread,c.isStickyEnabled=Wr.blockSpec.isStickyEnabled,c.isSticky=Wr.blockSpec.isSticky,c.isNextCollapsed=Wr.blockSpec.isNextCollapsed,c.isPrevCollapsed=Wr.blockSpec.isPrevCollapsed,c.isHideCategory=Wr.blockSpec.isHideCategory,c.isReliableSender=Wr.blockSpec.isReliableSender,c.onShowCategoryFeedbackPlate=Wr.blockSpec.onShowCategoryFeedbackPlate,c.isShowPlateMailingSubscribe=Wr.blockSpec.isShowPlateMailingSubscribe,c.isShowCategoryFeedbackPlate=Wr.blockSpec.isShowCategoryFeedbackPlate,c.isShowPromoPush=Wr.blockSpec.isShowPromoPush,c.parentalControlDieEnabled=Wr.blockSpec.parentalControlDieEnabled,c.hasCategory=Wr.blockSpec.hasCategory,c.actualLettersEnabled=Wr.blockSpec.actualLettersEnabled,c.getMessageFolder=Wr.blockSpec.getMessageFolder,c.setExpId=Wr.blockSpec.setExpId,c._setExpanded=Wr.blockSpec._setExpanded,c._loadDraft=Wr.blockSpec._loadDraft,c.scrollLetterIntoView=Wr.blockSpec.scrollLetterIntoView,c.scheduleScrollLetterIntoView=Wr.blockSpec.scheduleScrollLetterIntoView,c._loadLetter=Wr.blockSpec._loadLetter,c._closeLetter=Wr.blockSpec._closeLetter,c.getFirstCalendarAttach=Wr.blockSpec.getFirstCalendarAttach,c.isEngKasperskyLogo=Wr.blockSpec.isEngKasperskyLogo,c._formDatesMetadata=Wr.blockSpec._formDatesMetadata,c.getResendData=Wr.blockSpec.getResendData,c.isOfficialSender=Wr.blockSpec.isOfficialSender,c.usePortalSearchPanel=Wr.blockSpec.usePortalSearchPanel,c.needLetterMeta=Wr.blockSpec.needLetterMeta,c.needLetterMetaSkeleton=Wr.blockSpec.needLetterMetaSkeleton,c.isFakeDoorFmail18333Visible=Wr.blockSpec.isFakeDoorFmail18333Visible,c.onKasperskyLogoClick=Wr.blockSpec.onKasperskyLogoClick,c.onToggleIcsAttach=Wr.blockSpec.onToggleIcsAttach,c.needHideAttachList=Wr.blockSpec.needHideAttachList,c.isTrackingStatusPlate=Wr.blockSpec.isTrackingStatusPlate,c.render=gs,c.threadRef=e().createRef(),b.model)c._setExpanded(b.model);return js.forEach(function(a){c[a]=c[a].bind(c)}),c}return hs(b,a),Object.defineProperty(b.prototype,"el",{get:function(){return this.threadRef.current},enumerable:!1,configurable:!0}),b.prototype.componentDidMount=function(){this.thredMounted=!0,Wr.blockSpec.didMount.bind(this)(),this.updateModel(is(is({},this.props),this.state).model,void 0),this.loadDraft(is(is({},this.props),this.state)),this.setExpanded(),(0,Zm.afterMountCallback)("readletter")},b.prototype.componentDidUpdate=function(a,b){var c=is(is({},this.props),this.state),d=is(is({},a),b);if(Wr.blockSpec.didUpdate.bind(this)(),c.model!==d.model)this.updateModel(c.model,d.model);if(c["load-draft-disabled"]!==d["load-draft-disabled"]&&!1===c["load-draft-disabled"])this.loadDraft(c);if(this.props["expand-letter-id"]!==a["expand-letter-id"]&&this.props["expand-letter-id"]&&this.props.model)this.setExpanded()},b.prototype.componentWillUnmount=function(){this.thredMounted=!1,Wr.blockSpec.didUnmount.bind(this)()},b.prototype.handleInnerEvent=function(a){switch(a.type){case Qr.mount:return void vc()(["thread","mount"],1,(0,Xc.getModelDataWithRelevant)(this));case Qr.unmount:return void vc()(["thread","unmount"],1,(0,Xc.getModelData)(this));case Qr.clickKaspersky:vc()(["thread","kaspersky_click"])}},b.prototype.updateModel=function(a,b){this.unbindThread(b),this.bindThread(a)},b.prototype.isMounted=function(){return this.thredMounted},b.prototype.loadDraft=function(a){this._loadDraft(a.model)},b.prototype.setExpanded=function(){this._setExpanded(this.get("model"),!0)},b.prototype.get=function(a){return is(is({},this.props),this.state)[a]},b.prototype.update=function(){this.forceUpdate()},b}(e().Component),ls=(0,Wc.v$)("thread",ks,{syncMediatorsOnRender:!1});ls.defaultProps=Wr.blockSpec.defaults;var ms=ls,ns={AccountDock:aa,AdFeedback:ja,AdFeedback2step:ra,AttachIcon:va,AttachThumb:Ib,AttachmentButton:Aa,AttachmentDropdown:Ya,AttachSafetyStatus:rb,ChangeLanguage:Hk,ClipInListItem:Ma,CreateTodo:Wm,DatasetLetters:hq,ErrorBoundary:Ub,FeastBlock:bb.Z,FileLimitPopup:Rb,KasperskyLogo:rc,LayerChooseSaveFolder:tc,LayerConfirmMoveToSpam:Gc,LayerFakeDoor:Jc,LayerPromoEnabledPush:Lc,LayerTemplateSelect:Rc,Letter:uf,LetterBody:Rd,LetterHeaderActions:function(a){var b=Tf(a),c=b.broadcast,d=b.attrs,f=b.globals,g=b.selectedLettersInfo,h=b.syntheticBlock,i=f.isDisableEdit,j=f.ponyMode,k=f.letter,l=f.readMode,m=f.hasNext,n=f.filterRoute,o=f.hasPrev,q=f.searchRoute,r=f.is3Pane,s=f.is2Pane,t=d.mobile,u=d.letterNotFound,v=d.selected,w=!!v&&v.length>0,x=(l||w)&&!u,y=l&&s,z=w&&r,A={"touch-nav":t,letter:k,ponymode:j,remitEvents:vf,broadcastEvent:c,useContext:h.radarContext},B={"is-search":q,"is-filter":n,hidden:!y};return a._node.classList[!x?"add":"remove"](Kf.display_none),e().createElement("div",{"data-qa-id":(0,wa.qa)("portal"),"data-qa-type":(0,wa.qa)("letter-actions"),className:ca()(Kf.display_mode,z?Kf.single:Kf.not_single,p.ENABLE_LETTERS_DIVIDERS&&!B.hidden&&Kf.short_padding)},e().createElement(Mf,Uf({},A,B,{type:z?"deselect-back":"back",notDelete:l,short:!0})),e().createElement(Of,Uf({},{attrs:d,globalEnv:A,globals:f,selectedLettersInfo:g,displayMode:x})),e().createElement(Mf,Uf({},A,B,{type:"prev",disabled:i||!o})),e().createElement(Mf,Uf({},A,B,{type:"next",disabled:i||!m})))},LetterMetaSkeleton:fg,LetterTags:ne,LettersDivider:ng,ListLetterCommonTouch:Vi,ListLetterCompactTouch:Yi,ListLetterGoToActionButton:Uh,ListLetterHeaderActions:function(a){var b=Tf(a),c=b.broadcast,d=b.attrs,f=b.globals,g=b.selectedLettersInfo,h=b.syntheticBlock,i=d.filter,j=d.folder,k=d.folders,l=d.selectFolder,m=d.selected,n=d.sortingType,o=d.hasLetters,q=d.deselectAll,r=d.readAllInProgress,s=d.mobile,t=d.showBackToParentFolder,u=d.advTopLine,v=f.ponyMode,w=f.layoutType,x=f.selectMode,y=f.is2Pane,z=f.letter,A=f.searchRoute,B=f.filterRoute,C=f.readMode,D=e().useMemo(function(){return(0,yf.getSelectedCount)({folder:j,selectFolder:l,selected:m},{searchRoute:A})},[j,A,l,m]),E=e().useState(null),F=E[0],G=E[1],H=xf({element:F,breakpoints:gj,pureBreakpoints:!0,initialState:function(){return gj.at(-1).props}}),I=x&&!!D,J=I&&y,K=e().useMemo(function(){return!I&&!C&&t?(0,$i.getParentFolder)(j,k):null},[I,j,k,C,t]),L={"touch-nav":s,letter:z,ponymode:v,remitEvents:vf,broadcastEvent:c,useContext:h.radarContext};return a._node.classList[!o&&!B?"add":"remove"](Kf.display_none),e().createElement("div",{"data-qa-id":(0,wa.qa)("portal"),"data-qa-type":(0,wa.qa)("list-letter-actions"),className:ca()(Kf.display_mode,u?Kf.not_border:Kf.border,o?Kf.not_single:Kf.single,p.ENABLE_LETTERS_DIVIDERS&&(y?Kf.middle_padding:Kf.short_padding)),ref:G},e().createElement("div",{className:Kf.read_letter},e().createElement(Mf,aj({},L,{hidden:!I&&!K,type:K?"backToParentFolder":x?"deselect-back":"back",parentFolder:K,folder:j,folders:k,short:!0})),e().createElement(Mf,aj({},L,{type:q?"deselect":"select",disabled:!o,"has-explanation":!0,short:(0,yf.isShortButtonSelectAll)({selectedCount:D,sidebarColumn:H+(A?25:0)},{filter:i,sortingType:n},{is2Pane:y}),text:D})),e().createElement(Mf,aj({},L,{type:"all-read",hidden:bj(I||r||!(0,Zi.isAllreadButtonVisible)(i,{folder:j}),!0,w),shortText:(0,yf.isShortTextAllRead)(f)})),y&&e().createElement(Of,aj({},{attrs:d,globalEnv:L,globals:f,selectedLettersInfo:g,displayMode:J}))),e().createElement(Mf,aj({},L,{type:"filters",short:!0,hidden:I||A,folder:j})))},ListLetterTags:hi,MarusiaReadLetterButton:ve,MetathreadsSettingsContainer:xj,MiniAppUnknownError:Bj,NoadsButton:Nb,NotificationBadge:Fe,OctopusLogo:Cj,OversizeAttachCancelPopup:Ej,PriorityWidget:Oj,PromtAboutAdWrapper:Uj,PromtTooltip:Zj,ReceiptWidget:ck,RemindWidget:jk,ResendDropdown:mk,SidebarUnsubscribeButton:Uk,ScheduleWidget:vk,SearchMobilePanel:Iq,SearchAttachmentButton:Ra,SearchPanel:Jq.Z,SearchPanelInput:mq.Z,SearchSidebar:Wq,SettingsDock:Vr,SuggestsForm:fl,Swipeable:qi,TagsPicker:le,Thread:ms,UnsubscribeDropdown:ql,VKUIOverlay:em,VkMessengerProvider:rl,WebviewMobileFooter:om,WidgetColumn:function(){var a,b=(0,Rf.C)({name:"WidgetColumn",mediators:["layout-manager","todo-manager"]}),c=b[0],f=c.showWidgetColumn,g=c.widgetType,h=c.widgetIsOpen,i=b[1],j=Em({broadcast:i,widgetType:g,widgetIsOpen:h}),k=j.widget,l=j.setWidget,m=j.open,n=j.setOpen;(0,d.useLayoutEffect)(function(){return function(){i((0,Hi.BU)(rm.WIDGET_COLUMN_UNMOUNT))}},[i]);var o=p.WIDGET_COLUMN?f:m;return e().createElement(tm.M.Provider,{value:Jm},e().createElement("div",{className:ca()(xm.border,(a={},a[xm.open]=m,a[xm.close]=!m,a[xm.hidden]=!o,a))},p.WIDGET_COLUMN&&e().createElement(Im,{open:m,onClick:function(){(0,sm._i)("arrow",sm.GE[k]),n(!0);var a=qm().get("octavius-productivity-widget-reminder");if(!(null==a?void 0:a.state))null==a||a.save({state:!0,time:!0})}}),e().createElement(Fm.y,{open:m,widget:k,setOpen:n,setWidget:l,showList:p.WIDGET_COLUMN})))},getFullMomentFormat:function(a){return ok()(a).calendar(null,rk)},AttachViolatedFileNamePopup:function(a){var b=(0,d.useState)(!0),g=b[0],h=b[1],i=a.violatedAttaches,j=function(){a.onClose(),h(!1)},k=a.uploadedAttachmentsCount>0?i18n("Остальные файлы загружены в хранилище."):null,l=i18n("Файлы {strongOpen}{violatedAttaches}{strongClose} не могут быть загружены в хранилище в соответствии с правилами безопасности. Обратитесь к администратору.",{violatedAttaches:i,"unsafe-strongOpen":"<strong>","unsafe-strongClose":"</strong>"});if(k)l="".concat(l," ").concat(k);return e().createElement(c.Popup,{show:g,onHide:j,testId:"attach-violated-file-name-popup"},e().createElement(c.Panel,{popup:!0,onClose:j,header:f.title,size:"small",content:e().createElement(e().Fragment,null,e().createElement(c.Text,null,e().createElement("span",{dangerouslySetInnerHTML:{__html:l}}))),controls:e().createElement(c.Button,{text:f.close,onClick:j,testId:"close-button"})}))}}}(),xc}()});